import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{calculate as r}from"./util-BRmE13e6.js";const i={path:`/user/:id`,categories:[`game`],example:`/xiaoheihe/user/30664023`,parameters:{id:`用户 ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户动态`,maintainers:[`tssujt`],handler:a};async function a(i){let a=i.req.param(`id`),o=await n({method:`get`,url:`https://api.xiaoheihe.cn/bbs/app/profile/user/profile?lang=zh-cn&version=1.3.303&userid=${a}`}),s=o.data.result.account_detail.username,c=await n({method:`get`,url:`https://api.xiaoheihe.cn/bbs/app/profile/events?lang=zh-cn&version=1.3.303&userid=${a}&list_type=moment`}),l=c.data.result.moments.filter(e=>e.linkid!==void 0),u=l.map(e=>({linkId:e.linkid,link:`https://api.xiaoheihe.cn/v3/bbs/app/api/web/share?link_id=${e.linkid}`,title:e.title,pubDate:t(e.modify_at*1e3),description:e.description}));return u=await Promise.all(u.map(t=>e.tryGet(t.link,async()=>{let e=r(`https://api.xiaoheihe.cn/bbs/app/api/share/data/?os_type=web&app=heybox&client_type=mobile&version=999.0.3&x_client_type=web&x_os_type=Mac&x_app=heybox&heybox_id=-1&offset=0&limit=3&link_id=${t.linkId}&use_concept_type=`),i=await n({method:`get`,url:e});return t.description=i.data.link.content[0].text,delete t.linkId,t}))),{title:`${s} 的动态`,link:`https://xiaoheihe.cn`,item:u}}export{i as route};
//# sourceMappingURL=user-b2djChW_.js.map