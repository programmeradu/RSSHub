{"version":3,"file":"category-C99raL3g.js","names":["ofetch","cache","response","$","validItems: DataItem[]","route: Route","route"],"sources":["../../lib/routes/finology/utils.ts","../../lib/routes/finology/category.ts"],"sourcesContent":["import cache from '@/utils/cache';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { DataItem } from '@/types';\r\n\r\nconst getItems = async (url: string, extra: { date: boolean; selector: string }) => {\r\n    const mainUrl = 'https://insider.finology.in';\r\n    const response = await ofetch(url);\r\n    const $ = load(response);\r\n    const listItems = $(extra.selector)\r\n        .toArray()\r\n        .map((item) => {\r\n            const $item = $(item);\r\n            const title = $item.find('p.text-m-height').text();\r\n            const link = $item.find('a').attr('href');\r\n            const pubDate = extra.date ? timezone(parseDate($item.find('div.text-light p').first().text()), 0) : '';\r\n            const itunes_item_image = $item.find('img').attr('src');\r\n            const category = [$item.find('p.pt025').text()];\r\n            return {\r\n                title,\r\n                link: `${mainUrl}${link}`,\r\n                pubDate,\r\n                itunes_item_image,\r\n                category,\r\n            } as DataItem;\r\n        });\r\n\r\n    const items = (\r\n        await Promise.allSettled(\r\n            listItems.map((item) => {\r\n                if (item.link === undefined) {\r\n                    return item;\r\n                }\r\n                return cache.tryGet(item.link, async () => {\r\n                    const response = await ofetch(item.link || '');\r\n                    const $ = load(response);\r\n                    const div = $('div.w60.flex.flex-wrap-badge');\r\n                    item.author = div.find('div a p').text();\r\n                    item.updated = extra.date ? parseDate(div.find('p:contains(\"Updated on\") span').text()) : '';\r\n                    item.description =\r\n                        $('div#main-wrapper div#insiderhead')\r\n                            .find('div.flex.flex-col.w100.align-center')\r\n                            .children('div.m-position-r')\r\n                            .remove()\r\n                            .end()\r\n                            .find('a[href=\"https://quest.finology.in/\"]')\r\n                            .remove()\r\n                            .end()\r\n                            .find('div.blur-wall-wrap')\r\n                            .remove()\r\n                            .end()\r\n                            .html() ?? '';\r\n                    return item;\r\n                });\r\n            })\r\n        )\r\n    ).map((v, index) => (v.status === 'fulfilled' ? v.value : { ...listItems[index], description: `Website did not load within Timeout Limits. <a href=\"${listItems[index].link}\">Check with Website if the page is slow</a>` }));\r\n    const topicName = $('h1.font-heading.fs1875')?.text();\r\n    const validItems: DataItem[] = items.filter((item): item is DataItem => item !== null && typeof item !== 'string');\r\n    return { items: validItems, topicName };\r\n};\r\n\r\nexport { getItems };\r\n","import { Data, Route } from '@/types';\r\nimport { getItems } from './utils';\r\nimport type { Context } from 'hono';\r\n\r\nexport const route: Route = {\r\n    path: '/category/:category',\r\n    categories: ['finance'],\r\n    url: 'insider.finology.in/business',\r\n    example: '/finology/success-stories',\r\n    parameters: { category: 'Refer Table below or find in URL' },\r\n    radar: [\r\n        {\r\n            source: ['insider.finology.in/:category'],\r\n        },\r\n    ],\r\n    name: 'Category',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n    description: `::: info Category\r\n| Category              | Link               |\r\n| --------------------- | ------------------ |\r\n| **Business**          | business           |\r\n| Big Shots             | entrepreneurship   |\r\n| Startups              | startups-india     |\r\n| Brand Games           | success-stories    |\r\n| Juicy Scams           | juicy-scams        |\r\n| **Finance**           | finance            |\r\n| Macro Moves           | economy            |\r\n| News Platter          | market-news        |\r\n| Tax Club              | tax                |\r\n| Your Money            | your-money         |\r\n| **Invest**            | investing          |\r\n| Stock Market          | stock-market       |\r\n| Financial Ratios      | stock-ratios       |\r\n| Investor's Psychology | behavioral-finance |\r\n| Mutual Funds          | mutual-fund        |\r\n:::`,\r\n};\r\n\r\nasync function handler(ctx: Context) {\r\n    const { category } = ctx.req.param();\r\n    const extra = {\r\n        description: (topic: string) => `Articles for your research and knowledge under ${topic}`,\r\n        date: true,\r\n        selector: `div.card`,\r\n    };\r\n    return await commonHandler('https://insider.finology.in', `/${category}`, extra);\r\n}\r\n\r\nexport async function commonHandler(baseUrl: string, route: string, extra: any): Promise<Data> {\r\n    const { items, topicName } = await getItems(`${baseUrl}${route}`, extra);\r\n    return {\r\n        title: `${topicName} - Finology Insider`,\r\n        link: `${baseUrl}${route}`,\r\n        item: items,\r\n        description: extra.description(topicName || ''),\r\n        logo: 'https://insider.finology.in/Images/favicon/favicon.ico',\r\n        icon: 'https://insider.finology.in/Images/favicon/favicon.ico',\r\n        language: 'en-us',\r\n    };\r\n}\r\n"],"mappings":"gPAOA,MAAM,EAAW,MAAO,EAAa,IAA+C,CAChF,IACM,EAAW,MAAMA,EAAO,GACxB,EAAI,EAAK,GACT,EAAY,EAAE,EAAM,UACrB,UACA,IAAK,GAAS,CACX,IAAM,EAAQ,EAAE,GACV,EAAQ,EAAM,KAAK,mBAAmB,OACtC,EAAO,EAAM,KAAK,KAAK,KAAK,QAC5B,EAAU,EAAM,KAAO,EAAS,EAAU,EAAM,KAAK,oBAAoB,QAAQ,QAAS,GAAK,GAC/F,EAAoB,EAAM,KAAK,OAAO,KAAK,OAC3C,EAAW,CAAC,EAAM,KAAK,WAAW,QACxC,MAAO,CACH,QACA,KAAM,8BAAa,IACnB,UACA,oBACA,cAIN,GACF,MAAM,QAAQ,WACV,EAAU,IAAK,GACP,EAAK,OAAS,IAAA,GACP,EAEJC,EAAM,OAAO,EAAK,KAAM,SAAY,CACvC,IAAMC,EAAW,MAAMF,EAAO,EAAK,MAAQ,IACrCG,EAAI,EAAKD,GACT,EAAMC,EAAE,gCAgBd,MAfA,GAAK,OAAS,EAAI,KAAK,WAAW,OAClC,EAAK,QAAU,EAAM,KAAO,EAAU,EAAI,KAAK,iCAAiC,QAAU,GAC1F,EAAK,YACDA,EAAE,oCACG,KAAK,uCACL,SAAS,oBACT,SACA,MACA,KAAK,wCACL,SACA,MACA,KAAK,sBACL,SACA,MACA,QAAU,GACZ,OAIrB,KAAK,EAAG,IAAW,EAAE,SAAW,YAAc,EAAE,MAAQ,CAAE,GAAG,EAAU,GAAQ,YAAa,wDAAwD,EAAU,GAAO,KAAK,gDACtK,EAAY,EAAE,2BAA2B,OACzCC,EAAyB,EAAM,OAAQ,GAA2B,IAAS,MAAQ,OAAO,GAAS,UACzG,MAAO,CAAE,MAAO,EAAY,cCzDnBC,EAAe,CACxB,KAAM,sBACN,WAAY,CAAC,WACb,IAAK,+BACL,QAAS,4BACT,WAAY,CAAE,SAAU,oCACxB,MAAO,CACH,CACI,OAAQ,CAAC,mCAGjB,KAAM,WACN,YAAa,CAAC,gBACd,UACA,YAAa;;;;;;;;;;;;;;;;;;MAqBjB,eAAe,EAAQ,EAAc,CACjC,GAAM,CAAE,YAAa,EAAI,IAAI,QACvB,EAAQ,CACV,YAAc,GAAkB,kDAAkD,IAClF,KAAM,GACN,SAAU,YAEd,OAAO,MAAM,EAAc,8BAA+B,IAAI,IAAY,GAG9E,eAAsB,EAAc,EAAiB,EAAe,EAA2B,CAC3F,GAAM,CAAE,QAAO,aAAc,MAAM,EAAS,GAAG,IAAUC,IAAS,GAClE,MAAO,CACH,MAAO,GAAG,EAAU,qBACpB,KAAM,GAAG,IAAUA,IACnB,KAAM,EACN,YAAa,EAAM,YAAY,GAAa,IAC5C,KAAM,yDACN,KAAM,yDACN,SAAU"}