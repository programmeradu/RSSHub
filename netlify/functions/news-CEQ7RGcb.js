import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{rss_parser_default as o}from"./rss-parser-1vyhErsD.js";import s from"node:path";import{load as c}from"cheerio";t();const l=t=>{let n=t(`figure.mainPhoto`),i=n.find(`img`),a=n.find(`span.copyright`),o=n.find(`span.imageDescription`);return r(s.join(e,`templates/image-6a025f27.art`),{url:i.attr(`src`),alt:i.attr(`alt`)?.trim(),author:a.text()?.trim(),caption:o.text()?.trim()})},u=t=>{let n=t(`[itemprop="articleBody"]`);return t(`*`).contents().filter(function(){return this.nodeType===8}).remove(),n.find(`aside`).remove(),n.find(`.videoPlayerContainer`).remove(),n.find(`.pulsevideo`).remove(),n.find(`.adsContainer`).remove(),n.find(`.placeholder`).remove(),n.find(`.contentPremium`).removeAttr(`style`),n.find(`div.image`).each((n,i)=>{let a=t(i).find(`img`),o=t(i).find(`span.author`),c=t(i).find(`span.caption`),l=r(s.join(e,`templates/image-6a025f27.art`),{url:a.attr(`src`),alt:a.attr(`alt`)?.trim(),caption:c.text()?.trim(),author:o.text()?.trim()});t(i).replaceWith(l)}),n};t();const d={path:`/news`,categories:[`new-media`],example:`/onet/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiadomosci.onet.pl/`]}],name:`News`,maintainers:[`Vegann`],handler:f,url:`wiadomosci.onet.pl/`,description:"This route provides a better reading experience (full text articles) over the official one for `https://wiadomosci.onet.pl`."};async function f(){let t=await o.parseURL(`https://wiadomosci.onet.pl/.feed`),d=await Promise.all(t.items.map(async t=>{let{description:o,author:d,category:f}=await n.tryGet(t.link,async()=>{let{data:n}=await a(t.link,{headers:{referer:`https://www.onet.pl/`}}),i=c(n),o=u(i),d=l(i),f=r(s.join(e,`templates/article-fe77a185.art`),{mainImage:d,lead:i(`#lead`).text()?.trim(),content:o.html()?.trim()}),p=i(`.authorNameWrapper span[itemprop="name"]`).text()?.trim(),m=i(`span.relatedTopic`).text()?.trim();return{description:f,author:p,category:m}});return{title:t.title,link:t.link,description:o,author:d,category:f,pubDate:i(t.pubDate),guid:t.id}}));return{title:t.title,link:t.link,description:t.title,item:d,language:`pl`,image:`https://ocdn.eu/wiadomosciucs/static/logo2017/onet2017big_dark.png`}}export{d as route};
//# sourceMappingURL=news-CEQ7RGcb.js.map