import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import i from"node:path";import{load as a}from"cheerio";t();const o={today:`left`,newest:`right`},s={path:`/featured/:category?`,categories:[`other`],example:`/tvtropes/featured/today`,parameters:{category:`Category, see below, Today's Featured Trope by default`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Featured`,maintainers:[`nczitzk`],handler:c,description:`| Today's Featured Trope | Newest Trope |
| ---------------------- | ------------ |
| today                  | newest       |`};async function c(t){let{category:s=`today`}=t.req.param(),c=`https://tvtropes.org`,{data:l}=await r(c),u=a(l),d=u(`div#featured-tropes div.${o[s]}`),f=new URL(d.find(`h2.entry-title a`).prop(`href`),c).href,{data:p}=await r(f),m=a(p);m(`div.folderlabel`).remove(),m(`div.lazy_load_img_box`).each((t,r)=>{r=m(r);let a=r.find(`img`);r.replaceWith(n(i.join(e,`templates/description-39fa6c9b.art`),{images:[{src:a.prop(`src`),alt:a.prop(`alt`),width:a.prop(`width`),height:a.prop(`height`)}]}))});let h=[{title:d.find(`h2.entry-title`).text(),link:f,description:m(`div#main-article`).html()}],g=new URL(u(`img.logo-big`).prop(`src`),c).href,_=u(`link[rel="shortcut icon"]`).prop(`href`);return{item:h,title:`${u(`title`).text()} - ${d.find(`span.box-title`).text()}`,link:c,description:u(`meta[name="description"]`).prop(`content`),language:u(`html`).prop(`lang`),image:g,icon:_,logo:_,subtitle:u(`meta[property="og:title"]`).prop(`content`),author:u(`meta[property="og:site_name"]`).prop(`content`),allowEmpty:!0}}export{s as route};
//# sourceMappingURL=featured-CaVxhiPu.js.map