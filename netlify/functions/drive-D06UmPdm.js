import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{ofetch_default as i}from"./ofetch-Bzt0BXUH.js";import{invalid_parameter_default as a}from"./invalid-parameter-CUJdROXf.js";import o from"node:path";t();const s={path:`/drive/:selName`,categories:[`program-update`],example:`/lenovo/drive/PF3WRD2G`,parameters:{selName:`产品序列号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lenovo.com.cn`],target:`/drive/:selName`}],name:`驱动`,maintainers:[`cscnk52`],handler:c};async function c(t){let s=t.req.param(`selName`),c=`https://newsupport.lenovo.com.cn/api/drive/drive_listnew?searchKey=${s}`,l=await i(c);if(l.statusCode!==200)throw new a(`无效序列号, 请检查你的序列号是否正确.`);let u=l.data.partList.flatMap(e=>e.drivelist),d=u.map(t=>({title:`${t.DriverName} ${t.Version}`,link:`https://newsupport.lenovo.com.cn/driveDownloads_detail.html?driveId=${t.DriverEdtionId}`,description:n(o.join(e,`templates/drive-5ac56225.art`),{driveName:t.DriverName,driveCode:t.DriverCode,driveVersion:t.Version,downloadFileName:t.FileName,downloadFilePath:t.FilePath}),pubDate:r(t.CreateTime,8)}));return{title:`${l.data.driverSerious[0].NodeCode} 驱动`,item:d,language:`zh-CN`}}export{c as handler,s as route};
//# sourceMappingURL=drive-D06UmPdm.js.map