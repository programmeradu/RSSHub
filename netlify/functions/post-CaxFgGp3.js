import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{invalid_parameter_default as o}from"./invalid-parameter-CUJdROXf.js";import s from"node:path";t();const c=`https://api.myfans.jp`,l=`https://myfans.jp`,u={"google-ga-data":`event328`},d=e=>n.tryGet(`myfans:account:${e}`,async()=>{let t=await a(`${c}/api/v2/users/show_by_username`,{headers:u,query:{username:e}});if(!t.id)throw new o(`This creator does not exist.`);return t}),f=async e=>{let t=await a(`${c}/api/v2/users/${e}/posts`,{headers:u,query:{sort_key:`publish_start_at`,page:1}});return t.data},p={path:`/user/:username`,categories:[`multimedia`],example:`/myfans/user/secret_japan`,parameters:{username:`User handle`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`myfans.jp/:username`,`myfans.jp/:language/:username`]}],name:`User Posts`,maintainers:[`TonyRL`],handler:h},m=(t,n)=>r(s.join(e,`templates/post-2ffcb47e.art`),{postImages:t,body:n});async function h(e){let{username:t}=e.req.param(),n=await d(t),r=await f(n.id),a=r.map(e=>({title:e.body?.replaceAll(`\r
`,` `).trim().split(` `)[0],description:m(e.post_images,e.body?.replaceAll(`\r
`,`<br>`)),pubDate:i(e.published_at),link:`${l}/posts/${e.id}`,author:e.user.name}));return{title:`${n.name} (@${n.username})`,link:`${l}/${n.username}`,description:`${n.posts_count} Post ${n.likes_count} Like ${n.followers_count}
Followers ${n.followings_count} Follow ${n.about.replaceAll(`\r
`,` `)}`,image:n.avatar_url,icon:n.avatar_url,logo:n.avatar_url,language:`ja-JP`,item:a}}export{p as route};
//# sourceMappingURL=post-CaxFgGp3.js.map