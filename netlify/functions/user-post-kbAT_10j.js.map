{"version":3,"file":"user-post-kbAT_10j.js","names":["route: Route","got"],"sources":["../../lib/routes/mihoyo/bbs/user-post.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { post2item } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/bbs/user-post/:uid',\r\n    categories: ['game'],\r\n    example: '/mihoyo/bbs/user-post/77005350',\r\n    parameters: { uid: '用户uid' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '米游社 - 用户帖子',\r\n    maintainers: ['CaoMeiYouRen'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const uid = ctx.req.param('uid');\r\n    const size = ctx.req.query('limit') || '20';\r\n    const searchParams = {\r\n        uid,\r\n        size,\r\n    };\r\n    const link = `https://www.miyoushe.com/ys/accountCenter/postList?id=${uid}`;\r\n    const url = `https://bbs-api.miyoushe.com/post/wapi/userPost`;\r\n    const response = await got({\r\n        method: 'get',\r\n        url,\r\n        searchParams,\r\n    });\r\n    const list = response?.data?.data?.list;\r\n    if (!list) {\r\n        throw new Error('未获取到数据！');\r\n    }\r\n    const username = list[0]?.user.nickname;\r\n    const title = `米游社 - ${username} 的发帖`;\r\n    const items = list.map((e) => post2item(e));\r\n\r\n    const data = {\r\n        title,\r\n        link,\r\n        item: items,\r\n    };\r\n    return data;\r\n}\r\n"],"mappings":"8UAIA,MAAaA,EAAe,CACxB,KAAM,sBACN,WAAY,CAAC,QACb,QAAS,iCACT,WAAY,CAAE,IAAK,SACnB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,aACN,YAAa,CAAC,gBACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAM,EAAI,IAAI,MAAM,OACpB,EAAO,EAAI,IAAI,MAAM,UAAY,KACjC,EAAe,CACjB,MACA,QAEE,EAAO,yDAAyD,IAEhE,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,sDACA,iBAEE,EAAO,GAAU,MAAM,MAAM,KACnC,GAAI,CAAC,EACD,MAAU,MAAM,WAEpB,IAAM,EAAW,EAAK,IAAI,KAAK,SACzB,EAAQ,SAAS,EAAS,MAC1B,EAAQ,EAAK,IAAK,GAAM,EAAU,IAElC,EAAO,CACT,QACA,OACA,KAAM,GAEV,OAAO"}