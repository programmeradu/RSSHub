import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{load as n}from"cheerio";import r from"node:querystring";function i(r,i,a){let o=r(`div.item-list ul li`).toArray().map(e=>{let t=r(e),n=t.find(`a`).first(),i=n.attr(`title`),o=a?`${n.attr(`href`)}&adult_view=1`:n.attr(`href`),s=[t.find(`p.item-state`).text()],c=t.find(`div.item-image img`).attr(`data-src`);return{title:i,link:o,category:s,image:c,banner:c}});return Promise.all(o.map(r=>e.tryGet(`${i}${r.link}`,async()=>{let e=await t(`${i}${r.link}`),a=n(e),o=a.html(`div.item-page`);return{...r,description:o}})))}const a=async e=>{let a=`https://www.melonbooks.co.jp`,o=e.req.param(`query`)??``,s=`${a}/search/search.php?${o}`,c=r.parse(o).adult_view===`1`,l=await t(s),u=n(l),d=await i(u,a,c);return{title:`搜索结果`,link:s,item:d}},o={path:`/search/:query?`,categories:[`anime`],example:`/melonbooks/search/name=けいおん`,parameters:{category:`链接参数，对应网址问号后的内容，不携带问号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},name:`搜索结果`,maintainers:[`cokemine`],description:`::: tip
如果你期望获取限制级内容，可以添加\`&adult_view=1\`参数
:::`,handler:a};export{a as handler,o as route};
//# sourceMappingURL=search-8kwBYTWX.js.map