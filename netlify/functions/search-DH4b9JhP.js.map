{"version":3,"file":"search-DH4b9JhP.js","names":["route: Route"],"sources":["../../lib/routes/showstart/search.ts"],"sourcesContent":["import { Data, Route } from '@/types';\r\nimport { TITLE, HOST } from './const';\r\nimport { fetchActivityList, fetchPerformerList, fetchSiteList, fetchBrandList, fetchCityList, fetchStyleList } from './service';\r\nimport type { Context } from 'hono';\r\n\r\nexport const route: Route = {\r\n    path: '/search/:type/:keyword?',\r\n    categories: ['shopping'],\r\n    example: '/showstart/search/live',\r\n    parameters: {\r\n        keyword: '搜索关键词',\r\n        type: {\r\n            description: '类别',\r\n            options: [\r\n                {\r\n                    value: 'event',\r\n                    label: '演出',\r\n                },\r\n                {\r\n                    value: 'artist',\r\n                    label: '音乐人',\r\n                },\r\n                {\r\n                    value: 'site',\r\n                    label: '场地',\r\n                },\r\n                {\r\n                    value: 'brand',\r\n                    label: '厂牌',\r\n                },\r\n                {\r\n                    value: 'city',\r\n                    label: '城市',\r\n                },\r\n                {\r\n                    value: 'style',\r\n                    label: '风格',\r\n                },\r\n            ],\r\n        },\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '演出搜索',\r\n    maintainers: ['lchtao26'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx: Context): Promise<Data> {\r\n    const type = ctx.req.param('type') || '';\r\n    const keyword = ctx.req.param('keyword') || '';\r\n\r\n    switch (type) {\r\n        case 'event':\r\n            return {\r\n                title: `${TITLE} - 搜演出 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchActivityList({ keyword }),\r\n            };\r\n        case 'artist':\r\n            return {\r\n                title: `${TITLE} - 搜艺人 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchPerformerList({ searchKeyword: keyword }),\r\n            };\r\n        case 'site':\r\n            return {\r\n                title: `${TITLE} - 搜场地 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchSiteList({ searchKeyword: keyword }),\r\n            };\r\n        case 'brand':\r\n            return {\r\n                title: `${TITLE} - 搜厂牌 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchBrandList({ searchKeyword: keyword }),\r\n            };\r\n        case 'city':\r\n            return {\r\n                title: `${TITLE} - 搜城市 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchCityList(keyword),\r\n            };\r\n        case 'style':\r\n            return {\r\n                title: `${TITLE} - 搜风格 - ${keyword || '全部'}`,\r\n                link: HOST,\r\n                item: await fetchStyleList(keyword),\r\n            };\r\n        default:\r\n            return {\r\n                title: `${TITLE} - 搜演出 - ${type || '全部'}`,\r\n                link: HOST,\r\n                allowEmpty: true,\r\n                item: await fetchActivityList({ keyword: type }),\r\n            };\r\n    }\r\n}\r\n"],"mappings":"iWAKA,MAAaA,EAAe,CACxB,KAAM,0BACN,WAAY,CAAC,YACb,QAAS,yBACT,WAAY,CACR,QAAS,QACT,KAAM,CACF,YAAa,KACb,QAAS,CACL,CACI,MAAO,QACP,MAAO,MAEX,CACI,MAAO,SACP,MAAO,OAEX,CACI,MAAO,OACP,MAAO,MAEX,CACI,MAAO,QACP,MAAO,MAEX,CACI,MAAO,OACP,MAAO,MAEX,CACI,MAAO,QACP,MAAO,SAKvB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,YACd,WAGJ,eAAe,EAAQ,EAA6B,CAChD,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,GAChC,EAAU,EAAI,IAAI,MAAM,YAAc,GAE5C,OAAQ,EAAR,CACI,IAAK,QACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAkB,CAAE,aAExC,IAAK,SACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAmB,CAAE,cAAe,KAExD,IAAK,OACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAc,CAAE,cAAe,KAEnD,IAAK,QACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAe,CAAE,cAAe,KAEpD,IAAK,OACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAc,IAElC,IAAK,QACD,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAW,OACtC,KAAM,EACN,KAAM,MAAM,EAAe,IAEnC,QACI,MAAO,CACH,MAAO,GAAG,EAAM,WAAW,GAAQ,OACnC,KAAM,EACN,WAAY,GACZ,KAAM,MAAM,EAAkB,CAAE,QAAS"}