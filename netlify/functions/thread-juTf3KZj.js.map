{"version":3,"file":"thread-juTf3KZj.js","names":["route: Route","cache"],"sources":["../../lib/routes/1point3acres/thread.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { rootUrl, apiRootUrl, types, ProcessThreads } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/thread/:type?/:order?',\r\n    example: '/1point3acres/thread/hot',\r\n    parameters: { type: '帖子分类, 见下表，默认为 hot，即热门帖子', order: '排序方式，见下表，默认为空，即最新回复' },\r\n    name: '帖子',\r\n    categories: ['bbs'],\r\n    maintainers: ['EthanWng97', 'DIYgod', 'nczitzk'],\r\n    handler,\r\n    url: 'instant.1point3acres.com/',\r\n    description: `分类\r\n\r\n| 热门帖子 | 最新帖子 |\r\n| -------- | -------- |\r\n| hot      | new      |\r\n\r\n  排序方式\r\n\r\n| 最新回复 | 最新发布 |\r\n| -------- | -------- |\r\n|          | post     |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type') ?? 'hot';\r\n    const order = ctx.req.param('order') ?? '';\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit')) : 10;\r\n\r\n    const apiUrl = `${apiRootUrl}/api/threads?type=${type}&includes=tags,forum_name,summary&ps=${limit}&pg=1&order=${order === '' ? '' : 'time_desc'}&is_groupid=1`;\r\n\r\n    return {\r\n        title: `一亩三分地 - ${types[type]}`,\r\n        link: rootUrl,\r\n        item: await ProcessThreads(cache.tryGet, apiUrl, order),\r\n    };\r\n}\r\n"],"mappings":"yZAIA,MAAaA,EAAe,CACxB,KAAM,yBACN,QAAS,2BACT,WAAY,CAAE,KAAM,0BAA2B,MAAO,uBACtD,KAAM,KACN,WAAY,CAAC,OACb,YAAa,CAAC,aAAc,SAAU,WACtC,UACA,IAAK,4BACL,YAAa;;;;;;;;;;0BAajB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,MAChC,EAAQ,EAAI,IAAI,MAAM,UAAY,GAClC,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,GAE3E,EAAS,GAAG,EAAW,oBAAoB,EAAK,uCAAuC,EAAM,cAAc,IAAU,GAAK,GAAK,YAAY,eAEjJ,MAAO,CACH,MAAO,WAAW,EAAM,KACxB,KAAM,EACN,KAAM,MAAM,EAAeC,EAAM,OAAQ,EAAQ"}