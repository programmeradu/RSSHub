{"version":3,"file":"auth-DyA-T6Py.js","names":["cache","ofetch"],"sources":["../../lib/routes/zhihu/xhu/auth.ts"],"sourcesContent":["import cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport default {\r\n    getCookie: () => {\r\n        const key = 'zhihu-xhu-cookie';\r\n        return cache.tryGet(key, async () => {\r\n            // Get udid\r\n            const udidResponse = await ofetch.raw('https://api.zhihuvvv.workers.dev/appcloud/v1/device', {\r\n                method: 'get',\r\n                headers: {\r\n                    Referer: 'https://api.zhihuvvv.workers.dev',\r\n                },\r\n            });\r\n            const udidCookieArray = udidResponse.headers.getSetCookie();\r\n            const udidCookie = udidCookieArray.join('; ');\r\n\r\n            // Get access token\r\n            const accessTokenResponse = await ofetch.raw('https://api.zhihuvvv.workers.dev/guests/token', {\r\n                method: 'get',\r\n                headers: {\r\n                    Referer: 'https://api.zhihuvvv.workers.dev',\r\n                    Cookie: udidCookie,\r\n                },\r\n            });\r\n            const accessTokenCookieArray = [...accessTokenResponse.headers.getSetCookie(), ...udidCookieArray];\r\n            const accessTokenCookie = accessTokenCookieArray.join('; ');\r\n            return accessTokenCookie;\r\n        });\r\n    },\r\n};\r\n"],"mappings":"0GAGA,IAAA,EAAe,CACX,cAEWA,EAAM,OAAO,mBAAK,SAAY,CAEjC,IAAM,EAAe,MAAMC,EAAO,IAAI,sDAAuD,CACzF,OAAQ,MACR,QAAS,CACL,QAAS,sCAGX,EAAkB,EAAa,QAAQ,eACvC,EAAa,EAAgB,KAAK,MAGlC,EAAsB,MAAMA,EAAO,IAAI,gDAAiD,CAC1F,OAAQ,MACR,QAAS,CACL,QAAS,mCACT,OAAQ,KAGV,EAAyB,CAAC,GAAG,EAAoB,QAAQ,eAAgB,GAAG,GAC5E,EAAoB,EAAuB,KAAK,MACtD,OAAO"}