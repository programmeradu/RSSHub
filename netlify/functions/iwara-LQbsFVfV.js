import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";const i=`https://www.iwara.tv`,a=`https://api.iwara.tv`,o=`https://i.iwara.tv`,s={video:`Videos`,image:`Images`},c={video:`${a}/videos`,image:`${a}/images`},l=(e,t)=>{if(e===`image`)return`<img src="${o}/image/original/${t.thumbnail.id}/${t.thumbnail.name}">`;if(t.embedUrl===null)return`<img src="${o}/image/original/${t.file.id}/thumbnail-${String(t.thumbnail).padStart(2,`0`)}.jpg">`;let n=/https?:\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w-]*)(&(amp;)?[\w=?]*)?/.exec(t.embedUrl);return n?`<img src="${o}/image/embed/original/youtube/${n[1]}">`:``},u={path:`/users/:username?/:type?`,name:`Unknown`,maintainers:[`Fatpandac`],handler:d};async function d(o){let u=o.req.param(`username`),d=await t.tryGet(`${a}/profile/${u}`,async()=>(await r(`${a}/profile/${u}`)).data.user.id),f=o.req.param(`type`)??`video`,p=(await t.tryGet(`${c[f]}?user=${d}`,async()=>(await r(`${c[f]}?user=${d}`)).data.results,e.cache.routeExpire,!1)).map(e=>({title:e.title,author:u,link:`${i}/${f}/${e.id}/${e.slug}`,category:e.tags.map(e=>e.id),description:l(f,e),pubDate:n(e.createdAt)}));return{title:`${u}'s iwara - ${s[f]}`,link:`${i}/users/${u}`,item:p}}export{u as route};
//# sourceMappingURL=iwara-LQbsFVfV.js.map