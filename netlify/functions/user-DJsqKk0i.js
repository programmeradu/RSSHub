import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import"./got-CdvI2yKX.js";import{ViewType as r}from"./types-A5bA50Mg.js";import{config_not_found_default as i}from"./config-not-found-BVqhRP9D.js";import{getToken as a,maskHeader as o,pixiv_got_default as s,utils_default as c}from"./utils-VPsgV-F2.js";import l from"query-string";function u(e,t){return s(`https://app-api.pixiv.net/v1/user/illusts`,{headers:{...o,Authorization:`Bearer `+t},searchParams:l.stringify({user_id:e,filter:`for_ios`})})}const d={path:`/user/:id`,categories:[`social-media`],view:r.Pictures,example:`/pixiv/user/15288095`,parameters:{id:`user id, available in user's homepage URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.pixiv.net/users/:id`,`www.pixiv.net/en/users/:id`]}],name:`User Activity`,maintainers:[`DIYgod`],handler:f};async function f(r){if(!e.pixiv||!e.pixiv.refreshToken)throw new i(`pixiv RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let o=r.req.param(`id`),s=await a(t.tryGet);if(!s)throw new i(`pixiv not login`);let l=await u(o,s),d=l.data.illusts,f=d[0].user.name;return{title:`${f} 的 pixiv 动态`,link:`https://www.pixiv.net/users/${o}`,image:c.getProxiedImageUrl(d[0].user.profile_image_urls.medium),description:`${f} 的 pixiv 最新动态`,item:d.map(e=>{let t=c.getImgs(e);return{title:e.title,author:f,pubDate:n(e.create_date),description:`${e.caption}<br><p>画师：${f} - 阅览数：${e.total_view} - 收藏数：${e.total_bookmarks}</p>${t.join(``)}`,link:`https://www.pixiv.net/artworks/${e.id}`,category:e.tags.map(e=>e.name)}})}}export{d as route};
//# sourceMappingURL=user-DJsqKk0i.js.map