import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{art as n}from"./render-CxhTJIsl.js";import{ofetch_default as r}from"./ofetch-Bzt0BXUH.js";import{ViewType as i}from"./types-A5bA50Mg.js";import a from"node:path";import*as o from"cheerio";t();const s=t=>n(a.join(e,`templates/chart-bb570edf.art`),t),c={path:`/chart/:chart?`,categories:[`multimedia`],view:i.Notifications,parameters:{chart:{description:"The chart to display, `top` by default",options:[{value:`top`,label:`Top 250 Movies`},{value:`moviemeter`,label:`Most Popular Movies`},{value:`toptv`,label:`Top 250 TV Shows`},{value:`tvmeter`,label:`Most Popular TV Shows`}],default:`top`}},example:`/imdb/chart`,radar:[{source:[`www.imdb.com/chart/:chart/`]}],name:`Charts`,maintainers:[`TonyRL`],handler:l,url:`www.imdb.com/chart/top/`,description:`| Top 250 Movies | Most Popular Movies | Top 250 TV Shows | Most Popular TV Shows |
| -------------- | ------------------- | ---------------- | --------------------- |
| top            | moviemeter          | toptv            | tvmeter               |`};async function l(e){let{chart:t=`top`}=e.req.param(),n=`https://www.imdb.com`,i=`${n}/chart/${t}/`,a=await r(i),c=o.load(a),l=JSON.parse(c(`script#__NEXT_DATA__`).text()),u=l.props.pageProps.pageData.chartTitles,d=u.edges.map(({currentRank:e,node:t})=>({title:`${e}. ${t.titleText.text} (${t.releaseYear.year}${t.releaseYear.endYear?`-${t.releaseYear.endYear}`:``})`,description:s({primaryImage:t.primaryImage,originalTitleText:t.originalTitleText,certificate:t.certificate,ratingsSummary:t.ratingsSummary,plot:t.plot}),link:`${n}/title/${t.id}`,category:t.titleGenres.genres.map(e=>u.genres.find(t=>t.filterId===e.genre.text)?.text)}));return{title:c(`head title`).text(),description:c(`head meta[name="description"]`).attr(`content`),link:i,item:d}}export{c as route};
//# sourceMappingURL=chart-8BxXeOLZ.js.map