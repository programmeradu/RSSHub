import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import{cache_default as r}from"./cache-kimkMTWJ.js";import{art as i}from"./render-CxhTJIsl.js";import{parseDate as a}from"./parse-date-Bgabdhlb.js";import{getSubPath as o}from"./common-utils-CvkwbCD5.js";import{ofetch_default as s}from"./ofetch-Bzt0BXUH.js";import c from"node:path";import{load as l}from"cheerio";t();async function u(e){let t=await s(e);return t.results}async function d(t){let d=`https://www.nber.org/api/v1/working_page_listing/contentType/working_paper/_/_/search`,f=await r.tryGet(d,()=>u(d),n.cache.routeExpire,!1),p=await Promise.all(f.filter(e=>o(t)===`/papers`||e.newthisweek).map(t=>{let n=`https://www.nber.org${t.url}`;return r.tryGet(n,async()=>{let r=await s(n),o=l(r),u=o(`meta[name="citation_pdf_url"]`).attr(`content`),d=o(`.page-header__intro-inner`).html();return{title:t.title,author:o(`meta[name="dcterms.creator"]`).attr(`content`),pubDate:a(o(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM/DD`),link:n,doi:o(`meta[name="citation_doi"]`).attr(`content`),description:i(c.join(e,`templates/description-5d49bc12.art`),{fullAbstract:d,downloadLink:u})}})}));return{title:`NBER Working Paper`,link:`https://www.nber.org/papers`,item:p,description:`National Bureau of Economic Research Working Papers articles`}}export{d as handler};
//# sourceMappingURL=common-DB3fK00k.js.map