{"version":3,"file":"featured-SlKuoci_.js","names":["route: Route","got","utils"],"sources":["../../lib/routes/thepaper/featured.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport utils from './utils';\r\nimport { load } from 'cheerio';\r\nimport got from '@/utils/got';\r\n\r\nexport const route: Route = {\r\n    path: '/featured',\r\n    categories: ['new-media'],\r\n    example: '/thepaper/featured',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['thepaper.cn/'],\r\n        },\r\n    ],\r\n    name: '首页头条',\r\n    maintainers: ['HenryQW', 'nczitzk', 'bigfei'],\r\n    handler,\r\n    url: 'thepaper.cn/',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const response = await got('https://m.thepaper.cn');\r\n    const data = JSON.parse(load(response.data)('#__NEXT_DATA__').html());\r\n    const list = [...data.props.pageProps.data.list, ...data.props.pageProps.topData.recommendImg];\r\n\r\n    const items = await Promise.all(list.map((item) => utils.ProcessItem(item, ctx)));\r\n    return {\r\n        title: '澎湃新闻 - 首页头条',\r\n        link: 'https://m.thepaper.cn',\r\n        item: items,\r\n        itunes_author: '澎湃新闻',\r\n        image: utils.ExtractLogo(response),\r\n    };\r\n}\r\n"],"mappings":"6YAKA,MAAaA,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,aACb,QAAS,qBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,kBAGjB,KAAM,OACN,YAAa,CAAC,UAAW,UAAW,UACpC,UACA,IAAK,gBAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,MAAMC,EAAI,yBACrB,EAAO,KAAK,MAAM,EAAK,EAAS,MAAM,kBAAkB,QACxD,EAAO,CAAC,GAAG,EAAK,MAAM,UAAU,KAAK,KAAM,GAAG,EAAK,MAAM,UAAU,QAAQ,cAE3E,EAAQ,MAAM,QAAQ,IAAI,EAAK,IAAK,GAASC,EAAM,YAAY,EAAM,KAC3E,MAAO,CACH,MAAO,cACP,KAAM,wBACN,KAAM,EACN,cAAe,OACf,MAAOA,EAAM,YAAY"}