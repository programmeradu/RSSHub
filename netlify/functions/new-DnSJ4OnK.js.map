{"version":3,"file":"new-DnSJ4OnK.js","names":[],"sources":["../../lib/routes/ikea/gb/new.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/gb/new',\r\n    categories: ['shopping'],\r\n    example: '/ikea/gb/new',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['ikea.com/gb/en/new/new-products/', 'ikea.com/'],\r\n        },\r\n    ],\r\n    name: 'UK - New Product Release',\r\n    maintainers: ['HenryQW'],\r\n    handler,\r\n    url: 'ikea.com/gb/en/new/new-products/',\r\n};\r\n\r\nasync function handler() {\r\n    const link = 'https://www.ikea.com/gb/en/new/new-products/';\r\n\r\n    const {\r\n        data: { specialPage },\r\n    } = await got('https://sik.search.blue.cdtapps.com/gb/en/special', {\r\n        searchParams: {\r\n            special: 'new_product',\r\n            // size: 24,\r\n            // 'subcategories-style': 'tree-navigation',\r\n            // c: 'lf',\r\n            // v: 20220826,\r\n            // sort: 'RELEVANCE',\r\n        },\r\n    });\r\n\r\n    const {\r\n        data: {\r\n            moreProducts: { productWindow },\r\n        },\r\n    } = await got('https://sik.search.blue.cdtapps.com/gb/en/special/more-products', {\r\n        searchParams: {\r\n            special: 'new_product',\r\n            start: 24,\r\n            end: specialPage.productCount,\r\n            // 'subcategories-style': 'tree-navigation',\r\n            // c: 'lf',\r\n            // v: 20220826,\r\n            // sort: 'RELEVANCE',\r\n        },\r\n    });\r\n\r\n    const products = [...specialPage.productWindow, ...productWindow];\r\n\r\n    const items = products.map((p) => ({\r\n        title: `${p.name} ${p.typeName}, ${p.itemMeasureReferenceText}`,\r\n        description: art(path.join(__dirname, '../templates/new.art'), {\r\n            p,\r\n        }),\r\n        link: p.pipUrl,\r\n        category: p.categoryPath.map((c) => c.name),\r\n    }));\r\n\r\n    return {\r\n        title: 'New Products - Browse All New Furniture & Home Decor  - IKEA',\r\n        link,\r\n        description: 'New products released by IKEA UK.',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gVAMA,MAAa,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,YACb,QAAS,eACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,mCAAoC,eAGrD,KAAM,2BACN,YAAa,CAAC,WACd,UACA,IAAK,oCAGT,eAAe,GAAU,CACrB,GAEM,CACF,KAAM,CAAE,gBACR,MAAM,EAAI,oDAAqD,CAC/D,aAAc,CACV,QAAS,iBASX,CACF,KAAM,CACF,aAAc,CAAE,mBAEpB,MAAM,EAAI,kEAAmE,CAC7E,aAAc,CACV,QAAS,cACT,MAAO,GACP,IAAK,EAAY,gBAQnB,EAAW,CAAC,GAAG,EAAY,cAAe,GAAG,GAE7C,EAAQ,EAAS,IAAK,IAAO,CAC/B,MAAO,GAAG,EAAE,KAAK,GAAG,EAAE,SAAS,IAAI,EAAE,2BACrC,YAAa,EAAI,EAAA,KAAA,EAAA,8BAA8C,CAC3D,MAEJ,KAAM,EAAE,OACR,SAAU,EAAE,aAAa,IAAK,GAAM,EAAE,SAG1C,MAAO,CACH,MAAO,+DACP,oDACA,YAAa,oCACb,KAAM"}