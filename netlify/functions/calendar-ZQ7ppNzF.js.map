{"version":3,"file":"calendar-ZQ7ppNzF.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/hrbeu/job/calendar.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\n\r\nconst rootUrl = 'http://job.hrbeu.edu.cn';\r\n\r\nexport const route: Route = {\r\n    path: '/job/calendar',\r\n    categories: ['university'],\r\n    example: '/hrbeu/job/calendar',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['job.hrbeu.edu.cn/*'],\r\n        },\r\n    ],\r\n    name: '就业服务平台',\r\n    maintainers: ['Derekmini'],\r\n    handler,\r\n    url: 'job.hrbeu.edu.cn/*',\r\n    description: `| 通知公告 | 热点新闻 |\r\n| :------: | :------: |\r\n|   tzgg   |   rdxw   |\r\n\r\n#### 大型招聘会 {#ha-er-bin-gong-cheng-da-xue-jiu-ye-fu-wu-ping-tai-da-xing-zhao-pin-hui}\r\n\r\n\r\n#### 今日招聘会 {#ha-er-bin-gong-cheng-da-xue-jiu-ye-fu-wu-ping-tai-jin-ri-zhao-pin-hui}`,\r\n};\r\n\r\nasync function handler() {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1;\r\n    let strmMonth;\r\n    month < 10 ? (strmMonth = '0' + month) : (strmMonth = month);\r\n    const day = date.getDate();\r\n\r\n    const response = await ofetch('http://job.hrbeu.edu.cn/HrbeuJY/Web/Employ/QueryCalendar', {\r\n        query: {\r\n            yearMonth: year + '-' + strmMonth,\r\n        },\r\n    });\r\n\r\n    let link = '';\r\n    for (let i = 0, l = response.length; i < l; i++) {\r\n        // if (response[i].day === Number('10')) {\r\n        if (response[i].day === Number(day)) {\r\n            link = response[i].Items[0].link;\r\n        }\r\n    }\r\n\r\n    const todayResponse = await ofetch(`${rootUrl}${link}`, {\r\n        parseResponse: (txt) => txt,\r\n    });\r\n\r\n    const $ = load(todayResponse);\r\n\r\n    const list = $('li.clearfix')\r\n        .toArray()\r\n        .map((item) => ({\r\n            title: $(item).find('span.news_tit.news_tit_s').find('a').attr('title'),\r\n            description: '点击标题，登录查看招聘详情',\r\n            link: $(item).find('span.news_tit.news_tit_s').find('a').attr('href'),\r\n        }));\r\n\r\n    return {\r\n        title: '今日招聘会',\r\n        link: 'http://job.hrbeu.edu.cn/HrbeuJY/web',\r\n        item: list,\r\n        allowEmpty: true,\r\n    };\r\n}\r\n"],"mappings":"0MAIA,MAEaA,EAAe,CACxB,KAAM,gBACN,WAAY,CAAC,cACb,QAAS,sBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,wBAGjB,KAAM,SACN,YAAa,CAAC,aACd,UACA,IAAK,qBACL,YAAa;;;;;;;sFAUjB,eAAe,GAAU,CACrB,IAAM,EAAO,IAAI,KACX,EAAO,EAAK,cACZ,EAAQ,EAAK,WAAa,EAC5B,EACJ,AAA0C,EAA1C,EAAQ,GAAkB,IAAM,EAAsB,EACtD,IAAM,EAAM,EAAK,UAEX,EAAW,MAAMC,EAAO,2DAA4D,CACtF,MAAO,CACH,UAAW,EAAO,IAAM,KAI5B,EAAO,GACX,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,OAAQ,EAAI,EAAG,IAEpC,EAAS,GAAG,MAAQ,OAAO,KAC3B,EAAO,EAAS,GAAG,MAAM,GAAG,MAIpC,IAAM,EAAgB,MAAMA,EAAO,0BAAa,IAAQ,CACpD,cAAgB,GAAQ,IAGtB,EAAI,EAAK,GAET,EAAO,EAAE,eACV,UACA,IAAK,IAAU,CACZ,MAAO,EAAE,GAAM,KAAK,4BAA4B,KAAK,KAAK,KAAK,SAC/D,YAAa,gBACb,KAAM,EAAE,GAAM,KAAK,4BAA4B,KAAK,KAAK,KAAK,WAGtE,MAAO,CACH,MAAO,QACP,KAAM,sCACN,KAAM,EACN,WAAY"}