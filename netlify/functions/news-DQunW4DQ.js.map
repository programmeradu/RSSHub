{"version":3,"file":"news-DQunW4DQ.js","names":["route: Route","parser","cache"],"sources":["../../lib/routes/coindesk/news.ts"],"sourcesContent":["import { Route, Data, DataItem } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport parser from '@/utils/rss-parser';\r\nimport { parseItem } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/news',\r\n    categories: ['finance'],\r\n    example: '/coindesk/news',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'News',\r\n    maintainers: ['pseudoyu'],\r\n    handler,\r\n    radar: [\r\n        {\r\n            source: ['coindesk.com/'],\r\n            target: '/news',\r\n        },\r\n    ],\r\n    description: 'Get latest news from CoinDesk with full text.',\r\n};\r\n\r\nasync function handler(): Promise<Data> {\r\n    const rssUrl = 'https://feeds.feedburner.com/Coindesk';\r\n    const feed = await parser.parseURL(rssUrl);\r\n\r\n    const items = await Promise.all(feed.items.map((item) => cache.tryGet(item.link, () => parseItem(item))));\r\n\r\n    // Filter out null items\r\n    const validItems = items.filter((item): item is DataItem => item !== null);\r\n\r\n    return {\r\n        title: feed.title || 'CoinDesk News',\r\n        link: feed.link || 'https://coindesk.com',\r\n        description: feed.description || 'Latest news from CoinDesk',\r\n        language: feed.language || 'en',\r\n        item: validItems,\r\n    };\r\n}\r\n"],"mappings":"qVAKA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,WACb,QAAS,iBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,YACd,UACA,MAAO,CACH,CACI,OAAQ,CAAC,iBACT,OAAQ,UAGhB,YAAa,iDAGjB,eAAe,GAAyB,CACpC,IACM,EAAO,MAAMC,EAAO,SAAS,yCAE7B,EAAQ,MAAM,QAAQ,IAAI,EAAK,MAAM,IAAK,GAASC,EAAM,OAAO,EAAK,SAAY,EAAU,MAG3F,EAAa,EAAM,OAAQ,GAA2B,IAAS,MAErE,MAAO,CACH,MAAO,EAAK,OAAS,gBACrB,KAAM,EAAK,MAAQ,uBACnB,YAAa,EAAK,aAAe,4BACjC,SAAU,EAAK,UAAY,KAC3B,KAAM"}