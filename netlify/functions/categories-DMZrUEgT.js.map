{"version":3,"file":"categories-DMZrUEgT.js","names":["viewType: ViewType","limit: number","targetUrl: string","apiUrl: string","route: Route","urlObj: URL","id: string","tab: string | undefined"],"sources":["../../lib/routes/gcores/categories.ts"],"sourcesContent":["import { type Data, type Route, ViewType } from '@/types';\r\n\r\nimport { type Context } from 'hono';\r\n\r\nimport { baseUrl, processItems } from './util';\r\n\r\nlet viewType: ViewType = ViewType.Articles;\r\n\r\nexport const handler = async (ctx: Context): Promise<Data> => {\r\n    const { id, tab } = ctx.req.param();\r\n    const limit: number = Number.parseInt(ctx.req.query('limit') ?? '30', 10);\r\n\r\n    const targetUrl: string = new URL(`categories/${id}${tab ? `?tab=${tab}` : ''}`, baseUrl).href;\r\n    const apiUrl: string = new URL(`gapi/v1/categories/${id}/${tab ?? 'originals'}`, baseUrl).href;\r\n\r\n    const query = {\r\n        'page[limit]': limit,\r\n        sort: '-published-at',\r\n        include: 'category,user,media',\r\n        'filter[list-all]': 1,\r\n        'filter[is-news]': tab === 'news' ? 1 : 0,\r\n    };\r\n\r\n    if (tab === 'radios') {\r\n        viewType = ViewType.Audios;\r\n    } else if (tab === 'videos') {\r\n        viewType = ViewType.Videos;\r\n    }\r\n\r\n    return await processItems(limit, query, apiUrl, targetUrl);\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/categories/:id/:tab?',\r\n    name: '分类',\r\n    url: 'www.gcores.com',\r\n    maintainers: ['MoguCloud', 'StevenRCE0', 'nczitzk'],\r\n    handler,\r\n    example: '/gcores/categories/1/articles',\r\n    parameters: {\r\n        id: {\r\n            description: '分类 ID，可在对应分类页 URL 中找到',\r\n        },\r\n        tab: {\r\n            description: '类型，默认为空，即全部，可在对应分类页 URL 中找到',\r\n            options: [\r\n                {\r\n                    label: '全部',\r\n                    value: '',\r\n                },\r\n                {\r\n                    label: '播客',\r\n                    value: 'radios',\r\n                },\r\n                {\r\n                    label: '文章',\r\n                    value: 'articles',\r\n                },\r\n                {\r\n                    label: '资讯',\r\n                    value: 'news',\r\n                },\r\n                {\r\n                    label: '视频',\r\n                    value: 'videos',\r\n                },\r\n            ],\r\n        },\r\n    },\r\n    description: `:::tip\r\n若订阅 [文章 - 文章](https://www.gcores.com/categories/1?tab=articles)，网址为 \\`https://www.gcores.com/categories/1?tab=articles\\`，请截取 \\`https://www.gcores.com/categories/\\` 到末尾的部分 \\`1\\` 作为 \\`id\\` 参数填入，截取 \\`articles\\` 作为 \\`tab\\` 参数填入，此时目标路由为 [\\`/gcores/categories/1/articles\\`](https://rsshub.app/gcores/categories/1/articles)。\r\n:::\r\n\r\n| 全部 | 播客   | 文章     | 资讯 | 视频   |\r\n| ---- | ------ | -------- | ---- | ------ |\r\n|      | radios | articles | news | videos |\r\n`,\r\n    categories: ['game'],\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportRadar: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: (params, url) => {\r\n                const urlObj: URL = new URL(url);\r\n                const id: string = params.id;\r\n                const tab: string | undefined = urlObj.searchParams.get('tab') ?? undefined;\r\n\r\n                return `/gcores/categories/${id}/${tab ? `/${tab}` : ''}`;\r\n            },\r\n        },\r\n        {\r\n            title: '全部',\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: '/gcores/categories/:id',\r\n        },\r\n        {\r\n            title: '播客',\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: '/categories/:id/radios',\r\n        },\r\n        {\r\n            title: '文章',\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: '/categories/:id/articles',\r\n        },\r\n        {\r\n            title: '资讯',\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: '/categories/:id/news',\r\n        },\r\n        {\r\n            title: '视频',\r\n            source: ['www.gcores.com/categories/:id'],\r\n            target: '/categories/:id/videos',\r\n        },\r\n    ],\r\n    view: viewType,\r\n};\r\n"],"mappings":"8TAMA,IAAIA,EAAqB,EAAS,SAElC,MAAa,EAAU,KAAO,IAAgC,CAC1D,GAAM,CAAE,KAAI,OAAQ,EAAI,IAAI,QACtBC,EAAgB,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,KAAM,IAEhEC,EAAoB,IAAI,IAAI,cAAc,IAAK,EAAM,QAAQ,IAAQ,KAAM,GAAS,KACpFC,EAAiB,IAAI,IAAI,sBAAsB,EAAG,GAAG,GAAO,cAAe,GAAS,KAEpF,EAAQ,CACV,cAAe,EACf,KAAM,gBACN,QAAS,sBACT,mBAAoB,EACpB,kBAAmB,IAAQ,OAAS,EAAI,GAS5C,OANI,IAAQ,SACR,EAAW,EAAS,OACb,IAAQ,WACf,EAAW,EAAS,QAGjB,MAAM,EAAa,EAAO,EAAO,EAAQ,IAGvCC,EAAe,CACxB,KAAM,wBACN,KAAM,KACN,IAAK,iBACL,YAAa,CAAC,YAAa,aAAc,WACzC,UACA,QAAS,gCACT,WAAY,CACR,GAAI,CACA,YAAa,yBAEjB,IAAK,CACD,YAAa,8BACb,QAAS,CACL,CACI,MAAO,KACP,MAAO,IAEX,CACI,MAAO,KACP,MAAO,UAEX,CACI,MAAO,KACP,MAAO,YAEX,CACI,MAAO,KACP,MAAO,QAEX,CACI,MAAO,KACP,MAAO,aAKvB,YAAa,mcAQb,WAAY,CAAC,QACb,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,aAAc,GACd,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,iCACT,QAAS,EAAQ,IAAQ,CACrB,IAAMC,EAAc,IAAI,IAAI,GACtBC,EAAa,EAAO,GACpBC,EAA0B,EAAO,aAAa,IAAI,QAAU,IAAA,GAElE,MAAO,sBAAsB,EAAG,GAAG,EAAM,IAAI,IAAQ,OAG7D,CACI,MAAO,KACP,OAAQ,CAAC,iCACT,OAAQ,0BAEZ,CACI,MAAO,KACP,OAAQ,CAAC,iCACT,OAAQ,0BAEZ,CACI,MAAO,KACP,OAAQ,CAAC,iCACT,OAAQ,4BAEZ,CACI,MAAO,KACP,OAAQ,CAAC,iCACT,OAAQ,wBAEZ,CACI,MAAO,KACP,OAAQ,CAAC,iCACT,OAAQ,2BAGhB,KAAM"}