import"./config-Dl8a1sIg.js";import{logger_default as e}from"./logger-CWOoofbD.js";import"./proxy-D7ccvALx.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{timezone as n}from"./timezone-BrNu6iXe.js";import{puppeteer_default as r}from"./puppeteer-f0D6AISB.js";import{load as i}from"cheerio";const a=`www.colamanga.com`,o={path:`/:id`,parameters:{id:`漫画id`},name:`Manga`,maintainers:[`machsix`],example:`/colamanga/manga-qq978758`,categories:[`anime`],radar:[{source:[`${a}/:id/`],target:`/:id`}],features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},handler:c};function s(e,t){let n=new Date(e);return n.setDate(n.getDate()+t),n}async function c(o){let c=o.req.param(`id`),l=`https://${a}/${c}`,u=await r(),d=await u.newPage();await d.setRequestInterception(!0),d.on(`request`,e=>{e.resourceType()===`document`?e.continue():e.abort()}),e.http(`Requesting ${l}`),await d.goto(l,{waitUntil:`domcontentloaded`});let f=await d.content();await u.close();let p=i(f),m=p(`meta[property='og:comic:book_name']`).attr(`content`),h=p(`meta[property='og:comic:update_time']`).attr(`content`),g=n(h?t(h):new Date),_=p(`span:contains('作者')`).parent().contents().eq(1).text(),v=p(`.all_data_list >ul>li>a`).toArray().map((e,t)=>({title:`${m} ${p(e).text()}`,link:e.attribs.href,description:p(`.fed-part-esan`).text(),author:_,pubDate:s(g,-7*t)}));return{title:m||`Unknown Manga`,link:l,item:v}}export{o as route};
//# sourceMappingURL=manga-C7EtGE6T.js.map