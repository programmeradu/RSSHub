{"version":3,"file":"got-CdvI2yKX.js","names":["ofetch"],"sources":["../../lib/utils/got.ts"],"sourcesContent":["import { destr } from 'destr';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { getSearchParamsString } from './helpers';\r\n\r\nconst getFakeGot = (defaultOptions?: any) => {\r\n    const fakeGot = (request, options?: any) => {\r\n        if (!(typeof request === 'string' || request instanceof Request) && request.url) {\r\n            options = {\r\n                ...request,\r\n                ...options,\r\n            };\r\n            request = request.url;\r\n        }\r\n        if (options?.hooks?.beforeRequest) {\r\n            for (const hook of options.hooks.beforeRequest) {\r\n                hook(options);\r\n            }\r\n            delete options.hooks;\r\n        }\r\n\r\n        options = {\r\n            ...defaultOptions,\r\n            ...options,\r\n        };\r\n\r\n        if (options?.json && !options.body) {\r\n            options.body = options.json;\r\n            delete options.json;\r\n        }\r\n        if (options?.form && !options.body) {\r\n            options.body = new URLSearchParams(options.form as Record<string, string>).toString();\r\n            if (!options.headers) {\r\n                options.headers = {};\r\n            }\r\n            options.headers['content-type'] = 'application/x-www-form-urlencoded';\r\n            delete options.form;\r\n        }\r\n        if (options?.searchParams) {\r\n            request += '?' + getSearchParamsString(options.searchParams);\r\n            delete options.searchParams;\r\n        }\r\n\r\n        // Add support for buffer responseType, to be compatible with got\r\n        options.parseResponse = (responseText) => ({\r\n            data: destr(responseText),\r\n            body: responseText,\r\n        });\r\n\r\n        if (options?.responseType === 'buffer' || options?.responseType === 'arrayBuffer') {\r\n            options.responseType = 'arrayBuffer';\r\n            delete options.parseResponse;\r\n        }\r\n\r\n        if (options.cookieJar) {\r\n            const cookies = options.cookieJar.getCookiesSync(request);\r\n            if (cookies.length) {\r\n                if (!options.headers) {\r\n                    options.headers = {};\r\n                }\r\n                options.headers.cookie = cookies.join('; ');\r\n            }\r\n            delete options.cookieJar;\r\n        }\r\n\r\n        const response = ofetch(request, options);\r\n\r\n        if (options?.responseType === 'arrayBuffer') {\r\n            return response.then((responseData) => ({\r\n                data: Buffer.from(responseData),\r\n                body: Buffer.from(responseData),\r\n            }));\r\n        }\r\n        return response;\r\n    };\r\n\r\n    fakeGot.get = (request, options?) => fakeGot(request, { ...options, method: 'GET' });\r\n    fakeGot.post = (request, options?) => fakeGot(request, { ...options, method: 'POST' });\r\n    fakeGot.put = (request, options?) => fakeGot(request, { ...options, method: 'PUT' });\r\n    fakeGot.patch = (request, options?) => fakeGot(request, { ...options, method: 'PATCH' });\r\n    fakeGot.head = (request, options?) => fakeGot(request, { ...options, method: 'HEAD' });\r\n    fakeGot.delete = (request, options?) => fakeGot(request, { ...options, method: 'DELETE' });\r\n    fakeGot.extend = (options) => getFakeGot(options);\r\n\r\n    return fakeGot;\r\n};\r\n\r\nexport default getFakeGot();\r\n"],"mappings":"kJAIA,MAAM,EAAc,GAAyB,CACzC,IAAM,GAAW,EAAS,IAAkB,CAQxC,GAPI,EAAE,OAAO,GAAY,UAAY,aAAmB,UAAY,EAAQ,MACxE,EAAU,CACN,GAAG,EACH,GAAG,GAEP,EAAU,EAAQ,KAElB,GAAS,OAAO,cAAe,CAC/B,IAAK,IAAM,KAAQ,EAAQ,MAAM,cAC7B,EAAK,GAET,OAAO,EAAQ,MAoCnB,GAjCA,EAAU,CACN,GAAG,EACH,GAAG,GAGH,GAAS,MAAQ,CAAC,EAAQ,OAC1B,EAAQ,KAAO,EAAQ,KACvB,OAAO,EAAQ,MAEf,GAAS,MAAQ,CAAC,EAAQ,OAC1B,EAAQ,KAAO,IAAI,gBAAgB,EAAQ,MAAgC,WACtE,EAAQ,UACT,EAAQ,QAAU,IAEtB,EAAQ,QAAQ,gBAAkB,oCAClC,OAAO,EAAQ,MAEf,GAAS,eACT,GAAW,IAAM,EAAsB,EAAQ,cAC/C,OAAO,EAAQ,cAInB,EAAQ,cAAiB,IAAkB,CACvC,KAAM,EAAM,GACZ,KAAM,KAGN,GAAS,eAAiB,UAAY,GAAS,eAAiB,iBAChE,EAAQ,aAAe,cACvB,OAAO,EAAQ,eAGf,EAAQ,UAAW,CACnB,IAAM,EAAU,EAAQ,UAAU,eAAe,GAC7C,EAAQ,SACH,EAAQ,UACT,EAAQ,QAAU,IAEtB,EAAQ,QAAQ,OAAS,EAAQ,KAAK,OAE1C,OAAO,EAAQ,UAGnB,IAAM,EAAWA,EAAO,EAAS,GAQjC,OANI,GAAS,eAAiB,cACnB,EAAS,KAAM,IAAkB,CACpC,KAAM,OAAO,KAAK,GAClB,KAAM,OAAO,KAAK,MAGnB,GAWX,MARA,GAAQ,KAAO,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,QAC5E,EAAQ,MAAQ,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,SAC7E,EAAQ,KAAO,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,QAC5E,EAAQ,OAAS,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,UAC9E,EAAQ,MAAQ,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,SAC7E,EAAQ,QAAU,EAAS,IAAa,EAAQ,EAAS,CAAE,GAAG,EAAS,OAAQ,WAC/E,EAAQ,OAAU,GAAY,EAAW,GAElC,GAGX,IAAA,EAAe"}