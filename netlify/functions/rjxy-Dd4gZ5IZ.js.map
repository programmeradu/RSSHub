{"version":3,"file":"rjxy-Dd4gZ5IZ.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/jsu/rjxy.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\n// 导入必要的模组\r\nimport got from '@/utils/got'; // 自订的 got\r\nimport { load } from 'cheerio'; // 可以使用类似 jQuery 的 API HTML 解析器\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { getPageItemAndDate } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/rjxy',\r\n    categories: ['university'],\r\n    example: '/jsu/rjxy',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '计算机科学与工程学院 - 通知公告',\r\n    maintainers: ['wenjia03'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://rjxy.jsu.edu.cn/';\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url: 'https://rjxy.jsu.edu.cn/index/tzgg1.htm',\r\n    });\r\n\r\n    const $ = load(response.data);\r\n    const list = $('body > div.list-box > div > ul > li').toArray();\r\n    const out = await Promise.all(\r\n        list.map((item) => {\r\n            item = $(item);\r\n            const link = new URL(item.find('a').attr('href'), baseUrl).href;\r\n            return cache.tryGet(link, async () => {\r\n                const category = '通知公告';\r\n                const description = await getPageItemAndDate('#vsb_content', link, 'body > form > div > h1', 'body > form > div > div.label', (date) => date.split('  点击：')[0]);\r\n                const pubDate = parseDate(description.date, 'YYYY年MM月DD日 HH:mm');\r\n                return {\r\n                    title: description.title,\r\n                    link,\r\n                    pubDate,\r\n                    description: description.pageInfo,\r\n                    category,\r\n                };\r\n            });\r\n        })\r\n    );\r\n\r\n    return {\r\n        // 在此处输出您的 RSS\r\n        title: '吉首大学计算机科学与工程学院 - 通知公告',\r\n        link: 'https://rjxy.jsu.edu.cn/index/tzgg1.htm',\r\n        description: '吉首大学计算机科学与工程学院 - 通知公告',\r\n        item: out,\r\n    };\r\n}\r\n"],"mappings":"iaAQA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,cACb,QAAS,YACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,oBACN,YAAa,CAAC,YACd,WAGJ,eAAe,GAAU,CACrB,IAEM,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,4CAGH,EAAI,EAAK,EAAS,MAClB,EAAO,EAAE,uCAAuC,UAChD,EAAM,MAAM,QAAQ,IACtB,EAAK,IAAK,GAAS,CACf,EAAO,EAAE,GACT,IAAM,EAAO,IAAI,IAAI,EAAK,KAAK,KAAK,KAAK,QAAS,4BAAS,KAC3D,OAAOC,EAAM,OAAO,EAAM,SAAY,CAClC,IACM,EAAc,MAAM,EAAmB,eAAgB,EAAM,yBAA0B,gCAAkC,GAAS,EAAK,MAAM,SAAS,IACtJ,EAAU,EAAU,EAAY,KAAM,qBAC5C,MAAO,CACH,MAAO,EAAY,MACnB,OACA,UACA,YAAa,EAAY,SACzB,sBAMhB,MAAO,CAEH,MAAO,wBACP,KAAM,0CACN,YAAa,wBACb,KAAM"}