import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import o from"node:zlib";t();const s={labelHot:`热门`,labelImportant:`重要消息`,defaultType:`article`},c={article:`article`,event:`timeline`,news:`news`},l=`https://foresightnews.pro`,u=`https://api.foresightnews.pro`,d=new URL(`foresight.ico`,l).href,f=new URL(`vertical_logo.png`,`https://img.foresightnews.pro`).href,p=async(t,u,...d)=>{let f={size:u};for(let e of d)f={...f,...e};let p={column:``},{data:m}=await i(t,{searchParams:f}),h=JSON.parse(String(o.inflateSync(Buffer.from(m.data?.list??m.data,`base64`))));return h=(h?.list??h).slice(0,u).map(t=>{let i=t.source_type??(t.source_link?t.column?.title?`article`:`news`:t.event_type?`event`:s.defaultType);t=t.source_type?t[t.source_type]:t;let o=t.column?.title;p.column=p.column||o;let u=[o,t.event_type,t.is_hot?s.labelHot:void 0,t.is_important?t.important_tag?.name??s.labelImportant:``,t.label,...t.tags?.map(e=>e.name)??[]].filter((e,t,n)=>e&&n.indexOf(e)===t),d=new URL(`${c[i]}/detail/${t.id}`,l).href;return{title:t.title,link:d,description:n(a.join(e,`templates/description-817fe73c.art`),{image:t.img.split(`?`)[0],description:t.content??t.brief,source:t.source_link}),author:t.column?.title??t.author?.username??void 0,category:u,guid:`foresightnews-${i}#${t.id}`,pubDate:t.published_at?r(t.published_at*1e3):void 0,updated:t.last_update_at?r(t.last_update_at*1e3):void 0}}),{items:h,info:p}};export{u as apiRootUrl,d as icon,f as image,p as processItems,l as rootUrl};
//# sourceMappingURL=util-Dk2KokOv.js.map