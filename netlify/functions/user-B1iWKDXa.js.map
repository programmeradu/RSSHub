{"version":3,"file":"user-B1iWKDXa.js","names":["got","route: Route"],"sources":["../../lib/routes/curiouscat/user.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\n\r\nconst fetchAPIByUser = async (user) => {\r\n    const baseURL = 'https://curiouscat.me/api/v2/profile?username=';\r\n    const { data } = await got.get(baseURL + user);\r\n    return data;\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/user/:id',\r\n    radar: [\r\n        {\r\n            source: ['curiouscat.live/:id'],\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: ['lucasew'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n    const user = id;\r\n    const data = await fetchAPIByUser(user);\r\n    const items = data.posts.map((post) => {\r\n        const author = post.senderData.id ? post.senderData.username : 'Anonymous';\r\n        const title = `@${author}: ${post.comment}`;\r\n        const link = `https://curiouscat.live/${user}/post/${post.id}`;\r\n        const media = post.media ? `<img src=\"${post.media.img}\"></img>` : '';\r\n        const description = `${post.comment}<br><br>\r\n        ${post.reply}\r\n        ${media}\r\n        <br>\r\n        Likes: ${post.likes}`;\r\n        const pubDate = new Date(post.timestamp * 1000);\r\n        return {\r\n            author,\r\n            link,\r\n            title,\r\n            description,\r\n            pubDate,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `CuriousCat - ${user}`,\r\n        link: `https://curiouscat.live/${user}`,\r\n        description: `Questions answered by ${user} using CuriousCat`,\r\n        language: data.lang,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gOAGA,MAAM,EAAiB,KAAO,IAAS,CACnC,GACM,CAAE,QAAS,MAAMA,EAAI,IAAI,iDAAU,GACzC,OAAO,GAGEC,EAAe,CACxB,KAAM,YACN,MAAO,CACH,CACI,OAAQ,CAAC,yBAGjB,KAAM,UACN,YAAa,CAAC,WACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MACnB,EAAO,EACP,EAAO,MAAM,EAAe,GAC5B,EAAQ,EAAK,MAAM,IAAK,GAAS,CACnC,IAAM,EAAS,EAAK,WAAW,GAAK,EAAK,WAAW,SAAW,YACzD,EAAQ,IAAI,EAAO,IAAI,EAAK,UAC5B,EAAO,2BAA2B,EAAK,QAAQ,EAAK,KACpD,EAAQ,EAAK,MAAQ,aAAa,EAAK,MAAM,IAAI,UAAY,GAC7D,EAAc,GAAG,EAAK,QAAQ;UAClC,EAAK,MAAM;UACX,EAAM;;iBAEC,EAAK,QACR,EAAU,IAAI,KAAK,EAAK,UAAY,KAC1C,MAAO,CACH,SACA,OACA,QACA,cACA,aAIR,MAAO,CACH,MAAO,gBAAgB,IACvB,KAAM,2BAA2B,IACjC,YAAa,yBAAyB,EAAK,mBAC3C,SAAU,EAAK,KACf,KAAM"}