{"version":3,"file":"article-0hoTfRW7.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/indienova/article.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseList, parseItem } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/:type',\r\n    categories: ['game'],\r\n    example: '/indienova/article',\r\n    parameters: { type: '类型: `article` 文章，`development` 开发' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '文章',\r\n    maintainers: ['GensouSakuya', 'kt286'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type');\r\n    let link = 'https://indienova.com/indie-game-news/';\r\n    if (type === 'development') {\r\n        link = 'https://indienova.com/indie-game-development/';\r\n    }\r\n    const response = await got(link);\r\n\r\n    const $ = load(response.data);\r\n    const list = parseList($);\r\n\r\n    const items = await Promise.all(list.map((item) => cache.tryGet(item.link, () => parseItem(item))));\r\n\r\n    return {\r\n        title: $('head title').text(),\r\n        link,\r\n        description: '独立游戏资讯 | indienova 独立游戏',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"kbAMA,MAAaA,EAAe,CACxB,KAAM,SACN,WAAY,CAAC,QACb,QAAS,qBACT,WAAY,CAAE,KAAM,qCACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,eAAgB,SAC9B,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACvB,EAAO,yCACP,IAAS,gBACT,EAAO,iDAEX,IAAM,EAAW,MAAMC,EAAI,GAErB,EAAI,EAAK,EAAS,MAClB,EAAO,EAAU,GAEjB,EAAQ,MAAM,QAAQ,IAAI,EAAK,IAAK,GAASC,EAAM,OAAO,EAAK,SAAY,EAAU,MAE3F,MAAO,CACH,MAAO,EAAE,cAAc,OACvB,OACA,YAAa,0BACb,KAAM"}