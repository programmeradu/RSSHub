{"version":3,"file":"user-m9T-6A2Q.js","names":[],"sources":["../../lib/routes/behance/queries.ts","../../lib/routes/behance/user.ts"],"sourcesContent":["export const getProfileProjectsAndSelectionsQuery = `query GetProfileProjectsAndSections($username: String, $after: String) {\r\n    user(username: $username) {\r\n      hasPortfolio\r\n      profileSections {\r\n        ...profileSectionFields\r\n      }\r\n      profileProjects(first: 12, after: $after) {\r\n        pageInfo {\r\n          endCursor\r\n          hasNextPage\r\n        }\r\n        nodes {\r\n          __typename\r\n          adminFlags {\r\n            mature_lock\r\n            privacy_lock\r\n            dmca_lock\r\n            flagged_lock\r\n            privacy_violation_lock\r\n            trademark_lock\r\n            spam_lock\r\n            eu_ip_lock\r\n          }\r\n          canBeBoosted\r\n          colors {\r\n            r\r\n            g\r\n            b\r\n          }\r\n          covers {\r\n            size_202 {\r\n              url\r\n            }\r\n            size_404 {\r\n              url\r\n            }\r\n            size_808 {\r\n              url\r\n            }\r\n          }\r\n          features {\r\n            url\r\n            name\r\n            featuredOn\r\n            ribbon {\r\n              image\r\n              image2x\r\n              image3x\r\n            }\r\n          }\r\n          fields {\r\n            id\r\n            label\r\n            slug\r\n            url\r\n          }\r\n          hasMatureContent\r\n          id\r\n          isBoosted\r\n          isFeatured\r\n          isHiddenFromWorkTab\r\n          isMatureReviewSubmitted\r\n          isMonaReported\r\n          isOwner\r\n          isFounder\r\n          isPinnedToSubscriptionOverview\r\n          isPrivate\r\n          sourceFiles {\r\n            ...sourceFileWithCoverFields\r\n          }\r\n          matureAccess\r\n          modifiedOn\r\n          name\r\n          owners {\r\n            ...OwnerFields\r\n            images {\r\n              size_50 {\r\n                url\r\n              }\r\n            }\r\n          }\r\n          premium\r\n          publishedOn\r\n          privacyLevel\r\n          profileSectionId\r\n          stats {\r\n            appreciations {\r\n              all\r\n            }\r\n            views {\r\n              all\r\n            }\r\n            comments {\r\n              all\r\n            }\r\n          }\r\n          slug\r\n          url\r\n        }\r\n      }\r\n    }\r\n    viewer {\r\n      flags {\r\n        hasClickedOnAddProfileSectionButton\r\n        hasSeenProfilePortfolioUpsellModal\r\n        hasSeenCreatorProIntroModal\r\n        lastSeenMarketingPopupTimestamp\r\n        onboardedAsHirer\r\n      }\r\n    }\r\n  }\r\n  \r\n  fragment sourceFileWithCoverFields on SourceFile {\r\n    __typename\r\n    sourceFileId\r\n    projectId\r\n    userId\r\n    title\r\n    assetId\r\n    renditionUrl\r\n    mimeType\r\n    size\r\n    category\r\n    licenseType\r\n    unitAmount\r\n    currency\r\n    tier\r\n    hidden\r\n    extension\r\n    hasUserPurchased\r\n    description\r\n    cover {\r\n      coverUrl\r\n      coverX\r\n      coverY\r\n      coverScale\r\n    }\r\n  }\r\n  \r\n  fragment OwnerFields on User {\r\n    displayName\r\n    hasPremiumAccess\r\n    id\r\n    isFollowing\r\n    isProfileOwner\r\n    location\r\n    locationUrl\r\n    url\r\n    username\r\n    isMessageButtonVisible\r\n    availabilityInfo {\r\n      availabilityTimeline\r\n      isAvailableFullTime\r\n      isAvailableFreelance\r\n      hiringTimeline {\r\n        key\r\n        label\r\n      }\r\n    }\r\n    creatorPro {\r\n      isActive\r\n      initialSubscriptionDate\r\n    }\r\n  }\r\n  \r\n  fragment profileSectionFields on ProfileSection {\r\n    id\r\n    isDefault\r\n    name\r\n    order\r\n    projectCount\r\n    userId\r\n  }`;\r\n\r\nexport const getAppreciatedQuery = `query GetAppreciatedProjects($username: String, $after: String) {\r\n    user(username: $username) {\r\n      appreciatedProjects(first: 24, after: $after) {\r\n        nodes {\r\n          __typename\r\n          colors {\r\n            r\r\n            g\r\n            b\r\n          }\r\n          covers {\r\n            size_202 {\r\n              url\r\n            }\r\n            size_404 {\r\n              url\r\n            }\r\n            size_808 {\r\n              url\r\n            }\r\n          }\r\n          slug\r\n          id\r\n          name\r\n          url\r\n          owners {\r\n            ...OwnerFields\r\n            images {\r\n              size_50 {\r\n                url\r\n              }\r\n            }\r\n          }\r\n          stats {\r\n            appreciations {\r\n              all\r\n            }\r\n            views {\r\n              all\r\n            }\r\n          }\r\n        }\r\n        pageInfo {\r\n          endCursor\r\n          hasNextPage\r\n        }\r\n      }\r\n    }\r\n  }\r\n  fragment OwnerFields on User {\r\n    displayName\r\n    hasPremiumAccess\r\n    id\r\n    isFollowing\r\n    isProfileOwner\r\n    location\r\n    locationUrl\r\n    url\r\n    username\r\n    isMessageButtonVisible\r\n    availabilityInfo {\r\n      availabilityTimeline\r\n      isAvailableFullTime\r\n      isAvailableFreelance\r\n      hiringTimeline {\r\n        key\r\n        label\r\n      }\r\n    }\r\n    creatorPro {\r\n      isActive\r\n      initialSubscriptionDate\r\n    }\r\n  }`;\r\n\r\nexport const getProjectPageQuery = `query ProjectPage($projectId: ProjectId!, $projectPassword: String) {\r\n    viewer {\r\n      ...Project_Viewer\r\n    }\r\n    project(id: $projectId) {\r\n      id\r\n      slug\r\n      premium\r\n      isPrivate\r\n      isOwner\r\n      canvasWidth\r\n      embedTag\r\n      url\r\n      stylesInline\r\n      ...Project_Project\r\n      ...EmbedShareModal_Project\r\n      creator {\r\n        hasPremiumAccess\r\n      }\r\n      owners {\r\n        id\r\n        username\r\n        displayName\r\n      }\r\n      allModules(projectPassword: $projectPassword) {\r\n        __typename\r\n      }\r\n    }\r\n  }\r\n  fragment Avatar_UserImageSizes on UserImageSizes {\r\n    ...AvatarImage_UserImageSizes\r\n  }\r\n  fragment Avatar_User on User {\r\n    id\r\n    url\r\n    images {\r\n      ...Avatar_UserImageSizes\r\n    }\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    ...CreatorProBadge_User\r\n  }\r\n  fragment AvatarImage_UserImageSizes on UserImageSizes {\r\n    allAvailable {\r\n      url\r\n      width\r\n      type\r\n    }\r\n  }\r\n  fragment CreatorProBadge_User on User {\r\n    creatorPro {\r\n      initialSubscriptionDate\r\n    }\r\n  }\r\n  fragment EmbedShareModal_Project on Project {\r\n    ...EmbedShareProjectCover_Project\r\n  }\r\n  fragment Feature_ProjectFeature on ProjectFeature {\r\n    url\r\n    name\r\n    featuredOn\r\n    ribbon {\r\n      image\r\n      image2x\r\n    }\r\n  }\r\n  fragment HireOverlay_User on User {\r\n    id\r\n    firstName\r\n    isResponsiveToHiring\r\n    isMessageButtonVisible\r\n    ...Avatar_User\r\n    ...WideMessageButton_User\r\n    availabilityInfo {\r\n      hiringTimeline {\r\n        key\r\n      }\r\n    }\r\n  }\r\n  fragment ProjectInfoBox_User on User {\r\n    id\r\n    displayName\r\n    url\r\n    isFollowing\r\n    ...MultipleOwners_User\r\n  }\r\n  fragment ProjectInfoBox_Project on Project {\r\n    id\r\n    name\r\n    url\r\n    isOwner\r\n    covers {\r\n      allAvailable {\r\n        url\r\n        width\r\n        type\r\n      }\r\n    }\r\n    owners {\r\n      ...ProjectInfoBox_User\r\n    }\r\n  }\r\n  fragment SourceAssetsPane_SourceFile on SourceFile {\r\n    ...SourceFileRowsContainer_SourceFile\r\n  }\r\n  fragment SourceFileRowsContainer_SourceFile on SourceFile {\r\n    tier\r\n    hasUserPurchased\r\n    ...SourceFileRow_SourceFile\r\n  }\r\n  fragment UserInfo_User on User {\r\n    displayName\r\n    id\r\n    location\r\n    locationUrl\r\n    url\r\n    country\r\n    isProfileOwner\r\n    city\r\n    state\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    ...Avatar_User\r\n  }\r\n  fragment UsersTooltip_User on User {\r\n    displayName\r\n    id\r\n    isFollowing\r\n    isProfileOwner\r\n    availabilityInfo {\r\n      isAvailableFullTime\r\n      isAvailableFreelance\r\n    }\r\n    ...UserInfo_User\r\n  }\r\n  fragment DominantColor_Colors on Colors {\r\n    r\r\n    g\r\n    b\r\n  }\r\n  fragment Tools_Tool on Tool {\r\n    id\r\n    title\r\n    url\r\n    backgroundImage {\r\n      size_original {\r\n        url\r\n      }\r\n    }\r\n    backgroundColor\r\n    synonym {\r\n      tagId\r\n      name\r\n      title\r\n      downloadUrl\r\n      iconUrl\r\n    }\r\n  }\r\n  fragment HireMeForm_UserAvailabilityInfo on UserAvailabilityInfo {\r\n    isAvailableFreelance\r\n    isAvailableFullTime\r\n    budgetMin\r\n    currency\r\n    compensationMin\r\n    hiringTimeline {\r\n      key\r\n    }\r\n  }\r\n  fragment MessageDialogManager_User on User {\r\n    id\r\n    displayName\r\n    username\r\n    images {\r\n      ...AvatarImage_UserImageSizes\r\n    }\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    ...SendRegularMessagePane_User\r\n    ...ServicesPane_User\r\n  }\r\n  fragment SendRegularMessagePane_User on User {\r\n    displayName\r\n    availabilityInfo {\r\n      ...HireMeForm_UserAvailabilityInfo\r\n    }\r\n  }\r\n  fragment ServicesPane_User on User {\r\n    id\r\n    displayName\r\n    ...InquireServiceModal_User\r\n    ...ViewServiceInfoModal_User\r\n  }\r\n  fragment MessageManager_User on User {\r\n    id\r\n    isMessageButtonVisible\r\n    displayName\r\n    username\r\n    ...MessageDialogManager_User\r\n    availabilityInfo {\r\n      availabilityTimeline\r\n      isAvailableFullTime\r\n      isAvailableFreelance\r\n      hiringTimeline {\r\n        key\r\n      }\r\n    }\r\n  }\r\n  fragment WideMessageButton_User on User {\r\n    firstName\r\n    ...MessageManager_User\r\n  }\r\n  fragment AppreciationNotification_Viewer on Viewer {\r\n    url\r\n  }\r\n  fragment Avatar_Project_User on User {\r\n    id\r\n    ...Avatar_User\r\n  }\r\n  fragment ImageElement_ImageModule on ImageModule {\r\n    id\r\n    altText\r\n    height\r\n    width\r\n    fullBleed\r\n    imageSizes {\r\n      allAvailable(type: [JPG, WEBP]) {\r\n        url\r\n        width\r\n        height\r\n        type\r\n      }\r\n      size_max_158 {\r\n        url\r\n      }\r\n    }\r\n  }\r\n  fragment Module_ProjectModule on ProjectModule {\r\n    ...Embed_ProjectModule\r\n    ... on AudioModule {\r\n      id\r\n      caption\r\n      captionAlignment\r\n    }\r\n    ... on VideoModule {\r\n      id\r\n      caption\r\n      captionAlignment\r\n    }\r\n    ... on EmbedModule {\r\n      id\r\n      caption\r\n      captionAlignment\r\n    }\r\n    ... on ImageModule {\r\n      id\r\n      ...ThreeD_ImageModule\r\n      ...SingleImage_ImageModule\r\n      ...Image_ImageModule\r\n    }\r\n    ... on MediaCollectionModule {\r\n      id\r\n      caption: captionPlain\r\n      captionAlignment\r\n      components {\r\n        ...Actions_MediaCollectionComponent\r\n        filename\r\n        flexHeight\r\n        flexWidth\r\n        height\r\n        width\r\n        id\r\n        imageSizes {\r\n          allAvailable(type: [JPG, WEBP]) {\r\n            url\r\n            width\r\n            height\r\n            type\r\n          }\r\n        }\r\n      }\r\n      fullBleed\r\n    }\r\n    ... on TextModule {\r\n      id\r\n      text\r\n      alignment\r\n    }\r\n  }\r\n  fragment MultipleOwners_User on User {\r\n    ...UsersTooltip_User\r\n  }\r\n  fragment MultipleOwners_Project on Project {\r\n    id\r\n    name\r\n  }\r\n  fragment Project_Owners_User on User {\r\n    id\r\n    displayName\r\n    username\r\n    firstName\r\n    url\r\n    isFollowing\r\n    isMessageButtonVisible\r\n    isCreatorPro\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    ...UsersTooltip_User\r\n    ...MultipleOwners_User\r\n    ...Avatar_Project_User\r\n    ...Avatar_User\r\n    ...HireOverlay_User\r\n  }\r\n  fragment Project_Creator_User on User {\r\n    id\r\n    isProfileOwner\r\n    isFollowing\r\n    hasPremiumAccess\r\n    hasAllowEmbeds\r\n    url\r\n    ...PaneHeader_User\r\n  }\r\n  fragment Project_ProjectCoverImageSizes on ProjectCoverImageSizes {\r\n    allAvailable {\r\n      url\r\n      width\r\n      type\r\n    }\r\n  }\r\n  fragment Project_Tool on Tool {\r\n    ...Tools_Tool\r\n  }\r\n  fragment Project_SourceFile on SourceFile {\r\n    ...SourceFileRowsContainer_SourceFile\r\n    ...SourceFilesProjectOverlay_SourceFile\r\n    ...ProjectExtras_SourceFile\r\n  }\r\n  fragment Project_ProjectFeature on ProjectFeature {\r\n    ...Feature_ProjectFeature\r\n  }\r\n  fragment Project_Project on Project {\r\n    id\r\n    slug\r\n    name\r\n    url\r\n    description\r\n    tags {\r\n      id\r\n      title\r\n    }\r\n    privacyLevel\r\n    matureAccess\r\n    canvasWidth\r\n    isOwner\r\n    hasMatureContent\r\n    isPrivate\r\n    publishedOn\r\n    canBeAddedToMoodboard\r\n    isMonaReported\r\n    isAppreciated\r\n    projectCTA {\r\n      ctaType\r\n      link {\r\n        description\r\n        url\r\n        title\r\n      }\r\n      isDefaultCTA\r\n    }\r\n    ...MultipleOwners_Project\r\n    ...ProjectInfoBox_Project\r\n    ...ProjectLightbox_Project\r\n    ...ProjectExtras_Project\r\n    covers {\r\n      ...Project_ProjectCoverImageSizes\r\n    }\r\n    sourceFiles {\r\n      ...Project_SourceFile\r\n    }\r\n    creator {\r\n      ...Project_Creator_User\r\n    }\r\n    owners {\r\n      ...Project_Owners_User\r\n    }\r\n    tools {\r\n      ...Project_Tool\r\n    }\r\n    allModules(projectPassword: $projectPassword) {\r\n      ... on AudioModule {\r\n        id\r\n        fullBleed\r\n        caption\r\n      }\r\n      ... on EmbedModule {\r\n        id\r\n        caption\r\n      }\r\n      ... on ImageModule {\r\n        id\r\n        fullBleed\r\n        caption\r\n        imageSizes {\r\n          size_disp {\r\n            url\r\n          }\r\n          size_disp_still {\r\n            url\r\n          }\r\n        }\r\n        ...Actions_ImageModule\r\n      }\r\n      ... on MediaCollectionModule {\r\n        id\r\n        fullBleed\r\n        caption: captionPlain\r\n        components {\r\n          id\r\n          imageSizes {\r\n            size_disp {\r\n              url\r\n            }\r\n            size_disp_still {\r\n              url\r\n            }\r\n          }\r\n          ...Actions_MediaCollectionComponent\r\n        }\r\n      }\r\n      ... on TextModule {\r\n        id\r\n        fullBleed\r\n      }\r\n      ... on VideoModule {\r\n        id\r\n        fullBleed\r\n        caption\r\n      }\r\n      ...Module_ProjectModule\r\n    }\r\n    aeroData {\r\n      externalUrl\r\n    }\r\n    adminNotices {\r\n      title\r\n      body\r\n      isReviewable\r\n    }\r\n    license {\r\n      license\r\n    }\r\n    features {\r\n      ...Project_ProjectFeature\r\n    }\r\n    stats {\r\n      appreciations {\r\n        all\r\n      }\r\n      views {\r\n        all\r\n      }\r\n    }\r\n    styles {\r\n      spacing {\r\n        projectTopMargin\r\n      }\r\n    }\r\n    colors {\r\n      r\r\n      g\r\n      b\r\n    }\r\n  }\r\n  fragment Project_Viewer on Viewer {\r\n    stats {\r\n      appreciations\r\n    }\r\n    pulsePoints {\r\n      displayFollow\r\n      displayAppreciate\r\n    }\r\n    flags {\r\n      hasSeenCreatorProIntroModal\r\n      onboardedAsHirer\r\n    }\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    createdOn\r\n    ...AppreciationNotification_Viewer\r\n    ...ProjectExtras_Viewer\r\n  }\r\n  fragment ProjectComments_Viewer on Viewer {\r\n    ...ProjectCommentInput_Viewer\r\n    id\r\n  }\r\n  fragment ProjectCommentInput_Viewer on Viewer {\r\n    url\r\n    images {\r\n      size_50 {\r\n        url\r\n      }\r\n    }\r\n  }\r\n  fragment ProjectExtras_SourceFile on SourceFile {\r\n    ...ProjectInfo_SourceFile\r\n  }\r\n  fragment ProjectExtras_Project on Project {\r\n    isCommentingAllowed\r\n  }\r\n  fragment ProjectExtras_Viewer on Viewer {\r\n    ...ProjectInfo_Viewer\r\n  }\r\n  fragment ProjectInfo_SourceFile on SourceFile {\r\n    ...SourceAssetsPane_SourceFile\r\n  }\r\n  fragment ProjectInfo_Viewer on Viewer {\r\n    id\r\n    ...ProjectComments_Viewer\r\n  }\r\n  fragment ProjectLightbox_Project on Project {\r\n    id\r\n    slug\r\n    isOwner\r\n    ...ProjectInfoBox_Project\r\n  }\r\n  fragment SourceFilesProjectOverlay_SourceFile on SourceFile {\r\n    hasUserPurchased\r\n    ...SourceFileRow_SourceFile\r\n  }\r\n  fragment Video_VideoDisplay on VideoModule {\r\n    captionPlain\r\n    embed\r\n    height\r\n    id\r\n    width\r\n  }\r\n  fragment Actions_ImageModule on ImageModule {\r\n    id\r\n    hasCaiData\r\n    projectId\r\n    src\r\n    width\r\n    projectId\r\n    exifData {\r\n      lens {\r\n        ...Actions_exifDataValue\r\n      }\r\n      software {\r\n        ...Actions_exifDataValue\r\n      }\r\n      makeAndModel {\r\n        ...Actions_exifDataValue\r\n      }\r\n      focalLength {\r\n        ...Actions_exifDataValue\r\n      }\r\n      iso {\r\n        ...Actions_exifDataValue\r\n      }\r\n      location {\r\n        ...Actions_exifDataValue\r\n      }\r\n      flash {\r\n        ...Actions_exifDataValue\r\n      }\r\n      exposureMode {\r\n        ...Actions_exifDataValue\r\n      }\r\n      shutterSpeed {\r\n        ...Actions_exifDataValue\r\n      }\r\n      aperture {\r\n        ...Actions_exifDataValue\r\n      }\r\n    }\r\n  }\r\n  fragment Actions_exifDataValue on exifDataValue {\r\n    id\r\n    searchValue\r\n    label\r\n    value\r\n  }\r\n  fragment Actions_MediaCollectionComponent on MediaCollectionComponent {\r\n    id\r\n  }\r\n  fragment Audio_AudioModule on AudioModule {\r\n    captionPlain\r\n    embed\r\n    fullBleed\r\n    id\r\n  }\r\n  fragment Embed_ProjectModule on ProjectModule {\r\n    ... on EmbedModule {\r\n      ...ExternalEmbed_EmbedModule\r\n    }\r\n    ... on AudioModule {\r\n      isDoneProcessing\r\n      ...Audio_AudioModule\r\n    }\r\n    ... on VideoModule {\r\n      isDoneProcessing\r\n      ...Video_VideoModule\r\n    }\r\n  }\r\n  fragment ExternalEmbed_EmbedModule on EmbedModule {\r\n    captionPlain\r\n    fluidEmbed\r\n    embedModuleFullBleed: fullBleed\r\n    height\r\n    id\r\n    originalEmbed\r\n    originalHeight\r\n    originalWidth\r\n    width\r\n    widthUnit\r\n  }\r\n  fragment Image_ImageModule on ImageModule {\r\n    id\r\n    caption\r\n    captionAlignment\r\n    fullBleed\r\n    height\r\n    width\r\n    altText\r\n    ...Actions_ImageModule\r\n    ...ImageElement_ImageModule\r\n  }\r\n  fragment SingleImage_ImageModule on ImageModule {\r\n    id\r\n    caption\r\n    captionAlignment\r\n    fullBleed\r\n    height\r\n    width\r\n    ...Actions_ImageModule\r\n    ...ImageElement_ImageModule\r\n  }\r\n  fragment ThreeD_ImageModule on ImageModule {\r\n    id\r\n    altText\r\n    threeDData {\r\n      iframeUrl\r\n    }\r\n  }\r\n  fragment Video_VideoModule on VideoModule {\r\n    fullBleed\r\n    id\r\n    ...Video_VideoDisplay\r\n  }\r\n  fragment Avatar_EmbedFragment on User {\r\n    id\r\n    images {\r\n      allAvailable {\r\n        url\r\n        width\r\n      }\r\n    }\r\n    displayName\r\n  }\r\n  fragment EmbedShareProjectCover_SourceFile on SourceFile {\r\n    ...PaidAndFreeAssetsCountBadge_Embed_SourceFile\r\n  }\r\n  fragment EmbedShareProjectCover_User on User {\r\n    ...Avatar_EmbedFragment\r\n  }\r\n  fragment EmbedShareProjectCover_Project on Project {\r\n    id\r\n    isPrivate\r\n    isPublished\r\n    hasMatureContent\r\n    creator {\r\n      hasAllowEmbeds\r\n    }\r\n    colors {\r\n      ...DominantColor_Colors\r\n    }\r\n    sourceFiles {\r\n      ...EmbedShareProjectCover_SourceFile\r\n    }\r\n    name\r\n    url\r\n    covers {\r\n      allAvailable {\r\n        url\r\n        width\r\n        type\r\n      }\r\n      size_original_webp {\r\n        url\r\n        width\r\n        type\r\n      }\r\n    }\r\n    owners {\r\n      url\r\n      ...EmbedShareProjectCover_User\r\n    }\r\n  }\r\n  fragment PaidAndFreeAssetsCountBadge_Embed_SourceFile on SourceFile {\r\n    unitAmount\r\n    tier\r\n    hidden\r\n  }\r\n  fragment ViewServiceInfoModal_User on User {\r\n    id\r\n    displayName\r\n    url\r\n    images {\r\n      size_50 {\r\n        url\r\n      }\r\n    }\r\n    creatorPro {\r\n      isActive\r\n    }\r\n    ...CreatorProBadge_User\r\n  }\r\n  fragment InquireServiceModal_User on User {\r\n    id\r\n    displayName\r\n    images {\r\n      size_50 {\r\n        url\r\n      }\r\n    }\r\n    availabilityInfo {\r\n      hiringTimeline {\r\n        key\r\n      }\r\n    }\r\n  }\r\n  fragment SourceFileRow_SourceFile on SourceFile {\r\n    assetId\r\n    cover {\r\n      coverUrl\r\n    }\r\n    title\r\n    extension\r\n    currency\r\n    unitAmount\r\n    renditionUrl\r\n    hasUserPurchased\r\n    tier\r\n    sourceFileId\r\n    projectId\r\n    mimeType\r\n    category\r\n    licenseType\r\n    size\r\n  }\r\n  fragment PaneHeader_User on User {\r\n    id\r\n    url\r\n    displayName\r\n    images {\r\n      allAvailable {\r\n        width\r\n        url\r\n        type\r\n      }\r\n    }\r\n  }`;\r\n","import { Route, ViewType } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport crypto from 'node:crypto';\r\nimport path from 'node:path';\r\nimport { art } from '@/utils/render';\r\nimport { getAppreciatedQuery, getProfileProjectsAndSelectionsQuery, getProjectPageQuery } from './queries';\r\n\r\nexport const route: Route = {\r\n    path: '/:user/:type?',\r\n    categories: ['design'],\r\n    view: ViewType.Pictures,\r\n    example: '/behance/mishapetrick',\r\n    parameters: {\r\n        user: 'username',\r\n        type: {\r\n            description: 'type',\r\n            options: [\r\n                { value: 'projects', label: 'projects' },\r\n                { value: 'appreciated', label: 'appreciated' },\r\n            ],\r\n            default: 'projects',\r\n        },\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'User Works',\r\n    maintainers: ['MisteryMonster'],\r\n    handler,\r\n    description: `Behance user's profile URL, like [https://www.behance.net/mishapetrick](https://www.behance.net/mishapetrick) the username will be \\`mishapetrick\\`。`,\r\n};\r\n\r\nconst getUserProfile = async (nodes, user) =>\r\n    (await cache.tryGet(`behance:profile:${user}`, () => {\r\n        const profile = nodes.flatMap((item) => item.owners).find((owner) => owner.username === user);\r\n\r\n        return Promise.resolve({\r\n            displayName: profile.displayName,\r\n            id: profile.id,\r\n            link: profile.url,\r\n            image: profile.images.size_50.url.replace('/user/50/', '/user/source/'),\r\n        });\r\n    })) as { displayName: string; id: string; link: string; image: string };\r\n\r\nasync function handler(ctx) {\r\n    const { user, type = 'projects' } = ctx.req.param();\r\n\r\n    const uuid = crypto.randomUUID();\r\n    const headers = {\r\n        Cookie: `gk_suid=${Math.random().toString().slice(2, 10)}, gki=; originalReferrer=; bcp=${uuid}`,\r\n        'X-BCP': uuid,\r\n        'X-Requested-With': 'XMLHttpRequest',\r\n    };\r\n\r\n    const response = await ofetch('https://www.behance.net/v3/graphql', {\r\n        method: 'POST',\r\n        headers,\r\n        body: {\r\n            query: type === 'projects' ? getProfileProjectsAndSelectionsQuery : getAppreciatedQuery,\r\n            variables: {\r\n                username: user,\r\n                after: '',\r\n            },\r\n        },\r\n    });\r\n\r\n    const nodes = type === 'projects' ? response.data.user.profileProjects.nodes : response.data.user.appreciatedProjects.nodes;\r\n    const list = nodes.map((item) => ({\r\n        title: item.name,\r\n        link: item.url,\r\n        author: item.owners.map((owner) => owner.displayName).join(', '),\r\n        image: item.covers.size_202.url.replace('/202/', '/source/'),\r\n        pubDate: item.publishedOn ? parseDate(item.publishedOn, 'X') : undefined,\r\n        category: item.fields?.map((field) => field.label.toLowerCase()),\r\n        projectId: item.id,\r\n    }));\r\n\r\n    const profile = await getUserProfile(nodes, user);\r\n\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const response = await ofetch('https://www.behance.net/v3/graphql', {\r\n                    method: 'POST',\r\n                    headers,\r\n                    body: {\r\n                        query: getProjectPageQuery,\r\n                        variables: {\r\n                            projectId: item.projectId,\r\n                        },\r\n                    },\r\n                });\r\n                const project = response.data.project;\r\n\r\n                item.description = art(path.join(__dirname, 'templates/description.art'), {\r\n                    description: project.description,\r\n                    modules: project.allModules,\r\n                });\r\n                item.category = [...new Set([...(item.category || []), ...(project.tags?.map((tag) => tag.title.toLowerCase()) || [])])];\r\n                item.pubDate = item.pubDate || (project.publishedOn ? parseDate(project.publishedOn, 'X') : undefined);\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: `${profile.displayName}'s ${type}`,\r\n        link: `https://www.behance.net/${user}/${type}`,\r\n        image: profile.image,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"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"}