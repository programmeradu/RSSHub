{"version":3,"file":"logger-CWOoofbD.js","names":["transports: (typeof winston.transports.File)[]"],"sources":["../../lib/utils/logger.ts"],"sourcesContent":["import path from 'node:path';\r\nimport winston from 'winston';\r\nimport { config } from '@/config';\r\n\r\nlet transports: (typeof winston.transports.File)[] = [];\r\nif (!config.noLogfiles && !process.env.VERCEL) {\r\n    transports = [\r\n        new winston.transports.File({\r\n            filename: path.resolve('logs/error.log'),\r\n            level: 'error',\r\n        }),\r\n        new winston.transports.File({ filename: path.resolve('logs/combined.log') }),\r\n    ];\r\n}\r\nconst logger = winston.createLogger({\r\n    level: config.loggerLevel,\r\n    format: winston.format.combine(\r\n        winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss.SSS' }),\r\n        winston.format.printf((info) =>\r\n            JSON.stringify({\r\n                timestamp: info.timestamp,\r\n                level: info.level,\r\n                message: info.message,\r\n            })\r\n        )\r\n    ),\r\n    transports,\r\n});\r\n\r\n//\r\n// If we're not in production then log to the `console` with the format:\r\n// `${info.level}: ${info.message} JSON.stringify({ ...rest }) `\r\n//\r\nif (!config.isPackage) {\r\n    logger.add(\r\n        new winston.transports.Console({\r\n            format: winston.format.printf((info) => {\r\n                const infoLevel = winston.format.colorize().colorize(info.level, config.showLoggerTimestamp ? `[${info.timestamp}] ${info.level}` : info.level);\r\n                return `${infoLevel}: ${info.message}`;\r\n            }),\r\n            silent: process.env.NODE_ENV === 'test',\r\n        })\r\n    );\r\n}\r\n\r\nexport default logger;\r\n"],"mappings":"8FAIA,IAAIA,EAAiD,GACjD,CAAC,EAAO,YAAc,CAAC,QAAQ,IAAI,SACnC,EAAa,CACT,IAAI,EAAQ,WAAW,KAAK,CACxB,SAAU,EAAK,QAAQ,kBACvB,MAAO,UAEX,IAAI,EAAQ,WAAW,KAAK,CAAE,SAAU,EAAK,QAAQ,yBAG7D,MAAM,EAAS,EAAQ,aAAa,CAChC,MAAO,EAAO,YACd,OAAQ,EAAQ,OAAO,QACnB,EAAQ,OAAO,UAAU,CAAE,OAAQ,4BACnC,EAAQ,OAAO,OAAQ,GACnB,KAAK,UAAU,CACX,UAAW,EAAK,UAChB,MAAO,EAAK,MACZ,QAAS,EAAK,YAI1B,eAOC,EAAO,WACR,EAAO,IACH,IAAI,EAAQ,WAAW,QAAQ,CAC3B,OAAQ,EAAQ,OAAO,OAAQ,GAAS,CACpC,IAAM,EAAY,EAAQ,OAAO,WAAW,SAAS,EAAK,MAAO,EAAO,oBAAsB,IAAI,EAAK,UAAU,IAAI,EAAK,QAAU,EAAK,OACzI,MAAO,GAAG,EAAU,IAAI,EAAK,YAEjC,OAAQ,MAKpB,IAAA,EAAe"}