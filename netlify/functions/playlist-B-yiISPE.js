import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as r}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";t();const o={path:`/music/playlist/:id`,categories:[`multimedia`],example:`/163/music/playlist/35798529`,parameters:{id:`歌单 id, 可在歌单页 URL 中找到`},features:{requireConfig:[{name:`NCM_COOKIES`,optional:!0,description:"网易云音乐登陆后的 cookie 值，可在浏览器控制台通过`document.cookie`获取。"}],requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`歌单歌曲`,maintainers:[`DIYgod`],handler:s};async function s(t){let o=t.req.param(`id`),s=await i.get(`https://music.163.com/api/v3/playlist/detail?id=${o}`,{headers:{Referer:`https://music.163.com/`,Cookie:n.ncm.cookies}}),c=s.data.playlist,l=await i(`https://music.163.com/api/song/detail`,{headers:{Referer:`https://music.163.com`},searchParams:{ids:`[${c.trackIds.slice(0,201).map(e=>e.id)}]`}}),u=l.data.songs;return{title:c.name,link:`https://music.163.com/#/playlist?id=${o}`,description:`网易云音乐歌单 - ${c.name}`,item:c.trackIds.slice(0,201).map(t=>{let n=u.find(e=>e.id===t.id),i=n.artists.length===1?n.artists[0].name:n.artists.reduce((e,t)=>(e.name||e)+`/`+t.name);return{title:`${n.name} - ${i}`,description:r(a.join(e,`templates/playlist-c88d1dd7.art`),{singer:i,album:n.album.name,date:new Date(n.album.publishTime).toLocaleDateString(),picUrl:n.album.picUrl}),link:`https://music.163.com/song?id=${t.id}`,guid:`https://music.163.com/#/song?id=${t.id}`,pubDate:new Date(t.at),author:i}})}}export{o as route};
//# sourceMappingURL=playlist-B-yiISPE.js.map