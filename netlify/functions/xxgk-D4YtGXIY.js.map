{"version":3,"file":"xxgk-D4YtGXIY.js","names":[],"sources":["../../lib/routes/cde/xxgk.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\nimport utils from './utils';\r\n\r\nconst baseUrl = 'https://www.cde.org.cn';\r\nconst xxgkMap = {\r\n    xxgk: {\r\n        priorityApproval: {\r\n            title: '优先审评公示',\r\n            url: `${baseUrl}/main/xxgk/listpage/2f78f372d351c6851af7431c7710a731`,\r\n            endPoint: '/priority/getPriorityApprovalList',\r\n            form: {\r\n                pageSize: 50,\r\n                pageNum: 1,\r\n                noticeType: 2,\r\n                acceptid: '',\r\n                drugname: '',\r\n                company: '',\r\n            },\r\n        },\r\n        breakthroughCure: {\r\n            title: '突破性治疗公示',\r\n            url: `${baseUrl}/main/xxgk/listpage/da6efd086c099b7fc949121166f0130c`,\r\n            endPoint: '/breakthrough/getBreakthroughCureList',\r\n            form: {\r\n                pageSize: 50,\r\n                pageNum: 1,\r\n                noticeType: 1,\r\n                acceptid: '',\r\n                drugname: '',\r\n                company: '',\r\n            },\r\n        },\r\n        cliniCal: {\r\n            title: '临床试验默示许可',\r\n            url: `${baseUrl}/main/xxgk/listpage/4b5255eb0a84820cef4ca3e8b6bbe20c`,\r\n            endPoint: '/xxgk/getCliniCalList',\r\n            form: {\r\n                pageSize: 50,\r\n                pageNum: 1,\r\n                condition: '',\r\n            },\r\n        },\r\n    },\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/xxgk/:category',\r\n    categories: ['government'],\r\n    example: '/cde/xxgk/priorityApproval',\r\n    parameters: { category: '类别，见下表' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '信息公开',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    description: `|   优先审评公示   |  突破性治疗公示  | 临床试验默示许可 |\r\n| :--------------: | :--------------: | :--------------: |\r\n| priorityApproval | breakthroughCure |     cliniCal     |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const category = ctx.req.param('category');\r\n\r\n    const { data } = await got.post(`${baseUrl}/main${xxgkMap.xxgk[category].endPoint}`, {\r\n        form: xxgkMap.xxgk[category].form,\r\n        headers: {\r\n            referer: xxgkMap.xxgk[category].url,\r\n            cookie: await utils.getCookie(ctx),\r\n        },\r\n    });\r\n\r\n    const items = data.data.records.map((item) => {\r\n        let description = '';\r\n        switch (category) {\r\n            case 'priorityApproval':\r\n                description = art(path.join(__dirname, 'templates/xxgk/priorityApproval.art'), { item });\r\n                break;\r\n            case 'breakthroughCure':\r\n                description = art(path.join(__dirname, 'templates/xxgk/breakthroughCure.art'), { item });\r\n                break;\r\n            case 'cliniCal':\r\n                description = art(path.join(__dirname, 'templates/xxgk/cliniCal.art'), { item });\r\n                break;\r\n            default:\r\n                description = '';\r\n        }\r\n\r\n        return {\r\n            title: item.drgnamecn,\r\n            guid: item.acceptid,\r\n            pubDate: item.endNoticeDate ? parseDate(item.endNoticeDate) : null,\r\n            description,\r\n            link: xxgkMap.xxgk[category].url,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `${xxgkMap.xxgk[category].title} - 国家药品监督管理局药品审评中心`,\r\n        link: xxgkMap.xxgk[category].url,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"qdAQA,MAAM,EAAU,yBACV,EAAU,CACZ,KAAM,CACF,iBAAkB,CACd,MAAO,SACP,IAAK,GAAG,EAAQ,sDAChB,SAAU,oCACV,KAAM,CACF,SAAU,GACV,QAAS,EACT,WAAY,EACZ,SAAU,GACV,SAAU,GACV,QAAS,KAGjB,iBAAkB,CACd,MAAO,UACP,IAAK,GAAG,EAAQ,sDAChB,SAAU,wCACV,KAAM,CACF,SAAU,GACV,QAAS,EACT,WAAY,EACZ,SAAU,GACV,SAAU,GACV,QAAS,KAGjB,SAAU,CACN,MAAO,WACP,IAAK,GAAG,EAAQ,sDAChB,SAAU,wBACV,KAAM,CACF,SAAU,GACV,QAAS,EACT,UAAW,OAMd,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,cACb,QAAS,6BACT,WAAY,CAAE,SAAU,UACxB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,UACd,UACA,YAAa;;6DAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,EAAI,IAAI,MAAM,YAEzB,CAAE,QAAS,MAAM,EAAI,KAAK,GAAG,EAAQ,OAAO,EAAQ,KAAK,GAAU,WAAY,CACjF,KAAM,EAAQ,KAAK,GAAU,KAC7B,QAAS,CACL,QAAS,EAAQ,KAAK,GAAU,IAChC,OAAQ,MAAM,EAAM,UAAU,MAIhC,EAAQ,EAAK,KAAK,QAAQ,IAAK,GAAS,CAC1C,IAAI,EAAc,GAClB,OAAQ,EAAR,CACI,IAAK,mBACD,EAAc,EAAI,EAAA,KAAA,EAAA,2CAA6D,CAAE,SACjF,MACJ,IAAK,mBACD,EAAc,EAAI,EAAA,KAAA,EAAA,2CAA6D,CAAE,SACjF,MACJ,IAAK,WACD,EAAc,EAAI,EAAA,KAAA,EAAA,mCAAqD,CAAE,SACzE,MACJ,QACI,EAAc,GAGtB,MAAO,CACH,MAAO,EAAK,UACZ,KAAM,EAAK,SACX,QAAS,EAAK,cAAgB,EAAU,EAAK,eAAiB,KAC9D,cACA,KAAM,EAAQ,KAAK,GAAU,OAIrC,MAAO,CACH,MAAO,GAAG,EAAQ,KAAK,GAAU,MAAM,oBACvC,KAAM,EAAQ,KAAK,GAAU,IAC7B,KAAM"}