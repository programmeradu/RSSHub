import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{invalid_parameter_default as n}from"./invalid-parameter-CUJdROXf.js";import{load as r}from"cheerio";const i={path:`/ranking/:type`,categories:[`new-media`],example:`/ithome/ranking/24h`,parameters:{type:`类别`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`热榜`,maintainers:[`immmortal`,`luyuhuang`],handler:a,description:`| 24h           | 7days    | monthly |
| ------------- | -------- | ------- |
| 24 小时阅读榜 | 7 天最热 | 月榜    |`};async function a(i){let a=i.req.param(`type`),o=await t({method:`get`,url:`https://www.ithome.com/block/rank.html`}),s=r(o.data),c={"24h":`24 小时最热`,"7days":`7 天最热`,monthly:`月榜`},l={"24h":`d-1`,"7days":`d-2`,monthly:`d-3`},u=c[a],d=l[a];if(!d)throw new n(`Bad type. See <a href="https://docs.rsshub.app/routes/new-media#it-zhi-jia">https://docs.rsshub.app/routes/new-media#it-zhi-jia</a>`);let f=s(`#${d} > li`).toArray().map(e=>{let t={title:s(e).find(`a`).text(),link:s(e).find(`a`).attr(`href`)};return t}),p=await Promise.all(f.map(n=>e.tryGet(n.link,async()=>{let e=await t({method:`get`,url:n.link}),i=r(e.data),a=i(`#paragraph`);return a.find(`img[data-original]`).each((e,t)=>{t=s(t),t.attr(`src`,t.attr(`data-original`)),t.removeAttr(`class`),t.removeAttr(`data-original`)}),n.description=a.html(),n.pubDate=new Date(i(`#pubtime_baidu`).text()+` GMT+8`).toUTCString(),n})));return{title:`IT之家-${u}`,link:`https://www.ithome.com`,item:p}}export{i as route};
//# sourceMappingURL=ranking-BelhN89M.js.map