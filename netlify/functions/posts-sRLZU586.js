import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./md5-4BNsOP-F.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{getSignedHeader as r,header as i,processImage as a}from"./utils-DNrWGW3Z.js";const o={path:`/posts/:usertype/:id`,categories:[`social-media`],example:`/zhihu/posts/people/frederchen`,parameters:{usertype:`作者 id，可在用户主页 URL 中找到`,id:`用户类型usertype，参考用户主页的URL。目前有两种，见下表`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.zhihu.com/:usertype/:id/posts`,`www.zhihu.com/:usertype/:id`]}],name:`用户文章`,maintainers:[`whtsky`,`Colin-XKL`],handler:s,description:`| 普通用户 | 机构用户 |
| -------- | -------- |
| people   | org      |`};async function s(o){let s=o.req.param(`id`),c=o.req.param(`usertype`),l=await e.tryGet(`zhihu:posts:profile:${s}`,async()=>{let e=`/api/v4/${c===`people`?`members`:`org`}/${s}?${new URLSearchParams({include:`allow_message,is_followed,is_following,is_org,is_blocking,employments,answer_count,follower_count,articles_count,gender,badge[?(type=best_answerer)].topics`})}`;return await n(`https://www.zhihu.com${e}`,{headers:{...i,...await r(`https://www.zhihu.com/${c}/${s}/`,e),Referer:`https://www.zhihu.com/${c}/${s}/`}})}),u=`/api/v4/${c===`people`?`members`:`org`}/${s}/articles?${new URLSearchParams({include:`data[*].comment_count,suggest_edit,is_normal,thumbnail_extra_info,thumbnail,can_comment,comment_permission,admin_closed_comment,content,voteup_count,created,updated,upvoted_followees,voting,review_info,reaction_instruction,is_labeled,label_info;data[*].vessay_info;data[*].author.badge[?(type=best_answerer)].topics;data[*].author.vip_info;`,offset:`0`,limit:`20`,sort_by:`created`})}`,d=await r(`https://www.zhihu.com/${c}/${s}/posts`,u),f=await n(`https://www.zhihu.com${u}`,{headers:{...i,...d,Referer:`https://www.zhihu.com/${c}/${s}/posts`}}),p=f.data.map(e=>({title:e.title,description:a(e.content),link:`https://zhuanlan.zhihu.com/p/${e.id}`,pubDate:t(e.created,`X`),updated:t(e.updated,`X`),author:e.author.name}));return{title:`${l.name} 的知乎文章`,link:`https://www.zhihu.com/${c}/${s}/posts`,description:l.headline,image:l.avatar_url.split(`?`)[0],item:p}}export{o as route};
//# sourceMappingURL=posts-sRLZU586.js.map