{"version":3,"file":"xianbao-CI0licyU.js","names":["route: Route","cat","got"],"sources":["../../lib/routes/xianbao/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/:category?',\r\n    name: '线板酷',\r\n    url: 'new.xianbao.fun',\r\n    maintainers: ['nashi23'],\r\n    handler,\r\n    example: '/xianbao',\r\n    parameters: { category: '类别id，默认为：latest' },\r\n    description: `\r\n| 分类         | id             |\r\n| ------------ | -------------- |\r\n| 最新         | latest         |\r\n| 赚客吧       | zuankeba       |\r\n| 赚客吧热帖   | zuankeba-hot   |\r\n| 新赚吧       | xinzuanba      |\r\n| 新赚吧热帖   | xinzuanba-hot  |\r\n| 微博         | weibo          |\r\n| 微博热帖     | weibo-hot      |\r\n| 豆瓣线报     | douban         |\r\n| 豆瓣热帖     | douban-hot     |\r\n| 酷安         | kuan           |\r\n| 小嘀咕       | xiaodigu       |\r\n| 葫芦侠       | huluxia        |\r\n| 小刀娱乐网   | xiadao         |\r\n| 技术QQ网     | qqjishu        |\r\n| YYOK大全     | yyok           |\r\n| 活动资讯网   | huodong        |\r\n| 免费赚钱中心 | mianfei        |\r\n| 一小时       | yixiaoshi      |\r\n| 三小时       | sanxiaoshi     |\r\n| 六小时       | liuxiaoshi     |\r\n| 十二小时     | shierxiaoshi   |\r\n| 二十四小时   | ershisixiaoshi |\r\n| 四十八小时   | sishibaxiaoshi |\r\n| 今天         | jintian        |\r\n| 昨天         | zuotian        |\r\n| 前天         | qiantian       |\r\n| 三天         | santian        |\r\n| 五天         | wutian         |\r\n| 七天         | qitian         |\r\n| 十五天       | shiwutian      |`,\r\n    categories: ['shopping'],\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportRadar: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['new.xianbao.fun'],\r\n            target: '/',\r\n        },\r\n    ],\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const categoryParam = ctx.req.param() || { category: 'latest' };\r\n\r\n    let urlPath = '';\r\n\r\n    const category = categoryParam.category || 'latest';\r\n\r\n    const cat = CATEGORIES.find((cat) => cat.id === category) || CATEGORIES.find((cat) => cat.id === 'latest');\r\n    const fullName = cat!.fullName;\r\n    const pushPath = cat!.pushPath;\r\n\r\n    if (category.endsWith('xiaoshi') || category.endsWith('tian')) {\r\n        urlPath = `${category}-hot.html`;\r\n    } else if (category.endsWith('hot')) {\r\n        urlPath = `${category}.html`;\r\n    } else {\r\n        urlPath = category === 'latest' ? '' : `category-${category}`;\r\n    }\r\n\r\n    const apiUrl = `http://new.xianbao.fun/plus/json/${pushPath}.json`;\r\n    const response = await got(apiUrl);\r\n    const responseData = JSON.parse(response.body);\r\n\r\n    let parsedData;\r\n    if (Array.isArray(responseData)) {\r\n        parsedData = responseData;\r\n    } else {\r\n        const hotKey = Object.keys(responseData).find((key) => key.startsWith('remen'));\r\n        parsedData = responseData[hotKey];\r\n    }\r\n\r\n    const items = parsedData.map((item) => ({\r\n        title: item.title,\r\n        link: `http://new.xianbao.fun${item.url}`,\r\n        description: item.content,\r\n        pubDate: parseDate(item.shijianchuo * 1000),\r\n        author: item.louzhu,\r\n        category: item.catename,\r\n    }));\r\n\r\n    return {\r\n        title: `线板酷-${fullName}`,\r\n        link: `http://new.xianbao.fun/${urlPath}`,\r\n        item: items,\r\n    };\r\n}\r\n\r\nconst CATEGORIES = [\r\n    { id: 'latest', fullName: '最新', pushPath: 'push' },\r\n    { id: 'yixiaoshi', fullName: '一小时', pushPath: 'rank/yixiaoshi' },\r\n    { id: 'sanxiaoshi', fullName: '三小时', pushPath: 'rank/sanxiaoshi' },\r\n    { id: 'liuxiaoshi', fullName: '六小时', pushPath: 'rank/liuxiaoshi' },\r\n    { id: 'shierxiaoshi', fullName: '十二小时', pushPath: 'rank/shierxiaoshi' },\r\n    { id: 'ershisixiaoshi', fullName: '二十四小时', pushPath: 'rank/ershisixiaoshi' },\r\n    { id: 'sishibaxiaoshi', fullName: '四十八小时', pushPath: 'rank/sishibaxiaoshi' },\r\n    { id: 'jintian', fullName: '今天', pushPath: 'rank/jintian' },\r\n    { id: 'zuotian', fullName: '昨天', pushPath: 'rank/zuotian' },\r\n    { id: 'qiantian', fullName: '前天', pushPath: 'rank/qiantian' },\r\n    { id: 'santian', fullName: '三天', pushPath: 'rank/santian' },\r\n    { id: 'wutian', fullName: '五天', pushPath: 'rank/wutian' },\r\n    { id: 'qitian', fullName: '七天', pushPath: 'rank/qitian' },\r\n    { id: 'shiwutian', fullName: '十五天', pushPath: 'rank/shiwutian' },\r\n    { id: 'zuankeba', fullName: '赚客吧', pushPath: 'push_16' },\r\n    { id: 'zuankeba-hot', fullName: '赚客吧热帖', pushPath: 'rank/zuankeba-hot' },\r\n    { id: 'xinzuanba', fullName: '新赚吧', pushPath: 'push_18' },\r\n    { id: 'xinzuanba-hot', fullName: '新赚吧热帖', pushPath: 'rank/xinzuanba-hot' },\r\n    { id: 'weibo', fullName: '微博', pushPath: 'push_10' },\r\n    { id: 'weibo-hot', fullName: '微博热帖', pushPath: 'rank/weibo-hot' },\r\n    { id: 'douban', fullName: '豆瓣线报', pushPath: 'push_23' },\r\n    { id: 'douban-hot', fullName: '豆瓣热帖', pushPath: 'rank/douban-hot' },\r\n    { id: 'kuan', fullName: '酷安', pushPath: 'push_17' },\r\n    { id: 'xiaodigu', fullName: '小嘀咕', pushPath: 'push_11' },\r\n    { id: 'huluxia', fullName: '葫芦侠', pushPath: 'push_20' },\r\n    { id: 'xiadao', fullName: '小刀娱乐网', pushPath: 'push_3' },\r\n    { id: 'qqjishu', fullName: '技术QQ网', pushPath: 'push_6' },\r\n    { id: 'yyok', fullName: 'YYOK大全', pushPath: 'push_7' },\r\n    { id: 'huodong', fullName: '活动资讯网', pushPath: 'push_8' },\r\n    { id: 'mianfei', fullName: '免费赚钱中心', pushPath: 'push_9' },\r\n];\r\n"],"mappings":"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"}