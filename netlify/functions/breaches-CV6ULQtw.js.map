{"version":3,"file":"breaches-CV6ULQtw.js","names":["route: Route","got"],"sources":["../../lib/routes/firefox/breaches.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nexport const route: Route = {\r\n    path: '/breaches',\r\n    categories: ['other'],\r\n    example: '/firefox/breaches',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['monitor.firefox.com/', 'monitor.firefox.com/breaches'],\r\n        },\r\n    ],\r\n    name: 'Firefox Monitor',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    url: 'monitor.firefox.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://monitor.firefox.com';\r\n\r\n    const response = await got(`${baseUrl}/breaches`);\r\n    const $ = load(response.data);\r\n\r\n    const items = $('.breach-card')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            item.find('.breach-detail-link').remove();\r\n            return {\r\n                title: item.find('h3 span').last().text(),\r\n                description: item.find('.breach-main').html(),\r\n                link: new URL(item.attr('href'), baseUrl).href,\r\n                pubDate: timezone(parseDate(item.find('.breach-main div dd').first().text()), 0),\r\n                category: item\r\n                    .find('.breach-main div dd')\r\n                    .last()\r\n                    .text()\r\n                    .split(',')\r\n                    .map((x) => x.trim()),\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: $('title').text(),\r\n        description: $('head meta[name=description]').attr('content').trim(),\r\n        link: response.url,\r\n        item: items,\r\n        image: $('head meta[property=og:image]').attr('content'),\r\n    };\r\n}\r\n"],"mappings":"sWAMA,MAAaA,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,SACb,QAAS,oBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,uBAAwB,kCAGzC,KAAM,kBACN,YAAa,CAAC,UACd,UACA,IAAK,wBAGT,eAAe,GAAU,CACrB,IAAM,EAAU,8BAEV,EAAW,MAAMC,EAAI,GAAG,EAAQ,YAChC,EAAI,EAAK,EAAS,MAElB,EAAQ,EAAE,gBACX,UACA,IAAK,IACF,EAAO,EAAE,GACT,EAAK,KAAK,uBAAuB,SAC1B,CACH,MAAO,EAAK,KAAK,WAAW,OAAO,OACnC,YAAa,EAAK,KAAK,gBAAgB,OACvC,KAAM,IAAI,IAAI,EAAK,KAAK,QAAS,GAAS,KAC1C,QAAS,EAAS,EAAU,EAAK,KAAK,uBAAuB,QAAQ,QAAS,GAC9E,SAAU,EACL,KAAK,uBACL,OACA,OACA,MAAM,KACN,IAAK,GAAM,EAAE,WAI9B,MAAO,CACH,MAAO,EAAE,SAAS,OAClB,YAAa,EAAE,+BAA+B,KAAK,WAAW,OAC9D,KAAM,EAAS,IACf,KAAM,EACN,MAAO,EAAE,gCAAgC,KAAK"}