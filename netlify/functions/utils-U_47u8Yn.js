import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import i from"node:path";import{load as a}from"cheerio";t();const o=`https://www.science.org`,s=(t,r,o)=>Promise.all(t.map(t=>o(t.link,async()=>{let o=await r.newPage();await o.setRequestInterception(!0),o.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await o.goto(t.link,{waitUntil:`domcontentloaded`}),await o.waitForSelector(`section#bodymatter, .news-article-content, .news-article-content--featured`);let s=await o.evaluate(()=>document.documentElement.innerHTML);await o.close();let c=a(s),l=c(`div#abstracts`).html(),u=c(`.news-article-content--featured`).length?c(`.news-article-content--featured`).html():c(`.news-article-content`).length?c(`.news-article-content`).html():c(`.info-panel__formats a.btn__request-access`).length||c(`.info-panel__formats a.btn--access`).length?``:c(`section#bodymatter`).html();return t.description=n(i.join(e,`templates/article-16b02730.art`),{abs:l,content:u}),t}))),c=(e,t)=>(e=t(e),{title:e.find(`.article-title a`).attr(`title`),link:`${o}${e.find(`.article-title a`).attr(`href`)}`,doi:e.find(`.article-title a`).attr(`href`).replace(`/doi/`,``),pubDate:r(e.find(`.card-meta__item time`).text()),author:e.find(`.card-meta ul[title="list of authors"] li`).toArray().map(e=>t(e).text()).join(`, `)});export{o as baseUrl,s as fetchDesc,c as getItem};
//# sourceMappingURL=utils-U_47u8Yn.js.map