import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=async n=>{let{category:i}=n.req.param(),a=Number.parseInt(n.req.query(`limit`)??`50`,10),o=`wp-json/wp/v2`,s=`https://www.xwenming.com`,c=new URL(`${o}/posts`,s).href,l=new URL(`${o}/categories`,s).href,u=await t(l,{query:{search:i}}),d=u.find(e=>e.slug===i||e.name===i),f=d?.id??void 0,p=d?.slug??void 0,m=await t(c,{query:{_embed:`true`,per_page:a,categories:f}}),h=new URL(p?`index.php/category/${p}`:``,s).href,g=await t(h),_=r(g),v=_(`html`).attr(`lang`)??`zh`,y=m.slice(0,a).map(t=>{let n=t.title?.rendered??t.title,r=t.content.rendered,i=t.date_gmt,a=t.link,o=t._embedded?.[`wp:term`],s=o?.flat().map(e=>e.name)??[],c=t._embedded?.author.map(e=>({name:e.name,url:e.link,avatar:e.avatar_urls?.[`96`]??e.avatar_urls?.[`48`]??e.avatar_urls?.[`24`]??void 0}))??[],l=t.guid?.rendered??t.guid,u=t._embedded?.[`wp:featuredmedia`]?.[0].source_url??void 0,d=t.modified_gmt??i,f={title:n,description:r,pubDate:i?e(i):void 0,link:a??l,category:s,author:c,guid:l,id:l,content:{html:r,text:r},image:u,banner:u,updated:d?e(d):void 0,language:v};return f});return{title:_(`title`).text(),description:_(`meta[name="description"]`).attr(`content`),link:h,item:y,allowEmpty:!0,image:_(`meta[name="msapplication-TileImage"]`).attr(`content`),language:v,id:h}},a={path:`/:category?`,name:`分类`,url:`www.xwenming.com`,maintainers:[`nczitzk`],handler:i,example:`/xwenming/news`,parameters:{category:{description:`分类，默认为全部，可在对应分类页 URL 中找到`,options:[{label:`全部`,value:``},{label:`科技前沿`,value:`news`},{label:`疑难杂症`,value:`solve`},{label:`通知专栏`,value:`notice`},{label:`未分类`,value:`uncategorized`}]}},description:`:::tip
订阅 [科技前沿](https://www.xwenming.com/index.php/category/news)，其源网址为 \`https://www.xwenming.com/index.php/category/news\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/xwenming/category/news\`](https://rsshub.app/xwenming/category/news) 或 [\`/xwenming/category/科技前沿\`](https://rsshub.app/xwenming/category/科技前沿)。
:::

| 分类                                                                | ID                                                                  |
| ------------------------------------------------------------------- | ------------------------------------------------------------------- |
| [全部](https://www.xwenming.com)                                    | [<空>](https://rsshub.app/xwenming)                                 |
| [科技前沿](https://www.xwenming.com/index.php/category/news)        | [news](https://rsshub.app/xwenming/category/news)                   |
| [疑难杂症](https://www.xwenming.com/index.php/category/solve)       | [solve](https://rsshub.app/xwenming/category/solve)                 |
| [通知专栏](https://www.xwenming.com/index.php/category/notice)      | [notice](https://rsshub.app/xwenming/category/notice)               |
| [未分类](https://www.xwenming.com/index.php/category/uncategorized) | [uncategorized](https://rsshub.app/xwenming/category/uncategorized) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.xwenming.com`,`www.xwenming.com/index.php/category/:category`],target:`/:category`},{title:`全部`,source:[`www.xwenming.com`],target:`/`},{title:`科技前沿`,source:[`www.xwenming.com/index.php/category/news`],target:`/news`},{title:`疑难杂症`,source:[`www.xwenming.com/index.php/category/solve`],target:`/solve`},{title:`通知专栏`,source:[`www.xwenming.com/index.php/category/notice`],target:`/notice`},{title:`未分类`,source:[`www.xwenming.com/index.php/category/uncategorized`],target:`/uncategorized`}],view:n.Articles};export{i as handler,a as route};
//# sourceMappingURL=xwenming-C3sxw1aq.js.map