import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import{ViewType as a}from"./types-A5bA50Mg.js";import o from"node:path";t();const s={path:`/user/:username/:cat?`,categories:[`social-media`],view:a.Videos,example:`/vimeo/user/filmsupply/picks`,parameters:{username:"In this example [https://vimeo.com/filmsupply](https://vimeo.com/filmsupply)  is `filmsupply`",cat:"deafult for all latest videos, others categories in this example such as `Docmentary`, `Narrative`, `Drama`. Set `picks` for promote orders, just orderd like web page. When `picks` added, published date won't show up"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`User Profile`,maintainers:[`MisteryMonster`],handler:c,description:"::: tip Special category name attention\n  Some of the categories contain slash like `3D/CG` , must change the slash `/` to the vertical bar`|`.\n:::"};async function c(t){let a=await i({method:`get`,url:`https://vimeo.com/_rv/viewer`}),s=a.data.jwt,{username:c,cat:l}=t.req.param(),u=await i({method:`get`,url:`https://api.vimeo.com/users/${c}?fields=name,gender,bio,uri,link,categories&fetch_user_profile=1`,headers:{Authorization:`jwt ${s}`}}),d=u.data,f=u.data.categories,p;if(l&&f.length>0)for(let e of f)decodeURIComponent(l).replaceAll(`|`,`/`)===e.name&&(p=e.word);let m=`&filter=category&filter_category=${p}`;if(l||(m=``),!p&&l&&l!==`picks`)return``;let h=l&&l===`picks`,g=`${d.uri}/videos?fields=name,uri,description,created_time&include_videos=1&page=1&per_page=10${m}`,_=`/users/${c}/profile_sections?fields=videos.data.clip.name,videos.data.clip.uri,videos.data.clip.description,videos.data.clip.created_time&include_videos=1&badge=1&page=1&per_page=10`,v=await i({method:`get`,url:`https://api.vimeo.com${h?_:g}`,headers:{Authorization:`jwt ${s}`}}),y=h?v.data.data[0].videos.data:v.data.data;return{title:`${d.name} ${p?l.replace(`|`,`/`):``} ${h?`picks`:``} | Vimeo `,link:d.link,description:d.bio,item:y.map(t=>{let i=h?t.clip.description:t.description;return{title:h?t.clip.name:t.name,description:n(o.join(e,`templates/description-d4cec56b.art`),{videoUrl:h?t.clip.uri.replace(`/videos`,``):t.uri.replace(`/videos`,``),vdescription:i?i.replaceAll(`
`,`<br>`):``}),pubDate:r(h||l?``:t.created_time),link:`https://vimeo.com${h?t.clip.uri.replace(`videos/`,``):t.uri.replace(`videos/`,``)}`,author:d.name}})}}export{s as route};
//# sourceMappingURL=usr-videos-D4CrtzP9.js.map