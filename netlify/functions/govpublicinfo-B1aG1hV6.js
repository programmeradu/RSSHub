import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={绵竹市:{rootUrl:`https://www.mz.gov.cn`,infoType:{fdzdnr:{basicUrl:`https://www.mz.gov.cn/info/iList.jsp?node_id=GKmzs&cat_id=15971&cur_page=1`,name:`法定主动内容`},gsgg:{basicUrl:`https://www.mz.gov.cn/info/iList.jsp?node_id=GKmzs&cat_id=24186&cur_page=1`,name:`公示公告`}}}},u=async(e,t)=>{let n=await a(t),r=c(n.data),i=r(`.list_div li`).toArray().map(t=>({title:r(`a`,t).attr(`title`),url:`${e}${r(`a`,t).attr(`href`)}`}));return i},d=(e,t)=>n.tryGet(t.url,async()=>{let n=await a(t.url);try{let r=c(n.data),a=r(`#attribute > span.gk.fj > file`).toArray().map(t=>({name:r(t).text(),url:`${e}/${r(t).attr(`href`)}`})),s=r(`#attribute > span:nth-child(3)`).text().split(`：`)[1].trim();return{title:r(`h1`).text().trim(),id:r(`#attribute > span:nth-child(1)`).text().split(`：`)[1].trim(),infoNum:r(`#attribute > span:nth-child(2)`).text().split(`：`)[1].trim(),pubDate:i(o(s,8)),date:s,keyWord:r(`#attribute > span:nth-child(6)`).text().split(`：`)[1].trim(),source:r(`#attribute > span:nth-child(5)`).text().split(`：`)[1].trim(),content:r(`body > section > article`).html(),file:a,link:t.url,_isCompleteInfo:!0}}catch{return{title:t.title,link:t.url,_isCompleteInfo:!1}}}),f={path:`/sichuan/deyang/govpublicinfo/:countyName/:infoType?`,categories:[`government`],example:`/gov/sichuan/deyang/govpublicinfo/绵竹市`,parameters:{countyName:"区县名（**其他区县整改中，暂时只支持`绵竹市`**）。德阳市、绵竹市、广汉市、什邡市、中江县、罗江区、旌阳区、高新区",infoType:`信息类型。默认值:fdzdnr-“法定主动内容”`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`政府公开信息`,maintainers:[`zytomorrow`],handler:p,description:`| 法定主动内容 | 公示公告 |
| :----------: | :------: |
|    fdzdnr    |   gsgg   |`};async function p(t){let n=t.req.param(`countyName`),i=t.req.param(`infoType`)||`fdzdnr`,a=l[n].infoType[i].basicUrl,o=l[n].rootUrl,c=await u(o,a),f=await Promise.all(c.map(e=>d(o,e)));return{title:`政府公开信息-${n}-${l[n].infoType[i].name}`,link:a,item:f.map(t=>({title:t.title,description:r(s.join(e,`templates/govPublicInfo-f5b261e0.art`),{item:t}),link:t.link,pubDate:t.pubDate}))}}export{f as route};
//# sourceMappingURL=govpublicinfo-B1aG1hV6.js.map