import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import*as n from"node:url";import{load as r}from"cheerio";const i={path:`/xjpjh/:keyword?/:year?`,categories:[`traditional-media`],example:`/people/xjpjh`,parameters:{keyword:`关键词，默认不填`,year:`年份，默认 all`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`people.com.cn/`],target:`/:site?/:category?`}],name:`习近平系列重要讲话`,maintainers:[],handler:a,url:`people.com.cn/`};async function a(i){let a=i.req.param(`keyword`)||`all`,o=i.req.param(`year`)||0,s=`习近平系列重要讲话`;s=s+`-`+a,a===`all`&&(a=``),o===0?s+=`-all`:(s=s+`-`+o,o-=1811);let c=`http://jhsjk.people.cn/result?keywords=${a}&year=${o}`,l=await t.get(c),u=r(l.data),d=u(`ul.list_14.p1_2.clearfix li`).slice(0,10).toArray().map(e=>{let t={title:u(e).find(`a`).text(),link:u(e).find(`a`).attr(`href`)};return t}),f=await Promise.all(d.map(async i=>{let a=i.title,o=n.resolve(`http://jhsjk.people.cn`,i.link),s=await e.get(o);if(s)return JSON.parse(s);let c=await t.get(o),l=r(c.data),u=l(`div.d2txt_con.clearfix`).html().trim(),d={title:a,link:o,description:u};return e.set(o,JSON.stringify(d)),d}));return{title:s,link:c,item:f}}export{i as route};
//# sourceMappingURL=xjpjh--gP0pus1.js.map