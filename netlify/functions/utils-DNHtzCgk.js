import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://api.followin.io`,l=`https://followin.io`,u=`${l}/favicon.ico`,d=e=>({a:`web`,b:``,c:e,d:0,e:``,f:``,g:``,h:`0.1.0`,i:`official`}),f=e=>e(`followin:buildId`,async()=>{let{data:e}=await a(l),t=s(e),{buildId:n}=JSON.parse(t(`script#__NEXT_DATA__`).text());return n},n.cache.routeExpire,!1),p=e=>e(`followin:gtoken`,async()=>{let{data:e}=await a.post(`${c}/user/gtoken`);return e.data.gtoken}),m=(e,t,n)=>e.map(e=>({title:e.translated_title||e.title,description:e.translated_content||e.content,link:`${l}/${t===`en`?``:`${t}/`}feed/${e.id}`,pubDate:i(e.publish_time,`x`),category:e.tags.map(e=>e.name),author:e.nickname,nextData:`${l}/_next/data/${n}/${t}/feed/${e.id}.json`})),h=(t,n)=>n(t.link,async()=>{let{data:n}=await a(t.nextData),{queries:s}=n.pageProps.dehydratedState,c=s.find(e=>e.queryKey[0]===`/feed/info`).state,l=s.find(e=>e.queryKey[0]===`/feed/thread`);return t.description=l?r(o.join(e,`templates/thread-1f3f7599.art`),{list:l.state.data.list}):c.data.translated_full_content||c.data.full_content,t.updated=i(c.dataUpdatedAt,`x`),t.category=[...new Set([...t.category,...c.data.tags.map(e=>e.name)])],t});export{c as apiUrl,l as baseUrl,u as favicon,d as getBParam,f as getBuildId,p as getGToken,h as parseItem,m as parseList};
//# sourceMappingURL=utils-DNHtzCgk.js.map