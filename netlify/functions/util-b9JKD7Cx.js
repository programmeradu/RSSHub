import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";t();const s=`https://www.safe.gov.cn`,c={ywzx:`www/busines/businessQuery?siteid=`,tsjy:`www/complaint/complaintQuery?siteid=`},l=async(t=`beijing`,l=`ywzx`,u=`3`)=>{let d=new URL(`${c[l]}${t}`,s).href,f=new URL(`${t}/${l}/index.html`,s).href,{data:p}=await i(d),m=o(p),h=m(`#complaint`).slice(0,u).toArray().map(t=>{t=m(t);let i=t.find(`span[objid]`),o={author:i.first().text().replace(/:$/,``),content:i.eq(1).text(),date:i.eq(2).text()},s={author:i.eq(3).text().replace(/:$/,``),content:i.eq(4).text(),date:i.eq(5).text()};return{title:`${o.author}: ${o.content}`,link:f,description:n(a.join(e,`templates/message-613373f3.art`),{message:o,reply:s}),author:`${o.author}/${s.author}`,guid:`${f}#${o.author}(${o.date})/${s.author}(${s.date})`,pubDate:r(o.date),updated:r(s.date)}}),{data:g}=await i(f),_=o(g),v=_(`meta[name="ColumnName"]`).prop(`content`),y=_(`meta[name="ColumnType"]`).prop(`content`),b=`safe/templateresource/372b1dfdab204181b9b4f943a8e926a6`,x=new URL(`${b}/logo_06.png`,s).href,S=new URL(`${b}/safe.ico`,s).href;return{item:h,title:`${v} - ${y}`,link:f,description:_(`meta[name="ColumnDescription"]`).prop(`content`),language:`zh`,image:x,icon:S,logo:S,subtitle:y,author:v,allowEmpty:!0}};export{l as processZxfkItems};
//# sourceMappingURL=util-b9JKD7Cx.js.map