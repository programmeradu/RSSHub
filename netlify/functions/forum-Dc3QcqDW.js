import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:[`/tieba/forum/good/:kw/:cid?/:sortBy?`,`/tieba/forum/:kw/:sortBy?`],categories:[`bbs`],example:`/baidu/tieba/forum/good/女图`,parameters:{kw:`吧名`,cid:"精品分类，默认为 `0`（全部分类），如果不传 `cid` 则获取全部分类",sortBy:"排序方式：`created`, `replied`。默认为 `created`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`精品帖子`,maintainers:[`u3u`],handler:l};async function l(t){let{kw:c,cid:l=`0`,sortBy:u=`created`}=t.req.param(),d={kw:encodeURIComponent(c)};t.req.path.includes(`good`)&&(d.tab=`good`),l&&(d.cid=l);let{data:f}=await i(`https://tieba.baidu.com/f`,{headers:{Referer:`https://tieba.baidu.com/`},searchParams:d}),p=s(f)(`code[id="pagelet_html_frs-list/pagelet/thread_list"]`).contents().filter(e=>e.nodeType===`8`),m=s(p.prevObject[0].data),h=m(`#thread_list > .j_thread_list[data-field]`).toArray().map(t=>{let i=m(t),{id:s,author_name:c}=i.data(`field`),l=u===`created`?i.find(`.is_show_create_time`).text().trim():i.find(`.threadlist_reply_date`).text().trim(),d=i.find(`a.j_th_tit`).text().trim(),f=i.find(`.threadlist_abs`).text().trim(),p=i.find(`.threadlist_media img`).toArray().map(e=>{let t=m(e);return`<img src="${t.attr(`bpic`)}">`}).join(``);return{title:d,description:n(o.join(e,`templates/forum-def759a1.art`),{details:f,medias:p,author_name:c}),pubDate:a(r(l,[`HH:mm`,`M-D`,`YYYY-MM`],!0),8),link:`https://tieba.baidu.com/p/${s}`}});return{title:`${c}吧`,description:s(f)(`meta[name="description"]`).attr(`content`),link:`https://tieba.baidu.com/f?kw=${encodeURIComponent(c)}`,item:h}}export{c as route};
//# sourceMappingURL=forum-Dc3QcqDW.js.map