import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={path:`/news/:type?`,categories:[`university`],example:`/gmu/news/gyyw`,parameters:{type:{description:`新闻类型，见下表，默认为 gyyw`,options:[{value:`gyyw`,label:`赣医要闻`},{value:`ybdt`,label:`院部动态`},{value:`mtgy`,label:`媒体赣医`},{value:`xsjz`,label:`学术讲座`}],default:`gyyw`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`gmu.cn/xwzx/gyyw.htm`,`gmu.cn/`],target:`/news/gyyw`},{source:[`gmu.cn/xwzx/ybdt.htm`],target:`/news/ybdt`},{source:[`gmu.cn/xwzx/mtgy.htm`],target:`/news/mtgy`},{source:[`gmu.cn/xwzx/xsjz.htm`],target:`/news/xsjz`}],name:`新闻中心`,maintainers:[`FrankFahey`],url:`gmu.cn/xwzx/gyyw.htm`,handler:a};async function a(i){let a=i.req.param?.(`type`)||`gyyw`,o={gyyw:{title:`赣医要闻`,url:`/xwzx/gyyw.htm`},ybdt:{title:`院部动态`,url:`/xwzx/ybdt.htm`},mtgy:{title:`媒体赣医`,url:`/xwzx/mtgy.htm`},xsjz:{title:`学术讲座`,url:`/xwzx/xsjz.htm`}}[a]||{title:`赣医要闻`,url:`/xwzx/gyyw.htm`},s=`https://gmu.cn${o.url}`,c=await n(s,{https:{rejectUnauthorized:!1}}),l=r(c.data),u=l(`.list ul li`),d=await Promise.all(u.toArray().map(async i=>{let a=l(i),o=a.find(`a`),c=a.find(`i`).text(),u=o.attr(`href`),d=o.text().trim();if(!u||!d)return null;let f=t(c);if(!f)return null;let p=new URL(u,s).href;return await e.tryGet(`gmu:news:${p}`,async()=>{try{let e=await n(p,{https:{rejectUnauthorized:!1}}),t=r(e.data),i=t(`.v_news_content`).html()||`暂无详细内容`;return{title:d,link:p,pubDate:f,description:i}}catch{return{title:d,link:p,pubDate:f,description:`暂无详细内容`}}})})),f=d.filter(e=>e!==null);return{title:`赣南医科大学 - ${o.title}`,link:s,description:`赣南医科大学${o.title}`,item:f}}export{a as handler,i as route};
//# sourceMappingURL=news-Cagl0pbU.js.map