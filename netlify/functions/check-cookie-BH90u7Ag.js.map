{"version":3,"file":"check-cookie-BH90u7Ag.js","names":["apiRoute: APIRoute","cacheIn","ofetch"],"sources":["../../lib/routes/bilibili/check-cookie.ts"],"sourcesContent":["import { APIRoute } from '@/types';\r\nimport cacheIn from './cache';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const apiRoute: APIRoute = {\r\n    path: '/check-cookie',\r\n    description: '检查 bilibili cookie 是否有效',\r\n    maintainers: ['DIYgod'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const cookie = await cacheIn.getCookie();\r\n\r\n    if (!cookie) {\r\n        return {\r\n            code: -1,\r\n        };\r\n    }\r\n\r\n    const response = await ofetch(`https://api.bilibili.com/x/web-interface/nav`, {\r\n        headers: {\r\n            Referer: `https://space.bilibili.com/1/`,\r\n            Cookie: cookie as string,\r\n        },\r\n    });\r\n\r\n    return {\r\n        code: response.code === 0 && !!response.data.mid ? 0 : -1,\r\n    };\r\n}\r\n"],"mappings":"kcAIA,MAAaA,EAAqB,CAC9B,KAAM,gBACN,YAAa,0BACb,YAAa,CAAC,UACd,WAGJ,eAAe,GAAU,CACrB,IAAM,EAAS,MAAMC,EAAQ,YAE7B,GAAI,CAAC,EACD,MAAO,CACH,KAAM,IAId,IAAM,EAAW,MAAMC,EAAO,+CAAgD,CAC1E,QAAS,CACL,QAAS,gCACT,OAAQ,KAIhB,MAAO,CACH,KAAM,EAAS,OAAS,GAAO,EAAS,KAAK,IAAM,EAAI"}