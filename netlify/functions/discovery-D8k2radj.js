import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{ViewType as e}from"./types-A5bA50Mg.js";import"./config-not-found-BVqhRP9D.js";import{CONFIG_OPTIONS as t,generatePostDataItem as n,getClient as r,postFilter as i}from"./utils-BNbXOZXR.js";const a=async e=>{let t=Number.parseInt(e.req.query(`limit`)??`20`,10),a=r(),o=await a.getRecommendedTimeline({limit:t}),s=await a.getPersonas({personaIds:o?.posts?.map(e=>e.personaId)??[]});return{title:`発見`,link:`https://mixi.social/home/discovery`,image:`https://mixi.social/_next/static/media/image_logo.8bb36f11.svg`,item:o?.posts?.filter(i).map(e=>{let t=s.personas.find(t=>t.personaId===e.personaId);return{title:`@${t?.name}`,...n(e,s.personas)}})??[]}},o={path:`/discovery`,name:`発見`,categories:[`social-media`],example:`/mixi2/discovery`,features:{supportRadar:!0,requireConfig:t},radar:[{source:[`mixi.social/home/discovery`],target:`/discovery`,title:`発見`}],view:e.SocialMedia,handler:a,maintainers:[`KarasuShin`]};export{o as route};
//# sourceMappingURL=discovery-D8k2radj.js.map