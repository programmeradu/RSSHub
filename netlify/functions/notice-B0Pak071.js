import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";const i={0:`全部`,1:`其他`,2:`规则变更`},a={path:`/notice/:type?`,categories:[`programming`],example:`/dangdang/notice/1`,parameters:{type:`公告分类，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`公告`,maintainers:[`353325487`],handler:o,description:`| 类型     | type |
| -------- | ---- |
| 全部      | 0    |
| 其他      | 1    |
| 规则变更   | 2    |`};async function o(a){let o=a.req.param(`type`),s=`https://open.dangdang.com/op-api/developer-platform/document/menu/list?categoryId=3&type=${o>0?i[o]:``}`,c=await n({method:`get`,url:s}),l=c.data.data.documentMenu.map(e=>({title:e.title,description:e.type,documentId:e.documentId,source:`https://open.dangdang.com/op-api/developer-platform/document/info/get?document_id=${e.documentId}`,link:`https://open.dangdang.com/home/notice/message/1/${e.documentId}`,pubDate:r(t(e.modifyTime),8)})),u=await Promise.all(l.map(t=>e.tryGet(t.source,async()=>{let e=await n(t.source);return t.description=e.data.data.documentContentList[0].content,t})));return{title:`当当开放平台 - ${i[o]||i[0]}`,link:`https://open.dangdang.com/home/notice/message/1`,item:u}}export{a as route};
//# sourceMappingURL=notice-B0Pak071.js.map