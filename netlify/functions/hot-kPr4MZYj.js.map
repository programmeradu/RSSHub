{"version":3,"file":"hot-kPr4MZYj.js","names":["route: Route","got"],"sources":["../../lib/routes/douban/event/hot.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\n\r\nexport const route: Route = {\r\n    path: '/event/hot/:locationId',\r\n    categories: ['social-media'],\r\n    example: '/douban/event/hot/118172',\r\n    parameters: { locationId: '位置 id, [同城首页](https://www.douban.com/location)打开控制台执行 `window.__loc_id__` 获取' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '热门同城活动',\r\n    maintainers: ['xyqfer'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { locationId = 0 } = ctx.req.param();\r\n    const referer = 'https://m.douban.com/app_topic/event_hot';\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url: `https://m.douban.com/rexxar/api/v2/subject_collection/event_hot/items?os=ios&for_mobile=1&callback=&start=0&count=20&loc_id=${locationId}`,\r\n        headers: {\r\n            Referer: referer,\r\n        },\r\n    });\r\n\r\n    return {\r\n        title: `豆瓣同城-热门活动-${locationId}`,\r\n        link: referer,\r\n        item: response.data.subject_collection_items.map(({ title, url, cover, subtype, info, price_range }) => {\r\n            const description = `<img src=\"${cover.url}\"><br>\r\n              ${info}/${subtype}/${price_range}\r\n            `;\r\n\r\n            return {\r\n                title,\r\n                description,\r\n                link: url,\r\n            };\r\n        }),\r\n    };\r\n}\r\n"],"mappings":"gOAGA,MAAaA,EAAe,CACxB,KAAM,yBACN,WAAY,CAAC,gBACb,QAAS,2BACT,WAAY,CAAE,WAAY,gFAC1B,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,SACN,YAAa,CAAC,UACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,aAAa,GAAM,EAAI,IAAI,QAC7B,EAAU,2CAEV,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,+HAA+H,IACpI,QAAS,CACL,QAAS,KAIjB,MAAO,CACH,MAAO,aAAa,IACpB,KAAM,EACN,KAAM,EAAS,KAAK,yBAAyB,KAAK,CAAE,QAAO,MAAK,QAAO,UAAS,OAAM,iBAAkB,CACpG,IAAM,EAAc,aAAa,EAAM,IAAI;gBACvC,EAAK,GAAG,EAAQ,GAAG,EAAY;cAGnC,MAAO,CACH,QACA,cACA,KAAM"}