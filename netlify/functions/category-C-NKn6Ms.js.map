{"version":3,"file":"category-C-NKn6Ms.js","names":[],"sources":["../../lib/routes/jin10/category.ts"],"sourcesContent":["import { Route, ViewType } from '@/types';\r\n\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\nimport { config } from '@/config';\r\n\r\nexport const route: Route = {\r\n    path: '/category/:id',\r\n    categories: ['finance'],\r\n    view: ViewType.Notifications,\r\n    example: '/jin10/category/36',\r\n    parameters: { id: '分类id，见下表' },\r\n    description: `\r\n| Name           | ID   |\r\n|----------------|------|\r\n| 贵金属         | 1    |\r\n| 黄金           | 2    |\r\n| 白银           | 3    |\r\n| 钯金           | 4    |\r\n| 铂金           | 5    |\r\n| 石油           | 6    |\r\n| WTI原油        | 7    |\r\n| 布伦特原油     | 8    |\r\n| 欧佩克         | 9    |\r\n| 页岩气         | 10   |\r\n| 原油市场报告   | 11   |\r\n| 外汇           | 12   |\r\n| 欧元           | 13   |\r\n| 英镑           | 14   |\r\n| 日元           | 15   |\r\n| 美元           | 16   |\r\n| 瑞郎           | 17   |\r\n| 人民币         | 18   |\r\n| 期货           | 36   |\r\n| 油脂油料       | 145  |\r\n| 钢矿           | 146  |\r\n| 煤炭           | 147  |\r\n| 化工           | 148  |\r\n| 有色           | 149  |\r\n| 谷物           | 150  |\r\n| 糖棉果蛋       | 151  |\r\n| 生猪           | 152  |\r\n| 碳排放         | 154  |\r\n| 数字货币       | 19   |\r\n| 数字人民币     | 107  |\r\n| 科技           | 22   |\r\n| 手机           | 23   |\r\n| 电动汽车       | 39   |\r\n| 芯片           | 40   |\r\n| 中国突破       | 41   |\r\n| 5G             | 42   |\r\n| 量子计算       | 43   |\r\n| 航空航天       | 158  |\r\n| 元宇宙         | 165  |\r\n| 人工智能       | 168  |\r\n| 地缘局势       | 24   |\r\n| 缅甸局势       | 44   |\r\n| 印巴纷争       | 45   |\r\n| 中东风云       | 46   |\r\n| 阿富汗局势     | 155  |\r\n| 俄乌冲突       | 167  |\r\n| 人物           | 25   |\r\n| 鲍威尔         | 47   |\r\n| 马斯克         | 48   |\r\n| 拉加德         | 49   |\r\n| 特朗普         | 50   |\r\n| 拜登           | 51   |\r\n| 巴菲特         | 157  |\r\n| 央行           | 26   |\r\n| 美联储         | 53   |\r\n| 中国央行       | 54   |\r\n| 欧洲央行       | 55   |\r\n| 日本央行       | 56   |\r\n| 货币政策调整   | 137  |\r\n| 英国央行       | 141  |\r\n| 澳洲联储       | 159  |\r\n| 新西兰联储     | 160  |\r\n| 加拿大央行     | 161  |\r\n| 美股           | 27   |\r\n| 财报           | 59   |\r\n| Reddit散户动态 | 60   |\r\n| 个股动态       | 108  |\r\n| 港股           | 28   |\r\n| 美股回港       | 61   |\r\n| 交易所动态     | 62   |\r\n| 指数动态       | 63   |\r\n| 个股动态       | 109  |\r\n| A股            | 29   |\r\n| 美股回A        | 64   |\r\n| 券商分析       | 65   |\r\n| 板块异动       | 66   |\r\n| 大盘动态       | 67   |\r\n| 南北资金       | 68   |\r\n| 亚盘动态       | 69   |\r\n| IPO信息        | 70   |\r\n| 个股动态       | 110  |\r\n| 北交所         | 166  |\r\n| 基金           | 30   |\r\n| 投行机构       | 31   |\r\n| 标普、惠誉、穆迪 | 71  |\r\n| 美银           | 72   |\r\n| 高盛           | 112  |\r\n| 疫情           | 32   |\r\n| 疫苗动态       | 73   |\r\n| 确诊数据       | 74   |\r\n| 新冠药物       | 113  |\r\n| 债券           | 33   |\r\n| 政策           | 34   |\r\n| 中国           | 75   |\r\n| 美国           | 76   |\r\n| 欧盟           | 77   |\r\n| 日本           | 78   |\r\n| 贸易、关税     | 79   |\r\n| 碳中和         | 80   |\r\n| 中国香港       | 81   |\r\n| 英国           | 120  |\r\n| 房地产动态     | 156  |\r\n| 经济数据       | 35   |\r\n| 中国           | 82   |\r\n| 美国           | 83   |\r\n| 欧盟           | 84   |\r\n| 日本           | 85   |\r\n| 公司           | 37   |\r\n| 特斯拉         | 86   |\r\n| 苹果           | 90   |\r\n| 独角兽         | 91   |\r\n| 谷歌           | 92   |\r\n| 华为           | 93   |\r\n| 阿里巴巴       | 94   |\r\n| 小米           | 95   |\r\n| 字节跳动       | 116  |\r\n| 腾讯           | 117  |\r\n| 微软           | 118  |\r\n| 百度           | 119  |\r\n| 美团           | 162  |\r\n| 滴滴           | 163  |\r\n| 中国恒大       | 164  |\r\n| 灾害事故       | 38   |\r\n| 地震           | 96   |\r\n| 爆炸           | 97   |\r\n| 海啸           | 98   |\r\n| 寒潮           | 99   |\r\n| 洪涝           | 100  |\r\n| 火灾           | 101  |\r\n| 矿难           | 102  |\r\n| 枪击案         | 103  |\r\n`,\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['jin10.com/'],\r\n            target: '',\r\n        },\r\n    ],\r\n    name: '外汇',\r\n    maintainers: ['laampui'],\r\n    handler,\r\n    url: 'jin10.com/',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n    const data = await cache.tryGet(\r\n        'jin10:aa:${category}',\r\n        async () => {\r\n            const { data: response } = await got('https://4a735ea38f8146198dc205d2e2d1bd28.z3c.jin10.com/flash', {\r\n                headers: {\r\n                    'x-app-id': 'bVBF4FyRTn5NJF5n',\r\n                    'x-version': '1.0',\r\n                },\r\n                searchParams: {\r\n                    channel: '-8200',\r\n                    vip: '1',\r\n                    classify: `[${id}]`,\r\n                },\r\n            });\r\n            return response.data.filter((item) => item.type !== 1);\r\n        },\r\n        config.cache.routeExpire,\r\n        false\r\n    );\r\n\r\n    const item = data.map((item) => {\r\n        const titleMatch = item.data.content.match(/^【(.*?)】/);\r\n        let title;\r\n        let content = item.data.content;\r\n        if (titleMatch) {\r\n            title = titleMatch[1];\r\n            content = content.replace(titleMatch[0], '');\r\n        } else {\r\n            title = item.data.vip_title || item.data.content;\r\n        }\r\n\r\n        return {\r\n            title,\r\n            description: art(path.join(__dirname, 'templates/description.art'), {\r\n                content,\r\n                pic: item.data.pic,\r\n            }),\r\n            pubDate: timezone(parseDate(item.time), 8),\r\n            guid: `jin10:category:${item.id}`,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: '金十数据',\r\n        link: 'https://www.jin10.com/',\r\n        item,\r\n    };\r\n}\r\n"],"mappings":"2iBAUA,MAAa,EAAe,CACxB,KAAM,gBACN,WAAY,CAAC,WACb,KAAM,EAAS,cACf,QAAS,qBACT,WAAY,CAAE,GAAI,YAClB,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAuIb,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,cACT,OAAQ,KAGhB,KAAM,KACN,YAAa,CAAC,WACd,UACA,IAAK,cAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MACnB,EAAO,MAAM,EAAM,OACrB,uBACA,SAAY,CACR,GAAM,CAAE,KAAM,GAAa,MAAM,EAAI,+DAAgE,CACjG,QAAS,CACL,WAAY,mBACZ,YAAa,OAEjB,aAAc,CACV,QAAS,QACT,IAAK,IACL,SAAU,IAAI,EAAG,MAGzB,OAAO,EAAS,KAAK,OAAQ,GAAS,EAAK,OAAS,IAExD,EAAO,MAAM,YACb,IAGE,EAAO,EAAK,IAAK,GAAS,CAC5B,IAAM,EAAa,EAAK,KAAK,QAAQ,MAAM,YACvC,EACA,EAAU,EAAK,KAAK,QAQxB,OAPI,GACA,EAAQ,EAAW,GACnB,EAAU,EAAQ,QAAQ,EAAW,GAAI,KAEzC,EAAQ,EAAK,KAAK,WAAa,EAAK,KAAK,QAGtC,CACH,QACA,YAAa,EAAI,EAAA,KAAA,EAAA,sCAAmD,CAChE,UACA,IAAK,EAAK,KAAK,MAEnB,QAAS,EAAS,EAAU,EAAK,MAAO,GACxC,KAAM,kBAAkB,EAAK,QAIrC,MAAO,CACH,MAAO,OACP,KAAM,yBACN"}