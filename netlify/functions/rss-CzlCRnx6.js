import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:category?`,categories:[`shopping`],example:`/thegadgetflow/cool-gadgets-gifts`,parameters:{category:`category name, can be found in url`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`thegadgetflow.com/categories/:category`],target:`/:category`}],name:`Category`,maintainers:[`EthanWng97`],handler:l};async function l(t){let c=`https://thegadgetflow.com`,l=`/wp-json/wp/v2/categories`,u=t.req.param(`category`)||``,d;u&&(d=await n.tryGet(`${c}${l}`,async()=>{let{data:e}=await a(`${c}${l}`,{searchParams:{slug:u}});if(!e||e.length===0)throw Error(`Category "${u}" not found`);return e[0]}));let f=d?.id,p=d?.name,m=d?.link,h=`${c}/wp-json/wp/v2/posts`,g=await a(h,{searchParams:{per_page:t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):10,_embed:``,...f&&{categories:f}}}),_=g.data.map(t=>{let n=t._embedded?.[`wp:featuredmedia`]?.find(e=>e.id===t.featured_media),a=n?.source_url,c=n?.alt_text||n?.title?.rendered,l;n?.caption?.rendered&&(l=s(n?.caption?.rendered));let u={title:t.title.rendered,description:r(o.join(e,`templates/description-df9608a2.art`),{content:t.content.rendered,image:a,altText:c,caption:l?.text()||``}),link:t.link,pubDate:i(t.date_gmt),updated:i(t.modified_gmt),author:t._embedded.author[0].name};return u});return{title:p?`Gadget Flow - ${p}`:`Gadget Flow`,link:m||`${c}/${u}`,item:_}}export{c as route};
//# sourceMappingURL=rss-CzlCRnx6.js.map