import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./cache-kimkMTWJ.js";import"./parse-date-Bgabdhlb.js";import{ofetch_default as e}from"./ofetch-Bzt0BXUH.js";import{ProcessFeed as t,getCategoryBrief as n,parseList as r}from"./utils-BUpZr0KY.js";const i={path:`/trending/:category/:type`,categories:[`programming`],example:`/juejin/trending/ios/monthly`,parameters:{category:{description:`分类名`,options:[{value:`android`,label:`Android`},{value:`frontend`,label:`前端`},{value:`ios`,label:`iOS`},{value:`backend`,label:`后端`},{value:`design`,label:`设计`},{value:`product`,label:`产品`},{value:`freebie`,label:`工具资源`},{value:`article`,label:`阅读`},{value:`ai`,label:`人工智能`},{value:`devops`,label:`运维`},{value:`all`,label:`全部`}],default:`all`},type:{description:`类型`,options:[{value:`weekly`,label:`本周最热`},{value:`monthly`,label:`本月最热`},{value:`historical`,label:`历史最热`}],default:`weekly`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`热门`,maintainers:[`moaix`],handler:a};async function a(i){let{category:a,type:o}=i.req.param(),s=``,c=``,l=`recommended`,u=await n(),d=u.find(e=>e.category_url===a);d&&(s=d.category_id,c=d.category_name,l=d.category_url);let f={monthly:{period:`month`,title:`本月`,link:`monthly_hottest`,sort_type:30},weekly:{period:`week`,title:`本周`,link:`weekly_hottest`,url:`get_entry_by_period`,sort_type:7},historical:{period:``,title:`历史`,link:`hottest`,sort_type:0}},p=f[o],m=`掘金${c}${p.title}最热`,h=`https://juejin.im/${l}?sort=${p.link}`,g=`https://api.juejin.cn/recommend_api/v1/article/recommend_all_feed`,_={cursor:`0`,id_type:2,limit:20,sort_type:p.sort_type};l!==`recommended`&&(g=`https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed`,_.cate_id=s);let v=await e(g,{method:`POST`,body:_}),y=v.data;(a===`all`||a===`devops`||a===`product`||a===`design`)&&(y=v.data.filter(e=>e.item_type===2).map(e=>e.item_info));let b=r(y),x=await t(b);return{title:m,link:h,item:x}}export{i as route};
//# sourceMappingURL=trending-BQDOt99_.js.map