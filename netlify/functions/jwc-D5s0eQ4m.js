import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={path:`/jwc`,categories:[`university`],example:`/nankai/jwc`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jwc.nankai.edu.cn/tzgg/list.htm`],target:`/jwc`}],name:`教务处通知公告`,maintainers:[`vicguo0724`],description:`南开大学教务处通知公告`,url:`jwc.nankai.edu.cn`,handler:async()=>{let a=`https://jwc.nankai.edu.cn`,{data:o}=await n(`${a}/tzgg/list.htm`),s=i(o),c=s(`.page-con-list-news .item`).toArray().map(e=>{let n=s(e),i=n.find(`.t a`),o=n.find(`.d .d-d`),c=n.find(`.d .d-m`),l=o.text().trim(),u=c.text().trim(),d=`${u}/${l}`,f=i.attr(`href`);return f&&!f.startsWith(`http`)&&(f=`${a}${f}`),{title:i.text().trim(),link:f,pubDate:r(t(d,`YYYY/MM/DD`),8)}}).filter(e=>e.link),l=await Promise.all(c.map(o=>e.tryGet(o.link,async()=>{try{let{data:e}=await n(o.link),s=i(e),c=s(`.page-news-souse`).text(),l=c.match(/发布时间：(\d{4}-\d{2}-\d{2})/);l&&(o.pubDate=r(t(l[1]),8));let u=s(`.page-news-con .wp_articlecontent`);u.length>0?(u.find(`a`).each((e,t)=>{let n=s(t),r=n.attr(`href`);r&&!r.startsWith(`http`)&&(r.startsWith(`/`)?n.attr(`href`,`${a}${r}`):n.attr(`href`,`${a}/${r}`))}),u.find(`.wp_pdf_player`).each((e,t)=>{let n=s(t),r=n.attr(`pdfsrc`),i=(s(t).attr(`sudyfile-attr`)||`{}`).replaceAll(`'`,`"`),o=JSON.parse(i),c=o.title||`未命名文件.pdf`;if(r){let e=r;e.startsWith(`http`)||(e=`${a}${e}`),n.replaceWith(`<p><a href="${e}" target="_blank">${c}</a></p>`)}}),o.description=u.html()):o.description=`无法获取内容详情`}catch{o.description=`获取内容失败`}return o})));return{title:`南开大学教务处-通知公告`,link:`${a}/tzgg/list.htm`,item:l}}};export{a as route};
//# sourceMappingURL=jwc-D5s0eQ4m.js.map