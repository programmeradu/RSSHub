import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import i from"node:path";import{load as a}from"cheerio";t();const o={path:`/call-for-paper/:subject`,categories:[`journal`],example:`/sciencedirect/call-for-paper/education`,parameters:{subject:`学科分类，例如“education”`},radar:[{source:[`sciencedirect.com`]}],name:`Call for Papers`,maintainers:[`etShaw-zh`],handler:s,url:`sciencedirect.com/browse/calls-for-papers`,description:"`sciencedirect.com/browse/calls-for-papers?subject=education` -> `/sciencedirect/call-for-paper/education`"};async function s(t){let{subject:o=``}=t.req.param(),s=`https://www.sciencedirect.com/browse/calls-for-papers?subject=${o}`,c={accept:`text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7`,"user-agent":`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36`},l=await r(s,{headers:c}),u=a(l.body),d=u(`script[data-iso-key="_0"]`).text();if(!d)throw Error(`Cannot find the script with data-iso-key="_0"`);let f;try{f=JSON.parse(JSON.parse(d))}catch(e){throw Error(`Failed to parse embedded script JSON: ${e.message}`)}let p=f?.callsForPapers?.list||[];if(!p.length)throw Error(`No Calls for Papers found`);let m=p.map(t=>{let r=`https://www.sciencedirect.com/special-issue/${t.contentId}/${t.url}`,a=n(i.join(e,`templates/description-23db822e.art`),{summary:t.summary,submissionDeadline:t.submissionDeadline,displayName:t.journal.displayName,impactFactor:t.journal.impactFactor,citeScore:t.journal.citeScore});return{title:t.title,author:`${t.journal.displayName} (IF: ${t.journal.impactFactor})`,link:r,description:a,pubDate:t.submissionDeadline||``}});return{title:`ScienceDirect Calls for Papers - ${o}`,link:s,description:`Calls for Papers on ScienceDirect for subject: ${o}`,item:m}}export{o as route};
//# sourceMappingURL=call-for-paper-DZiAazhD.js.map