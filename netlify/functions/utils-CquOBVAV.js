import{got_default as e}from"./got-CdvI2yKX.js";import{load as t}from"cheerio";const n=`https://www.hpoi.net`,r={character:{url:`${n}/hobby/all?order={order}&r18=-1&charactar={id}`,title:`角色周边`},work:{url:`${n}/hobby/all?order={order}&r18=-1&works={id}`,title:`作品周边`},overview:{url:`${n}/works/{id}`,title:`周边总览`},all:{url:`${n}/hobby/all?order={order}&r18=-1`,title:`全部周边`}},i=async(i,a,o)=>{let s=r[i].url.replace(/{id}/,a).replace(/{order}/,o||`add`),c=await e({method:`get`,url:s,headers:{Referer:n}}),l=t(c.data);if(i===`work`){let i=r.overview.url.replace(/{id}/,a),u=await e({method:`get`,url:i,headers:{Referer:n}}),d=t(u.data),f=d(`.company-ibox a.hpoi-btn-border.hpoi-btn-more`).attr(`href`);if(f){let r=f.match(/modal\/taobao\/more\/(\d+)/)?.[1];r&&(s=`${n}/hobby/all?order=${o||`add`}&r18=-1&works=${r}`,c=await e({method:`get`,url:s,headers:{Referer:n}}),l=t(c.data))}}return{title:`Hpoi 手办维基 - ${r[i].title}${a?` ${a}`:``}`,link:s,item:l(`.hpoi-glyphicons-list li`).toArray().map(e=>(e=l(e),{title:e.find(`.hpoi-detail-grid-title a`).text(),link:n+`/`+e.find(`a`).attr(`href`),description:`<img src="${e.find(`img`).attr(`src`).replace(`/s/`,`/n/`)}">${e.find(`.hpoi-detail-grid-info`).html().replaceAll(`span>`,`p>`)}`}))}};export{i as ProcessFeed};
//# sourceMappingURL=utils-CquOBVAV.js.map