{"version":3,"file":"top-PR8sQ8Q7.js","names":[],"sources":["../../lib/routes/baidu/top.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/top/:board?',\r\n    categories: ['other'],\r\n    example: '/baidu/top',\r\n    parameters: { board: '榜单，默认为 `realtime`' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '热搜榜单',\r\n    maintainers: ['xyqfer'],\r\n    handler,\r\n    description: `| 热搜榜   | 小说榜 | 电影榜 | 电视剧榜 | 汽车榜 | 游戏榜 |\r\n| -------- | ------ | ------ | -------- | ------ | ------ |\r\n| realtime | novel  | movie  | teleplay | car    | game   |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { board = 'realtime' } = ctx.req.param();\r\n    const link = `https://top.baidu.com/board?tab=${board}`;\r\n    const { data: response } = await got(link);\r\n\r\n    const $ = load(response);\r\n\r\n    const { data } = JSON.parse(\r\n        $('#sanRoot')\r\n            .contents()\r\n            .filter((e) => e.nodeType === 8)\r\n            .prevObject[0].data.match(/s-data:(.*)/)[1]\r\n    );\r\n\r\n    const items = data.cards[0].content.map((item) => ({\r\n        title: item.word,\r\n        description: art(path.join(__dirname, 'templates/top.art'), {\r\n            item,\r\n        }),\r\n        link: item.rawUrl,\r\n    }));\r\n\r\n    return {\r\n        title: `${data.curBoardName} - 百度热搜`,\r\n        description: $('meta[name=\"description\"]').attr('content'),\r\n        link,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+WAOA,MAAa,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,SACb,QAAS,aACT,WAAY,CAAE,MAAO,qBACrB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,UACd,UACA,YAAa;;8DAKjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,QAAQ,YAAe,EAAI,IAAI,QACjC,EAAO,mCAAmC,IAC1C,CAAE,KAAM,GAAa,MAAM,EAAI,GAE/B,EAAI,EAAK,GAET,CAAE,QAAS,KAAK,MAClB,EAAE,YACG,WACA,OAAQ,GAAM,EAAE,WAAa,GAC7B,WAAW,GAAG,KAAK,MAAM,eAAe,IAG3C,EAAQ,EAAK,MAAM,GAAG,QAAQ,IAAK,IAAU,CAC/C,MAAO,EAAK,KACZ,YAAa,EAAI,EAAA,KAAA,EAAA,8BAA2C,CACxD,SAEJ,KAAM,EAAK,UAGf,MAAO,CACH,MAAO,GAAG,EAAK,aAAa,SAC5B,YAAa,EAAE,4BAA4B,KAAK,WAChD,OACA,KAAM"}