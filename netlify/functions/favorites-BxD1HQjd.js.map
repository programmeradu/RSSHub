{"version":3,"file":"favorites-BxD1HQjd.js","names":["route: Route","EhAPI","ConfigNotFoundError","cache"],"sources":["../../lib/routes/ehentai/favorites.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport EhAPI from './ehapi';\r\nimport ConfigNotFoundError from '@/errors/types/config-not-found';\r\n\r\nexport const route: Route = {\r\n    path: '/favorites/:favcat?/:order?/:page?/:routeParams?',\r\n    categories: ['picture'],\r\n    example: '/ehentai/favorites/0/posted/0/bittorrent=true&embed_thumb=false',\r\n    parameters: {\r\n        favcat: 'Favorites folder number',\r\n        order: '`posted`(Sort by gallery release time) , `favorited`(Sort by time added to favorites)',\r\n        page: 'Page number, set 0 to get latest',\r\n        routeParams: 'Additional parameters, see the table above',\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: true,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Favorites',\r\n    maintainers: ['yindaheng98', 'syrinka'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    if (!EhAPI.has_cookie) {\r\n        throw new ConfigNotFoundError('Ehentai favorites RSS is disabled due to the lack of <a href=\"https://docs.rsshub.app/deploy/config#route-specific-configurations\">relevant config</a>');\r\n    }\r\n    const favcat = ctx.req.param('favcat') ? Number.parseInt(ctx.req.param('favcat')) : 0;\r\n    const page = ctx.req.param('page');\r\n    const routeParams = new URLSearchParams(ctx.req.param('routeParams'));\r\n    const bittorrent = routeParams.get('bittorrent') || false;\r\n    const embed_thumb = routeParams.get('embed_thumb') || false;\r\n    const inline_set = ctx.req.param('order') === 'posted' ? 'fs_p' : 'fs_f';\r\n    const items = await EhAPI.getFavoritesItems(cache, favcat, inline_set, page, bittorrent, embed_thumb);\r\n\r\n    return EhAPI.from_ex\r\n        ? {\r\n              title: 'ExHentai Favorites',\r\n              link: `https://exhentai.org/favorites.php?favcat=${favcat}&inline_set=${inline_set}`,\r\n              item: items,\r\n          }\r\n        : {\r\n              title: 'E-Hentai Favorites',\r\n              link: `https://e-hentai.org/favorites.php?favcat=${favcat}&inline_set=${inline_set}`,\r\n              item: items,\r\n          };\r\n}\r\n"],"mappings":"2ZAKA,MAAaA,EAAe,CACxB,KAAM,mDACN,WAAY,CAAC,WACb,QAAS,kEACT,WAAY,CACR,OAAQ,0BACR,MAAO,wFACP,KAAM,mCACN,YAAa,8CAEjB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,YACN,YAAa,CAAC,cAAe,WAC7B,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAI,CAACC,EAAM,WACP,MAAM,IAAIC,EAAoB,0JAElC,IAAM,EAAS,EAAI,IAAI,MAAM,UAAY,OAAO,SAAS,EAAI,IAAI,MAAM,WAAa,EAC9E,EAAO,EAAI,IAAI,MAAM,QACrB,EAAc,IAAI,gBAAgB,EAAI,IAAI,MAAM,gBAChD,EAAa,EAAY,IAAI,eAAiB,GAC9C,EAAc,EAAY,IAAI,gBAAkB,GAChD,EAAa,EAAI,IAAI,MAAM,WAAa,SAAW,OAAS,OAC5D,EAAQ,MAAMD,EAAM,kBAAkBE,EAAO,EAAQ,EAAY,EAAM,EAAY,GAEzF,OAAOF,EAAM,QACP,CACI,MAAO,qBACP,KAAM,6CAA6C,EAAO,cAAc,IACxE,KAAM,GAEV,CACI,MAAO,qBACP,KAAM,6CAA6C,EAAO,cAAc,IACxE,KAAM"}