{"version":3,"file":"utils-Ct90p35-.js","names":["got"],"sources":["../../lib/routes/36kr/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst rootUrl = 'https://www.36kr.com';\r\n\r\nconst ProcessItem = (item, tryGet) =>\r\n    tryGet(item.link, async () => {\r\n        const detailResponse = await got({\r\n            method: 'get',\r\n            url: item.link,\r\n        });\r\n\r\n        const cipherTextList = detailResponse.data.match(/{\"state\":\"(.*)\",\"isEncrypt\":true}/) ?? [];\r\n\r\n        if (cipherTextList.length === 0) {\r\n            const $ = load(detailResponse.body);\r\n            item.description = $('div.articleDetailContent').html();\r\n        } else {\r\n            const key = CryptoJS.enc.Utf8.parse('efabccee-b754-4c');\r\n            const content = JSON.parse(\r\n                CryptoJS.AES.decrypt(cipherTextList[1], key, {\r\n                    mode: CryptoJS.mode.ECB,\r\n                    padding: CryptoJS.pad.Pkcs7,\r\n                })\r\n                    .toString(CryptoJS.enc.Utf8)\r\n                    .toString()\r\n            ).articleDetail.articleDetailData.data;\r\n            item.description = content.widgetContent;\r\n        }\r\n\r\n        return item;\r\n    });\r\n\r\nexport { rootUrl, ProcessItem };\r\n"],"mappings":"wGAIA,MAAM,EAAU,uBAEV,GAAe,EAAM,IACvB,EAAO,EAAK,KAAM,SAAY,CAC1B,IAAM,EAAiB,MAAMA,EAAI,CAC7B,OAAQ,MACR,IAAK,EAAK,OAGR,EAAiB,EAAe,KAAK,MAAM,sCAAwC,GAEzF,GAAI,EAAe,SAAW,EAAG,CAC7B,IAAM,EAAI,EAAK,EAAe,MAC9B,EAAK,YAAc,EAAE,4BAA4B,WAC9C,CACH,IAAM,EAAM,EAAS,IAAI,KAAK,MAAM,oBAC9B,EAAU,KAAK,MACjB,EAAS,IAAI,QAAQ,EAAe,GAAI,EAAK,CACzC,KAAM,EAAS,KAAK,IACpB,QAAS,EAAS,IAAI,QAErB,SAAS,EAAS,IAAI,MACtB,YACP,cAAc,kBAAkB,KAClC,EAAK,YAAc,EAAQ,cAG/B,OAAO"}