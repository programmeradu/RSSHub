{"version":3,"file":"nioradio-BfixKczv.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/nio/nioradio.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { URLSearchParams } from 'node:url';\r\n\r\nexport const route: Route = {\r\n    path: '/nioradio/:albumid',\r\n    categories: ['multimedia'],\r\n    description: `\r\n:::tip\r\n**如何获取电台 ID？**\r\n打开蔚来 APP 后，点击“此地”→“NIO Radio”，找到自己想要转换为播客的专辑，分享后在生成的链接中找到\\`container_id=\\`后方的数字即可。\r\n常见电台 ID：\r\n| 电台名称          | 电台 ID |\r\n| :------------ | :---- |\r\n| 资讯充电站（早间版）    | 5     |\r\n| 资讯充电站（晚间版）    | 23    |\r\n| E 次元财经报       | 148   |\r\n| 塞萌不塞车         | 661   |\r\n| 乐行记           | 11    |\r\n| Weekend Dance | 547   |\r\n:::`,\r\n    example: '/nio/nioradio/5',\r\n    parameters: { albumid: '电台专辑 ID' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: true,\r\n        supportScihub: false,\r\n    },\r\n    name: 'NIO Radio',\r\n    maintainers: ['marcosteam'],\r\n    handler: async (ctx) => {\r\n        const { albumid } = ctx.req.param();\r\n        const req = new URLSearchParams({\r\n            albumId: albumid,\r\n            sorttype: '2',\r\n            pagenum: '1',\r\n            pagesize: '10',\r\n        }).toString();\r\n        const data = await ofetch('https://gateway-front-external.nio.com/moat/100914/v2/audio/list', {\r\n            method: 'POST',\r\n            body: req,\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n        });\r\n\r\n        const podcasts = data.result.dataList;\r\n        const podcastName = podcasts[0].albumName;\r\n        const podcastImage = podcasts[0].albumPic;\r\n\r\n        const items = podcasts.map((podcast) => ({\r\n            title: podcast.audioName,\r\n            link: `https://app.nio.com/app/radio/share/?item_type=1&item_id=${String(podcast.audioId).slice(1)}&container_id=${albumid}`,\r\n            pubDate: parseDate(podcast.onlineTime),\r\n            description: podcast.albumDesc,\r\n            author: podcast.host.join(', '),\r\n            itunes_item_image: podcast.albumPic,\r\n            itunes_duration: podcast.duration / 1000,\r\n            enclosure_url: podcast.aacPlayUrl192,\r\n            enclosure_length: podcast.aacFileSize192,\r\n            enclosure_type: 'audio/x-m4a',\r\n        }));\r\n        return {\r\n            title: `NIO Radio - ${podcastName}`,\r\n            link: 'https://www.nio.com',\r\n            itunes_author: podcasts[0].host.join(', '),\r\n            image: podcastImage,\r\n            item: items,\r\n        };\r\n    },\r\n};\r\n"],"mappings":"2QAKA,MAAaA,EAAe,CACxB,KAAM,qBACN,WAAY,CAAC,cACb,YAAa;;;;;;;;;;;;;KAcb,QAAS,kBACT,WAAY,CAAE,QAAS,WACvB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,YACN,YAAa,CAAC,cACd,QAAS,KAAO,IAAQ,CACpB,GAAM,CAAE,WAAY,EAAI,IAAI,QACtB,EAAM,IAAI,EAAgB,CAC5B,QAAS,EACT,SAAU,IACV,QAAS,IACT,SAAU,OACX,WACG,EAAO,MAAMC,EAAO,mEAAoE,CAC1F,OAAQ,OACR,KAAM,EACN,QAAS,CACL,eAAgB,uCAIlB,EAAW,EAAK,OAAO,SACvB,EAAc,EAAS,GAAG,UAC1B,EAAe,EAAS,GAAG,SAE3B,EAAQ,EAAS,IAAK,IAAa,CACrC,MAAO,EAAQ,UACf,KAAM,4DAA4D,OAAO,EAAQ,SAAS,MAAM,GAAG,gBAAgB,IACnH,QAAS,EAAU,EAAQ,YAC3B,YAAa,EAAQ,UACrB,OAAQ,EAAQ,KAAK,KAAK,MAC1B,kBAAmB,EAAQ,SAC3B,gBAAiB,EAAQ,SAAW,IACpC,cAAe,EAAQ,cACvB,iBAAkB,EAAQ,eAC1B,eAAgB,iBAEpB,MAAO,CACH,MAAO,eAAe,IACtB,KAAM,sBACN,cAAe,EAAS,GAAG,KAAK,KAAK,MACrC,MAAO,EACP,KAAM"}