{"version":3,"file":"guides-nJx_-MOl.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/dev.to/guides.ts"],"sourcesContent":["import { Data, DataItem, Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport cache from '@/utils/cache';\r\n\r\nexport const route: Route = {\r\n    path: '/guides',\r\n    categories: ['programming'],\r\n    example: '/dev.to/guides',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['dev.to/'],\r\n        },\r\n    ],\r\n    name: 'Trending Guides',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n    url: 'dev.to',\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://dev.to';\r\n    const response = await got(baseUrl);\r\n    const $ = load(response.data);\r\n\r\n    // Get all guide links from the widget-link-list\r\n    const guideLinks = $('.widget-link-list .crayons-link--contentful')\r\n        .toArray()\r\n        .map((element) => {\r\n            const $element = $(element);\r\n            return {\r\n                title: $element.text().trim(),\r\n                link: baseUrl + $element.attr('href'),\r\n            };\r\n        });\r\n\r\n    // Fetch content for each guide\r\n    const items = await Promise.all(\r\n        guideLinks.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const articleResponse = await got(item.link);\r\n                const $article = load(articleResponse.data);\r\n\r\n                // Extract article cover image\r\n                const coverImage = $article('.crayons-article__cover img').attr('src');\r\n\r\n                // Extract article content\r\n                const content = $article('.crayons-article__body').html() || '';\r\n\r\n                // Extract author info\r\n                const authorName = $article('.crayons-article__header__meta .fw-bold').first().text().trim();\r\n                const authorUrl = $article('.crayons-article__header__meta .fw-bold').first().attr('href');\r\n                const authorAvatar = $article('.crayons-article__header__meta .radius-full').attr('src');\r\n                // Extract publication date\r\n                const dateElement = $article('time[datetime]').first();\r\n                const dateString = dateElement.attr('datetime') || undefined;\r\n                const pubDate = dateString ? parseDate(dateString) : undefined;\r\n                // Extract tags\r\n                const tags = $article('.spec__tags .crayons-tag')\r\n                    .toArray()\r\n                    .map((tag) => $(tag).text().trim().replace('#', ''));\r\n\r\n                return {\r\n                    title: item.title,\r\n                    link: item.link,\r\n                    description: content,\r\n                    image: coverImage,\r\n                    pubDate,\r\n                    category: tags,\r\n                    author: [\r\n                        {\r\n                            name: authorName,\r\n                            url: authorUrl ? baseUrl + authorUrl : undefined,\r\n                            avatar: authorAvatar,\r\n                        },\r\n                    ],\r\n                } as DataItem;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: 'DEV.to - Trending Guides',\r\n        link: baseUrl,\r\n        description: 'Trending guides and resources from DEV.to',\r\n        language: 'en-us',\r\n        item: items,\r\n        icon: 'https://media2.dev.to/dynamic/image/width=32,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png',\r\n    } as Data;\r\n}\r\n"],"mappings":"wWAMA,MAAaA,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,eACb,QAAS,iBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,aAGjB,KAAM,kBACN,YAAa,CAAC,gBACd,UACA,IAAK,UAGT,eAAe,GAAU,CACrB,IAAM,EAAU,iBACV,EAAW,MAAMC,EAAI,GACrB,EAAI,EAAK,EAAS,MAGlB,EAAa,EAAE,+CAChB,UACA,IAAK,GAAY,CACd,IAAM,EAAW,EAAE,GACnB,MAAO,CACH,MAAO,EAAS,OAAO,OACvB,KAAM,EAAU,EAAS,KAAK,WAKpC,EAAQ,MAAM,QAAQ,IACxB,EAAW,IAAK,GACZC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,IAAM,EAAkB,MAAMD,EAAI,EAAK,MACjC,EAAW,EAAK,EAAgB,MAGhC,EAAa,EAAS,+BAA+B,KAAK,OAG1D,EAAU,EAAS,0BAA0B,QAAU,GAGvD,EAAa,EAAS,2CAA2C,QAAQ,OAAO,OAChF,EAAY,EAAS,2CAA2C,QAAQ,KAAK,QAC7E,EAAe,EAAS,+CAA+C,KAAK,OAE5E,EAAc,EAAS,kBAAkB,QACzC,EAAa,EAAY,KAAK,aAAe,IAAA,GAC7C,EAAU,EAAa,EAAU,GAAc,IAAA,GAE/C,EAAO,EAAS,4BACjB,UACA,IAAK,GAAQ,EAAE,GAAK,OAAO,OAAO,QAAQ,IAAK,KAEpD,MAAO,CACH,MAAO,EAAK,MACZ,KAAM,EAAK,KACX,YAAa,EACb,MAAO,EACP,UACA,SAAU,EACV,OAAQ,CACJ,CACI,KAAM,EACN,IAAK,EAAY,EAAU,EAAY,IAAA,GACvC,OAAQ,SAQhC,MAAO,CACH,MAAO,2BACP,KAAM,EACN,YAAa,4CACb,SAAU,QACV,KAAM,EACN,KAAM"}