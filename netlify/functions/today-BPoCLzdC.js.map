{"version":3,"file":"today-BPoCLzdC.js","names":["route: Route","got"],"sources":["../../lib/routes/niaogebiji/today.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/today',\r\n    categories: ['new-media'],\r\n    example: '/niaogebiji/today',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['niaogebiji.com/', 'niaogebiji.com/bulletin'],\r\n            target: '',\r\n        },\r\n    ],\r\n    name: '今日事',\r\n    maintainers: ['KotoriK'],\r\n    handler,\r\n    url: 'niaogebiji.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await got({\r\n        method: 'post',\r\n        url: 'https://www.niaogebiji.com/pc/bulletin/index',\r\n        form: {\r\n            page: 1,\r\n            pub_time: '',\r\n            isfromajax: 1,\r\n        },\r\n    });\r\n\r\n    if (response.data.return_code !== '200') {\r\n        throw new Error(response.data.return_msg);\r\n    }\r\n\r\n    const data = response.data.return_data;\r\n\r\n    return {\r\n        title: '鸟哥笔记-今日事',\r\n        link: 'https://www.niaogebiji.com/bulletin',\r\n        item: data.map((item) => ({\r\n            title: item.title,\r\n            description: item.content,\r\n            link: item.url,\r\n            pubDate: parseDate(item.pub_time, 'X'),\r\n            updated: parseDate(item.updated_at, 'X'),\r\n            category: item.seo_keywords.split(','),\r\n            author: item.user_info.nickname,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"qRAIA,MAAaA,EAAe,CACxB,KAAM,SACN,WAAY,CAAC,aACb,QAAS,oBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,kBAAmB,2BAC5B,OAAQ,KAGhB,KAAM,MACN,YAAa,CAAC,WACd,UACA,IAAK,mBAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAMC,EAAI,CACvB,OAAQ,OACR,IAAK,+CACL,KAAM,CACF,KAAM,EACN,SAAU,GACV,WAAY,KAIpB,GAAI,EAAS,KAAK,cAAgB,MAC9B,MAAU,MAAM,EAAS,KAAK,YAGlC,IAAM,EAAO,EAAS,KAAK,YAE3B,MAAO,CACH,MAAO,WACP,KAAM,sCACN,KAAM,EAAK,IAAK,IAAU,CACtB,MAAO,EAAK,MACZ,YAAa,EAAK,QAClB,KAAM,EAAK,IACX,QAAS,EAAU,EAAK,SAAU,KAClC,QAAS,EAAU,EAAK,WAAY,KACpC,SAAU,EAAK,aAAa,MAAM,KAClC,OAAQ,EAAK,UAAU"}