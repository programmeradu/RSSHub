{"version":3,"file":"utils-CNTj_sIn.js","names":["got"],"sources":["../../lib/routes/indienova/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst baseUrl = 'https://indienova.com';\r\n\r\nconst parseList = ($) =>\r\n    $('.article-panel')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            const a = item.find('h4 a');\r\n            return {\r\n                title: a.text(),\r\n                link: new URL(a.attr('href'), baseUrl).href,\r\n                upvotes: item.find('.number-first').text(),\r\n                comments: item.find('.number-last').text(),\r\n            };\r\n        });\r\n\r\nconst parseItem = async (item) => {\r\n    const { data: response } = await got(item.link);\r\n    const $ = load(response);\r\n\r\n    item.description = $('.single-post').html();\r\n    item.author = $('.header-info > a').text();\r\n    const pubDate = $('.header-info')\r\n        .contents()\r\n        .filter((_, el) => el.nodeType === 3)\r\n        .text()\r\n        .trim()\r\n        .match(/(\\d{4}-\\d{2}-\\d{2})/)?.[0];\r\n    item.pubDate = pubDate ? timezone(parseDate(pubDate, 'YYYY-MM-DD'), +8) : null;\r\n\r\n    return item;\r\n};\r\n\r\nexport { baseUrl, parseList, parseItem };\r\n"],"mappings":"sLAKA,MAAM,EAAU,wBAEV,EAAa,GACf,EAAE,kBACG,UACA,IAAK,GAAS,CACX,EAAO,EAAE,GACT,IAAM,EAAI,EAAK,KAAK,QACpB,MAAO,CACH,MAAO,EAAE,OACT,KAAM,IAAI,IAAI,EAAE,KAAK,QAAS,GAAS,KACvC,QAAS,EAAK,KAAK,iBAAiB,OACpC,SAAU,EAAK,KAAK,gBAAgB,UAI9C,EAAY,KAAO,IAAS,CAC9B,GAAM,CAAE,KAAM,GAAa,MAAMA,EAAI,EAAK,MACpC,EAAI,EAAK,GAEf,EAAK,YAAc,EAAE,gBAAgB,OACrC,EAAK,OAAS,EAAE,oBAAoB,OACpC,IAAM,EAAU,EAAE,gBACb,WACA,QAAQ,EAAG,IAAO,EAAG,WAAa,GAClC,OACA,OACA,MAAM,yBAAyB,GAGpC,MAFA,GAAK,QAAU,EAAU,EAAS,EAAU,EAAS,cAAe,GAAM,KAEnE"}