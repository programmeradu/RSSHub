{"version":3,"file":"asmr-200-B_5nYhl5.js","names":[],"sources":["../../lib/routes/asmr-200/index.ts"],"sourcesContent":["import { Result, Work } from '@/routes/asmr-200/type';\r\nimport { DataItem, Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport path from 'node:path';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { art } from '@/utils/render';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst render = (work: Work, link: string) => art(path.join(__dirname, 'templates/work.art'), { work, link });\r\n\r\nexport const route: Route = {\r\n    path: '/works/:order?/:subtitle?/:sort?',\r\n    categories: ['multimedia'],\r\n    example: '/asmr-200/works',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    parameters: {\r\n        order: '排序字段，默认按照资源的收录日期来排序，详见下表',\r\n        sort: '排序方式，可选 `asc` 和 `desc` ，默认倒序',\r\n        subtitle: '筛选带字幕音频，可选 `0` 和 `1` ，默认关闭',\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['asmr-200.com'],\r\n            target: 'asmr-200/works',\r\n        },\r\n    ],\r\n    name: '最新收录',\r\n    maintainers: ['hualiong'],\r\n    url: 'asmr-200.com',\r\n    description: `| 发售日期 | 收录日期 | 销量 | 价格 | 评价 | 随机 | RJ号 |\r\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- |\r\n| release | create_date | dl_count | price | rate_average_2dp | random | id |`,\r\n    handler: async (ctx) => {\r\n        const { order = 'create_date', sort = 'desc', subtitle = '0' } = ctx.req.param();\r\n        const res = await ofetch<Result>('https://api.asmr-200.com/api/works', { query: { order, sort, page: 1, subtitle } });\r\n\r\n        const items: DataItem[] = res.works.map((each) => {\r\n            const category = each.tags.map((tag) => tag.name);\r\n            each.category = category.join('，');\r\n            each.cv = each.vas.map((cv) => cv.name).join('，');\r\n            return {\r\n                title: each.title,\r\n                image: each.mainCoverUrl,\r\n                author: each.name,\r\n                link: `https://asmr-200.com/work/${each.source_id}`,\r\n                pubDate: timezone(parseDate(each.release, 'YYYY-MM-DD'), +8),\r\n                category,\r\n                description: render(each, `https://asmr-200.com/work/${each.source_id}`),\r\n            };\r\n        });\r\n\r\n        return {\r\n            title: '最新收录 - ASMR Online',\r\n            link: 'https://asmr-200.com/',\r\n            item: items,\r\n        };\r\n    },\r\n};\r\n"],"mappings":"kYAQA,MAAM,GAAU,EAAY,IAAiB,EAAI,EAAA,KAAA,EAAA,+BAA4C,CAAE,OAAM,SAExF,EAAe,CACxB,KAAM,mCACN,WAAY,CAAC,cACb,QAAS,kBACT,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,WAAY,CACR,MAAO,2BACP,KAAM,+BACN,SAAU,8BAEd,MAAO,CACH,CACI,OAAQ,CAAC,gBACT,OAAQ,mBAGhB,KAAM,OACN,YAAa,CAAC,YACd,IAAK,eACL,YAAa;;+EAGb,QAAS,KAAO,IAAQ,CACpB,GAAM,CAAE,QAAQ,cAAe,OAAO,OAAQ,WAAW,KAAQ,EAAI,IAAI,QACnE,EAAM,MAAM,EAAe,qCAAsC,CAAE,MAAO,CAAE,QAAO,OAAM,KAAM,EAAG,cAElG,EAAoB,EAAI,MAAM,IAAK,GAAS,CAC9C,IAAM,EAAW,EAAK,KAAK,IAAK,GAAQ,EAAI,MAG5C,MAFA,GAAK,SAAW,EAAS,KAAK,KAC9B,EAAK,GAAK,EAAK,IAAI,IAAK,GAAO,EAAG,MAAM,KAAK,KACtC,CACH,MAAO,EAAK,MACZ,MAAO,EAAK,aACZ,OAAQ,EAAK,KACb,KAAM,6BAA6B,EAAK,YACxC,QAAS,EAAS,EAAU,EAAK,QAAS,cAAe,GACzD,WACA,YAAa,EAAO,EAAM,6BAA6B,EAAK,gBAIpE,MAAO,CACH,MAAO,qBACP,KAAM,wBACN,KAAM"}