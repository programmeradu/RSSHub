import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{ViewType as t}from"./types-A5bA50Mg.js";import{load as n}from"cheerio";const r={"combined-print-and-e-book-nonfiction":`Combined Print & E-Book Nonfiction`,"hardcover-nonfiction":`Hardcover Nonfiction`,"paperback-nonfiction":`Paperback Nonfiction`,"advice-how-to-and-miscellaneous":`Advice, How-To & Miscellaneous`,"combined-print-and-e-book-fiction":`Combined Print & E-Book Fiction`,"hardcover-fiction":`Hardcover Fiction`,"trade-fiction-paperback":`Paperback Trade Fiction`,"childrens-middle-grade-hardcover":`Children's Middle Grade Hardcover`,"picture-books":`Picture Books`,"series-books":`Series Books`,"young-adult-hardcover":`Young Adult Hardcover`},i={path:`/book/:category?`,categories:[`traditional-media`],view:t.Notifications,example:`/nytimes/book/combined-print-and-e-book-nonfiction`,parameters:{category:{description:`Category, can be found on the [official page](https://www.nytimes.com/books/best-sellers/)`,options:Object.keys(r).map(e=>({value:e,label:r[e]})),default:`combined-print-and-e-book-nonfiction`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nytimes.com/`],target:``}],name:`Best Seller Books`,maintainers:[`melvinto`,`pseudoyu`],handler:a,url:`nytimes.com/`};async function a(t){let i=t.req.param(`category`)??`combined-print-and-e-book-nonfiction`,a=`https://www.nytimes.com/books/best-sellers/${i}`,o=[],s=``;if(r[i]){let t=await e({method:`get`,url:a}),r=t.data,i=n(r);s=i(`h1`).eq(0).text(),o=i(`article[itemprop=itemListElement]`).toArray().map((e,t)=>{let n=i(e),r=n.find(`p`).eq(0).text(),a=n.find(`h3[itemprop=name]`),o=n.find(`p[itemprop=author]`).text(),s=n.find(`p[itemprop=publisher]`).text(),c=n.find(`p[itemprop=description]`).text(),l=n.find(`img[itemprop=image]`).attr(`src`),u=n.find(`ul[aria-label="Links to Book Retailers"]`),d=u.find(`a`).toArray(),f=d.length>0?i(d[0]).attr(`href`):``;for(let e of d){let t=i(e);if(t.text()===`Amazon`){f=t.attr(`href`);break}}return{title:`${t+1}: ${a.text()}`,author:o,description:`<figure><img src="${l}" alt="test"/><figcaption><span>${c}</span></figcaption></figure><br/>${r}<br/>Author: ${o}<br/>Publisher: ${s}`,link:f}})}return{title:`The New York Times Best Sellers - ${s}`,link:a,item:o}}export{i as route};
//# sourceMappingURL=book-Dwg8zf-s.js.map