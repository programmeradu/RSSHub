import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{ViewType as e}from"./types-A5bA50Mg.js";import"./config-not-found-BVqhRP9D.js";import{CONFIG_OPTIONS as t,generatePostDataItem as n,getClient as r,postFilter as i}from"./utils-BNbXOZXR.js";const a=async e=>{let t=Number.parseInt(e.req.query(`limit`)??`20`,10),a=e.req.param(`id`),o=e.req.param(`media`)===`media`,s=r(),[c,l]=await Promise.all([s.getCommunity({communityId:a}),s.getCommunityTimeline({communityId:a,limit:t,mediaOnly:o})]),u=await s.getPersonas({personaIds:l?.posts.map(e=>e.personaId)});return{title:`${c.community.name} - ${o?`メディア`:`ポスト`}`,description:c.community.purpose.replaceAll(`
`,` `),link:`https://mixi.social/communities/${a}/about`,image:c.community.coverImage.postImage?.largeImageUrl,item:l?.posts?.filter(i).map(e=>({title:c.community.name,...n(e,u.personas)}))??[]}},o={path:`/community/:id/:media?`,name:`コミュニティ`,categories:[`social-media`],example:`/mixi2/community/62e7e813-d242-4c54-a0ee-0aab5b2bbad2`,parameters:{id:{description:`コミュニティID`},media:{description:"`media`を入力するとメディアを含むポストのみを取得、デフォルトは空で全てのポストを取得"}},features:{supportRadar:!0,requireConfig:t},radar:[{source:[`mixi.social/communities/:id`,`mixi.social/communities/:id/about`],target:`/community/:id`,title:`コミュニティ - ポスト`},{source:[`mixi.social/communities/:id`,`mixi.social/communities/:id/about`],target:`/community/:id/media`,title:`コミュニティ - メディア`}],view:e.SocialMedia,handler:a,maintainers:[`KarasuShin`]};export{o as route};
//# sourceMappingURL=community-B_P5Yiow.js.map