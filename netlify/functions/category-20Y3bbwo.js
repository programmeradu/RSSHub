import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{got_default as o}from"./got-CdvI2yKX.js";import s from"node:path";import{load as c}from"cheerio";import l from"p-map";t();const u=async e=>(await a(e)).content_elements,d=e=>e.map(e=>{let{_id:t,headlines:n,description:r,publish_date:a,website_url:o,taxonomy:s,credits:c,promo_items:l}=e;return{id:t,title:n.basic,link:`https://www.dlnews.com${o}`,description:r.basic,author:c.by.map(e=>e.name).join(`, `),itunes_item_image:l.basic.url,pubDate:i(a),category:s.sections.map(e=>e.name).join(`, `)}}),f={defi:`DeFi`,fintech:`Fintech/VC/Deals`,"llama-u":`Llama U`,markets:`Markets`,"people-culture":`People & Culture`,regulation:`Regulation`,snapshot:`Snapshot`,web3:`Web3`},p=t=>n.tryGet(t.link,async()=>{let{data:n}=await o(t.link),i=c(n),a=i(`script#fusion-metadata`).text(),l=JSON.parse(a.match(/Fusion\.globalContent=({.*?});Fusion\.globalContentConfig/)[1]).content_elements,u=[];for(let e of l)if(e.type===`header`&&e.content.includes(`What weâ€™re reading`))break;else if(e.type===`custom_embed`&&e.embed.config.text)u.push({type:e.type,data:e.embed.config.text});else if(e.type===`text`&&!e.content.includes(`<b>NOW READ: </b>`))u.push({type:e.type,data:e.content});else switch(e.type){case`header`:u.push({type:e.type,data:e.content});break;case`list`:u.push({type:e.type,list_type:e.list_type,items:e.items});break;case`image`:u.push({type:e.type,src:e.url,alt:e.alt_text,caption:e.subtitle});break;default:throw Error(`Unknown type: ${e.type}`)}return t.description=r(s.resolve(e,`templates/description-fe6cec86.art`),u),t}),m={path:`/:category?`,radar:[{source:[`dlnews.com/articles/:category`],target:`/:category`}],url:`dlnews.com/articles`,name:`Latest News`,maintainers:[`Rjnishant530`],handler:h,example:`/dlnews/people-culture`};async function h(e){let t=e.req.param(`category`),n=`https://www.dlnews.com`,r=t??``,i={author:``,date:`now-1y/d`,offset:0,query:``,size:15,sort:`display_date:desc`,vertical:r},a=await u(`${n}/pf/api/v3/content/fetch/articles-api?query=${encodeURIComponent(JSON.stringify(i))}&_website=dlnews`),o=d(a),s=await l(o,e=>p(e),{concurrency:3});return{title:Object.hasOwn(f,t)?`${f[t]} : DL News`:`DL News`,link:n,item:s,description:Object.hasOwn(f,t)?`${f[t]} : News on dlnews.com`:`Latest News on dlnews.com`,logo:`https://www.dlnews.com/pf/resources/favicon.ico?d=284`,icon:`https://www.dlnews.com/pf/resources/favicon.ico?d=284`,language:`en-us`}}export{m as route};
//# sourceMappingURL=category-20Y3bbwo.js.map