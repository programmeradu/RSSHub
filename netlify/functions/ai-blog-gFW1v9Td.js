import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{load as n}from"cheerio";const r={path:`/ai/blog`,categories:[`programming`],example:`/meta/ai/blog`,name:`AI Blog`,maintainers:[`TonyRL`],url:`ai.meta.com/blog/`,radar:[{source:[`ai.meta.com/blog/`,`ai.meta.com`]}],handler:i};async function i(r){let i=Number.parseInt(r.req.query(`limit`)||12,10),a=`https://ai.meta.com/blog/`,o=await t(a,{headers:{"sec-fetch-dest":`document`,"sec-fetch-mode":`navigate`,"sec-fetch-site":`none`,"sec-fetch-user":`?1`}}),s=n(o),c=s(`script:contains("DTSGInitialData"):first`).text(),l=JSON.parse(c.match(/\(new ServerJS\(\)\)\.handle\((\{[\s\S]*?\})\);/)?.[1]||`{}`),u={LSD:{token:``},SiteData:{haste_session:``,hsi:``,__spin_r:0,__spin_b:`trunk`,__spin_t:Date.now()}};for(let e of l.define){let t=e[0],n=e[2];u[t]=n}let d=await t(`https://ai.meta.com/api/graphql/`,{method:`POST`,headers:{"content-type":`application/x-www-form-urlencoded`,"sec-fetch-dest":`empty`,"sec-fetch-mode":`cors`,"sec-fetch-site":`same-origin`,"x-asbd-id":`359341`,"x-fb-friendly-name":`MetaAIBlogRecentPostSearchQuery`,"x-fb-lsd":u.LSD.token},body:new URLSearchParams({av:`0`,__user:`0`,__a:`1`,__req:`1`,dpr:`1`,__ccg:`EXCELLENT`,__rev:String(u.SiteData.__spin_r||``),lsd:u.LSD.token,__spin_r:String(u.SiteData.__spin_r||``),__spin_b:String(u.SiteData.__spin_b||`trunk`),__spin_t:String(u.SiteData.__spin_t||Date.now()),fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`MetaAIBlogRecentPostSearchQuery`,variables:JSON.stringify({input:{query:``,from:0,limit:i,tags:[],excludeObjectIDs:[`27568536916124137`]}}),server_timestamps:`true`,doc_id:`9516719638450392`}),parseResponse:JSON.parse}),f=d.data.query.map(t=>({title:t.title,description:t.description,link:t.href,pubDate:e(t.date),category:[t.research_area],image:t.image}));return{title:s(`#pageTitle`).text(),description:s(`meta[name="description"]`).attr(`content`),image:s(`link[rel="icon"]`).attr(`href`),link:a,item:f}}export{r as route};
//# sourceMappingURL=ai-blog-gFW1v9Td.js.map