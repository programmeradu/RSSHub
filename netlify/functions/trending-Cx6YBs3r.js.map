{"version":3,"file":"trending-Cx6YBs3r.js","names":["route: Route","got","apiKey"],"sources":["../../lib/routes/themoviedb/trending.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport apiKey from './api-key';\r\nimport { MEDIA_TYPE_TO_ITEM_HANDLE } from './utils';\r\n\r\nconst MEDIA_TYPE_TO_TITLE = {\r\n    tv: 'TV Shows',\r\n    movie: 'Movies',\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/trending/:mediaType/:timeWindow/:lang?',\r\n    categories: ['multimedia'],\r\n    example: '/themoviedb/trending/tv/day/en-US',\r\n    parameters: { mediaType: '`movie` or `tv`', timeWindow: '`day` or `week`', lang: 'Language' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Trending',\r\n    maintainers: ['x2cf'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { mediaType, timeWindow, lang } = ctx.req.param();\r\n    const { data } = await got(`https://api.themoviedb.org/3/trending/${mediaType}/${timeWindow}`, {\r\n        searchParams: {\r\n            language: lang,\r\n            api_key: apiKey(),\r\n        },\r\n    });\r\n\r\n    return {\r\n        title: `Popular ${MEDIA_TYPE_TO_TITLE[mediaType]} â€” TMDB`,\r\n        link: `https://www.themoviedb.org/${mediaType}`,\r\n        item: data.results.map((item) => MEDIA_TYPE_TO_ITEM_HANDLE[mediaType](item, lang)),\r\n    };\r\n}\r\n"],"mappings":"mXAKA,MAAM,EAAsB,CACxB,GAAI,WACJ,MAAO,UAGEA,EAAe,CACxB,KAAM,0CACN,WAAY,CAAC,cACb,QAAS,oCACT,WAAY,CAAE,UAAW,kBAAmB,WAAY,kBAAmB,KAAM,YACjF,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,WACN,YAAa,CAAC,QACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,YAAW,aAAY,QAAS,EAAI,IAAI,QAC1C,CAAE,QAAS,MAAMC,EAAI,yCAAyC,EAAU,GAAG,IAAc,CAC3F,aAAc,CACV,SAAU,EACV,QAASC,OAIjB,MAAO,CACH,MAAO,WAAW,EAAoB,GAAW,SACjD,KAAM,8BAA8B,IACpC,KAAM,EAAK,QAAQ,IAAK,GAAS,EAA0B,GAAW,EAAM"}