import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";t();const s={path:`/live/:id`,categories:[`traditional-media`],example:`/pts/live/62e8e4bbb4de2cbd74468b2b`,parameters:{id:`報導 id，可在对应整理報導页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`news.pts.org.tw/live/:id`,`news.pts.org.tw/`]}],name:`整理報導`,maintainers:[],handler:c};async function c(t){let s=t.req.param(`id`),c=`https://news.pts.org.tw`,l=`${c}/live/${s}`,u=`${c}/live/api/liveblog/${s}`,d=await a({method:`get`,url:u}),f=d.data.data.blogArticleList.slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):30).map(e=>({link:`${c}/live/api/liveblog/article?articleId=${e}&model=main`}));return f=await Promise.all(f.map(t=>n.tryGet(t.link,async()=>{let n=await a({method:`get`,url:t.link}),s=n.data.data;return t.title=s.title,t.pubDate=i(s.updatedDate),t.description=r(o.join(e,`templates/live-36f457f4.art`),{images:s.content.filter(e=>e.type===`img`).map(e=>`https://dkjm35kkdt2ag.cloudfront.net/${e.imgFileUrl}`),texts:s.content.filter(e=>e.type===`text`).map(e=>e.content)}),t}))),{title:`公視新聞網 PNN - ${d.data.data.title.replace(/【不斷更新】/,``)}`,link:l,item:f}}export{s as route};
//# sourceMappingURL=live-CKAc44Le.js.map