{"version":3,"file":"news-CAdAgq_s.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/nature/news.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { load } from 'cheerio';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { baseUrl, cookieJar, getArticle } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/news',\r\n    categories: ['journal'],\r\n    example: '/nature/news',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: true,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['nature.com/latest-news', 'nature.com/news', 'nature.com/'],\r\n        },\r\n    ],\r\n    name: 'Nature News',\r\n    maintainers: ['y9c', 'TonyRL'],\r\n    handler,\r\n    url: 'nature.com/latest-news',\r\n};\r\n\r\nasync function handler() {\r\n    const url = `${baseUrl}/latest-news`;\r\n    const res = await got(url, { cookieJar });\r\n    const $ = load(res.data);\r\n\r\n    let items = $('.c-article-item__content')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            return {\r\n                title: item.find('h3').text(),\r\n                link: baseUrl + item.find('a').attr('href'),\r\n                pubDate: parseDate(item.find('.c-article-item__date').text()),\r\n            };\r\n        });\r\n\r\n    items = await Promise.all(items.map((item) => cache.tryGet(item.link, () => getArticle(item))));\r\n\r\n    return {\r\n        title: 'Nature | Latest News',\r\n        description: $('meta[name=description]').attr('content'),\r\n        link: url,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"qbAOA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,WACb,QAAS,eACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,yBAA0B,kBAAmB,iBAG9D,KAAM,cACN,YAAa,CAAC,MAAO,UACrB,UACA,IAAK,0BAGT,eAAe,GAAU,CACrB,IAAM,EAAM,GAAG,EAAQ,cACjB,EAAM,MAAMC,EAAI,EAAK,CAAE,cACvB,EAAI,EAAK,EAAI,MAEf,EAAQ,EAAE,4BACT,UACA,IAAK,IACF,EAAO,EAAE,GACF,CACH,MAAO,EAAK,KAAK,MAAM,OACvB,KAAM,EAAU,EAAK,KAAK,KAAK,KAAK,QACpC,QAAS,EAAU,EAAK,KAAK,yBAAyB,WAMlE,MAFA,GAAQ,MAAM,QAAQ,IAAI,EAAM,IAAK,GAASC,EAAM,OAAO,EAAK,SAAY,EAAW,MAEhF,CACH,MAAO,uBACP,YAAa,EAAE,0BAA0B,KAAK,WAC9C,KAAM,EACN,KAAM"}