import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";const t={path:`/personalpage/:uid`,categories:[`new-media`],example:`/guancha/personalpage/243983`,parameters:{uid:`用户id， 可在URL中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`个人主页文章`,maintainers:[`Jeason0228`],handler:n};async function n(t){let n=t.req.param(`uid`),r=`https://app.guancha.cn/user/get-published-list?page_size=20&page_no=1&uid=${n}`,i=await e({method:`get`,url:r,headers:{Referer:`https://user.guancha.cn`}}),a=i.data.data.items,o=a[0].user_nick;function s(e){let t=/(\d+)\s*分钟前/,n=/(\d+)\s*小时前/,r=/昨天\s*(\d+):(\d+)/,i=/(\d+)-(\d+)\s*(\d+):(\d+)/,a=new Date().getTimezoneOffset()*60*1e3,o=a- -288e5,s;if(e===`刚刚`)s=new Date;else if(t.test(e)){let n=t.exec(e);s=new Date(Date.now()-Number.parseInt(n[1])*60*1e3)}else if(n.test(e)){let t=n.exec(e);s=new Date(Date.now()-Number.parseInt(t[1])*60*60*1e3)}else if(r.test(e)){let t=r.exec(e);s=new Date(Date.now()-86400*1e3+o),s.setHours(Number.parseInt(t[1]),Number.parseInt(t[2]),0,0),s=new Date(s.getTime()-o)}else if(i.test(e)){let t=i.exec(e),n=new Date(Date.now()+o),r=n.getFullYear();s=new Date(r,Number.parseInt(t[1])-1,Number.parseInt(t[2]),Number.parseInt(t[3]),Number.parseInt(t[4])),s=new Date(s.getTime()-o)}else s=new Date(e);return s}return{title:`${o}-观察者-风闻社区`,link:r,description:`${o} 的个人主页`,item:a.map(e=>({title:e.title,description:e.summary,pubDate:s(e.pass_at),link:`https://user.guancha.cn/main/content?id=${e.id}`,author:e.user_nick}))}}export{t as route};
//# sourceMappingURL=personalpage-Bdxt2m1v.js.map