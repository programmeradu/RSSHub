{"version":3,"file":"discussed-D3Rf9WU4.js","names":["route: Route"],"sources":["../../lib/routes/daily/discussed.ts"],"sourcesContent":["import { Route, ViewType } from '@/types';\r\nimport { baseUrl, getData, getList, variables } from './utils.js';\r\n\r\nconst query = `\r\n  query MostDiscussedFeed(\r\n    $first: Int\r\n    $supportedTypes: [String!] = [\"article\",\"share\",\"freeform\"]\r\n    ) {\r\n    page: mostDiscussedFeed(first: $first, supportedTypes: $supportedTypes) {\r\n      ...FeedPostConnection\r\n    }\r\n  }\r\n\r\n  fragment FeedPostConnection on PostConnection {\r\n    edges {\r\n      node {\r\n        ...FeedPost\r\n        contentHtml\r\n      }\r\n    }\r\n  }\r\n\r\n  fragment FeedPost on Post {\r\n    ...SharedPostInfo\r\n  }\r\n\r\n  fragment SharedPostInfo on Post {\r\n    id\r\n    title\r\n    image\r\n    readTime\r\n    permalink\r\n    commentsPermalink\r\n    summary\r\n    createdAt\r\n    numUpvotes\r\n    numComments\r\n    author {\r\n      ...UserShortInfo\r\n    }\r\n    tags\r\n  }\r\n\r\n  fragment UserShortInfo on User {\r\n    id\r\n    name\r\n    image\r\n    permalink\r\n    username\r\n    bio\r\n  }\r\n`;\r\n\r\nexport const route: Route = {\r\n    path: '/discussed/:period?/:innerSharedContent?/:dateSort?',\r\n    example: '/daily/discussed/30',\r\n    view: ViewType.Articles,\r\n    radar: [\r\n        {\r\n            source: ['app.daily.dev/discussed'],\r\n        },\r\n    ],\r\n    name: 'Most Discussed',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n    url: 'app.daily.dev/discussed',\r\n    parameters: {\r\n        innerSharedContent: {\r\n            description: 'Where to Fetch inner Shared Posts instead of original',\r\n            default: 'false',\r\n            options: [\r\n                { value: 'false', label: 'False' },\r\n                { value: 'true', label: 'True' },\r\n            ],\r\n        },\r\n        dateSort: {\r\n            description: 'Sort posts by publication date instead of popularity',\r\n            default: 'true',\r\n            options: [\r\n                { value: 'false', label: 'False' },\r\n                { value: 'true', label: 'True' },\r\n            ],\r\n        },\r\n        period: {\r\n            description: 'Period of Lookup',\r\n            default: '7',\r\n            options: [\r\n                { value: '7', label: 'Last Week' },\r\n                { value: '30', label: 'Last Month' },\r\n                { value: '365', label: 'Last Year' },\r\n            ],\r\n        },\r\n    },\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 20;\r\n    const innerSharedContent = ctx.req.param('innerSharedContent') ? JSON.parse(ctx.req.param('innerSharedContent')) : false;\r\n    const dateSort = ctx.req.param('dateSort') ? JSON.parse(ctx.req.param('dateSort')) : true;\r\n    const period = ctx.req.param('period') ? Number.parseInt(ctx.req.param('period'), 10) : 7;\r\n\r\n    const link = `${baseUrl}/posts/discussed`;\r\n\r\n    const data = await getData({\r\n        query,\r\n        variables: {\r\n            ...variables,\r\n            first: limit,\r\n            period,\r\n        },\r\n    });\r\n    const items = getList(data, innerSharedContent, dateSort);\r\n\r\n    return {\r\n        title: 'Real-time discussions in the developer community | daily.dev',\r\n        link,\r\n        item: items,\r\n        description: 'Stay on top of real-time developer discussions on daily.dev. Join conversations happening now and engage with the most active community members.',\r\n        logo: `${baseUrl}/favicon-32x32.png`,\r\n        icon: `${baseUrl}/favicon-32x32.png`,\r\n        language: 'en-us',\r\n    };\r\n}\r\n"],"mappings":"kXAGA,MAkDaA,EAAe,CACxB,KAAM,sDACN,QAAS,sBACT,KAAM,EAAS,SACf,MAAO,CACH,CACI,OAAQ,CAAC,6BAGjB,KAAM,iBACN,YAAa,CAAC,gBACd,UACA,IAAK,0BACL,WAAY,CACR,mBAAoB,CAChB,YAAa,wDACb,QAAS,QACT,QAAS,CACL,CAAE,MAAO,QAAS,MAAO,SACzB,CAAE,MAAO,OAAQ,MAAO,UAGhC,SAAU,CACN,YAAa,uDACb,QAAS,OACT,QAAS,CACL,CAAE,MAAO,QAAS,MAAO,SACzB,CAAE,MAAO,OAAQ,MAAO,UAGhC,OAAQ,CACJ,YAAa,mBACb,QAAS,IACT,QAAS,CACL,CAAE,MAAO,IAAK,MAAO,aACrB,CAAE,MAAO,KAAM,MAAO,cACtB,CAAE,MAAO,MAAO,MAAO,iBAMvC,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,GAC/E,EAAqB,EAAI,IAAI,MAAM,sBAAwB,KAAK,MAAM,EAAI,IAAI,MAAM,uBAAyB,GAC7G,EAAW,EAAI,IAAI,MAAM,YAAc,KAAK,MAAM,EAAI,IAAI,MAAM,aAAe,GAC/E,EAAS,EAAI,IAAI,MAAM,UAAY,OAAO,SAAS,EAAI,IAAI,MAAM,UAAW,IAAM,EAElF,EAAO,GAAG,EAAQ,kBAElB,EAAO,MAAM,EAAQ,CACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EACA,UAAW,CACP,GAAG,EACH,MAAO,EACP,YAGF,EAAQ,EAAQ,EAAM,EAAoB,GAEhD,MAAO,CACH,MAAO,+DACP,OACA,KAAM,EACN,YAAa,mJACb,KAAM,GAAG,EAAQ,oBACjB,KAAM,GAAG,EAAQ,oBACjB,SAAU"}