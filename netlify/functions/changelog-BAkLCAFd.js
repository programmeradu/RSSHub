import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{X_UA as n,appDetail as r,getRootUrl as i}from"./utils-DGqNB3hk.js";async function a(a){let o=a.req.path.replace(`/taptap`,``),s=o.startsWith(`/intl/`),c=a.req.param(`id`),l=a.req.param(`lang`)??(s?`en_US`:`zh_CN`),u=`${i(s)}/app/${c}`,d=await r(c,l,s),f=d.app.icon.original_url,p=d.app.title,m=`${p}${d.app.developers?` by`+d.app.developers.map(e=>e.name).join(` & `):``}`,h=await t(`${i(s)}/webapiv2/apk/v1/list-by-app?app_id=${c}&from=0&limit=10&${n(l)}`,{headers:{Referer:u}}),g=h.data.list;return{title:`TapTap 更新记录 ${p}`,description:m,link:u,image:f,item:g.map(t=>({title:`${p} / ${t.version_label}`,description:t.whatsnew.text,pubDate:e(t.update_date,`X`),link:u,guid:t.version_label}))}}export{a as handler};
//# sourceMappingURL=changelog-BAkLCAFd.js.map