import{parseDate as e,parseRelativeDate as t}from"./parse-date-Bgabdhlb.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=e=>e.startsWith(`http`)?e:`https:${e}`,o=e=>{let t=e(`.item`).toArray().map(e=>{let t=e.attribs.pt,n=i(e),r=n(`.news-detail`),a=r.find(`img`).toArray().map(e=>`<img src="${e.attribs.src.split(`?x-`)[0]}">`).join(`<br>`),o=r.find(`.content a`).first().attr(`href`),s=r.text().trim().replace(/展开全文$/,``);return{title:s,link:o.startsWith(`http`)?o:`https:${o}`,description:[s,a].filter(e=>!!e).join(`<br>`),pubDate:new Date(t*1e3).toUTCString()}});return t},s=async(n,o,s)=>{let l=await Promise.all(n(`.item`).toArray().map(async n=>{let l=i(n),u,d;l(`.news-detail`).children().length<=2?(u=l(`.news-detail .content .text`),d=l(`.news-detail .content .op`)):(u=l(`.news-detail .title`),d=l(`.news-detail .author`));let f=u.find(`a`).text(),p=u.find(`a`).attr(`href`),m=a(p),h=l(`.news-img img`)?.attr(`src`)?.split(`?x-`)[0],g=d.children().first().text(),_=d.find(`.time`).text(),v=/小时前/.test(_)?t(_):e(_,[`YYYY M D`,`M D`]),y=l(`.desc`).text(),b=h?`<br><img src="${h}">`:``;return y+=o?await c(m,s):b,{title:f,link:m,description:y,author:g,pubDate:r(v,8)}}));return l},c=(e,t)=>t.tryGet(e,async()=>{let{data:t}=await n(e),r=i(t);r(`img`).each((e,t)=>{t.attribs.src.includes(`?x-`)&&(t.attribs.src=t.attribs.src.split(`?x-`)[0])});let a=r(`section .article-style`).html();return a});var l={articleListParser:s,statusListParser:o};export{l as utils_default};
//# sourceMappingURL=utils-RmvNkXWq.js.map