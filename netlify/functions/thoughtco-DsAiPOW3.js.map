{"version":3,"file":"thoughtco-DsAiPOW3.js","names":[],"sources":["../../lib/routes/thoughtco/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/:category?',\r\n    categories: ['new-media'],\r\n    example: '/thoughtco',\r\n    parameters: { category: 'Category id, see below' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Category',\r\n    maintainers: ['nczitzk'],\r\n    handler,\r\n    description: `#### Science, Tech, Math\r\n\r\n| category         | id                         |\r\n| ---------------- | -------------------------- |\r\n| Science          | science-4132464            |\r\n| Math             | math-4133545               |\r\n| Social Sciences  | social-sciences-4133522    |\r\n| Computer Science | computer-science-4133486   |\r\n| Animals & Nature | animals-and-nature-4133421 |\r\n\r\n#### Humanities\r\n\r\n| category          | id                          |\r\n| ----------------- | --------------------------- |\r\n| History & Culture | history-and-culture-4133356 |\r\n| Visual Arts       | visual-arts-4132957         |\r\n| Literature        | literature-4133251          |\r\n| English           | english-4688281             |\r\n| Geography         | geography-4133035           |\r\n| Philosophy        | philosophy-4133025          |\r\n| Issues            | issues-4133022              |\r\n\r\n#### Languages\r\n\r\n| category                     | id               |\r\n| ---------------------------- | ---------------- |\r\n| English as a Second Language | esl-4133095      |\r\n| Spanish                      | spanish-4133085  |\r\n| French                       | french-4133079   |\r\n| German                       | german-4133073   |\r\n| Italian                      | italian-4133069  |\r\n| Japanese                     | japanese-4133062 |\r\n| Mandarin                     | mandarin-4133057 |\r\n| Russian                      | russian-4175265  |\r\n\r\n#### Resources\r\n\r\n| category               | id                           |\r\n| ---------------------- | ---------------------------- |\r\n| For Students & Parents | for-students-parents-4132588 |\r\n| For Educators          | for-educators-4132509        |\r\n| For Adult Learners     | for-adult-learners-4132469   |\r\n\r\n<details>\r\n<summary>More categories</summary>\r\n\r\n#### Science\r\n\r\n| category          | id                          |\r\n| ----------------- | --------------------------- |\r\n| Chemistry         | chemistry-4133594           |\r\n| Biology           | biology-4133580             |\r\n| Physics           | physics-4133571             |\r\n| Geology           | geology-4133564             |\r\n| Astronomy         | astronomy-4133558           |\r\n| Weather & Climate | weather-and-climate-4133550 |\r\n\r\n#### Math\r\n\r\n| category              | id                              |\r\n| --------------------- | ------------------------------- |\r\n| Math Tutorials        | math-tutorials-4133543          |\r\n| Geometry              | geometry-4133540                |\r\n| Arithmetic            | arithmetic-4133542              |\r\n| Pre Algebra & Algebra | pre-algebra-and-algebra-4133541 |\r\n| Statistics            | statistics-4133539              |\r\n| Exponential Decay     | exponential-decay-4133528       |\r\n| Worksheets By Grade   | worksheets-by-grade-4133526     |\r\n| Resources             | math-resources-4133523          |\r\n\r\n#### Social Sciences\r\n\r\n| category    | id                  |\r\n| ----------- | ------------------- |\r\n| Psychology  | psychology-4160512  |\r\n| Sociology   | sociology-4133515   |\r\n| Archaeology | archaeology-4133504 |\r\n| Economics   | economics-4133521   |\r\n| Ergonomics  | ergonomics-4133492  |\r\n\r\n#### Computer Science\r\n\r\n| category               | id                               |\r\n| ---------------------- | -------------------------------- |\r\n| PHP Programming        | php-4133485                      |\r\n| Perl                   | perl-4133481                     |\r\n| Python                 | python-4133477                   |\r\n| Java Programming       | java-programming-4133478         |\r\n| Javascript Programming | javascript-programming-4133476   |\r\n| Delphi Programming     | delphi-programming-4133475       |\r\n| C & C++ Programming    | c-and-c-plus-programming-4133470 |\r\n| Ruby Programming       | ruby-programming-4133469         |\r\n| Visual Basic           | visual-basic-4133468             |\r\n\r\n#### Animals and Nature\r\n\r\n| category         | id                       |\r\n| ---------------- | ------------------------ |\r\n| Amphibians       | amphibians-4133418       |\r\n| Birds            | birds-4133416            |\r\n| Habitat Profiles | habitat-profiles-4133412 |\r\n| Mammals          | mammals-4133411          |\r\n| Reptiles         | reptiles-4133408         |\r\n| Insects          | insects-4133406          |\r\n| Marine Life      | marine-life-4133393      |\r\n| Forestry         | forestry-4133386         |\r\n| Dinosaurs        | dinosaurs-4133376        |\r\n| Evolution        | evolution-4133366        |\r\n\r\n#### History and Culture\r\n\r\n| category                       | id                                       |\r\n| ------------------------------ | ---------------------------------------- |\r\n| American History               | american-history-4133354                 |\r\n| African American History       | african-american-history-4133344         |\r\n| African History                | african-history-4133338                  |\r\n| Ancient History and Culture    | ancient-history-4133336                  |\r\n| Asian History                  | asian-history-4133325                    |\r\n| European History               | european-history-4133316                 |\r\n| Genealogy                      | genealogy-4133308                        |\r\n| Inventions                     | inventions-4133303                       |\r\n| Latin American History         | latin-american-history-4133296           |\r\n| Medieval & Renaissance History | medieval-and-renaissance-history-4133289 |\r\n| Military History               | military-history-4133285                 |\r\n| The 20th Century               | 20th-century-4133273                     |\r\n| Women's History                | womens-history-4133260                   |\r\n\r\n#### Visual Arts\r\n\r\n| category      | id                   |\r\n| ------------- | -------------------- |\r\n| Art & Artists | art-4132956          |\r\n| Architecture  | architecture-4132953 |\r\n\r\n#### Literature\r\n\r\n| category           | id                         |\r\n| ------------------ | -------------------------- |\r\n| Best Sellers       | best-sellers-4133250       |\r\n| Classic Literature | classic-literature-4133245 |\r\n| Plays & Drama      | plays-and-drama-4133239    |\r\n| Poetry             | poetry-4133232             |\r\n| Quotations         | quotations-4133229         |\r\n| Shakespeare        | shakespeare-4133223        |\r\n| Short Stories      | short-stories-4133217      |\r\n| Children's Books   | childrens-books-4133216    |\r\n\r\n#### English\r\n\r\n| category        | id                      |\r\n| --------------- | ----------------------- |\r\n| English Grammar | english-grammar-4133049 |\r\n| Writing         | writing-4133048         |\r\n\r\n#### Geography\r\n\r\n| category                 | id                                 |\r\n| ------------------------ | ---------------------------------- |\r\n| Basics                   | geography-basics-4133034           |\r\n| Physical Geography       | physical-geography-4133032         |\r\n| Political Geography      | political-geography-4133033        |\r\n| Population               | population-4133031                 |\r\n| Country Information      | country-information-4133030        |\r\n| Key Figures & Milestones | key-figures-and-milestones-4133029 |\r\n| Maps                     | maps-4133027                       |\r\n| Urban Geography          | urban-geography-4133026            |\r\n\r\n#### Philosophy\r\n\r\n| category                       | id                                       |\r\n| ------------------------------ | ---------------------------------------- |\r\n| Philosophical Theories & Ideas | philosophical-theories-and-ideas-4133024 |\r\n| Major Philosophers             | major-philosophers-4133023               |\r\n\r\n#### Issues\r\n\r\n| category                          | id                               |\r\n| --------------------------------- | -------------------------------- |\r\n| The U. S. Government              | us-government-4133021            |\r\n| U.S. Foreign Policy               | us-foreign-policy-4133010        |\r\n| U.S. Liberal Politics             | us-liberal-politics-4133009      |\r\n| U.S. Conservative Politics        | us-conservative-politics-4133006 |\r\n| Women's Issues                    | womens-issues-4133002            |\r\n| Civil Liberties                   | civil-liberties-4132996          |\r\n| The Middle East                   | middle-east-4132989              |\r\n| Race Relations                    | race-relations-4132982           |\r\n| Immigration                       | immigration-4132977              |\r\n| Crime & Punishment                | crime-and-punishment-4132972     |\r\n| Canadian Government               | canadian-government-4132959      |\r\n| Understanding Types of Government | types-of-government-5179107      |\r\n\r\n#### English as a Second Language\r\n\r\n| category                     | id                                         |\r\n| ---------------------------- | ------------------------------------------ |\r\n| Pronunciation & Conversation | esl-pronunciation-and-conversation-4133093 |\r\n| Vocabulary                   | esl-vocabulary-4133092                     |\r\n| Writing Skills               | esl-writing-skills-4133091                 |\r\n| Reading Comprehension        | esl-reading-comprehension-4133090          |\r\n| Grammar                      | esl-grammar-4133089                        |\r\n| Business English             | esl-business-english-4133088               |\r\n| Resources for Teachers       | resources-for-esl-teachers-4133087         |\r\n\r\n#### Spanish\r\n\r\n| category          | id                                  |\r\n| ----------------- | ----------------------------------- |\r\n| History & Culture | spanish-history-and-culture-4133084 |\r\n| Pronunciation     | spanish-pronunciation-4133083       |\r\n| Vocabulary        | spanish-vocabulary-4133082          |\r\n| Writing Skills    | spanish-writing-skills-4133081      |\r\n| Grammar           | spanish-grammar-4133080             |\r\n\r\n#### French\r\n\r\n| category                     | id                                           |\r\n| ---------------------------- | -------------------------------------------- |\r\n| Pronunciation & Conversation | french-pronunciation-4133075                 |\r\n| Vocabulary                   | french-vocabulary-4133076                    |\r\n| Grammar                      | french-grammar-4133074                       |\r\n| Resources For Teachers       | french-resources-for-french-teachers-4133077 |\r\n\r\n#### German\r\n\r\n| category                     | id                                 |\r\n| ---------------------------- | ---------------------------------- |\r\n| History & Culture            | german-history-and-culture-4133071 |\r\n| Pronunciation & Conversation | german-pronunciation-4133070       |\r\n| Vocabulary                   | german-vocabulary-4133068          |\r\n| Grammar                      | german-grammar-4133067             |\r\n\r\n#### Italian\r\n\r\n| category          | id                                  |\r\n| ----------------- | ----------------------------------- |\r\n| History & Culture | italian-history-and-culture-4133065 |\r\n| Vocabulary        | italian-vocabulary-4133061          |\r\n| Grammar           | italian-grammar-4133063             |\r\n\r\n#### Japanese\r\n\r\n| category                      | id                                   |\r\n| ----------------------------- | ------------------------------------ |\r\n| History & Culture             | japanese-history-and-culture-4133058 |\r\n| Essential Japanese Vocabulary | japanese-vocabulary-4133060          |\r\n| Japanese Grammar              | japanese-grammar-4133056             |\r\n\r\n#### Mandarin\r\n\r\n| category                         | id                                       |\r\n| -------------------------------- | ---------------------------------------- |\r\n| Mandarin History and Culture     | mandarin-history-and-culture-4133054     |\r\n| Pronunciation                    | mandarin-pronunciation-4133053           |\r\n| Vocabulary                       | mandarin-vocabulary-4133052              |\r\n| Understanding Chinese Characters | understanding-chinese-characters-4133051 |\r\n\r\n#### Russian\r\n\r\n| category | id              |\r\n| -------- | --------------- |\r\n| Russian  | russian-4175265 |\r\n\r\n#### For Students & Parents\r\n\r\n| category           | id                         |\r\n| ------------------ | -------------------------- |\r\n| Homework Help      | homework-help-4132587      |\r\n| Private School     | private-school-4132514     |\r\n| Test Prep          | test-prep-4132578          |\r\n| College Admissions | college-admissions-4132565 |\r\n| College Life       | college-life-4132553       |\r\n| Graduate School    | graduate-school-4132543    |\r\n| Business School    | business-school-4132536    |\r\n| Law School         | law-school-4132527         |\r\n| Distance Learning  | distance-learning-4132521  |\r\n\r\n#### For Educators\r\n\r\n| category             | id                            |\r\n| -------------------- | ----------------------------- |\r\n| Becoming A Teacher   | becoming-a-teacher-4132510    |\r\n| Assessments & Tests  | assessments-and-tests-4132508 |\r\n| Elementary Education | elementary-education-4132507  |\r\n| Secondary Education  | secondary-education-4132504   |\r\n| Special Education    | special-education-4132499     |\r\n| Teaching             | teaching-4132488              |\r\n| Homeschooling        | homeschooling-4132480         |\r\n\r\n#### For Adult Learners\r\n\r\n| category                | id                              |\r\n| ----------------------- | ------------------------------- |\r\n| Tips For Adult Students | tips-for-adult-students-4132468 |\r\n| Getting Your Ged        | getting-your-ged-4132466        |\r\n</details>`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { category = '' } = ctx.req.param();\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 50;\r\n\r\n    const rootUrl = 'https://www.thoughtco.com';\r\n    const currentUrl = new URL(category, rootUrl).href;\r\n\r\n    const { data: response } = await got(currentUrl);\r\n\r\n    const $ = load(response);\r\n\r\n    let items = $('a[data-doc-id]')\r\n        .slice(0, limit)\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n\r\n            return {\r\n                title: item.find('span.block-title').text(),\r\n                link: new URL(item.prop('href'), rootUrl).href,\r\n            };\r\n        });\r\n\r\n    items = await Promise.all(\r\n        items.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const { data: detailResponse } = await got(item.link);\r\n\r\n                const content = load(detailResponse);\r\n\r\n                content('div.adslot').remove();\r\n                content('div.sources-and-citation, .mntl-figure-caption svg').remove();\r\n                content('div.figure-media').each((_, e) => {\r\n                    e = $(e);\r\n\r\n                    const image = e.find('img');\r\n\r\n                    e.replaceWith(\r\n                        art(path.join(__dirname, 'templates/description.art'), {\r\n                            image: {\r\n                                src: image.prop('data-src'),\r\n                                width: image.prop('width'),\r\n                                height: image.prop('height'),\r\n                            },\r\n                        })\r\n                    );\r\n                });\r\n\r\n                item.title = content('meta[property=\"og:title\"]').prop('content');\r\n                item.description = art(path.join(__dirname, 'templates/description.art'), {\r\n                    image: {\r\n                        src: content('meta[property=\"og:image\"]').prop('content'),\r\n                    },\r\n                    description: content('div.article-content').html(),\r\n                });\r\n                item.author = content('meta[name=\"sailthru.author\"]').prop('content');\r\n                item.category = [\r\n                    ...new Set(\r\n                        content('meta[name=\"parsely-tags\"]')\r\n                            .prop('content')\r\n                            ?.split(/,/)\r\n                            .map((c) => c.trim())\r\n                    ),\r\n                ];\r\n                item.pubDate = parseDate(detailResponse.match(/\"datePublished\": \"(.*?)\"/)[1]);\r\n                item.updated = parseDate(detailResponse.match(/\"dateModified\": \"(.*?)\"/)[1]);\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    const author = $('meta[property=\"og:site_name\"]').prop('content');\r\n    const title = $('meta[property=\"og:title\"]').prop('content');\r\n    const icon = new URL($('link[rel=\"apple-touch-icon-precomposed\"]').prop('href'), rootUrl).href;\r\n\r\n    return {\r\n        item: items,\r\n        title: `${author}${title.startsWith(author) ? '' : ` - ${title}`}`,\r\n        link: currentUrl,\r\n        description: $('meta[property=\"og:description\"]').prop('content'),\r\n        language: $('html').prop('lang'),\r\n        image: $('meta[property=\"og:image\"]').prop('content'),\r\n        icon,\r\n        logo: icon,\r\n        subtitle: $('meta[property=\"og:title\"]').prop('content'),\r\n        author,\r\n    };\r\n}\r\n"],"mappings":"wdASA,MAAa,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,aACb,QAAS,aACT,WAAY,CAAE,SAAU,0BACxB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,WACN,YAAa,CAAC,WACd,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAySjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,WAAW,IAAO,EAAI,IAAI,QAC5B,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,GAE/E,EAAU,4BACV,EAAa,IAAI,IAAI,EAAU,GAAS,KAExC,CAAE,KAAM,GAAa,MAAM,EAAI,GAE/B,EAAI,EAAK,GAEX,EAAQ,EAAE,kBACT,MAAM,EAAG,GACT,UACA,IAAK,IACF,EAAO,EAAE,GAEF,CACH,MAAO,EAAK,KAAK,oBAAoB,OACrC,KAAM,IAAI,IAAI,EAAK,KAAK,QAAS,GAAS,QAItD,EAAQ,MAAM,QAAQ,IAClB,EAAM,IAAK,GACP,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,GAAM,CAAE,KAAM,GAAmB,MAAM,EAAI,EAAK,MAE1C,EAAU,EAAK,GAuCrB,OArCA,EAAQ,cAAc,SACtB,EAAQ,sDAAsD,SAC9D,EAAQ,oBAAoB,MAAM,EAAG,IAAM,CACvC,EAAI,EAAE,GAEN,IAAM,EAAQ,EAAE,KAAK,OAErB,EAAE,YACE,EAAI,EAAA,KAAA,EAAA,sCAAmD,CACnD,MAAO,CACH,IAAK,EAAM,KAAK,YAChB,MAAO,EAAM,KAAK,SAClB,OAAQ,EAAM,KAAK,gBAMnC,EAAK,MAAQ,EAAQ,6BAA6B,KAAK,WACvD,EAAK,YAAc,EAAI,EAAA,KAAA,EAAA,sCAAmD,CACtE,MAAO,CACH,IAAK,EAAQ,6BAA6B,KAAK,YAEnD,YAAa,EAAQ,uBAAuB,SAEhD,EAAK,OAAS,EAAQ,gCAAgC,KAAK,WAC3D,EAAK,SAAW,CACZ,GAAG,IAAI,IACH,EAAQ,6BACH,KAAK,YACJ,MAAM,KACP,IAAK,GAAM,EAAE,UAG1B,EAAK,QAAU,EAAU,EAAe,MAAM,4BAA4B,IAC1E,EAAK,QAAU,EAAU,EAAe,MAAM,2BAA2B,IAElE,MAKnB,IAAM,EAAS,EAAE,iCAAiC,KAAK,WACjD,EAAQ,EAAE,6BAA6B,KAAK,WAC5C,EAAO,IAAI,IAAI,EAAE,4CAA4C,KAAK,QAAS,GAAS,KAE1F,MAAO,CACH,KAAM,EACN,MAAO,GAAG,IAAS,EAAM,WAAW,GAAU,GAAK,MAAM,MACzD,KAAM,EACN,YAAa,EAAE,mCAAmC,KAAK,WACvD,SAAU,EAAE,QAAQ,KAAK,QACzB,MAAO,EAAE,6BAA6B,KAAK,WAC3C,OACA,KAAM,EACN,SAAU,EAAE,6BAA6B,KAAK,WAC9C"}