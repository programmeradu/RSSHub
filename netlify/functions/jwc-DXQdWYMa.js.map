{"version":3,"file":"jwc-DXQdWYMa.js","names":["route: Route","got","$"],"sources":["../../lib/routes/wfu/jwc.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\n\r\n// 参考 whu/news 武汉大学页面写成\r\n\r\nconst baseUrl = 'https://jwc.wfu.edu.cn/3742/list.htm';\r\nconst sizeTitle = '潍坊学院教务处新闻';\r\n\r\nexport const route: Route = {\r\n    path: '/jwc',\r\n    categories: ['university'],\r\n    example: '/wfu/jwc',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['jwc.wfu.edu.cn/'],\r\n        },\r\n    ],\r\n    name: '教务处通知',\r\n    maintainers: ['cccht'],\r\n    handler,\r\n    url: 'jwc.wfu.edu.cn/',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await got({\r\n        method: 'get',\r\n        url: baseUrl,\r\n        headers: {\r\n            Referer: 'https://jwc.wfu.edu.cn/',\r\n        },\r\n    });\r\n    const $ = load(response.data);\r\n\r\n    // 获取当前页面的 list\r\n    const list = $('ul.wp_article_list>li');\r\n\r\n    const result = await Promise.all(\r\n        // 遍历每一篇文章\r\n        list.toArray().map((item) => {\r\n            const $ = load(item); // 将列表项加载成 html\r\n            const $article_title = $('div.pr_fields>span.Article_Title>a');\r\n            const $item_url = 'https://jwc.wfu.edu.cn/' + $article_title.attr('href'); // 获取 每一项的url\r\n            const $title = $article_title.text(); // 获取每个的标题\r\n            const $description = $('div.pr_fields>span.Article_Title').html();\r\n\r\n            // 列表上提取到的信息\r\n            // 教务处通知为文件，直接提供下载链接\r\n            // 标题 链接\r\n            const single = {\r\n                title: $title,\r\n                link: $item_url,\r\n                guid: $item_url,\r\n                description: $description,\r\n            };\r\n\r\n            // 合并解析后的结果集作为该篇文章最终的输出结果\r\n            return single;\r\n        })\r\n    );\r\n\r\n    return {\r\n        title: sizeTitle,\r\n        link: baseUrl,\r\n        description: '潍坊学院教务处通知（通知为文件需下载）',\r\n        item: result,\r\n    };\r\n}\r\n"],"mappings":"+PAMA,MAAM,EAAU,uCAGHA,EAAe,CACxB,KAAM,OACN,WAAY,CAAC,cACb,QAAS,WACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,qBAGjB,KAAM,QACN,YAAa,CAAC,SACd,UACA,IAAK,mBAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,EACL,QAAS,CACL,QAAS,6BAGX,EAAI,EAAK,EAAS,MAGlB,EAAO,EAAE,yBAET,EAAS,MAAM,QAAQ,IAEzB,EAAK,UAAU,IAAK,GAAS,CACzB,IAAMC,EAAI,EAAK,GACT,EAAiBA,EAAE,sCACnB,EAAY,0BAA4B,EAAe,KAAK,QAC5D,EAAS,EAAe,OACxB,EAAeA,EAAE,oCAAoC,OAKrD,EAAS,CACX,MAAO,EACP,KAAM,EACN,KAAM,EACN,YAAa,GAIjB,OAAO,KAIf,MAAO,CACH,MAAO,YACP,KAAM,EACN,YAAa,sBACb,KAAM"}