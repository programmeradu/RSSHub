import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{ViewType as r}from"./types-A5bA50Mg.js";import{fallback as i,queryToBoolean as a,queryToInteger as o}from"./readable-social-D7TWDGpz.js";import s from"node:querystring";const c={path:`/people/:userid/status/:routeParams?`,categories:[`social-media`],view:r.SocialMedia,example:`/douban/people/75118396/status`,parameters:{userid:`æ•´æ•°å‹ç”¨æˆ· id`,routeParams:`é¢å¤–å‚æ•°ï¼›è§ä¸‹`},name:`ç”¨æˆ·å¹¿æ’­`,maintainers:[`alfredcai`],handler:p,description:`
::: tip
-   **ç›®å‰åªæ”¯æŒæ•´æ•°å‹ id**
-   å­—æ¯å‹çš„ idï¼Œå¯ä»¥é€šè¿‡å¤´åƒå›¾ç‰‡é“¾æ¥æ¥æ‰¾åˆ°å…¶æ•´æ•°å‹ idï¼Œå›¾ç‰‡å‘½åè§„åˆ™\`ul[userid]-*.jpg\`æˆ–\`u[userid]-*.jpg\`ï¼Œå³å–æ–‡ä»¶åä¸­é—´çš„æ•°å­—
-   ä¾‹å¦‚ï¼šç”¨æˆ· id: \`MovieL\`ä»–çš„å¤´åƒå›¾ç‰‡é“¾æ¥ï¼š\`https://img1.doubanio.com/icon/ul1128221-98.jpg\`ä»–çš„æ•´æ•°å‹ id: \`1128221\`
:::

å¯¹äºè±†ç“£ç”¨æˆ·å¹¿æ’­å†…å®¹ï¼Œåœ¨ \`routeParams\` å‚æ•°ä¸­ä»¥ query string æ ¼å¼è®¾ç½®å¦‚ä¸‹é€‰é¡¹å¯ä»¥æ§åˆ¶è¾“å‡ºçš„æ ·å¼

| é”®                         | å«ä¹‰                                                           | æ¥å—çš„å€¼       | é»˜è®¤å€¼ |
| -------------------------- | -------------------------------------------------------------- | -------------- | ------ |
| readable                   | æ˜¯å¦å¼€å¯ç»†èŠ‚æ’ç‰ˆå¯è¯»æ€§ä¼˜åŒ–                                     | 0/1/true/false | false  |
| authorNameBold             | æ˜¯å¦åŠ ç²—ä½œè€…åå­—                                               | 0/1/true/false | false  |
| showAuthorInTitle          | æ˜¯å¦åœ¨æ ‡é¢˜å¤„æ˜¾ç¤ºä½œè€…                                           | 0/1/true/false | true   |
| showAuthorInDesc           | æ˜¯å¦åœ¨æ­£æ–‡å¤„æ˜¾ç¤ºä½œè€…                                           | 0/1/true/false | false  |
| showAuthorAvatarInDesc     | æ˜¯å¦åœ¨æ­£æ–‡å¤„æ˜¾ç¤ºä½œè€…å¤´åƒï¼ˆè‹¥é˜…è¯»å™¨ä¼šæå–æ­£æ–‡å›¾ç‰‡ï¼Œä¸å»ºè®®å¼€å¯ï¼‰ | 0/1/true/false | false  |
| showEmojiForRetweet        | æ˜¾ç¤º â€œğŸ”â€ å–ä»£ â€œFwâ€ï¼ˆè½¬å‘ï¼‰                                    | 0/1/true/false | false  |
| showRetweetTextInTitle     | åœ¨æ ‡é¢˜å‡ºæ˜¾ç¤ºè½¬å‘è¯„è®ºï¼ˆç½®ä¸º false åˆ™åœ¨æ ‡é¢˜åªæ˜¾ç¤ºè¢«è½¬å‘çš„å¹¿æ’­ï¼‰  | 0/1/true/false | false  |
| addLinkForPics             | ä¸ºå›¾ç‰‡æ·»åŠ å¯ç‚¹å‡»çš„é“¾æ¥                                         | 0/1/true/false | false  |
| showTimestampInDescription | åœ¨æ­£æ–‡å¤„æ˜¾ç¤ºå¹¿æ’­çš„æ—¶é—´æˆ³                                       | 0/1/true/false | false  |
| showComments               | åœ¨æ­£æ–‡å¤„æ˜¾ç¤ºè¯„è®º                                               | 0/1/true/false | false  |
| widthOfPics                | å¹¿æ’­é…å›¾å®½ï¼ˆç”Ÿæ•ˆå–å†³äºé˜…è¯»å™¨ï¼‰                                 | ä¸æŒ‡å®š / æ•°å­—  | ä¸æŒ‡å®š |
| heightOfPics               | å¹¿æ’­é…å›¾é«˜ï¼ˆç”Ÿæ•ˆå–å†³äºé˜…è¯»å™¨ï¼‰                                 | ä¸æŒ‡å®š / æ•°å­—  | ä¸æŒ‡å®š |
| sizeOfAuthorAvatar         | ä½œè€…å¤´åƒå¤§å°                                                   | æ•°å­—           | 48     |

  æŒ‡å®šæ›´å¤šä¸é»˜è®¤å€¼ä¸åŒçš„å‚æ•°é€‰é¡¹å¯ä»¥æ”¹å–„ RSS çš„å¯è¯»æ€§ï¼Œå¦‚

  [https://rsshub.app/douban/people/113894409/status/readable=1&authorNameBold=1&showAuthorInTitle=1&showAuthorInDesc=1&showAuthorAvatarInDesc=1&showEmojiForRetweet=1&showRetweetTextInTitle=1&addLinkForPics=1&showTimestampInDescription=1&showComments=1&widthOfPics=100](https://rsshub.app/douban/people/113894409/status/readable=1&authorNameBold=1&showAuthorInTitle=1&showAuthorInDesc=1&showAuthorAvatarInDesc=1&showEmojiForRetweet=1&showRetweetTextInTitle=1&addLinkForPics=1&showTimestampInDescription=1&showComments=1&widthOfPics=100)

  çš„æ•ˆæœä¸º

  <img loading="lazy" src="/img/readable-douban.png" alt="è±†ç“£è¯»ä¹¦çš„å¯è¯»è±†ç“£å¹¿æ’­ RSS" />`},l={Referer:`https://m.douban.com/`};function u(e){let t={isFixSuccess:!0,why:``},n=new Date;return e?e.deleted?t={isFixSuccess:!1,why:e.msg??`[ å†…å®¹å·²è¢«åˆ é™¤ ]`}:e.hidden?t={isFixSuccess:!1,why:e.msg??`[ å†…å®¹å·²è¢«è®¾ä¸ºä¸å¯è§ ]`}:e.text===void 0||e.text===null||!e.uri?t={isFixSuccess:!1,why:e.msg??`[ å†…å®¹å·²ä¸å¯è®¿é—® ]`}:(e.author||(e.author={}),e.author.url||(e.author.url=`https://www.douban.com/people/1/`),e.author.name||(e.author.name=`[ä½œè€…ä¸å¯è§]`),e.author.avatar||(e.author.avatar=`https://img1.doubanio.com/icon/user_normal.jpg`),e.create_time||(e.create_time=n.toLocaleString()),e.entities||(e.entities=[])):(t={isFixSuccess:!1,why:`[ æ— å†…å®¹ ]`},e={}),e.sharing_url&&(e.sharing_url=e.sharing_url.split(`&`)[0]),t.isFixSuccess||(e.sharing_url=`https://www.douban.com?rsshub_failed=`+n.getTime().toString(),e.create_time||(e.create_time=n.toLocaleString())),t}function d(e,t,n={},r=[]){let c=s.parse(e.req.param(`routeParams`)),l={readable:i(n.readable,a(c.readable),!1),authorNameBold:i(n.authorNameBold,a(c.authorNameBold),!1),showAuthorInTitle:i(n.showAuthorInTitle,a(c.showAuthorInTitle),!0),showAuthorInDesc:i(n.showAuthorInDesc,a(c.showAuthorInDesc),!1),showAuthorAvatarInDesc:i(n.showAuthorAvatarInDesc,a(c.showAuthorAvatarInDesc),!1),showEmojiForRetweet:i(n.showEmojiForRetweet,a(c.showEmojiForRetweet),!1),showRetweetTextInTitle:i(n.showRetweetTextInTitle,a(c.showRetweetTextInTitle),!1),addLinkForPics:i(n.addLinkForPics,a(c.addLinkForPics),!1),showTimestampInDescription:i(n.showTimestampInDescription,a(c.showTimestampInDescription),!1),showComments:i(n.showComments,a(c.showComments),!1),showColonInDesc:i(n.showColonInDesc,null,!1),widthOfPics:i(n.widthOfPics,o(c.widthOfPics),-1),heightOfPics:i(n.heightOfPics,o(c.heightOfPics),-1),sizeOfAuthorAvatar:i(n.sizeOfAuthorAvatar,o(c.sizeOfAuthorAvatar),48)};n=l;let{readable:f,authorNameBold:p,showAuthorInTitle:m,showAuthorInDesc:h,showAuthorAvatarInDesc:g,showEmojiForRetweet:_,showRetweetTextInTitle:v,addLinkForPics:y,showTimestampInDescription:b,showComments:x,showColonInDesc:S,widthOfPics:C,heightOfPics:w,sizeOfAuthorAvatar:T}=n,{status:E,comments:D}=t,{isFixSuccess:O,why:k}=u(E);if(!O)return{title:k,description:k};let A=``,j=``,M,N,{isFixSuccess:P,why:F}=u(E.reshared_status);if(E.activity===`è½¬å‘`?P?(M=`è½¬å‘ `,f&&(M+=`<a href="${E.reshared_status.author.url}" target="_blank" rel="noopener noreferrer">`),p&&(M+=`<strong>`),M+=E.reshared_status.author.name,p&&(M+=`</strong>`),f&&(M+=`</a>`),M+=` çš„å¹¿æ’­`,N=`è½¬å‘ ${E.reshared_status.author.name} çš„å¹¿æ’­`):(M=`è½¬å‘å¹¿æ’­`,N=`è½¬å‘å¹¿æ’­`):(M=E.activity,N=E.activity),h){let e=``;f&&(e+=`<a href="${E.author.url}" target="_blank" rel="noopener noreferrer">`),g&&(e+=`<img width="${T}" height="${T}" src="${E.author.avatar}" ${f?`hspace="8" vspace="8" align="left"`:``} />`),p&&(e+=`<strong>`),e+=E.author.name,p&&(e+=`</strong>`),f&&(e+=`</a>`),e+=`&ensp;`,A+=e+M+(S?`: `:``)}m&&(j+=`${E.author.name} `),j+=`${N}: `,b&&(A+=`<br><small>${E.create_time}</small><br>`);let I=E.text,L=0,R=[];for(let e of E.entities)R.push(I.slice(L,e.start),`<a href="${e.uri.replace(`douban://douban.com`,`https://www.douban.com/doubanapp/dispatch?uri=`)}" target="_blank" rel="noopener noreferrer">${e.title}</a>`),L=e.end;if(R.push(I.slice(L)),I=R.join(``),A+=I,E.card&&(j+=E.card.rating?`ã€Š${E.card.title}ã€‹`:`ã€Œ${E.card.title}ã€`),(E.activity!==`è½¬å‘`||v)&&(j+=E.text.replace(`
`,``)),E.images&&E.images.length){A+=f?`<br clear="both" /><div style="clear: both"></div>`:`<br>`;let e=``;for(let t of E.images){if(!(t.large&&t.large.url))continue;e+=`<img width="0" height="0" hidden="true" src="${t.large.url}">`}r.push(e);for(let e of E.images){if(!(e.large&&e.large.url)){A+=`[æ— æ³•æ˜¾ç¤ºçš„å›¾ç‰‡]`;continue}y&&(A+=`<a href="`+e.large.url+`" target="_blank" rel="noopener noreferrer">`),f||(A+=`<br>`);let t=``;A+=`<img `,C>=0&&(A+=` width="${C}"`,t+=`width: ${C}px;`),w>=0&&(A+=`height="${w}" `,t+=`height: ${w}px;`),A+=` style="${t}" `+(f?`vspace="8" hspace="4" `:``)+` src="`+e.large.url+`">`,y&&(A+=`</a>`)}}if(E.video_info){A+=f?`<br clear="both" /><div style="clear: both"></div>`:`<br>`;let e=E.video_info.cover_url,t=E.video_info.video_url;t&&(A=`
                ${A}
                <video
                    src="${t}"
                    ${e?`poster="${e}"`:``}
                >
                </video>
            `)}if(E.parent_status){A+=_?` ğŸ” `:` Fw: `,v&&(j+=_?` ğŸ” `:` Fw: `);let{isFixSuccess:e,why:t}=u(E.parent_status);if(e){let e=``;f&&(e+=`<a href="${E.parent_status.author.url}">`),p&&(e+=`<strong>`),e+=E.parent_status.author.name,p&&(e+=`</strong>`),f&&(e+=`</a>`),e+=`:&ensp;`,A+=e+E.parent_status.text,v&&(j+=E.parent_status.author.name+`: `+E.parent_status.text)}else A+=t,v&&(j+=t)}if(E.card){let e;E.card.image&&(E.card.image.large||E.card.image.normal)&&(e=E.card.image.large||E.card.image.normal),A+=f?`<br clear="both" /><div style="clear: both"></div><blockquote style="background: #80808010;border-top:1px solid #80808030;border-bottom:1px solid #80808030;margin:0;padding:5px 20px;">`:`<br>`,e&&(A+=`<img src="${e.url}" ${f?`vspace="0" hspace="12" align="left" height="75" style="height: 75px;"`:``} />`),E.card.title||(E.card.title=`[ç©º]`),E.card.subtitle||(E.card.subtitle=`[ç©º]`),E.card.url||(E.card.url=`https://www.douban.com`),A+=`<a href="${E.card.url}" target="_blank" rel="noopener noreferrer"><strong>${E.card.title}</strong><br><small>${E.card.subtitle}</small>`,E.card.rating&&(A+=`<br><small>è¯„åˆ†ï¼š${E.card.rating.value}</small>`),A+=`</a>`,f&&(A+=`<br clear="both" /><div style="clear: both"></div></blockquote>`)}if(E.video_card){A+=f?`<br clear="both" /><div style="clear: both"></div><blockquote style="background: #80808010;border-top:1px solid #80808030;border-bottom:1px solid #80808030;margin:0;padding:5px 20px;">`:`<br>`;let e=E.video_card.video_info&&E.video_card.video_info.cover_url,t=E.video_card.video_info&&E.video_card.video_info.video_url;E.video_card.url||(E.video_card.url=`https://www.douban.com`),A+=`${t?`<video src="${t}" ${e?`poster="${e}"`:``}></video>`:``}<br>${E.video_card.title?`<a href="${E.video_card.url}">${E.video_card.title}</a>`:``}`,f&&(A+=`</blockquote>`)}if(E.reshared_status)if(A+=f?`<br clear="both" /><div style="clear: both"></div><blockquote style="background: #80808010;border-top:1px solid #80808030;border-bottom:1px solid #80808030;margin:0;padding:5px 20px;">`:`<br>`,v&&(j+=` | `),P){A+=d(e,{status:E.reshared_status,comments:[]},{showAuthorInDesc:!0,showAuthorAvatarInDesc:!1,showComments:!1,showColonInDesc:!0},r).description,j+=E.reshared_status.text;let t=E.reshared_status.uri.replace(`douban://douban.com`,`https://www.douban.com/doubanapp/dispatch?uri=`);f&&(A+=`<br><small>åŸåŠ¨æ€ï¼š<a href="${t}" target="_blank" rel="noopener noreferrer">${t}</a></small><br clear="both" /><div style="clear: both"></div></blockquote>`)}else A+=F,j+=F;if(x){D.length>0&&(A+=`<hr>`);for(let e of D)A+=`<br>${e.text} - <a href="${e.author.url}" target="_blank" rel="noopener noreferrer">${e.author.name}</a>`}return h&&g&&(A=r.join(``)+A),A=A.trim().replaceAll(`
`,`<br>`),{title:j,description:A}}async function f(e){let r=`https://m.douban.com/rexxar/api/v2/status/`;await Promise.all(e.map(async e=>{let i=r+e.status.id,a=await t.get(i);if(a)e.status.text=a;else{let{data:{text:r}}=await n({url:i,headers:l});t.set(i,r),e.status.text=r}if(e.status.reshared_status){if(i=r+e.status.reshared_status.id,a=await t.get(i),a)e.status.reshared_status.text=a;else if(u(e.status.reshared_status).isFixSuccess)try{let{data:{text:r}}=await n({url:i,headers:l});t.set(i,r),e.status.reshared_status.text=r}catch{e.status.reshared_status.text+=`
[è·å–åŸåŠ¨æ€å¤±è´¥]`}}}))}async function p(r){let i=r.req.param(`userid`),a=`https://m.douban.com/rexxar/api/v2/status/user_timeline/${i}`,o=await t.tryGet(a,async()=>{let e=await n({url:a,headers:l});return e.data.items},e.cache.routeExpire,!1);return o&&await f(o),{title:`è±†ç“£å¹¿æ’­ - ${o?o[0].status.author.name:i}`,link:`https://m.douban.com/people/${i}/statuses`,item:o&&o.filter(e=>!e.deleted).map(e=>{let t=d(r,e);return{title:t.title,link:e.status.sharing_url.replace(/\?_i=(.*)/,``),pubDate:new Date(Date.parse(e.status.create_time+` GMT+0800`)).toUTCString(),description:t.description}})}}export{c as route};
//# sourceMappingURL=status-sZT1UQ-e.js.map