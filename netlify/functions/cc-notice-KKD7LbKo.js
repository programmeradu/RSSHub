import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={path:`/cc/:type?`,categories:[`university`],example:`/nankai/cc/13291`,parameters:{type:`栏目编号（若为空则默认为"最新动态"）`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cc.nankai.edu.cn`,`cc.nankai.edu.cn/:type/list.htm`],target:`/cc/:type?`}],name:`计算机学院`,maintainers:[`vicguo0724`],description:`| 最新动态 | 学院公告 | 学生工作通知 | 科研信息 | 本科生教学 | 党团园地 | 研究生招生 | 研究生教学 | 境外交流 |
| -------- | -------- | ---------- | -------- | ---------- | -------- | ---------- | ---------- | -------- |
| 13291    | 13292    | 13293      | 13294    | 13295      | 13296    | 13297      | 13298      | 13299    |`,url:`cc.nankai.edu.cn`,handler:async a=>{let{type:o=`13291`}=a.req.param(),s=`https://cc.nankai.edu.cn`,{data:c}=await n(`${s}/${o}/list.htm`),l=i(c),u=l(`.accordion .selected a`).text().trim()||`最新动态`,d=l(`#wp_news_w49 table tr`).slice(1).toArray().map(e=>{let n=l(e),i=n.find(`td`);if(i.length<5)return null;let a=i.eq(1).text().trim(),o=i.eq(2).text().trim(),c=i.eq(3).text().trim(),u=n.attr(`onclick`),d=``;if(u){let e=u.match(/window\.location\.href='([^']+)';/);e&&(d=e[1],d.startsWith(`http`)||(d=`${s}${d}`))}return{title:a,link:d,pubDate:r(t(c),8),author:o}}).filter(e=>e&&e.link),f=await Promise.all(d.map(t=>t?e.tryGet(t.link,async()=>{try{let{data:e}=await n(t.link),r=i(e),a=r(`.wp_articlecontent`).html()||r(`.body-news-detail`).html();a=a||t.title,t.description=a}catch{t.description=t.title+` (获取详细内容失败)`}return t}):null));return{title:`南开大学计算机学院-${u}`,link:`${s}/${o}/list.htm`,item:f}}};export{a as route};
//# sourceMappingURL=cc-notice-KKD7LbKo.js.map