import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i={path:`/news/:category?`,categories:[`university`],example:`/hlju/news/hdyw`,parameters:{category:{description:`新闻分类，默认为黑大要闻`,options:[{value:`hdyw`,label:`黑大要闻`},{value:`jjxy`,label:`菁菁校园`},{value:`rwfc`,label:`人物风采`},{value:`xwdt`,label:`新闻动态`},{value:`jxky`,label:`教学科研`},{value:`xyjw`,label:`学院经纬`},{value:`jlhz`,label:`交流合作`},{value:`cxcy`,label:`创新创业`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hdxw.hlju.edu.cn/:category.htm`,`hdxw.hlju.edu.cn/`],target:`/news/:category`}],name:`新闻网`,maintainers:[`LCMs-YoRHa`],handler:a};async function a(i){let a=i.req.param(`category`)??`hdyw`,o=`https://hdxw.hlju.edu.cn`,s=`${o}/${a}.htm`,c=await n(s),l=r(c),u=l(`.bgtitle_list`).text().trim()||`黑大要闻`,d=l(`a[href*="info/"]`).toArray().map(e=>{let n=l(e),r=n.attr(`href`),i=n.text().trim();if(!i||!r||i.length<5)return null;let a=n.parent(),s=a.text().match(/(\d{4})\/(\d{2})\/(\d{2})/);return{title:i,link:r.startsWith(`http`)?r:`${o}/${r}`,pubDate:s?t(s[0].replaceAll(`/`,`-`)):void 0}}).filter(e=>e!==null),f=d.filter((e,t,n)=>n.findIndex(t=>t.link===e.link)===t).slice(0,15),p=await Promise.all(f.map(i=>e.tryGet(i.link,async()=>{if(!i.link.includes(`hdxw.hlju.edu.cn`))return{title:i.title,link:i.link,description:`外部链接，请点击查看原文`,pubDate:i.pubDate};let e=await n(i.link),a=r(e),o=a(`.v_news_content`),s=``;o.length>0?(o.find(`script, style, .print, .share`).remove(),s=o.html()||``):s=`内容获取失败，请点击查看原文`;let c=i.pubDate,l=a(`.timestyle110144`);if(l.length>0){let e=l.text().trim(),n=e.match(/(\d{4}[-/]\d{2}[-/]\d{2})\s*(\d{2}:\d{2}(?::\d{2})?)/);if(n){let e=n[1].replaceAll(`/`,`-`),r=n[2];c=t(`${e} ${r}`)}}return{title:i.title,link:i.link,description:s||`无法获取文章内容，请点击查看原文`,pubDate:c}})));return{title:`黑龙江大学新闻网 - ${u}`,link:s,description:`黑龙江大学新闻网${u}栏目`,item:p}}export{i as route};
//# sourceMappingURL=news-ChjGtlxf.js.map