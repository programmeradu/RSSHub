{"version":3,"file":"question-2CY6S3bi.js","names":["route: Route","auth","got","link"],"sources":["../../lib/routes/zhihu/xhu/question.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport auth from './auth';\r\nimport { processImage } from '../utils';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/xhu/question/:questionId/:sortBy?',\r\n    categories: ['social-media'],\r\n    example: '/zhihu/xhu/question/264051433',\r\n    parameters: { questionId: '问题 id', sortBy: '排序方式：`default`, `created`, `updated`。默认为 `default`' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.zhihu.com/question/:questionId'],\r\n            target: '/xhu/question/:questionId',\r\n        },\r\n    ],\r\n    name: 'xhu - 问题',\r\n    maintainers: ['JimenezLi'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const xhuCookie = await auth.getCookie();\r\n    const {\r\n        questionId,\r\n        sortBy = 'default', // default,created,updated\r\n    } = ctx.req.param();\r\n    const link = `https://www.zhihu.com/question/${questionId}`;\r\n    const url = `https://api.zhihuvvv.workers.dev/questions/${questionId}/answers?limit=20&offest=0&order_by=${sortBy}`;\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url,\r\n        headers: {\r\n            Referer: 'https://api.zhihuvvv.workers.dev',\r\n            Cookie: xhuCookie,\r\n        },\r\n    });\r\n    const listRes = response.data.data;\r\n\r\n    return {\r\n        title: `知乎-${listRes[0].question.title}`,\r\n        link,\r\n        item: listRes.map((item) => {\r\n            const link = `https://www.zhihu.com/question/${questionId}/answer/${item.id}`;\r\n            const author = item.author.name;\r\n            const title = `${author}的回答：${item.excerpt}`;\r\n            const description = `${author}的回答<br/><br/>${processImage(item.excerpt)}`;\r\n\r\n            return {\r\n                title,\r\n                description,\r\n                author,\r\n                pubDate: parseDate(item.updated_time * 1000),\r\n                guid: link,\r\n                link,\r\n            };\r\n        }),\r\n    };\r\n}\r\n"],"mappings":"gbAMA,MAAaA,EAAe,CACxB,KAAM,qCACN,WAAY,CAAC,gBACb,QAAS,gCACT,WAAY,CAAE,WAAY,QAAS,OAAQ,sDAC3C,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,sCACT,OAAQ,8BAGhB,KAAM,WACN,YAAa,CAAC,aACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAY,MAAMC,EAAK,YACvB,CACF,aACA,SAAS,WACT,EAAI,IAAI,QACN,EAAO,kCAAkC,IACzC,EAAM,8CAA8C,EAAW,sCAAsC,IAErG,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,MACA,QAAS,CACL,QAAS,mCACT,OAAQ,KAGV,EAAU,EAAS,KAAK,KAE9B,MAAO,CACH,MAAO,MAAM,EAAQ,GAAG,SAAS,QACjC,OACA,KAAM,EAAQ,IAAK,GAAS,CACxB,IAAMC,EAAO,kCAAkC,EAAW,UAAU,EAAK,KACnE,EAAS,EAAK,OAAO,KACrB,EAAQ,GAAG,EAAO,MAAM,EAAK,UAC7B,EAAc,GAAG,EAAO,eAAe,EAAa,EAAK,WAE/D,MAAO,CACH,QACA,cACA,SACA,QAAS,EAAU,EAAK,aAAe,KACvC,KAAMA,EACN,KAAA"}