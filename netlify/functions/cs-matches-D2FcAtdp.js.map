{"version":3,"file":"cs-matches-D2FcAtdp.js","names":["route: Route","ofetch","columnMap: { date?: number; tournament?: number; score?: number; opponent?: number }"],"sources":["../../lib/routes/liquipedia/cs-matches.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/counterstrike/matches/:team',\r\n    radar: [\r\n        {\r\n            source: ['liquipedia.net/counterstrike/:id/Matches', 'liquipedia.net/dota2/:id'],\r\n            target: '/counterstrike/matches/:id',\r\n        },\r\n    ],\r\n    example: '/liquipedia/counterstrike/matches/Team_Falcons',\r\n    name: 'Counter-Strike Team Match Results',\r\n    maintainers: ['CookiePieWw'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const team = ctx.req.param('team');\r\n\r\n    const rootUrl = 'https://liquipedia.net';\r\n    const currentUrl = `${rootUrl}/counterstrike/${team}/Matches`;\r\n\r\n    const response = await ofetch(currentUrl);\r\n\r\n    const $ = load(response);\r\n    const table = $('table').first();\r\n    const header = table.find('th');\r\n    const columnMap: { date?: number; tournament?: number; score?: number; opponent?: number } = {};\r\n    header.each((index, element) => {\r\n        const text = $(element).text().trim().toLowerCase();\r\n        if (text.includes('date')) {\r\n            columnMap.date = index;\r\n        }\r\n        if (text.includes('tournament')) {\r\n            columnMap.tournament = index;\r\n        }\r\n        if (text.includes('score')) {\r\n            columnMap.score = index;\r\n        }\r\n        if (text.includes('opponent')) {\r\n            columnMap.opponent = index;\r\n        }\r\n    });\r\n\r\n    const list = $('.recent-matches-bg-lose, .recent-matches-bg-win');\r\n\r\n    const matches = list.toArray().map((item) => {\r\n        const html = $(item);\r\n\r\n        const getRes = () => (html.attr('class') === 'recent-matches-bg-lose' ? 'LOSS' : 'WIN');\r\n        const result = getRes();\r\n        const infoList = html.find('td');\r\n\r\n        const time = infoList\r\n            .eq(columnMap.date ?? 0)\r\n            .text()\r\n            .trim();\r\n        const tournament = infoList\r\n            .eq(columnMap.tournament ?? 5)\r\n            .text()\r\n            .trim();\r\n        const score = infoList\r\n            .eq(columnMap.score ?? 7)\r\n            .text()\r\n            .trim();\r\n        const opponent = infoList\r\n            .eq(columnMap.opponent ?? 8)\r\n            .text()\r\n            .trim();\r\n\r\n        return {\r\n            title: `[${result}] ${team} ${score} ${opponent} on ${tournament}`,\r\n            description: `${time},  ${team} ${score} ${opponent} on ${tournament}`,\r\n            link: currentUrl,\r\n            guid: currentUrl + time,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `[Counter-Strike] ${team} Match Results From Liquipedia`,\r\n        link: currentUrl,\r\n        item: matches,\r\n    };\r\n}\r\n"],"mappings":"0MAIA,MAAaA,EAAe,CACxB,KAAM,+BACN,MAAO,CACH,CACI,OAAQ,CAAC,2CAA4C,4BACrD,OAAQ,+BAGhB,QAAS,iDACT,KAAM,oCACN,YAAa,CAAC,eACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QAGrB,EAAa,wCAA4B,EAAK,UAE9C,EAAW,MAAMC,EAAO,GAExB,EAAI,EAAK,GACT,EAAQ,EAAE,SAAS,QACnB,EAAS,EAAM,KAAK,MACpBC,EAAuF,GAC7F,EAAO,MAAM,EAAO,IAAY,CAC5B,IAAM,EAAO,EAAE,GAAS,OAAO,OAAO,cAClC,EAAK,SAAS,UACd,EAAU,KAAO,GAEjB,EAAK,SAAS,gBACd,EAAU,WAAa,GAEvB,EAAK,SAAS,WACd,EAAU,MAAQ,GAElB,EAAK,SAAS,cACd,EAAU,SAAW,KAI7B,IAAM,EAAO,EAAE,mDAET,EAAU,EAAK,UAAU,IAAK,GAAS,CACzC,IAAM,EAAO,EAAE,GAET,MAAgB,EAAK,KAAK,WAAa,yBAA2B,OAAS,MAC3E,EAAS,IACT,EAAW,EAAK,KAAK,MAErB,EAAO,EACR,GAAG,EAAU,MAAQ,GACrB,OACA,OACC,EAAa,EACd,GAAG,EAAU,YAAc,GAC3B,OACA,OACC,EAAQ,EACT,GAAG,EAAU,OAAS,GACtB,OACA,OACC,EAAW,EACZ,GAAG,EAAU,UAAY,GACzB,OACA,OAEL,MAAO,CACH,MAAO,IAAI,EAAO,IAAI,EAAK,GAAG,EAAM,GAAG,EAAS,MAAM,IACtD,YAAa,GAAG,EAAK,KAAK,EAAK,GAAG,EAAM,GAAG,EAAS,MAAM,IAC1D,KAAM,EACN,KAAM,EAAa,KAI3B,MAAO,CACH,MAAO,oBAAoB,EAAK,gCAChC,KAAM,EACN,KAAM"}