{"version":3,"file":"partion-DFbSij5A.js","names":["route: Route","got","utils"],"sources":["../../lib/routes/bilibili/partion.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport utils from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/partion/:tid/:embed?',\r\n    categories: ['social-media'],\r\n    example: '/bilibili/partion/33',\r\n    parameters: { tid: '分区 id', embed: '默认为开启内嵌视频, 任意值为关闭' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '分区视频',\r\n    maintainers: ['DIYgod'],\r\n    handler,\r\n    description: `动画\r\n\r\n| MAD·AMV | MMD·3D | 短片・手书・配音 | 特摄 | 综合 |\r\n| ------- | ------ | ---------------- | ---- | ---- |\r\n| 24      | 25     | 47               | 86   | 27   |\r\n\r\n  番剧\r\n\r\n| 连载动画 | 完结动画 | 资讯 | 官方延伸 |\r\n| -------- | -------- | ---- | -------- |\r\n| 33       | 32       | 51   | 152      |\r\n\r\n  国创\r\n\r\n| 国产动画 | 国产原创相关 | 布袋戏 | 动态漫・广播剧 | 资讯 |\r\n| -------- | ------------ | ------ | -------------- | ---- |\r\n| 153      | 168          | 169    | 195            | 170  |\r\n\r\n  音乐\r\n\r\n| 原创音乐 | 翻唱 | VOCALOID·UTAU | 电音 | 演奏 | MV  | 音乐现场 | 音乐综合 | ~~OP/ED/OST~~ |\r\n| -------- | ---- | ------------- | ---- | ---- | --- | -------- | -------- | ------------- |\r\n| 28       | 31   | 30            | 194  | 59   | 193 | 29       | 130      | 54            |\r\n\r\n  舞蹈\r\n\r\n| 宅舞 | 街舞 | 明星舞蹈 | 中国舞 | 舞蹈综合 | 舞蹈教程 |\r\n| ---- | ---- | -------- | ------ | -------- | -------- |\r\n| 20   | 198  | 199      | 200    | 154      | 156      |\r\n\r\n  游戏\r\n\r\n| 单机游戏 | 电子竞技 | 手机游戏 | 网络游戏 | 桌游棋牌 | GMV | 音游 | Mugen |\r\n| -------- | -------- | -------- | -------- | -------- | --- | ---- | ----- |\r\n| 17       | 171      | 172      | 65       | 173      | 121 | 136  | 19    |\r\n\r\n  知识\r\n\r\n| 科学科普 | 社科人文 | 财经 | 校园学习 | 职业职场 | 野生技术协会 |\r\n| -------- | -------- | ---- | -------- | -------- | ------------ |\r\n| 201      | 124      | 207  | 208      | 209      | 122          |\r\n\r\n  ~~科技~~\r\n\r\n| ~~演讲・公开课~~ | ~~星海~~ | ~~机械~~ | ~~汽车~~ |\r\n| ---------------- | -------- | -------- | -------- |\r\n| 39               | 96       | 98       | 176      |\r\n\r\n  数码\r\n\r\n| 手机平板 | 电脑装机 | 摄影摄像 | 影音智能 |\r\n| -------- | -------- | -------- | -------- |\r\n| 95       | 189      | 190      | 191      |\r\n\r\n  生活\r\n\r\n| 搞笑 | 日常 | 美食圈 | 动物圈 | 手工 | 绘画 | 运动 | 汽车 | 其他 | ~~ASMR~~ |\r\n| ---- | ---- | ------ | ------ | ---- | ---- | ---- | ---- | ---- | -------- |\r\n| 138  | 21   | 76     | 75     | 161  | 162  | 163  | 176  | 174  | 175      |\r\n\r\n  鬼畜\r\n\r\n| 鬼畜调教 | 音 MAD | 人力 VOCALOID | 教程演示 |\r\n| -------- | ------ | ------------- | -------- |\r\n| 22       | 26     | 126           | 127      |\r\n\r\n  时尚\r\n\r\n| 美妆 | 服饰 | 健身 | T 台 | 风向标 |\r\n| ---- | ---- | ---- | ---- | ------ |\r\n| 157  | 158  | 164  | 159  | 192    |\r\n\r\n  ~~广告~~\r\n\r\n| ~~广告~~ |\r\n| -------- |\r\n| 166      |\r\n\r\n  资讯\r\n\r\n| 热点 | 环球 | 社会 | 综合 |\r\n| ---- | ---- | ---- | ---- |\r\n| 203  | 204  | 205  | 206  |\r\n\r\n  娱乐\r\n\r\n| 综艺 | 明星 | Korea 相关 |\r\n| ---- | ---- | ---------- |\r\n| 71   | 137  | 131        |\r\n\r\n  影视\r\n\r\n| 影视杂谈 | 影视剪辑 | 短片 | 预告・资讯 |\r\n| -------- | -------- | ---- | ---------- |\r\n| 182      | 183      | 85   | 184        |\r\n\r\n  纪录片\r\n\r\n| 全部 | 人文・历史 | 科学・探索・自然 | 军事 | 社会・美食・旅行 |\r\n| ---- | ---------- | ---------------- | ---- | ---------------- |\r\n| 177  | 37         | 178              | 179  | 180              |\r\n\r\n  电影\r\n\r\n| 全部 | 华语电影 | 欧美电影 | 日本电影 | 其他国家 |\r\n| ---- | -------- | -------- | -------- | -------- |\r\n| 23   | 147      | 145      | 146      | 83       |\r\n\r\n  电视剧\r\n\r\n| 全部 | 国产剧 | 海外剧 |\r\n| ---- | ------ | ------ |\r\n| 11   | 185    | 187    |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const tid = ctx.req.param('tid');\r\n    const embed = !ctx.req.param('embed');\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url: `https://api.bilibili.com/x/web-interface/newlist?ps=15&rid=${tid}&_=${Date.now()}`,\r\n        headers: {\r\n            Referer: 'https://www.bilibili.com/',\r\n        },\r\n    });\r\n\r\n    const list = response.data.data.archives;\r\n    let name = '未知';\r\n    if (list && list[0] && list[0].tname) {\r\n        name = list[0].tname;\r\n    }\r\n\r\n    return {\r\n        title: `bilibili ${name}分区`,\r\n        link: 'https://www.bilibili.com',\r\n        description: `bilibili ${name}分区`,\r\n        item:\r\n            list &&\r\n            list.map((item) => ({\r\n                title: item.title,\r\n                description: utils.renderUGCDescription(embed, item.pic, item.desc, item.aid, undefined, item.bvid),\r\n                pubDate: new Date(item.pubdate * 1000).toUTCString(),\r\n                link: item.pubdate > utils.bvidTime && item.bvid ? `https://www.bilibili.com/video/${item.bvid}` : `https://www.bilibili.com/video/av${item.aid}`,\r\n                author: item.owner.name,\r\n            })),\r\n    };\r\n}\r\n"],"mappings":"2UAIA,MAAaA,EAAe,CACxB,KAAM,wBACN,WAAY,CAAC,gBACb,QAAS,uBACT,WAAY,CAAE,IAAK,QAAS,MAAO,qBACnC,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,UACd,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BAmHjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAM,EAAI,IAAI,MAAM,OACpB,EAAQ,CAAC,EAAI,IAAI,MAAM,SAEvB,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,8DAA8D,EAAI,KAAK,KAAK,QACjF,QAAS,CACL,QAAS,+BAIX,EAAO,EAAS,KAAK,KAAK,SAC5B,EAAO,KAKX,OAJI,GAAQ,EAAK,IAAM,EAAK,GAAG,QAC3B,EAAO,EAAK,GAAG,OAGZ,CACH,MAAO,YAAY,EAAK,IACxB,KAAM,2BACN,YAAa,YAAY,EAAK,IAC9B,KACI,GACA,EAAK,IAAK,IAAU,CAChB,MAAO,EAAK,MACZ,YAAaC,EAAM,qBAAqB,EAAO,EAAK,IAAK,EAAK,KAAM,EAAK,IAAK,IAAA,GAAW,EAAK,MAC9F,QAAS,IAAI,KAAK,EAAK,QAAU,KAAM,cACvC,KAAM,EAAK,QAAUA,EAAM,UAAY,EAAK,KAAO,kCAAkC,EAAK,OAAS,oCAAoC,EAAK,MAC5I,OAAQ,EAAK,MAAM"}