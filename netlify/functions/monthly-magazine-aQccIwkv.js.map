{"version":3,"file":"monthly-magazine-aQccIwkv.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/visionias/monthly-magazine.ts"],"sourcesContent":["import { Data, Route } from '@/types';\r\nimport { baseUrl, extractNews } from './utils';\r\n\r\nimport ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/monthlyMagazine',\r\n    example: '/visionias/monthlyMagazine',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['visionias.in/current-affairs/monthly-magazine'],\r\n            target: '/monthlyMagazine',\r\n        },\r\n    ],\r\n    name: 'Monthly Magazine',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n};\r\n\r\nasync function handler(): Promise<Data> {\r\n    const response = await ofetch(`${baseUrl}/current-affairs/monthly-magazine`);\r\n\r\n    const items = await processNews(response);\r\n\r\n    return {\r\n        title: 'Monthly Magazine | Vision IAS',\r\n        link: `${baseUrl}/current-affairs/monthly-magazine`,\r\n        description:\r\n            'Monthly Magazine from Vision IAS provides a comprehensive overview of current affairs, covering significant events and developments across various sectors. It is designed to help aspirants stay updated with the latest happenings, enhancing their preparation for competitive exams.',\r\n        language: 'en',\r\n        item: items,\r\n        image: `${baseUrl}/current-affairs/images/news-today-logo.svg`,\r\n        icon: `https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,\r\n        logo: `https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,\r\n        allowEmpty: true,\r\n    };\r\n}\r\n\r\nasync function processNews(page) {\r\n    const $ = load(page);\r\n    const divItems = $(`#monthly-table-of-content>div`).toArray();\r\n    const linkItems = divItems.flatMap((item) => {\r\n        const maintitle = $(item).find('button>div:nth-child(2) div.text-left').text().trim();\r\n        return $(item)\r\n            .find('div>ul>li')\r\n            .toArray()\r\n            .map((li) => {\r\n                const itemTitle = $(li).find('a').text().trim();\r\n                const link = $(li).find('a').attr('href')?.trim() || '';\r\n                return {\r\n                    title: `${itemTitle} - ${maintitle}`,\r\n                    link: link.includes('https://') ? link : `${baseUrl}${link}`,\r\n                };\r\n            });\r\n    });\r\n    const newsPromises = await Promise.allSettled(linkItems.map((item) => extractNews(item, 'main > div > div.flex.flex-col> div.flex.flex-col.w-full.mt-10')));\r\n\r\n    return newsPromises.flatMap((news) => (news.status === 'fulfilled' ? (Array.isArray(news.value) ? news.value : [news.value]) : [{ title: 'Error Parse News' }]));\r\n}\r\n"],"mappings":"mWAMA,MAAaA,EAAe,CACxB,KAAM,mBACN,QAAS,6BACT,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,iDACT,OAAQ,qBAGhB,KAAM,mBACN,YAAa,CAAC,gBACd,WAGJ,eAAe,GAAyB,CACpC,IAAM,EAAW,MAAMC,EAAO,GAAG,EAAQ,oCAEnC,EAAQ,MAAM,EAAY,GAEhC,MAAO,CACH,MAAO,gCACP,KAAM,GAAG,EAAQ,mCACjB,YACI,2RACJ,SAAU,KACV,KAAM,EACN,MAAO,GAAG,EAAQ,6CAClB,KAAM,0FACN,KAAM,0FACN,WAAY,IAIpB,eAAe,EAAY,EAAM,CAC7B,IAAM,EAAI,EAAK,GACT,EAAW,EAAE,iCAAiC,UAC9C,EAAY,EAAS,QAAS,GAAS,CACzC,IAAM,EAAY,EAAE,GAAM,KAAK,yCAAyC,OAAO,OAC/E,OAAO,EAAE,GACJ,KAAK,aACL,UACA,IAAK,GAAO,CACT,IAAM,EAAY,EAAE,GAAI,KAAK,KAAK,OAAO,OACnC,EAAO,EAAE,GAAI,KAAK,KAAK,KAAK,SAAS,QAAU,GACrD,MAAO,CACH,MAAO,GAAG,EAAU,KAAK,IACzB,KAAM,EAAK,SAAS,YAAc,EAAO,GAAG,IAAU,SAIhE,EAAe,MAAM,QAAQ,WAAW,EAAU,IAAK,GAAS,EAAY,EAAM,oEAExF,OAAO,EAAa,QAAS,GAAU,EAAK,SAAW,YAAe,MAAM,QAAQ,EAAK,OAAS,EAAK,MAAQ,CAAC,EAAK,OAAU,CAAC,CAAE,MAAO"}