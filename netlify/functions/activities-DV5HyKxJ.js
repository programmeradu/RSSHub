import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./cache-kimkMTWJ.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./md5-4BNsOP-F.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{getSignedHeader as r,header as i,processImage as a}from"./utils-DNrWGW3Z.js";import o from"sanitize-html";const s={path:`/people/activities/:id`,categories:[`social-media`],view:n.Articles,example:`/zhihu/people/activities/diygod`,parameters:{id:`作者 id，可在用户主页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.zhihu.com/people/:id`]}],name:`用户动态`,maintainers:[`DIYgod`],handler:c};async function c(n){let s=n.req.param(`id`),c=`/api/v3/moments/${s}/activities?limit=7&desktop=true`,l=await r(`https://www.zhihu.com/people/${s}`,c),u=await t(`https://www.zhihu.com${c}`,{headers:{...i,...l,Referer:`https://www.zhihu.com/people/${s}/activities`}}),d=u.data.data;return{title:`${d[0].actor.name}的知乎动态`,link:`https://www.zhihu.com/people/${s}/activities`,image:d[0].actor.avatar_url,description:d[0].actor.headline||d[0].actor.description,item:d.map(t=>{let n=t.target,r,i,s,c=[],l=``,u=``,f=``;switch(t.target.type){case`answer`:r=n.question.title,f=n.author.name,i=a(n.content),s=`https://www.zhihu.com/question/${n.question.id}/answer/${n.id}`;break;case`article`:r=n.title,f=n.author.name,i=a(n.content),s=`https://zhuanlan.zhihu.com/p/${n.id}`;break;case`pin`:r=o(n.excerpt_title),f=n.author.name;for(let e of n.content)switch(e.type){case`text`:l=`<p>${e.own_text}</p>`;break;case`image`:c.push(`<p><img src="${e.url.replace(`xl`,`r`)}"/></p>`);break;case`link`:u=`<p><a href="${e.url}" target="_blank">${e.title}</a></p>`;break;case`video`:u=`<p><video
                                controls="controls"
                                width="${e.playlist[1].width}"
                                height="${e.playlist[1].height}"
                                src="${e.playlist[1].url}"></video></p>`;break;case`link_card`:u=`<p><a href="${e.url.split(`?`)[0]}" target="_blank"></a></p>`;break;default:throw Error(`Unknown type: ${e.type}`)}i=`${l}${u}${c.join(``)}`,s=`https://www.zhihu.com/pin/${n.id}`;break;case`question`:r=n.title,f=n.author.name,i=a(n.detail),s=`https://www.zhihu.com/question/${n.id}`;break;case`collection`:r=n.title,s=`https://www.zhihu.com/collection/${n.id}`;break;case`column`:r=n.title,i=`<p>${n.intro}</p><p><img src="${n.image_url}"/></p>`,s=`https://zhuanlan.zhihu.com/${n.id}`;break;case`topic`:r=n.name,i=`<p>${n.introduction}</p><p>话题关注者人数：${n.followers_count}</p>`,s=`https://www.zhihu.com/topic/${n.id}`;break;case`live`:r=n.subject,i=n.description.replaceAll(/\n|\r/g,`<br>`),s=`https://www.zhihu.com/lives/${n.id}`;break;case`roundtable`:r=n.name,i=n.description,s=`https://www.zhihu.com/roundtable/${n.id}`;break;default:i=`未知类型 ${t.target.type}，请点击<a href="https://github.com/DIYgod/RSSHub/issues">链接</a>提交issue`}return{title:`${d[0].actor.name}${t.action_text}: ${r}`,author:f,description:i,pubDate:e(t.created_time*1e3),link:s}})}}export{s as route};
//# sourceMappingURL=activities-DV5HyKxJ.js.map