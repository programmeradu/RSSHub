import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={jx:{title:`中国科学技术大学 - 教学类通知`,url:`https://ustc.edu.cn/tzgg/jxltz.htm`},ky:{title:`中国科学技术大学 - 科研类通知`,url:`https://ustc.edu.cn/tzgg/kyltz.htm`},gl:{title:`中国科学技术大学 - 管理类通知`,url:`https://ustc.edu.cn/tzgg/glltz.htm`},fw:{title:`中国科学技术大学 - 服务类通知`,url:`https://ustc.edu.cn/tzgg/fwltz.htm`}},o={path:`/news/:type?`,categories:[`university`],example:`/ustc/news/gl`,parameters:{type:`分类，默认为管理类`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ustc.edu.cn/`],target:`/news`}],name:`官网通知公告`,maintainers:[`hang333`,`jasongzy`],handler:s,url:`ustc.edu.cn/`,description:`| 教学类 | 科研类 | 管理类 | 服务类 |
| ------ | ------ | ------ | ------ |
| jx     | ky     | gl     | fw     |`};async function s(o){let s=o.req.param(`type`)??`gl`,c=await n({method:`get`,url:a[s].url}),l=i(c.data),u=l(`table[portletmode=simpleList] > tbody > tr.light`).toArray().map(e=>{let n=l(e).children(),i={title:l(n[1]).find(`a`).attr(`title`),link:l(n[1]).find(`a`).attr(`href`).startsWith(`../`)?new URL(l(n[1]).find(`a`).attr(`href`),a[s].url).href:l(n[1]).find(`a`).attr(`href`),pubDate:r(t(l(n[2]).text(),`YYYY-MM-DD`),8)};return i});return u=await Promise.all(u.filter(e=>e.link).map(t=>e.tryGet(t.link,async()=>{try{let e=await n(t.link),r=i(e.data);t.description=r(`div.v_news_content`).html()}catch{}return t}))),{title:a[s].title,description:a[s].title,link:a[s].url,item:u}}export{o as route};
//# sourceMappingURL=ustc-DeuzLhsF.js.map