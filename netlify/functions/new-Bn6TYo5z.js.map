{"version":3,"file":"new-Bn6TYo5z.js","names":["got","route: Route"],"sources":["../../lib/routes/ikea/cn/new.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { generateRequestHeaders, generateProductItem } from './utils';\r\n\r\nconst request = ({ moreToken = '' }) =>\r\n    got({\r\n        method: 'post',\r\n        url: 'https://srv-mp.app.ikea.cn/content/search/products/advanced',\r\n        headers: generateRequestHeaders(),\r\n        searchParams: {\r\n            keyword: '新品',\r\n            moreToken,\r\n        },\r\n        json: {},\r\n    });\r\n\r\nexport const route: Route = {\r\n    path: '/cn/new',\r\n    categories: ['shopping'],\r\n    example: '/ikea/cn/new',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['ikea.cn/cn/zh/new/', 'ikea.cn/'],\r\n        },\r\n    ],\r\n    name: '中国 - 当季新品推荐',\r\n    maintainers: ['jzhangdev'],\r\n    handler,\r\n    url: 'ikea.cn/cn/zh/new/',\r\n};\r\n\r\nasync function handler() {\r\n    const allProductSummaries = [];\r\n\r\n    const loadMoreRequest = async ({ moreToken }) => {\r\n        const response = await request({ moreToken });\r\n        const { data } = response;\r\n        allProductSummaries.push(data.productSummaries);\r\n        if (data.moreToken) {\r\n            await loadMoreRequest({ moreToken: data.moreToken });\r\n        }\r\n        return;\r\n    };\r\n\r\n    await loadMoreRequest({});\r\n\r\n    const products = allProductSummaries.flat();\r\n\r\n    return {\r\n        title: 'IKEA 宜家 - 当季新品推荐',\r\n        link: 'https://www.ikea.cn/cn/zh/new/',\r\n        description: '当季新品推荐',\r\n        item: products.map((element) => generateProductItem(element)),\r\n    };\r\n}\r\n"],"mappings":"6WAIA,MAAM,GAAW,CAAE,YAAY,MAC3BA,EAAI,CACA,OAAQ,OACR,IAAK,8DACL,QAAS,IACT,aAAc,CACV,QAAS,KACT,aAEJ,KAAM,KAGDC,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,YACb,QAAS,eACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,qBAAsB,cAGvC,KAAM,cACN,YAAa,CAAC,aACd,UACA,IAAK,sBAGT,eAAe,GAAU,CACrB,IAAM,EAAsB,GAEtB,EAAkB,MAAO,CAAE,eAAgB,CAC7C,IAAM,EAAW,MAAM,EAAQ,CAAE,cAC3B,CAAE,QAAS,EACjB,EAAoB,KAAK,EAAK,kBAC1B,EAAK,WACL,MAAM,EAAgB,CAAE,UAAW,EAAK,aAKhD,MAAM,EAAgB,IAEtB,IAAM,EAAW,EAAoB,OAErC,MAAO,CACH,MAAO,mBACP,KAAM,iCACN,YAAa,SACb,KAAM,EAAS,IAAK,GAAY,EAAoB"}