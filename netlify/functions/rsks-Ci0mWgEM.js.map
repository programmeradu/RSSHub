{"version":3,"file":"rsks-Ci0mWgEM.js","names":["route: Route","got","cache","response","$"],"sources":["../../lib/routes/gov/chongqing/rsks.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nconst rsksUrl = 'https://rlsbj.cq.gov.cn/ywzl/rsks/tzgg_109374/';\r\nexport const route: Route = {\r\n    path: '/chongqing/rsks',\r\n    categories: ['government'],\r\n    example: '/gov/chongqing/rsks',\r\n    radar: [\r\n        {\r\n            source: ['rlsbj.cq.gov.cn/'],\r\n        },\r\n    ],\r\n    name: '重庆市人民政府 人力社保局 - 人事考试通知',\r\n    maintainers: ['Mai19930513'],\r\n    handler,\r\n    url: 'rlsbj.cq.gov.cn/',\r\n};\r\n\r\nasync function handler() {\r\n    const { data: response } = await got(rsksUrl);\r\n    const $ = load(response);\r\n    // 获取考试信息标题\r\n    const list = $('div.page-list .tab-item > li')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            const title = item.find('a').first();\r\n            return {\r\n                title: title.text(),\r\n                link: `${rsksUrl}${title.attr('href')}`,\r\n                pubDate: parseDate(item.find('span').text()),\r\n            };\r\n        });\r\n\r\n    // 获取考试信息正文\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const { data: response } = await got(item.link);\r\n                const $ = load(response);\r\n                item.pubDate = parseDate($('meta[name=\"PubDate\"]').attr('content')) ?? item.pubDate;\r\n                item.description = $('.view.TRS_UEDITOR.trs_paper_default.trs_word').first().html();\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n    return {\r\n        title: '重庆人事考试通知公告',\r\n        link: rsksUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"wWAKA,MAAM,EAAU,iDACHA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,cACb,QAAS,sBACT,MAAO,CACH,CACI,OAAQ,CAAC,sBAGjB,KAAM,yBACN,YAAa,CAAC,eACd,UACA,IAAK,oBAGT,eAAe,GAAU,CACrB,GAAM,CAAE,KAAM,GAAa,MAAMC,EAAI,GAC/B,EAAI,EAAK,GAET,EAAO,EAAE,gCACV,UACA,IAAK,GAAS,CACX,EAAO,EAAE,GACT,IAAM,EAAQ,EAAK,KAAK,KAAK,QAC7B,MAAO,CACH,MAAO,EAAM,OACb,KAAM,GAAG,IAAU,EAAM,KAAK,UAC9B,QAAS,EAAU,EAAK,KAAK,QAAQ,WAK3C,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACNC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,GAAM,CAAE,KAAMC,GAAa,MAAMF,EAAI,EAAK,MACpCG,EAAI,EAAKD,GAGf,MAFA,GAAK,QAAU,EAAUC,EAAE,wBAAwB,KAAK,aAAe,EAAK,QAC5E,EAAK,YAAcA,EAAE,gDAAgD,QAAQ,OACtE,MAInB,MAAO,CACH,MAAO,aACP,KAAM,EACN,KAAM"}