import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";const n={path:`/activity/:slug`,categories:[`new-media`],example:`/sspai/activity/urfp0d9i`,parameters:{slug:`作者 slug，可在作者主页URL中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`sspai.com/u/:id/updates`],target:`/activity/:id`}],name:`作者动态`,maintainers:[`umm233`],handler:r};async function r(n){let r=n.req.param(`slug`),i=`https://sspai.com/u/${r}/updates`,a=await t({method:`get`,url:`https://sspai.com/api/v1/information/user/activity/page/get?limit=10&offset=0&slug=${r}`,headers:{Referer:i}}),o=await t({method:`get`,url:`https://sspai.com/api/v1/user/slug/info/get?slug=${r}`,headers:{Referer:i}}),s=o.data.data,c=s.nickname,l=a.data.data,u=``,d=``,f=``;return{title:`少数派用户「${c}」动态更新`,link:i,description:`少数派用户「${c}」的动态更新`,item:l.map(t=>{let n=t.data,i=[],a=[];switch(t.key){case`follow_user`:for(let e in n)i[e]=n[e].nickname,a[e]=`<a href=https://sspai.com/u/${n[e].slug}/updates>${n[e].nickname}</a>`;u=`${t.author.nickname}${t.action}：${i.join(`、`)}`,d=`${t.author.nickname}${t.action}：${a.join(`、`)}`,f=`https://sspai.com/u/${r}/follow`;break;case`like_article`:u=`${t.author.nickname}${t.action}：${n.title}`,d=`文章简介：<br>${n.summary}`,f=`https://sspai.com/post/${n.id}`;break;case`comment_article`:u=`${t.author.nickname}${t.action}：${n.article_title}`,d=n.comment,f=`https://sspai.com/post/${n.article_id}`;break;case`release_article`:u=`${t.author.nickname}${t.action}：${n.title}`,d=n.summary,f=`https://sspai.com/post/${n.id}`;break;case`chosen_comment`:u=`${t.author.nickname}在文章「${n.article_title}」下的${t.action}`,d=n.comment,f=n.comment;break}return{title:u,description:d,link:f,pubDate:e(t.created_at*1e3)}})}}export{n as route};
//# sourceMappingURL=activity-Yz0SqHL2.js.map