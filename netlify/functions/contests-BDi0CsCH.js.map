{"version":3,"file":"contests-BDi0CsCH.js","names":[],"sources":["../../lib/routes/codeforces/contests.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport ofetch from '@/utils/ofetch';\r\nimport path from 'node:path';\r\nimport { art } from '@/utils/render';\r\n\r\nimport dayjs from 'dayjs';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat.js';\r\nimport duration from 'dayjs/plugin/duration.js';\r\nimport relativeTime from 'dayjs/plugin/relativeTime.js';\r\nimport 'dayjs/locale/zh-cn.js';\r\n\r\ndayjs.extend(localizedFormat);\r\ndayjs.extend(duration);\r\ndayjs.extend(relativeTime);\r\ndayjs.locale('zh-cn');\r\n\r\nconst sec2str = (sec) => dayjs.duration(Number.parseInt(sec), 'seconds').humanize();\r\n\r\nconst contestAPI = 'https://codeforces.com/api/contest.list';\r\n\r\nexport const route: Route = {\r\n    path: '/contests',\r\n    categories: ['programming'],\r\n    example: '/codeforces/contests',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.codeforces.com/contests'],\r\n        },\r\n    ],\r\n    name: 'Latest contests',\r\n    maintainers: ['Fatpandac'],\r\n    handler,\r\n    url: 'www.codeforces.com/contests',\r\n};\r\n\r\nasync function handler() {\r\n    const contestsData = await ofetch(contestAPI);\r\n    const contests = contestsData.result;\r\n\r\n    const items = contests\r\n        .filter((contests) => contests.phase === 'BEFORE')\r\n        .map((contest) => {\r\n            const title = String(contest.name);\r\n            const date = dayjs.unix(Number.parseInt(contest.startTimeSeconds));\r\n            const description = art(path.join(__dirname, 'templates/contest.art'), {\r\n                title,\r\n                startTime: date.format('LL LT'),\r\n                durationTime: sec2str(contest.durationSeconds),\r\n                // relativeTime: sec2str(contest.relativeTimeSeconds),\r\n                type: contest.type,\r\n            });\r\n\r\n            return {\r\n                title,\r\n                description,\r\n                link: 'https://codeforces.com/contests/' + contest.id,\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: 'Codeforces - Contests',\r\n        link: 'https://codeforces.com/contests',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"idAYA,EAAM,OAAO,GACb,EAAM,OAAO,GACb,EAAM,OAAO,GACb,EAAM,OAAO,SAEb,MAAM,EAAW,GAAQ,EAAM,SAAS,OAAO,SAAS,GAAM,WAAW,WAI5D,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,eACb,QAAS,uBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,iCAGjB,KAAM,kBACN,YAAa,CAAC,aACd,UACA,IAAK,+BAGT,eAAe,GAAU,CACrB,IAAM,EAAe,MAAM,EAAO,2CAC5B,EAAW,EAAa,OAExB,EAAQ,EACT,OAAQ,GAAa,EAAS,QAAU,UACxC,IAAK,GAAY,CACd,IAAM,EAAQ,OAAO,EAAQ,MACvB,EAAO,EAAM,KAAK,OAAO,SAAS,EAAQ,mBAC1C,EAAc,EAAI,EAAA,KAAA,EAAA,kCAA+C,CACnE,QACA,UAAW,EAAK,OAAO,SACvB,aAAc,EAAQ,EAAQ,iBAE9B,KAAM,EAAQ,OAGlB,MAAO,CACH,QACA,cACA,KAAM,mCAAqC,EAAQ,MAI/D,MAAO,CACH,MAAO,wBACP,KAAM,kCACN,KAAM"}