import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import{ViewType as s}from"./types-A5bA50Mg.js";import c from"node:path";import{load as l}from"cheerio";t();const u=async t=>{let{category:s=`new`}=t.req.param(),u=Number.parseInt(t.req.query(`limit`)??`30`,10),d=`https://www.ali213.net`,f=new URL(`news/${s.endsWith(`/`)?s:`${s}/`}`,d).href,p=await a(f),m=l(p),h=m(`html`).prop(`lang`)??`zh-CN`,g=m(`div.n_lone`).slice(0,u).toArray().map(t=>{let n=m(t),a=n.find(`h2.lone_t a`),o=a.prop(`title`)||a.text(),s=a.prop(`href`),l=n.find(`img`),u=l?.prop(`src`),d=l?.prop(`alt`),f=n.find(`div.lone_f_r_t`).text(),p=r(c.join(e,`templates/description-b958bde9.art`),{images:l?[{src:u,alt:d}]:void 0,intro:f}),g=n.find(`div.lone_f_r_f span`).last().text().split(/：/).pop();return{title:o,description:p,pubDate:i(n.find(`div.lone_f_r_f span`).first().text()),link:s,author:g,content:{html:p,text:n.find(`div.lone_f_r_t`).text()},image:u,banner:u,language:h}});g=(await Promise.all(g.map(t=>!t.link&&typeof t.link!=`string`?t:n.tryGet(t.link,async()=>{try{let n=await a(t.link),s=l(n),u=s(`h1.newstit`).text(),d=s(`div#Content img`).first().prop(`src`),f=s(`div#Content p span img`),p={};f.length&&f.each((t,n)=>{let i=s(n),a=i.closest(`p`),o=i.prop(`src`),l=o?.split(/\./).pop();l&&o&&(p[l]={url:o},a.replaceWith(r(c.join(e,`templates/description-b958bde9.art`),{images:[{src:o}]})))});let m=r(c.join(e,`templates/description-b958bde9.art`),{description:s(`div#Content`).html()??``}),g=s(`div.extend_read ul li a`).toArray().map(e=>{let t=s(e);return{url:t.prop(`href`),type:`related`,content_html:t.prop(`title`)||t.text()}}).filter(e=>!0);return{...t,title:u,description:m,pubDate:o(i(s(`div.newstag_l`).text().split(/\s/)[0]),8),content:{html:m,text:s(`div#Content`).html()??``},image:d,banner:d,language:h,media:Object.keys(p).length>0?p:void 0,_extra:{links:g.length>0?g:void 0}}}catch{return t}})))).filter(e=>!0);let _=`游侠网`,v=m(`div.news-list-title`).text(),y=new URL(`news/images/ali213_app_big.png`,d).href;return{title:`${_} - ${v}`,description:v,link:f,item:g,allowEmpty:!0,image:y,author:_,language:h,id:f}},d={path:`/news/:category?`,name:`资讯`,url:`www.ali213.net`,maintainers:[`nczitzk`],handler:u,example:`/ali213/news/new`,parameters:{category:"分类，默认为 `new`，即最新资讯，可在对应分类页 URL 中找到"},description:`::: tip
若订阅 [游戏资讯](https://www.ali213.net/news/game/)，网址为 \`https://www.ali213.net/news/game/\`，请截取 \`https://www.ali213.net/news/\` 到末尾 \`/\` 的部分 \`game\` 作为 \`category\` 参数填入，此时目标路由为 [\`/ali213/news/game\`](https://rsshub.app/ali213/news/game)。
:::

| 分类名称 | 分类 ID |
| -------- | ------- |
| 最新资讯 | new     |
| 评测     | pingce  |
| 游戏     | game    |
| 动漫     | comic   |
| 影视     | movie   |
| 科技     | tech    |
| 电竞     | esports |
| 娱乐     | amuse   |
| 手游     | mobile  |
`,categories:[`game`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ali213.net/news/:category`],target:e=>{let t=e.category;return`/news/${t?`/${t}`:``}`}},{title:`最新资讯`,source:[`www.ali213.net/news/new`],target:`/news/new`},{title:`评测`,source:[`www.ali213.net/news/pingce`],target:`/news/pingce`},{title:`游戏`,source:[`www.ali213.net/news/game`],target:`/news/game`},{title:`动漫`,source:[`www.ali213.net/news/comic`],target:`/news/comic`},{title:`影视`,source:[`www.ali213.net/news/movie`],target:`/news/movie`},{title:`科技`,source:[`www.ali213.net/news/tech`],target:`/news/tech`},{title:`电竞`,source:[`www.ali213.net/news/esports`],target:`/news/esports`},{title:`娱乐`,source:[`www.ali213.net/news/amuse`],target:`/news/amuse`},{title:`手游`,source:[`www.ali213.net/news/mobile`],target:`/news/mobile`}],view:s.Articles};export{u as handler,d as route};
//# sourceMappingURL=news-CbnR8vRN.js.map