{"version":3,"file":"publication-CdcdB_rs.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/dblp/publication.ts"],"sourcesContent":["import { Route } from '@/types';\r\n// 导入所需模组\r\nimport ofetch from '@/utils/ofetch';\r\n// import { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/:field',\r\n    categories: ['study'],\r\n    example: '/dblp/knowledge%20tracing',\r\n    parameters: { field: 'Research field' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['dblp.org/:field'],\r\n        },\r\n    ],\r\n    name: 'Keyword Search',\r\n    maintainers: ['ytno1'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    // 在此处编写您的逻辑\r\n    const field = ctx.req.param('field');\r\n\r\n    // 发送 HTTP GET 请求到 API 并解构返回的数据对象\r\n    const {\r\n        result: {\r\n            hits: { hit: data },\r\n        },\r\n    } = await ofetch('https://dblp.org/search/publ/api', {\r\n        query: {\r\n            q: field,\r\n            format: 'json',\r\n            h: 10,\r\n        },\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n        },\r\n    });\r\n\r\n    // console.log(data);\r\n\r\n    // 从 API 响应中提取相关数据\r\n    const list = data.map((item) => {\r\n        const { info } = item;\r\n        // console.log(info);\r\n        const {\r\n            authors: { author },\r\n            title,\r\n            venue,\r\n            year,\r\n            type,\r\n            doi,\r\n            ee,\r\n        } = info;\r\n\r\n        const authorName = Array.isArray(author) ? author[0].text : author.text;\r\n\r\n        return {\r\n            title,\r\n            link: ee,\r\n            author: `${authorName} et al.`,\r\n            doi,\r\n            description: `Year: ${year ?? 'unknown'}, Venue: ${venue}, Type: ${type}, Doi: ${doi}`,\r\n        };\r\n    });\r\n\r\n    return {\r\n        // 在此处输出您的 RSS\r\n        // 源标题\r\n        title: `【dblp】${field}`,\r\n        // 源链接\r\n        link: `https://dblp.org/search?q=${field}`,\r\n        // 源描述\r\n        description: `DBLP ${field} RSS`,\r\n        // 处理后的数据，即文章列表\r\n        item: list,\r\n    };\r\n}\r\n"],"mappings":"2KAKA,MAAaA,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,SACb,QAAS,4BACT,WAAY,CAAE,MAAO,kBACrB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,qBAGjB,KAAM,iBACN,YAAa,CAAC,SACd,WAGJ,eAAe,EAAQ,EAAK,CAExB,IAAM,EAAQ,EAAI,IAAI,MAAM,SAGtB,CACF,OAAQ,CACJ,KAAM,CAAE,IAAK,KAEjB,MAAMC,EAAO,mCAAoC,CACjD,MAAO,CACH,EAAG,EACH,OAAQ,OACR,EAAG,IAEP,QAAS,CACL,eAAgB,sDAOlB,EAAO,EAAK,IAAK,GAAS,CAC5B,GAAM,CAAE,QAAS,EAEX,CACF,QAAS,CAAE,UACX,QACA,QACA,OACA,OACA,MACA,MACA,EAEE,EAAa,MAAM,QAAQ,GAAU,EAAO,GAAG,KAAO,EAAO,KAEnE,MAAO,CACH,QACA,KAAM,EACN,OAAQ,GAAG,EAAW,SACtB,MACA,YAAa,SAAS,GAAQ,UAAU,WAAW,EAAM,UAAU,EAAK,SAAS,OAIzF,MAAO,CAGH,MAAO,SAAS,IAEhB,KAAM,6BAA6B,IAEnC,YAAa,QAAQ,EAAM,MAE3B,KAAM"}