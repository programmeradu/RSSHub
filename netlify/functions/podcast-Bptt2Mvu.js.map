{"version":3,"file":"podcast-Bptt2Mvu.js","names":["got","route: Route"],"sources":["../../lib/routes/cgtn/podcast.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport timezone from '@/utils/timezone';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nasync function getData(category, id) {\r\n    const url = `https://radio.cgtn.com/downapiRES/radio/v1/program/historyList/programId${id}_category${category}_page1.json`;\r\n    const response = await got(url);\r\n    return response.data;\r\n}\r\n\r\nfunction combDate(date, time) {\r\n    // combine date and time, return a Date object\r\n    return timezone(parseDate(date + ' ' + time), +8);\r\n}\r\n\r\nexport const route: Route = {\r\n    path: '/podcast/:category/:id',\r\n    categories: ['traditional-media'],\r\n    example: '/cgtn/podcast/ezfm/4',\r\n    parameters: { category: '类型名', id: '播客 id' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['cgtn.com/podcast/column/:category/*/:id'],\r\n        },\r\n    ],\r\n    name: '播客',\r\n    maintainers: ['5upernova-heng'],\r\n    handler,\r\n    description: `> 类型名与播客 id 可以在播客对应的 URL 中找到\r\n  > 如 URL \\`https://radio.cgtn.com/podcast/column/ezfm/More-to-Read/4\\` ，其 \\`category\\` 为 \\`ezfm\\` ，\\`id\\` 为 \\`4\\`，对应的订阅路由为 [\\`/podcast/ezfm/4\\`](https://rsshub.app/podcast/ezfm/4)`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { category, id } = ctx.req.param();\r\n    const categoryMap = { ezfm: 1, other: 5 };\r\n    const data = await getData(categoryMap[category], id);\r\n    const items = data.data.map((item) => ({\r\n        title: item.title,\r\n        pubDate: combDate(item.showDate, item.time.split(' ')[0]),\r\n        description: item.programSeries.content || item.detail,\r\n        itunes_item_image: item.programUrl,\r\n        itunes_duration: item.duration,\r\n        enclosure_url: item.mediaUrl,\r\n        enclosure_type: 'audio/mpeg',\r\n    }));\r\n    return {\r\n        title: `中国环球电视网 CGTN Podcast - ${data.info}`,\r\n        link: 'https://www.cgtn.com/radio/',\r\n        item: items,\r\n        description: String(data.info),\r\n    };\r\n}\r\n"],"mappings":"uUAKA,eAAe,EAAQ,EAAU,EAAI,CACjC,IAAM,EAAM,2EAA2E,EAAG,WAAW,EAAS,aACxG,EAAW,MAAMA,EAAI,GAC3B,OAAO,EAAS,KAGpB,SAAS,EAAS,EAAM,EAAM,CAE1B,OAAO,EAAS,EAAU,EAAO,IAAM,GAAO,GAGlD,MAAaC,EAAe,CACxB,KAAM,yBACN,WAAY,CAAC,qBACb,QAAS,uBACT,WAAY,CAAE,SAAU,MAAO,GAAI,SACnC,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,6CAGjB,KAAM,KACN,YAAa,CAAC,kBACd,UACA,YAAa,0MAIjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,WAAU,MAAO,EAAI,IAAI,QAC3B,EAAc,CAAE,KAAM,EAAG,MAAO,GAChC,EAAO,MAAM,EAAQ,EAAY,GAAW,GAC5C,EAAQ,EAAK,KAAK,IAAK,IAAU,CACnC,MAAO,EAAK,MACZ,QAAS,EAAS,EAAK,SAAU,EAAK,KAAK,MAAM,KAAK,IACtD,YAAa,EAAK,cAAc,SAAW,EAAK,OAChD,kBAAmB,EAAK,WACxB,gBAAiB,EAAK,SACtB,cAAe,EAAK,SACpB,eAAgB,gBAEpB,MAAO,CACH,MAAO,0BAA0B,EAAK,OACtC,KAAM,8BACN,KAAM,EACN,YAAa,OAAO,EAAK"}