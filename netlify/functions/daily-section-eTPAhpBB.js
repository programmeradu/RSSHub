import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./md5-4BNsOP-F.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{header as r,processImage as i}from"./utils-DNrWGW3Z.js";const a={path:`/daily/section/:sectionId`,categories:[`social-media`],example:`/zhihu/daily/section/2`,parameters:{sectionId:`合集 id，可在 https://news-at.zhihu.com/api/7/sections 找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`daily.zhihu.com/*`],target:`/daily`}],name:`知乎日报 - 合集`,maintainers:[`ccbikai`],handler:o,url:`daily.zhihu.com/*`};async function o(a){let o=a.req.param(`sectionId`),s=await n({method:`get`,url:`https://news-at.zhihu.com/api/7/section/${o}`,headers:{...r,Referer:`https://news-at.zhihu.com/api/7/section/${o}`}}),c=s.data.stories.filter(e=>e.url.startsWith(`https://daily.zhihu.com/`)),l=await Promise.all(c.map(r=>{let a=`https://news-at.zhihu.com/api/7/news/`+r.id,o={title:r.title,pubDate:t(r.date,`YYYYMMDD`),description:``,link:`https://daily.zhihu.com/story/`+r.id};return e.tryGet(`https://daily.zhihu.com/story/${r.id}`,async()=>{let e=await n({method:`get`,url:a,headers:{Referer:a}});return o.description=i(e.data.body.replaceAll(/<div class="meta">([\S\s]*?)<\/div>/g,`<strong>$1</strong>`).replaceAll(/<\/?h2.*?>/g,``)),o})}));return{title:`${s.data.name} - 知乎日报`,link:`https://daily.zhihu.com`,description:`每天3次，每次7分钟`,image:`http://static.daily.zhihu.com/img/new_home_v3/mobile_top_logo.png`,item:l}}export{a as route};
//# sourceMappingURL=daily-section-eTPAhpBB.js.map