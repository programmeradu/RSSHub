import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{ofetch_default as i}from"./ofetch-Bzt0BXUH.js";import{ViewType as a}from"./types-A5bA50Mg.js";import o from"node:path";import{load as s}from"cheerio";t();const c=async t=>{let{id:a=`hotspot`}=t.req.param(),c=Number.parseInt(t.req.query(`limit`)??`30`,10),l=`https://www.wainao.me`,u=new URL(`topics/${a}`,l).href,d=new URL(`pf/api/v3/content/fetch/story-feed-sections`,l).href,f=await i(d,{query:{query:JSON.stringify({feedOffset:0,feedSize:c,includeSections:`/topics/${a}`}),d:81,_website:`wainao`}}),p=await i(u),m=s(p),h=m(`html`).attr(`lang`)??`zh-CN`,g=[];return g=f.content_elements.slice(0,c).map(t=>{let i=t.headlines.basic,a=n(o.join(e,`templates/description-18dc9dae.art`),{elements:t.content_elements}),s=t.publish_date,c=t.website_url,u=[t.taxonomy?.primary_section?.name].filter(Boolean),d=t.credits?.by?.map(e=>({name:e.name}))??[],f=t.website_url,p=t.promo_items.basic.url,m=t.last_updated_date,g={title:i,description:a,pubDate:s?r(s):void 0,link:c?new URL(c,l).href:void 0,category:u,author:d,guid:f,id:f,content:{html:a,text:a},image:p,banner:p,updated:m?r(m):void 0,language:h};return g}).filter(e=>!0),{title:m(`title`).text(),description:m(`meta[property="og:title"]`).attr(`content`),link:u,item:g,allowEmpty:!0,image:m(`meta[property="og:image"]`).attr(`content`),author:m(`meta[property="og:site_name"]`).attr(`content`),language:h,id:u}},l={path:`/topics/:id?`,name:`主题`,url:`wainao.me`,maintainers:[`nczitzk`],handler:c,example:`/wainao/topics/hotspot`,parameters:{id:{description:"主题 id，默认为 `hotspot`，即热点，可在对应主题页 URL 中找到",options:[{label:`热点`,value:`hotspot`},{label:`人物`,value:`people`},{label:`身份`,value:`identity`},{label:`政治`,value:`politics`},{label:`社会`,value:`society`},{label:`文化`,value:`culture`},{label:`经济`,value:`economics`},{label:`环境`,value:`environment`},{label:`FUN`,value:`fun`}]}},description:":::tip\n若订阅 [人物](https://www.wainao.me/topics/people)，网址为 `https://www.wainao.me/topics/people`，请截取 `https://www.wainao.me/topics/` 到末尾的部分 `people` 作为 `id` 参数填入，此时目标路由为 [`/wainao/topics/people`](https://rsshub.app/wainao/topics/people)。\n:::\n\n| [热点](https://www.wainao.me/topics/hotspot)        | [人物](https://www.wainao.me/topics/people)       | [身份](https://www.wainao.me/topics/identity)         | [政治](https://www.wainao.me/topics/politics)         | [社会](https://www.wainao.me/topics/society)        | [文化](https://www.wainao.me/topics/culture)        | [经济](https://www.wainao.me/topics/economics)          | [环境](https://www.wainao.me/topics/environment)            | [FUN](https://www.wainao.me/topics/fun)     |\n| --------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- | --------------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------- |\n| [hotspot](https://rsshub.app/wainao/topics/hotspot) | [people](https://rsshub.app/wainao/topics/people) | [identity](https://rsshub.app/wainao/topics/identity) | [politics](https://rsshub.app/wainao/topics/politics) | [society](https://rsshub.app/wainao/topics/society) | [culture](https://rsshub.app/wainao/topics/culture) | [economics](https://rsshub.app/wainao/topics/economics) | [environment](https://rsshub.app/wainao/topics/environment) | [fun](https://rsshub.app/wainao/topics/fun) |\n",categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.wainao.me/topics/:id`],target:`/topics/:id`},{title:`热点`,source:[`www.wainao.me/topics/hotspot`],target:`/topics/hotspot`},{title:`人物`,source:[`www.wainao.me/topics/people`],target:`/topics/people`},{title:`身份`,source:[`www.wainao.me/topics/identity`],target:`/topics/identity`},{title:`政治`,source:[`www.wainao.me/topics/politics`],target:`/topics/politics`},{title:`社会`,source:[`www.wainao.me/topics/society`],target:`/topics/society`},{title:`文化`,source:[`www.wainao.me/topics/culture`],target:`/topics/culture`},{title:`经济`,source:[`www.wainao.me/topics/economics`],target:`/topics/economics`},{title:`环境`,source:[`www.wainao.me/topics/environment`],target:`/topics/environment`},{title:`FUN`,source:[`www.wainao.me/topics/fun`],target:`/topics/fun`}],view:a.Articles};export{c as handler,l as route};
//# sourceMappingURL=topics-grotSHUC.js.map