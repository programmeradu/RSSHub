import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{load as t}from"cheerio";const n=new Set([`all`,`magnet`,`ed2k`,`baidu`,`subhd`,`quark`,`115`]),r={path:`/portfolio/:id`,categories:[`multimedia`],example:`/zimuxia/portfolio/我们这一天`,parameters:{id:`剧集名，可在剧集页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`zimuxia.cn/portfolio/:id`]}],name:`剧集`,maintainers:[`nczitzk`],handler:i,description:"::: tip\n本路由以 `magnet` 为默认 linktype，可以通过在路由后方加上 `?linktype=链接类型` 指定导出的链接类型。比如路由为 [`/zimuxia/portfolio/我们这一天?linktype=baidu`](https://rsshub.app/zimuxia/portfolio/我们这一天?linktype=baidu) 来导出百度盘链接。目前，你可以选择的 `链接类型` 包括: `magnet`(默认), `all`(所有), `ed2k`(电驴), `baidu`(百度盘), `quark`(夸克盘), `115`(115 盘), `subhd`(字幕).\n:::"};async function i(r){let i=r.req.param(`id`),a=r.req.query(`linktype`)??`magnet`;a=n.has(a)?a:`magnet`,a=a===`all`?`.`:a;let o=`https://www.zimuxia.cn/portfolio/${i}`,s=await e({method:`get`,url:o,https:{rejectUnauthorized:!1}}),c=t(s.data),l=c(`a`).filter((e,t)=>c(t).attr(`href`)?.match(new RegExp(a))).toArray().map(e=>{e=c(e);let t=c.html(e.parent().children()[e.prevAll(`br`).first().index()+1]),n=e.parent().contents().toArray().map(e=>c.html(c(e))),r=n[n.indexOf(t)-1].trim().replace(/\s.*|&nbsp;.*/,``);return{link:o,title:r,description:`<p>${e.parent().html()}</p>`,enclosure_url:e.attr(`href`),enclosure_type:`application/x-bittorrent`,guid:`${o}#${r}`}}).toReversed();return{title:`${c(`.content-page-title`).text()} - FIX字幕侠`,link:o,item:l}}export{r as route};
//# sourceMappingURL=portfolio-BZwhmFhy.js.map