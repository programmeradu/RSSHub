{"version":3,"file":"pornstar-TX7QHTCQ.js","names":["route: Route","InvalidParameterError","got","response"],"sources":["../../lib/routes/pornhub/pornstar.ts"],"sourcesContent":["import { Route, ViewType, Data } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { isValidHost } from '@/utils/valid-host';\r\nimport { headers, parseItems, getRadarDomin } from './utils';\r\nimport InvalidParameterError from '@/errors/types/invalid-parameter';\r\n\r\nexport const route: Route = {\r\n    path: '/pornstar/:username/:language?/:sort?',\r\n    categories: ['multimedia'],\r\n    view: ViewType.Videos,\r\n    example: '/pornhub/pornstar/june-liu/www/mr',\r\n    parameters: {\r\n        username: {\r\n            description: 'username, part of the url e.g. `pornhub.com/pornstar/june-liu`',\r\n        },\r\n        language: {\r\n            description: 'language',\r\n            options: [\r\n                { value: 'www', label: 'English' },\r\n                { value: 'de', label: 'Deutsch' },\r\n                { value: 'es', label: 'Español' },\r\n                { value: 'fr', label: 'Français' },\r\n                { value: 'it', label: 'Italiano' },\r\n                { value: 'ja', label: '日本語' },\r\n                { value: 'pt', label: 'Português' },\r\n                { value: 'pl', label: 'Polski' },\r\n                { value: 'rt', label: 'Русский' },\r\n                { value: 'nl', label: 'Dutch' },\r\n                { value: 'cs', label: 'Czech' },\r\n                { value: 'cn', label: '中文（简体）' },\r\n            ],\r\n            default: 'www',\r\n        },\r\n        sort: {\r\n            description: 'sorting method, leave empty for `Best`',\r\n            options: [\r\n                {\r\n                    label: 'Most Recent',\r\n                    value: 'mr',\r\n                },\r\n                {\r\n                    label: 'Most Viewed',\r\n                    value: 'mv',\r\n                },\r\n                {\r\n                    label: 'Top Rated',\r\n                    value: 'tr',\r\n                },\r\n                {\r\n                    label: 'Longest',\r\n                    value: 'lg',\r\n                },\r\n            ],\r\n        },\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: getRadarDomin('/pornstar/:username'),\r\n    name: 'Pornstar',\r\n    maintainers: ['I2IMk', 'queensferryme'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx): Promise<Data> {\r\n    const { language = 'www', username, sort = 'mr' } = ctx.req.param();\r\n    let link = `https://${language}.pornhub.com/pornstar/${username}?o=${sort}`;\r\n    if (!isValidHost(language)) {\r\n        throw new InvalidParameterError('Invalid language');\r\n    }\r\n\r\n    const { data: response } = await got(link, { headers });\r\n    let $ = load(response);\r\n    let items;\r\n\r\n    if ($('.withBio').length === 0) {\r\n        link = `https://${language}.pornhub.com/pornstar/${username}/videos?o=${sort}`;\r\n        const { data: response } = await got(link, { headers });\r\n        $ = load(response);\r\n        items = $('#mostRecentVideosSection .videoBox')\r\n            .toArray()\r\n            .map((e) => parseItems($(e)));\r\n    } else {\r\n        items = $('#pornstarsVideoSection .videoBox')\r\n            .toArray()\r\n            .map((e) => parseItems($(e)));\r\n    }\r\n\r\n    return {\r\n        title: $('h1').first().text(),\r\n        description: $('section.aboutMeSection').text().trim(),\r\n        link,\r\n        image: $('#getAvatar').attr('src'),\r\n        language: $('html').attr('lang'),\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gkBAOA,MAAaA,EAAe,CACxB,KAAM,wCACN,WAAY,CAAC,cACb,KAAM,EAAS,OACf,QAAS,oCACT,WAAY,CACR,SAAU,CACN,YAAa,kEAEjB,SAAU,CACN,YAAa,WACb,QAAS,CACL,CAAE,MAAO,MAAO,MAAO,WACvB,CAAE,MAAO,KAAM,MAAO,WACtB,CAAE,MAAO,KAAM,MAAO,WACtB,CAAE,MAAO,KAAM,MAAO,YACtB,CAAE,MAAO,KAAM,MAAO,YACtB,CAAE,MAAO,KAAM,MAAO,OACtB,CAAE,MAAO,KAAM,MAAO,aACtB,CAAE,MAAO,KAAM,MAAO,UACtB,CAAE,MAAO,KAAM,MAAO,WACtB,CAAE,MAAO,KAAM,MAAO,SACtB,CAAE,MAAO,KAAM,MAAO,SACtB,CAAE,MAAO,KAAM,MAAO,WAE1B,QAAS,OAEb,KAAM,CACF,YAAa,yCACb,QAAS,CACL,CACI,MAAO,cACP,MAAO,MAEX,CACI,MAAO,cACP,MAAO,MAEX,CACI,MAAO,YACP,MAAO,MAEX,CACI,MAAO,UACP,MAAO,SAKvB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,EAAc,uBACrB,KAAM,WACN,YAAa,CAAC,QAAS,iBACvB,WAGJ,eAAe,EAAQ,EAAoB,CACvC,GAAM,CAAE,WAAW,MAAO,WAAU,OAAO,MAAS,EAAI,IAAI,QACxD,EAAO,WAAW,EAAS,wBAAwB,EAAS,KAAK,IACrE,GAAI,CAAC,EAAY,GACb,MAAM,IAAIC,EAAsB,oBAGpC,GAAM,CAAE,KAAM,GAAa,MAAMC,EAAI,EAAM,CAAE,YACzC,EAAI,EAAK,GACT,EAEJ,GAAI,EAAE,YAAY,SAAW,EAAG,CAC5B,EAAO,WAAW,EAAS,wBAAwB,EAAS,YAAY,IACxE,GAAM,CAAE,KAAMC,GAAa,MAAMD,EAAI,EAAM,CAAE,YAC7C,EAAI,EAAKC,GACT,EAAQ,EAAE,sCACL,UACA,IAAK,GAAM,EAAW,EAAE,UAE7B,EAAQ,EAAE,oCACL,UACA,IAAK,GAAM,EAAW,EAAE,KAGjC,MAAO,CACH,MAAO,EAAE,MAAM,QAAQ,OACvB,YAAa,EAAE,0BAA0B,OAAO,OAChD,OACA,MAAO,EAAE,cAAc,KAAK,OAC5B,SAAU,EAAE,QAAQ,KAAK,QACzB,KAAM"}