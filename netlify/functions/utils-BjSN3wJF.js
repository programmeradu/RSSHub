import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";t();const s=(e,t)=>{switch(e){case`Image`:switch(t){case`sq`:return`Fotografi`;case`am`:return`ምስል`;case`ar`:return`صورة من`;case`bn`:return`ছবি`;case`bs`:return`Foto`;case`bg`:return`Снимка`;case`zh`:return`图像来源`;case`zh-hant`:return`圖片來源`;case`hr`:return`Foto`;case`fa-af`:return`عکس`;case`en`:return`Image`;case`fr`:return`Image`;case`de`:return`Bild`;case`el`:return`Εικόνα`;case`ha`:return`Hoto`;case`hi`:return`तस्वीर`;case`id`:return`Foto`;case`sw`:return`Picha`;case`mk`:return`Фотографија`;case`ps`:return`انځور`;case`fa-ir`:return`عکس`;case`pl`:return`Zdjęcie`;case`pt-002`:return`Foto`;case`pt-br`:return`Foto`;case`ro`:return`Imagine`;case`ru`:return`Фото`;case`sr`:return`Foto`;case`es`:return`Imagen`;case`tr`:return`Fotoğraf`;case`uk`:return`Фото`;case`ur`:return`تصویر`;default:return`Image`}default:return e}},c=e=>e.replace(`https://hlsvod.dw.com/i/`,`https://tvdownloaddw-a.akamaihd.net/`).replace(`,AVC_480x270,AVC_512x288,AVC_640x360,AVC_960x540,AVC_1280x720,AVC_1920x1080,.mp4.csmil/master.m3u8`,`AVC_1920x1080.mp4`),l=(e,t)=>{e(`img`).each((n,r)=>{try{let n=e(r).attr(`data-id`),i=t.find(e=>String(e.targetId)===n);e(r).attr({title:i?.name,alt:i?.description,src:`https://static.dw.com/image/${n}_605.jpg`}),e(r).removeAttr(`style`)}catch{}}),e(`video`).each((t,n)=>{try{e(n).attr(`poster`,e(n).attr(`data-posterurl`))}catch{}}),e(`iframe`).each((t,n)=>{try{e(n).attr(`src`,e(n).attr(`data-src`))}catch{}}),e(`svg`).remove()},u=(t,n)=>{let i=o(n.text);l(i,n.contentLinks);let u=t.type===`liveblog`&&n.posts?r(a.join(e,`templates/liveblog-210b7f8c.art`),{posts:n.posts.map(e=>{let t=o(e.text);return l(t,n.contentLinks),e.text=t.html(),e})}):void 0,d=t.type===`video`&&n.hlsVideoSrc?r(a.join(e,`templates/video-4856594c.art`),{hlsVideoSrc:n.hlsVideoSrc,mp4VideoSrc:c(n.hlsVideoSrc),posterImageUrl:n.posterImageUrl}):void 0;return t.description=r(a.join(e,`templates/description-52b26890.art`),{teaser:n.teaser,video:d,mainImage:i(`[data-id="${n.mainContentImageLink?.targetId}"]`).length===0?n.mainContentImageLink:void 0,text:i.html(),liveblog:u,imageI18n:s(`Image`,t.language),formatId:`605`}),n.trackingCategories&&(t.category=n.trackingCategories),n.firstPersonArray&&(t.author=n.firstPersonArray.map(e=>e.fullName).join(`, `)),t},d=async e=>(e=await Promise.all(e.map(e=>n.tryGet(e.link,async()=>{let t=await i(`https://www.dw.com/graph-api/${e.language}/content/${e.type}/${e.id}`),n=t.data.data.content;return u(e,n)}))),e);export{d as processItems};
//# sourceMappingURL=utils-BjSN3wJF.js.map