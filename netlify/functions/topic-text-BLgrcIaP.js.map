{"version":3,"file":"topic-text-BLgrcIaP.js","names":["route: Route"],"sources":["../../lib/routes/jike/topic-text.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport dayjs from 'dayjs';\r\nimport { constructTopicEntry } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/topic/text/:id',\r\n    categories: ['social-media'],\r\n    example: '/jike/topic/text/553870e8e4b0cafb0a1bef68',\r\n    parameters: { id: '圈子 id, 可在即刻 web 端圈子页或 APP 分享出来的圈子页 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['web.okjike.com/topic/:id'],\r\n        },\r\n    ],\r\n    name: '圈子 - 纯文字',\r\n    maintainers: ['HenryQW'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n    const topicUrl = `https://m.okjike.com/topics/${id}`;\r\n\r\n    const data = await constructTopicEntry(ctx, topicUrl);\r\n\r\n    if (data) {\r\n        const result = data.result;\r\n        result.item = data.posts.map((item) => {\r\n            const date = dayjs(item.createdAt);\r\n            return {\r\n                title: `${data.topic.content} ${date.format('MM月DD日')}`,\r\n                description: item.content.replaceAll('\\n', '<br>'),\r\n                pubDate: date.toDate(),\r\n                link: `https://m.okjike.com/originalPosts/${item.id}`,\r\n            };\r\n        });\r\n        return result;\r\n    }\r\n}\r\n"],"mappings":"sVAIA,MAAaA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,gBACb,QAAS,4CACT,WAAY,CAAE,GAAI,8CAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,8BAGjB,KAAM,WACN,YAAa,CAAC,WACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MACnB,EAAW,+BAA+B,IAE1C,EAAO,MAAM,EAAoB,EAAK,GAE5C,GAAI,EAAM,CACN,IAAM,EAAS,EAAK,OAUpB,MATA,GAAO,KAAO,EAAK,MAAM,IAAK,GAAS,CACnC,IAAM,EAAO,EAAM,EAAK,WACxB,MAAO,CACH,MAAO,GAAG,EAAK,MAAM,QAAQ,GAAG,EAAK,OAAO,YAC5C,YAAa,EAAK,QAAQ,WAAW;EAAM,QAC3C,QAAS,EAAK,SACd,KAAM,sCAAsC,EAAK,QAGlD"}