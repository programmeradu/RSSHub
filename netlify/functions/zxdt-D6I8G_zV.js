import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={path:`/zxdt/:id?`,categories:[`travel`],example:`/12306/zxdt`,parameters:{id:`铁路局id，可在 URL 中找到，不填默认显示所有铁路局动态`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.12306.cn/`,`www.12306.cn/mormhweb/1/:id/index_fl.html`],target:`/zxdt/:id`}],name:`最新动态`,maintainers:[`LogicJake`],handler:a,url:`www.12306.cn/`};async function a(i){let a=i.req.param(`id`)||-1,o=a===-1?`https://www.12306.cn/mormhweb/zxdt/index_zxdt.html`:`https://www.12306.cn/mormhweb/1/${a}/index_fl.html`,s=await n.get(o),c=s.data,l=r(c),u=l(`div.nav_center > a:nth-child(4)`).text(),d=l(`#newList > ul > li`).toArray().map(e=>({title:l(e).find(`a`).text(),link:new URL(l(e).find(`a`).attr(`href`),o).href,pubDate:t(l(e).find(`span`).text().slice(1,-1))})),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=await n.get(t.link),i=r(e.data);return t.description=i(`.article-box`).html()||i(`.content_text`).html()||`文章已被删除`,t})));return{title:`${u}最新动态`,link:o,item:f}}export{i as route};
//# sourceMappingURL=zxdt-D6I8G_zV.js.map