{"version":3,"file":"regear-new-arrivals-1yHUhElY.js","names":[],"sources":["../../lib/routes/arcteryx/regear-new-arrivals.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nconst host = 'https://www.regear.arcteryx.com';\r\nfunction getUSDPrice(number) {\r\n    return (number / 100).toLocaleString('en-US', { style: 'currency', currency: 'USD' });\r\n}\r\nexport const route: Route = {\r\n    path: '/regear/new-arrivals',\r\n    categories: ['shopping'],\r\n    example: '/arcteryx/regear/new-arrivals',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['regear.arcteryx.com/shop/new-arrivals', 'regear.arcteryx.com/'],\r\n        },\r\n    ],\r\n    name: 'Regear New Arrivals',\r\n    maintainers: ['EthanWng97'],\r\n    handler,\r\n    url: 'regear.arcteryx.com/shop/new-arrivals',\r\n};\r\n\r\nasync function handler() {\r\n    const url = `${host}/shop/new-arrivals`;\r\n    const response = await got({\r\n        method: 'get',\r\n        url,\r\n    });\r\n\r\n    const data = response.data;\r\n    const $ = load(data);\r\n    const contents = $('script:contains(\"window.__PRELOADED_STATE__\")').text();\r\n    const regex = /{.*}/;\r\n    let items = JSON.parse(contents.match(regex)[0]).shop.items;\r\n    items = items.filter((item) => item.availableSizes.length !== 0);\r\n\r\n    const list = items.map((item) => {\r\n        const data = {};\r\n        data.title = item.displayTitle;\r\n        data.link = item.pdpLink.url;\r\n        data.imgUrl = JSON.parse(item.imageUrls).front;\r\n        data.availableSizes = item.availableSizes;\r\n        data.color = item.color;\r\n        data.originalPrice = getUSDPrice(item.originalPrice);\r\n        data.regearPrice = item.priceRange[0] === item.priceRange[1] ? getUSDPrice(item.priceRange[0]) : `${getUSDPrice(item.priceRange[0])} - ${getUSDPrice(item.priceRange[1])}`;\r\n        data.description = art(path.join(__dirname, 'templates/regear-product-description.art'), {\r\n            data,\r\n        });\r\n        return data;\r\n    });\r\n\r\n    return {\r\n        title: 'Arcteryx - Regear - New Arrivals',\r\n        link: url,\r\n        description: 'Arcteryx - Regear - New Arrivals',\r\n        item: list.map((item) => ({\r\n            title: item.title,\r\n            link: item.link,\r\n            description: item.description,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"+WAQA,SAAS,EAAY,EAAQ,CACzB,OAAQ,EAAS,KAAK,eAAe,QAAS,CAAE,MAAO,WAAY,SAAU,QAEjF,MAAa,EAAe,CACxB,KAAM,uBACN,WAAY,CAAC,YACb,QAAS,gCACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,wCAAyC,0BAG1D,KAAM,sBACN,YAAa,CAAC,cACd,UACA,IAAK,yCAGT,eAAe,GAAU,CACrB,IAAM,EAAM,oDACN,EAAW,MAAM,EAAI,CACvB,OAAQ,MACR,QAGE,EAAO,EAAS,KAChB,EAAI,EAAK,GACT,EAAW,EAAE,iDAAiD,OAC9D,EAAQ,OACV,EAAQ,KAAK,MAAM,EAAS,MAAM,GAAO,IAAI,KAAK,MACtD,EAAQ,EAAM,OAAQ,GAAS,EAAK,eAAe,SAAW,GAE9D,IAAM,EAAO,EAAM,IAAK,GAAS,CAC7B,IAAM,EAAO,GAWb,MAVA,GAAK,MAAQ,EAAK,aAClB,EAAK,KAAO,EAAK,QAAQ,IACzB,EAAK,OAAS,KAAK,MAAM,EAAK,WAAW,MACzC,EAAK,eAAiB,EAAK,eAC3B,EAAK,MAAQ,EAAK,MAClB,EAAK,cAAgB,EAAY,EAAK,eACtC,EAAK,YAAc,EAAK,WAAW,KAAO,EAAK,WAAW,GAAK,EAAY,EAAK,WAAW,IAAM,GAAG,EAAY,EAAK,WAAW,IAAI,KAAK,EAAY,EAAK,WAAW,MACrK,EAAK,YAAc,EAAI,EAAA,KAAA,EAAA,qDAAkE,CACrF,KAAA,IAEG,IAGX,MAAO,CACH,MAAO,mCACP,KAAM,EACN,YAAa,mCACb,KAAM,EAAK,IAAK,IAAU,CACtB,MAAO,EAAK,MACZ,KAAM,EAAK,KACX,YAAa,EAAK"}