import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{ViewType as o}from"./types-A5bA50Mg.js";import{invalid_parameter_default as s}from"./invalid-parameter-CUJdROXf.js";import c from"node:path";import l from"node:crypto";t();const u=c.join(e,`templates/bilingual-547f115e.art`),d=`https://www.linkresearcher.com`,f=`${d}/api`,p={name:`Articles`,path:`/:params`,example:`/linkresearcher/category=theses&columns=Nature%20导读&subject=生物`,maintainers:[`y9c`,`KarasuShin`],handler:m,view:o.Articles,categories:[`journal`],parameters:{params:{description:"search parameters, support `category`, `subject`, `columns`, `query`"}},zh:{name:`文章`},"zh-TW":{name:`文章`}};async function m(e){let t={theses:`论文`,information:`新闻`,careers:`职业`},o=e.req.param(`params`),c=new URLSearchParams(o),p=c.get(`subject`),m=c.get(`columns`),h=c.get(`query`)??``,g=c.get(`category`)??`theses`;if(!(g in t))throw new s(`Invalid category`);let _=t[g],v=l.randomUUID(),y={filters:{status:!0}};p&&(y.filters.subject=p,_=`${_}「${p}」`),m&&(y.filters.columns=m,_=`${_}「${m}」`);let b=`${d}/api/${g===`careers`?`articles`:g}/search`,x=await a(b,{method:`POST`,headers:{"content-type":`application/json; charset=UTF-8`,"x-xsrf-token":v,cookie:`XSRF-TOKEN=${v}`},params:{from:0,size:20,type:g===`careers`?`CAREER`:`SEARCH`},body:{...y,query:h}}),S=await Promise.all(x.hits.map(e=>{let t=`${d}/${g}/${e.id}`;return n.tryGet(t,async()=>{let n=await a(`${f}/${g===`theses`?`theses`:`information`}/${e.id}`,{responseType:`json`}),o={title:n.title,pubDate:i(n.onlineTime),link:t,image:n.cover};if(o.description=`zhTextList`in n&&`enTextList`in n?r(u,{zh:n.zhTextList,en:n.enTextList}):n.content,`paperList`in n){let{doi:e,authors:t}=n.paperList[0];o.doi=e,o.author=t.map(e=>({name:e}))}return o})}));return{title:`领研 | ${_}`,description:`领研是链接华人学者的人才及成果平台。领研为国内外高校、科研机构及科技企业提供科研人才招聘服务，也是青年研究者的职业发展指导及线上培训平台；研究者还可将自己的研究论文上传至领研，与超过五十万华人学者分享工作的最新进展。`,image:`${d}/assets/images/logo-app.png`,link:d,item:S}}export{p as route};
//# sourceMappingURL=linkresearcher-DZCDiDw5.js.map