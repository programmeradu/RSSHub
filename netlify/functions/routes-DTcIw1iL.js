import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{ofetch_default as e}from"./ofetch-Bzt0BXUH.js";import{ViewType as t}from"./types-A5bA50Mg.js";import*as n from"cheerio";const r={path:`/routes/:lang?`,categories:[`program-update`],view:t.Notifications,example:`/rsshub/routes/en`,parameters:{lang:{description:`Language`,options:[{label:`Chinese`,value:`zh`},{label:`English`,value:`en`}],default:`en`}},radar:[{source:[`docs.rsshub.app/*`],target:`/routes`}],name:`New routes`,maintainers:[`DIYgod`],handler:i,url:`docs.rsshub.app/*`};async function i(t){let r=t.req.param(`lang`)!==`zh`,i=r?``:`zh/`,a=[`social-media`,`new-media`,`traditional-media`,`bbs`,`blog`,`programming`,`design`,`live`,`multimedia`,`picture`,`anime`,`program-update`,`university`,`forecast`,`travel`,`shopping`,`game`,`reading`,`government`,`study`,`journal`,`finance`,`other`],o=await Promise.all(a.map(async t=>{let r=await e(`https://docs.rsshub.app/${i}routes/${t}`),a=n.load(r),o=a(`.page`).toArray(),s=a(`.routeBlock`).toArray();return{page:o,item:s,type:t}})),s=o.flatMap(({page:e,item:t,type:n})=>t.map(t=>({page:e,item:t,type:n})));return{title:r?`RSSHub has new routes`:`RSSHub 有新路由啦`,link:`https://docs.rsshub.app`,description:r?`Everything is RSSible`:`万物皆可 RSS`,language:r?`en-us`:`zh-cn`,item:s.map(({page:e,item:t,type:r})=>{let a=n.load(e),o=a(t),s=o.prevAll(`h2`).eq(0),c=o.prevAll(`h3`).eq(0);return o.find(`.VPBadge`).each((e,t)=>{let n=a(t);n.text().includes(`Test`)&&n.remove()}),{title:`${s.text().trim()} - ${c.text().trim()}`,description:o.html()?.replaceAll(/<!--.*?-->/g,``),link:`https://docs.rsshub.app/${i}routes/${r}#${encodeURIComponent(s.find(`.header-anchor`).attr(`href`)&&c.find(`.header-anchor`).attr(`href`)?.slice(1))}`,guid:o.attr(`id`)}})}}export{r as route};
//# sourceMappingURL=routes-DTcIw1iL.js.map