import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={zhxw:{title:`上海大学研究生院-综合新闻`,url:`https://gs.shu.edu.cn/xwlb/zh.htm`},pygl:{title:`上海大学研究生院-培养管理`,url:`https://gs.shu.edu.cn/xwlb/py.htm`},gjjl:{title:`上海大学研究生院-国际交流`,url:`https://gs.shu.edu.cn/xwlb/gjjl.htm`}},o={path:`/gs/:type?`,categories:[`university`],example:`/shu/gs/zhxw`,parameters:{type:`分类，默认为学术公告`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`gs.shu.edu.cn/`],target:`/gs`}],name:`研究生院`,maintainers:[`GhhG123`],handler:s,url:`gs.shu.edu.cn/`,description:`| 综合新闻 | 培养管理 | 国际交流 |
| -------- | --------- | --------- |
| zhxw     | pygl      | gjjl      |`};async function s(o){let s=o.req.param(`type`)??`zhxw`,c=`https://gs.shu.edu.cn`,l=await n({method:`get`,url:a[s].url}),u=i(l.data),d=u(`tr[id^="line_u17_"]`).toArray().map(e=>{let n=u(e),i=n.find(`a`).attr(`href`),a=n.find(`a`).text().trim(),o=n.find(`td`).eq(1).text().trim();return{title:a,link:i?new URL(i,c).href:c,pubDate:r(t(o,`YYYY/MM/DD HH:mm:ss`),8),description:n.find(`td`).eq(2).text().trim()}}),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=new URL(t.link);if(e.hostname===`gs1.shu.edu.cn`)return t.description=`gs1.shu.edu.cn, 无法直接获取`,t;let r=await n({method:`get`,url:t.link}),a=i(r.data);return t.description=a(`#vsb_content .v_news_content`).html()||t.description,t})));return{title:a[s].title,description:a[s].title,link:a[s].url,image:`https://www.shu.edu.cn/__local/0/08/C6/1EABE492B0CF228A5564D6E6ABE_779D1EE3_5BF7.png`,item:f}}export{o as route};
//# sourceMappingURL=gs-BTHlRVVI.js.map