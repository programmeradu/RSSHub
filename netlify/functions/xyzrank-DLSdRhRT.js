import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";t();const s={path:`/:category?`,radar:[{source:[`xyzrank.com/`],target:``}],name:`Unknown`,maintainers:[],handler:c,url:`xyzrank.com/`};async function c(t){let s=t.req.param(`category`)??``,c=`https://xyzrank.com`,l=`${c}/#/${s}`,u=await i({method:`get`,url:c}),d=o(u.data);u=await i({method:`get`,url:u.data.match(/<script type="module" crossorigin src="(.*?)"><\/script>/)[1]});let f=u.data.match(/pI="(.*?)",gI="(.*?)",mI="(.*?)",_I="(.*?)";var/),p={"":{url:f[3],title:`热门节目`,id:`hot-episodes`,type:`episodes`},"hot-podcasts":{url:f[1],title:`热门播客`,id:`full`,type:`podcasts`},"hot-episodes-new":{url:f[4],title:`新锐节目`,id:`hot-episodes-new`,type:`episodes`},"new-podcasts":{url:f[2],title:`新锐播客`,id:`new-podcasts`,type:`podcasts`}};u=await i({method:`get`,url:p[s].url});let m=p[s].type,h=u.data.data[m].slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):250).map((t,i)=>({title:`#${i+1} ${t.title??t.name}`,category:[t.primaryGenreName],author:t.authorsText,link:`${t.link??t.links[0].url}${t.trackCount?`#${t.trackCount}`:``}`,pubDate:r(t.postTime??t.lastReleaseDate),description:n(a.join(e,`templates/description-58d55261.art`),{logo:t.logoURL,items:m===`podcasts`?{"#":i+1,播客电台:t.name,主持:t.authorsText,分类:t.primaryGenreName,更新频率:`${(t.avgUpdateFreq/24).toFixed(1)}天`,最近更新:`${t.lastReleaseDateDayCount.toFixed(1)}天前`,总集数:t.trackCount,平均时长:`${t.avgDuration}′`,平均播放量:t.avgPlayCount,平均评论量:t.avgCommentCount,千播互动量:(t.avgInteractIndicator*1e3).toFixed(0),平均打开率:`${(t.avgOpenRate*100).toFixed(1)}%`,小宇宙:t.links[0].url,"Apple Podcasts":t.links[1].url,官方网站:t.links[2].url,"RSS 订阅":t.links[3].url}:{"#":i+1,节目标题:t.title,播客电台:t.podcastName,播放量:t.playCount,评论量:t.commentCount,互动率:`${(t.commentCount/t.playCount*100).toFixed(1)}%`,打开率:`${(t.openRate*100).toFixed(1)}%`,时长:`${t.duration}′`,发布时间:t.postTime,分类:t.primaryGenreName,链接:t.link}})}));return{title:`${d(`title`).text()} - ${p[s].title}`,link:l,item:h,description:d(`meta[property="og:description"]`).attr(`content`)}}export{s as route};
//# sourceMappingURL=xyzrank-DLSdRhRT.js.map