import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{load as t}from"cheerio";const n={path:`/music/latest/:area?`,categories:[`social-media`],example:`/douban/music/latest/chinese`,parameters:{area:`区域类型，默认全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新增加的音乐`,maintainers:[`fengkx`,`xyqfer`],handler:r,description:`| 华语    | 欧美    | 日韩        |
| ------- | ------- | ----------- |
| chinese | western | japankorean |`};async function r(n){let{area:r=``}=n.req.param(),i=`豆瓣最新增加的音乐`,a;if(r===``){let n=`https://music.douban.com/latest`,r=await e.get(n),o=t(r.data),s=o(`.dlist`).toArray();a={title:i,link:n,item:s.map(e=>({title:o(e).find(`.pl2`).text(),link:o(e).find(`.pl2`).attr(`href`),description:o(e).html()}))}}else{let t=`https://m.douban.com/music/`,n={chinese:{name:`华语新碟榜`,path:`chinese`},western:{name:`欧美新碟榜`,path:`occident`},japankorean:{name:`日韩新碟榜`,path:`japan_korea`}},o=await e({method:`get`,url:`https://m.douban.com/rexxar/api/v2/subject_collection/music_${n[r].path}/items?os=ios&callback=&start=0&count=20&loc_id=0&_=0`,headers:{Referer:t}});a={title:`${i}-${n[r].name}`,link:`${t}new${r}`,item:o.data.subject_collection_items.map(e=>{let t=`${e.title}-${e.info}`,n=`https://music.douban.com/subject/${e.id}/`,r=`
                    <img src="${e.cover.url}" /><br>
                    ${e.recommend_comment}<br>
                    <strong>评分:</strong> ${e.rating.value.toFixed(1)}
                `,i=new Date(e.pubdate[0]).toUTCString();return{title:t,link:n,description:r,pubDate:i}})}}return a}export{n as route};
//# sourceMappingURL=latest-music-Bg63FvzO.js.map