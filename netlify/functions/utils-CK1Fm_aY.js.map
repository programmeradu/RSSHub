{"version":3,"file":"utils-CK1Fm_aY.js","names":["got"],"sources":["../../lib/routes/agirls/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nconst baseUrl = 'https://agirls.aotter.net';\r\n\r\nconst parseArticle = async (item) => {\r\n    const detailResponse = await got(item.link);\r\n    const content = load(detailResponse.data);\r\n\r\n    item.category = [\r\n        ...new Set(\r\n            content('.ag-article__tag')\r\n                .toArray()\r\n                .map((e) => content(e).text().trim().replace('#', ''))\r\n        ),\r\n    ];\r\n    const ldJson = JSON.parse(content('script[type=\"application/ld+json\"]').text());\r\n\r\n    item.description = content('.ag-article__content').html();\r\n    item.pubDate = parseDate(ldJson['@graph'][0].datePublished); // 2023-07-05T12:11:36+08:00\r\n    item.updated = parseDate(ldJson['@graph'][0].dateModified); // 2023-07-05T12:11:36+08:00\r\n    item.author = ldJson['@graph'][0].author.map((a) => a.name).join(', ');\r\n\r\n    return item;\r\n};\r\n\r\nexport { baseUrl, parseArticle };\r\n"],"mappings":"oIAIA,MAAM,EAAU,4BAEV,EAAe,KAAO,IAAS,CACjC,IAAM,EAAiB,MAAMA,EAAI,EAAK,MAChC,EAAU,EAAK,EAAe,MAEpC,EAAK,SAAW,CACZ,GAAG,IAAI,IACH,EAAQ,oBACH,UACA,IAAK,GAAM,EAAQ,GAAG,OAAO,OAAO,QAAQ,IAAK,OAG9D,IAAM,EAAS,KAAK,MAAM,EAAQ,sCAAsC,QAOxE,MALA,GAAK,YAAc,EAAQ,wBAAwB,OACnD,EAAK,QAAU,EAAU,EAAO,UAAU,GAAG,eAC7C,EAAK,QAAU,EAAU,EAAO,UAAU,GAAG,cAC7C,EAAK,OAAS,EAAO,UAAU,GAAG,OAAO,IAAK,GAAM,EAAE,MAAM,KAAK,MAE1D"}