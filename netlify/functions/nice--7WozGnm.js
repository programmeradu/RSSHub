import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";import s from"markdown-it";t();const c=s({html:!0}),l={path:`/nice`,categories:[`blog`],example:`/chuanliu/nice`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`chuanliu.org/nice`]}],name:`严选`,maintainers:[`nczitzk`],handler:u,url:`chuanliu.org/nice`};async function u(t){let s=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):100,l=new URL(`nice/`,`https://chuanliu.org`).href,u=new URL(`api/dis/api/v1/memo`,`https://s.chuanliu.org`).href,{data:d}=await i(u,{searchParams:{creatorId:1,offset:0,limit:s}}),f=d.slice(0,s).map(t=>{let i=t.content.split(/\n/),o=i?.[0].replace(/^#/,``)??void 0,s=i?.[1]??void 0,l=i?.[2]??void 0,u=i?.[3]??void 0,d=(i?.[5]&&i[5]===`star`)??!1;return d&&i.splice(5,1),{title:`${d?`[STAR] `:``}${s}`,link:l,description:n(a.join(e,`templates/description-c6163539.art`),{description:c.render(i?.join(`

`)??``),images:t.resourceList.map(e=>({src:e.externalLink,alt:e.filename,type:e.type}))}),author:u,category:[o,d?`STAR`:void 0].filter(Boolean),guid:`chuanliu-nice#${t.id}`,pubDate:r(t.createdTs,`X`),updated:r(t.updatedTs,`X`)}}),{data:p}=await i(l),m=o(p),h=new URL(m(`link[rel="shortcut icon"]`).prop(`href`),l).href;return{item:f,title:m(`title`).text(),link:l,description:m(`span.rainbow-text`).first().text(),language:m(`html`).prop(`lang`),icon:h,logo:h,subtitle:m(`title`).text(),author:m(`meta[name="author"]`).prop(`content`),allowEmpty:!0}}export{l as route};
//# sourceMappingURL=nice--7WozGnm.js.map