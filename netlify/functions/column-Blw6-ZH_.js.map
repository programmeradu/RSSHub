{"version":3,"file":"column-Blw6-ZH_.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/bjnews/column.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nimport { fetchArticle } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/column/:column',\r\n    categories: ['traditional-media'],\r\n    example: '/bjnews/column/204',\r\n    parameters: { column: '栏目ID, 可从手机版网页URL中找到' },\r\n    features: {},\r\n    radar: [\r\n        {\r\n            source: ['m.bjnews.com.cn/column/:column.htm'],\r\n        },\r\n    ],\r\n    name: '分类',\r\n    maintainers: ['dzx-dzx'],\r\n    handler,\r\n    url: 'www.bjnews.com.cn',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const columnID = ctx.req.param('column');\r\n    const url = `https://api.bjnews.com.cn/api/v101/news/column_news.php?column_id=${columnID}`;\r\n    const res = await ofetch(url);\r\n    const list = res.data.slice(0, ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit')) : 15).map((e) => ({\r\n        title: e.row.title,\r\n        guid: e.uuid,\r\n        pubDate: timezone(parseDate(e.row.publish_time), +8),\r\n        updated: timezone(parseDate(e.row.update_time), +8),\r\n        link: `https://www.bjnews.com.cn/detail/${e.uuid}.html`,\r\n    }));\r\n\r\n    const out = await Promise.all(list.map((item) => fetchArticle(item)));\r\n    return {\r\n        title: `新京报 - 栏目 - ${res.data[0].row.column_info[0].column_name}`,\r\n        link: `https://m.bjnews.com.cn/column/${columnID}.html`,\r\n        item: out,\r\n    };\r\n}\r\n"],"mappings":"iWAOA,MAAaA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,qBACb,QAAS,qBACT,WAAY,CAAE,OAAQ,uBACtB,SAAU,GACV,MAAO,CACH,CACI,OAAQ,CAAC,wCAGjB,KAAM,KACN,YAAa,CAAC,WACd,UACA,IAAK,qBAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,EAAI,IAAI,MAAM,UACzB,EAAM,qEAAqE,IAC3E,EAAM,MAAMC,EAAO,GACnB,EAAO,EAAI,KAAK,MAAM,EAAG,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,IAAI,IAAK,IAAO,CAC9G,MAAO,EAAE,IAAI,MACb,KAAM,EAAE,KACR,QAAS,EAAS,EAAU,EAAE,IAAI,cAAe,GACjD,QAAS,EAAS,EAAU,EAAE,IAAI,aAAc,GAChD,KAAM,oCAAoC,EAAE,KAAK,UAG/C,EAAM,MAAM,QAAQ,IAAI,EAAK,IAAK,GAAS,EAAa,KAC9D,MAAO,CACH,MAAO,cAAc,EAAI,KAAK,GAAG,IAAI,YAAY,GAAG,cACpD,KAAM,kCAAkC,EAAS,OACjD,KAAM"}