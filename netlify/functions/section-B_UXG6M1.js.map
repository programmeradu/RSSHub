{"version":3,"file":"section-B_UXG6M1.js","names":["route: Route","ofetch","section"],"sources":["../../lib/routes/dealstreetasia/section.ts"],"sourcesContent":["import { Route } from '@/types';\r\n// import cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch'; // Unified request library used\r\nimport { load } from 'cheerio'; // An HTML parser with an API similar to jQuery\r\n// import puppeteer from '@/utils/puppeteer';\r\n// import { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/section/:section',\r\n    categories: ['traditional-media'],\r\n    example: '/dealstreetasia/section/private-equity',\r\n    parameters: { section: 'target section' },\r\n    radar: [\r\n        {\r\n            source: ['dealstreetasia.com/'],\r\n        },\r\n    ],\r\n    name: 'Section',\r\n    maintainers: ['jack2game'],\r\n    handler,\r\n    url: 'dealstreetasia.com/',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const section = ctx.req.param('section');\r\n    const items = await fetchPage(section);\r\n\r\n    return items;\r\n}\r\n\r\nasync function fetchPage(section: string) {\r\n    const baseUrl = 'https://dealstreetasia.com'; // Define base URL\r\n\r\n    const response = await ofetch(`${baseUrl}/section/${section}/`);\r\n    const $ = load(response);\r\n\r\n    const jsonData = JSON.parse($('#__NEXT_DATA__').text());\r\n    const headingText = jsonData.props.pageProps.sectionData.name;\r\n\r\n    const items = jsonData.props.pageProps.sectionData.stories.nodes;\r\n\r\n    const feedItems = items.map((item) => ({\r\n        title: item.title || 'No Title',\r\n        link: item.uri ? `https://www.dealstreetasia.com${item.uri}` : '',\r\n        description: item.excerpt || '', // Default to empty string if undefined\r\n        pubDate: item.post_date ? new Date(item.post_date).toUTCString() : '',\r\n        category: item.sections.nodes.map((section) => section.name),\r\n        image: item.featuredImage?.node?.mediaItemUrl.replace(/\\?.*$/, ''), // Use .replace to sanitize the image URL\r\n    }));\r\n\r\n    return {\r\n        title: 'Deal Street Asia - ' + headingText,\r\n        language: 'en',\r\n        item: feedItems,\r\n        link: 'https://dealstreetasia.com/section/' + section + '/',\r\n    };\r\n}\r\n"],"mappings":"0MAOA,MAAaA,EAAe,CACxB,KAAM,oBACN,WAAY,CAAC,qBACb,QAAS,yCACT,WAAY,CAAE,QAAS,kBACvB,MAAO,CACH,CACI,OAAQ,CAAC,yBAGjB,KAAM,UACN,YAAa,CAAC,aACd,UACA,IAAK,uBAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,EAAI,IAAI,MAAM,WACxB,EAAQ,MAAM,EAAU,GAE9B,OAAO,EAGX,eAAe,EAAU,EAAiB,CACtC,IAEM,EAAW,MAAMC,EAAO,sCAAsB,EAAQ,IACtD,EAAI,EAAK,GAET,EAAW,KAAK,MAAM,EAAE,kBAAkB,QAC1C,EAAc,EAAS,MAAM,UAAU,YAAY,KAEnD,EAAQ,EAAS,MAAM,UAAU,YAAY,QAAQ,MAErD,EAAY,EAAM,IAAK,IAAU,CACnC,MAAO,EAAK,OAAS,WACrB,KAAM,EAAK,IAAM,iCAAiC,EAAK,MAAQ,GAC/D,YAAa,EAAK,SAAW,GAC7B,QAAS,EAAK,UAAY,IAAI,KAAK,EAAK,WAAW,cAAgB,GACnE,SAAU,EAAK,SAAS,MAAM,IAAK,GAAYC,EAAQ,MACvD,MAAO,EAAK,eAAe,MAAM,aAAa,QAAQ,QAAS,OAGnE,MAAO,CACH,MAAO,sBAAwB,EAC/B,SAAU,KACV,KAAM,EACN,KAAM,sCAAwC,EAAU"}