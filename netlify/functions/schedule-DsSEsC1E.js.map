{"version":3,"file":"schedule-DsSEsC1E.js","names":["route: Route","got"],"sources":["../../lib/routes/nowcoder/schedule.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/schedule/:propertyId?/:typeId?',\r\n    categories: ['bbs'],\r\n    example: '/nowcoder/schedule',\r\n    parameters: { propertyId: '行业, 在控制台中抓取接口，可获得行业id，默认0', typeId: '类别，同上' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['nowcoder.com/'],\r\n            target: '/schedule',\r\n        },\r\n    ],\r\n    name: '校招日程',\r\n    maintainers: ['junfengP'],\r\n    handler,\r\n    url: 'nowcoder.com/',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const propertyId = ctx.req.param('propertyId') ?? 0;\r\n    const typeId = ctx.req.param('typeId') ?? 0;\r\n\r\n    const link = `https://www.nowcoder.com/school/schedule/data?token=&query=&typeId=${typeId}&propertyId=${propertyId}&onlyFollow=false&_=${Date.now()}`;\r\n    const responseBody = (await got(link)).data;\r\n    if (responseBody.code !== 0) {\r\n        throw new Error(`接口错误，错误代码:${responseBody.code},错误原因:${responseBody.msg}`);\r\n    }\r\n    const data = responseBody.data.companyList;\r\n\r\n    return {\r\n        title: '名企校招日程',\r\n        link: 'https://www.nowcoder.com/school/schedule',\r\n        description: '名企校招日程',\r\n        item: data.map((item) => {\r\n            let desc = `<tr><td><img src=\"${item.logo}\" referrerpolicy=\"no-referrer\"\"></td></tr>`;\r\n            for (const each of item.schedules) {\r\n                desc += `<tr><td>${each.content}</td><td>${each.time}</td></tr>`;\r\n            }\r\n            return {\r\n                title: item.name,\r\n                description: `<table>${desc}</table>`,\r\n                pubDate: parseDate(item.createTime),\r\n                link: `https://www.nowcoder.com/school/schedule/${item.id}`,\r\n            };\r\n        }),\r\n    };\r\n}\r\n"],"mappings":"qRAIA,MAAaA,EAAe,CACxB,KAAM,kCACN,WAAY,CAAC,OACb,QAAS,qBACT,WAAY,CAAE,WAAY,4BAA6B,OAAQ,SAC/D,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,iBACT,OAAQ,cAGhB,KAAM,OACN,YAAa,CAAC,YACd,UACA,IAAK,iBAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAa,EAAI,IAAI,MAAM,eAAiB,EAC5C,EAAS,EAAI,IAAI,MAAM,WAAa,EAEpC,EAAO,sEAAsE,EAAO,cAAc,EAAW,sBAAsB,KAAK,QACxI,GAAgB,MAAMC,EAAI,IAAO,KACvC,GAAI,EAAa,OAAS,EACtB,MAAU,MAAM,aAAa,EAAa,KAAK,QAAQ,EAAa,OAExE,IAAM,EAAO,EAAa,KAAK,YAE/B,MAAO,CACH,MAAO,SACP,KAAM,2CACN,YAAa,SACb,KAAM,EAAK,IAAK,GAAS,CACrB,IAAI,EAAO,qBAAqB,EAAK,KAAK,4CAC1C,IAAK,IAAM,KAAQ,EAAK,UACpB,GAAQ,WAAW,EAAK,QAAQ,WAAW,EAAK,KAAK,YAEzD,MAAO,CACH,MAAO,EAAK,KACZ,YAAa,UAAU,EAAK,UAC5B,QAAS,EAAU,EAAK,YACxB,KAAM,4CAA4C,EAAK"}