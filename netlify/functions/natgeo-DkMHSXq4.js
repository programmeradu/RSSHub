import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";async function i(e){let i=await n(e),a=r(i),o=a(`.content-title-area`).find(`h6`).first().text().replaceAll(/&nbsp;/gi,` `).trim();a(`.splide__arrows, .slide-control, [class^="ad-"], style`).remove();let s=(a(`article`).eq(0).html()??``)+(a(`article`).eq(1).html()??``);return/photo|gallery/.test(e)&&(s=a(`#content-album`).html()+s),{title:a(`h1.content-title`).text().trim(),pubDate:t(o),description:s,category:a(`.content-tag a`).toArray().map(e=>a(e).text()),link:e,image:a(`link[rel="image_src"]`).attr(`href`)}}const a={path:`/:cat/:type?`,categories:[`travel`],example:`/natgeo/environment/article`,parameters:{cat:`分类`,type:"类型, 例如`https://www.natgeomedia.com/environment/photo/`对应 `cat`, `type` 分别为 `environment`, `photo`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`natgeomedia.com/:cat/:type`,`natgeomedia.com/:cat/`,`natgeomedia.com/`],target:`/:cat/:type?`}],name:`分类`,maintainers:[`fengkx`],handler:o};async function o(t){let a=t.req.param(`type`)??``,o=`https://www.natgeomedia.com/${t.req.param(`cat`)}/${a}`,s=await n(o),c=r(s),l=c(`.article-link-content h4`).toArray().map(e=>({link:c(e).find(`a[href]`).first().attr(`href`)})).filter(e=>e.link),u=await Promise.all(l.map(t=>e.tryGet(t.link,()=>i(t.link))));return{title:c(`title`).text(),description:c(`meta[name="description"]`).attr(`content`),link:o,image:`https://www.natgeomedia.com/img/app_icon.png`,item:u}}export{a as route};
//# sourceMappingURL=natgeo-DkMHSXq4.js.map