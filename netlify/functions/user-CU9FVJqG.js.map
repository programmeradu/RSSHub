{"version":3,"file":"user-CU9FVJqG.js","names":["route: Route","ofetch","items: { title: string; link: string; description: string }[]"],"sources":["../../lib/routes/furaffinity/user.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const route: Route = {\r\n    path: '/user/:username',\r\n    name: 'Userpage',\r\n    url: 'furaffinity.net',\r\n    categories: ['social-media'],\r\n    example: '/furaffinity/user/fender/nsfw',\r\n    maintainers: ['TigerCubDen', 'SkyNetX007'],\r\n    parameters: { username: 'Username, can find in userpage' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['furaffinity.net/user/:username'],\r\n            target: '/user/:username',\r\n        },\r\n    ],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { username } = ctx.req.param();\r\n    const url = `https://faexport.spangle.org.uk/user/${username}.json`;\r\n\r\n    const data = await ofetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            Referer: 'https://faexport.spangle.org.uk/',\r\n        },\r\n    });\r\n\r\n    // 收集传入的数据\r\n    const name = data.name;\r\n    const profile = data.profile;\r\n    const account_type = data.profile;\r\n    const avatar = `<img src=\"${data.avatar}\">`;\r\n    const full_name = data.full_name;\r\n    const artist_type = data.artist_type;\r\n    const user_title = data.user_title;\r\n    const registered_since = data.registered_since;\r\n    const current_mood = data.current_mood;\r\n    const artist_profile = data.artist_profile;\r\n    const pageviews = data.pageviews;\r\n    const submissions = data.submissions;\r\n    const comments_received = data.comments_received;\r\n    const comments_given = data.comments_given;\r\n    const journals = data.journals;\r\n    const favorite = data.favorites;\r\n    const watchers_count = data.watchers.count;\r\n    const watching_count = data.watching.count;\r\n\r\n    const artist_information = data.artist_information;\r\n    const species = artist_information.Species;\r\n    const personal_quote = artist_information['Personal Quote'];\r\n    const music_type_genre = artist_information['Music Type/Genre'];\r\n    const favorites_movie = artist_information['Favorite Movie'];\r\n    const favorites_game = artist_information['Favorite Game'];\r\n    const favorites_game_platform = artist_information['Favorite Game Platform'];\r\n    const favorites_artist = artist_information['Favorite Artist'];\r\n    const favorites_animal = artist_information['Favorite Animal'];\r\n    const favorites_website = artist_information['Favorite Website'];\r\n    const favorites_food = artist_information['Favorite Food'];\r\n\r\n    const contact_information = data.contact_information;\r\n    let contact_result = 'none <br> <br> ';\r\n    // 对一个或多个用户联系方式进行遍历\r\n    if (contact_information) {\r\n        contact_result = '';\r\n        for (const element of contact_information) {\r\n            for (const x in element) {\r\n                switch (x) {\r\n                    case 'title':\r\n                        contact_result += `Title: ${element[x]} <br> `;\r\n                        break;\r\n                    case 'name':\r\n                        contact_result += `Name: ${element[x]} <br> `;\r\n                        break;\r\n                    case 'link':\r\n                        contact_result += `Link: ${element[x]} <br> `;\r\n                        break;\r\n                    default:\r\n                        throw new Error(`Unknown type: ${x}`);\r\n                }\r\n            }\r\n            contact_result += `<br> `;\r\n        }\r\n    }\r\n\r\n    const description = `Name: ${name} <br> Profile: ${profile} <br> Account Type: ${account_type} <br>\r\n    Avatar: ${avatar} <br> Full Name: ${full_name} <br> Artist Type: ${artist_type} <br> User Title: ${user_title} <br>\r\n    Registered Since: ${registered_since} <br> Current Mood: ${current_mood} <br> <br> Artist Profile: <br> ${artist_profile} <br> <br>\r\n    Pageviews: ${pageviews} <br> Submissions: ${submissions} <br> Comments_Received: ${comments_received} <br> Comments Given: ${comments_given} <br>\r\n    Journals: ${journals} <br> Favorite: ${favorite} <br> <br> Artist Information: <br> Species: ${species} <br> Personal Quote: ${personal_quote} <br> Music Type/Genre: ${music_type_genre} <br>\r\n    Favorite Movie: ${favorites_movie} <br> Favorite Game: ${favorites_game} <br> Favorite Game Platform: ${favorites_game_platform} <br> Favorite Artist: ${favorites_artist} <br>\r\n    Favorite Animal: ${favorites_animal} <br> Favorite Website: ${favorites_website} <br> Favorite Food: ${favorites_food} <br> <br> Contact Information: <br> ${contact_result}\r\n    Watchers Count: ${watchers_count} <br> Watching Count: ${watching_count} `;\r\n\r\n    const items: { title: string; link: string; description: string }[] = [\r\n        {\r\n            title: `${data.name}'s User Profile`,\r\n            link: `https://www.furaffinity.net/user/${username}`,\r\n            description,\r\n        },\r\n    ];\r\n\r\n    return {\r\n        title: `Fur Affinity | Userpage of ${data.name}`,\r\n        link: `https://www.furaffinity.net/user/${username}`,\r\n        description: `Fur Affinity User Profile of ${data.name}`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"2KAGA,MAAaA,EAAe,CACxB,KAAM,kBACN,KAAM,WACN,IAAK,kBACL,WAAY,CAAC,gBACb,QAAS,gCACT,YAAa,CAAC,cAAe,cAC7B,WAAY,CAAE,SAAU,kCACxB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,kCACT,OAAQ,oBAGhB,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,YAAa,EAAI,IAAI,QACvB,EAAM,wCAAwC,EAAS,OAEvD,EAAO,MAAMC,EAAO,EAAK,CAC3B,OAAQ,MACR,QAAS,CACL,QAAS,sCAKX,EAAO,EAAK,KACZ,EAAU,EAAK,QACf,EAAe,EAAK,QACpB,EAAS,aAAa,EAAK,OAAO,IAClC,EAAY,EAAK,UACjB,EAAc,EAAK,YACnB,EAAa,EAAK,WAClB,EAAmB,EAAK,iBACxB,EAAe,EAAK,aACpB,EAAiB,EAAK,eACtB,EAAY,EAAK,UACjB,EAAc,EAAK,YACnB,EAAoB,EAAK,kBACzB,EAAiB,EAAK,eACtB,EAAW,EAAK,SAChB,EAAW,EAAK,UAChB,EAAiB,EAAK,SAAS,MAC/B,EAAiB,EAAK,SAAS,MAE/B,EAAqB,EAAK,mBAC1B,EAAU,EAAmB,QAC7B,EAAiB,EAAmB,kBACpC,EAAmB,EAAmB,oBACtC,EAAkB,EAAmB,kBACrC,EAAiB,EAAmB,iBACpC,EAA0B,EAAmB,0BAC7C,EAAmB,EAAmB,mBACtC,EAAmB,EAAmB,mBACtC,EAAoB,EAAmB,oBACvC,EAAiB,EAAmB,iBAEpC,EAAsB,EAAK,oBAC7B,EAAiB,kBAErB,GAAI,EAAqB,CACrB,EAAiB,GACjB,IAAK,IAAM,KAAW,EAAqB,CACvC,IAAK,IAAM,KAAK,EACZ,OAAQ,EAAR,CACI,IAAK,QACD,GAAkB,UAAU,EAAQ,GAAG,QACvC,MACJ,IAAK,OACD,GAAkB,SAAS,EAAQ,GAAG,QACtC,MACJ,IAAK,OACD,GAAkB,SAAS,EAAQ,GAAG,QACtC,MACJ,QACI,MAAU,MAAM,iBAAiB,KAG7C,GAAkB,SAI1B,IAAM,EAAc,SAAS,EAAK,iBAAiB,EAAQ,sBAAsB,EAAa;cACpF,EAAO,mBAAmB,EAAU,qBAAqB,EAAY,oBAAoB,EAAW;wBAC1F,EAAiB,sBAAsB,EAAa,kCAAkC,EAAe;iBAC5G,EAAU,qBAAqB,EAAY,2BAA2B,EAAkB,wBAAwB,EAAe;gBAChI,EAAS,kBAAkB,EAAS,+CAA+C,EAAQ,wBAAwB,EAAe,0BAA0B,EAAiB;sBACvK,EAAgB,uBAAuB,EAAe,gCAAgC,EAAwB,yBAAyB,EAAiB;uBACvJ,EAAiB,0BAA0B,EAAkB,uBAAuB,EAAe,uCAAuC,EAAe;sBAC1J,EAAe,wBAAwB,EAAe,GAElEC,EAAgE,CAClE,CACI,MAAO,GAAG,EAAK,KAAK,iBACpB,KAAM,oCAAoC,IAC1C,gBAIR,MAAO,CACH,MAAO,8BAA8B,EAAK,OAC1C,KAAM,oCAAoC,IAC1C,YAAa,gCAAgC,EAAK,OAClD,KAAM"}