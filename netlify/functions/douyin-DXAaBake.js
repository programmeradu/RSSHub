import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./cache-kimkMTWJ.js";import"./md5-4BNsOP-F.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{config_not_found_default as n}from"./config-not-found-BVqhRP9D.js";import{utils_default as r}from"./utils-2nBXn22a.js";const i={path:`/douyin/:dyid`,categories:[`social-media`],example:`/newrank/douyin/110266463747`,parameters:{dyid:`抖音ID，可在新榜账号详情 URL 中找到`},features:{requireConfig:[{name:`NEWRANK_COOKIE`,description:``}],requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`抖音短视频`,maintainers:[`lessmoe`],handler:a,description:`::: warning
免费版账户抖音每天查询次数 20 次，如需增加次数可购买新榜会员或等待未来多账户支持
:::`};async function a(i){if(!e.newrank||!e.newrank.cookie)throw new n(`newrank RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let a=i.req.param(`dyid`),o=r.random_nonce(9),s=`https://xd.newrank.cn/xdnphb/nr/cloud/douyin/detail/aweme?xyz=`+r.decrypt_douyin_detail_xyz(o)+`&nonce=`+o,c=e.newrank.cookie,l=await t({method:`post`,url:s,headers:{Connection:`keep-alive`,Cookie:c,"Content-Type":`application/json`},data:JSON.stringify({create_time_end:``,create_time_start:``,date_type:``,is_promotion:`0`,is_seed:`0`,keyword:``,size:20,sort:`create_time`,start:1,uid:a})}),u=`https://xd.newrank.cn/xdnphb/nr/cloud/douyin/detail/accountInfoAll?nonce=`+o+`&xyz=`+r.decrypt_douyin_account_xyz(o),d=await t({method:`post`,url:u,headers:{Connection:`keep-alive`,Cookie:c,"Content-Type":`application/json`},data:JSON.stringify({uid:a})}),f=d.data.data.nickname,p=d.data.data.signature,m=r.flatten(l.data.data.list),h=m.map(e=>({title:e.aweme_desc,description:``,link:e.share_url,pubDate:e.create_time}));return{title:f+` - 抖音`,description:p,link:`https://xd.newrank.cn/data/d/account/workList/`+a,item:h}}export{i as route};
//# sourceMappingURL=douyin-DXAaBake.js.map