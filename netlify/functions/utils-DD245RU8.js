import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{timezone as n}from"./timezone-BrNu6iXe.js";import{load as r}from"cheerio";const i=`https://misskon.com/wp-json/wp/v2`,a=async a=>{let o=new URL(`${i}/posts?${a}`);o.searchParams.append(`_embed`,`wp:term`);let s=await t(o.href);return s.map(t=>{let i=r(t.content.rendered);return i(`input`).each(function(){i(this).replaceWith(i(this).attr(`value`)||``)}),i(`script`).remove(),{title:t.title.rendered,link:t.link,description:i.html(),pubDate:n(e(t.date_gmt),0),category:t._embedded[`wp:term`].flat().filter(e=>e.taxonomy===`post_tag`).map(e=>e.name)}})},o=async e=>{let n=await t(`${i}/tags?slug=${e}`);if(n.length===0)throw Error(`Invalid tag slug: ${e}`);return{id:n[0].id,name:n[0].name,link:n[0].link,description:n[0].description}};export{i as ENDPOINT,a as getPosts,o as getTags};
//# sourceMappingURL=utils-DD245RU8.js.map