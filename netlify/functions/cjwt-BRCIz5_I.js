import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import o from"node:path";t();const s={path:`/caac/cjwt/:category?`,categories:[`government`],example:`/gov/caac/cjwt`,parameters:{category:`分类，见下表，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`caac.gov.cn/HDJL/`],target:`/caac/cjwt`}],name:`公众留言`,maintainers:[`nczitzk`],handler:c,url:`caac.gov.cn/HDJL/`,description:`| 机票 | 托运 | 无人机 | 体检 | 行政审批 | 投诉 |
| ---- | ---- | ------ | ---- | -------- | ---- |`};async function c(t){let{category:s=``}=t.req.param(),c=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):30,l=`https://www.caac.gov.cn`,u=new URL(`caacgov/jsonp/messageBoard/visit/get${s?`CJWT`:``}List`,l).href,d=new URL(`HDJL/`,l).href,{data:f}=await i(u,{searchParams:{callbackparam:`jsonp_messageBoard_getList`,infoMess:s,pageIndex:1}}),p=JSON.parse(f.match(/jsonp_messageBoard_getList\((.*?)\)$/)[1]).returnData.root.slice(0,c).map(t=>({title:t.infoMess.replaceAll(/<\/?em>/g,``),link:new URL(`index_180.html?info=${t.id}&type=id`,l).href,description:n(o.join(e,`templates/description-e41470de.art`),{item:t}),author:`${t.gname}/${t.feedbackName}`,category:[t.messageType],guid:`caac-cjwt#${t.id}`,pubDate:a(r(t.createDate),8),updated:a(r(t.feedbackDate),8)})),m=`中国民用航空局`,h=new URL(`images/Logo2.png`,l).href,g=new URL(`images/weixinLogo.jpg`,l).href,_=`公众留言`;return{item:p,title:[m,_,s].filter(Boolean).join(` - `),link:d,description:`向公众提供服务和开展互动交流`,language:`zh`,image:h,icon:g,logo:g,subtitle:_,author:m,allowEmpty:!0}}export{s as route};
//# sourceMappingURL=cjwt-BRCIz5_I.js.map