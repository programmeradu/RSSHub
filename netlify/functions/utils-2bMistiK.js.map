{"version":3,"file":"utils-2bMistiK.js","names":["box","pwd","res: string[]","ofetch","acw_sc__v2","item"],"sources":["../../lib/routes/5eplay/utils.ts","../../lib/routes/segmentfault/utils.ts"],"sourcesContent":["const getAcwScV2ByArg1 = (arg1) => {\r\n    const pwd = '3000176000856006061501533003690027800375';\r\n    const hexXor = function (box, pwd) {\r\n        let res = '';\r\n        for (let i = 0x0; i < box.length && i < pwd.length; i += 2) {\r\n            const tmp1 = Number.parseInt(box.slice(i, i + 2), 16);\r\n            const tmp2 = Number.parseInt(pwd.slice(i, i + 2), 16);\r\n            let tmp = (tmp1 ^ tmp2).toString(16);\r\n            if (tmp.length === 1) {\r\n                tmp = '0' + tmp;\r\n            }\r\n            res += tmp;\r\n        }\r\n        return res;\r\n    };\r\n    const unsbox = function (str: string) {\r\n        const code = [15, 35, 29, 24, 33, 16, 1, 38, 10, 9, 19, 31, 40, 27, 22, 23, 25, 13, 6, 11, 39, 18, 20, 8, 14, 21, 32, 26, 2, 30, 7, 4, 17, 5, 3, 28, 34, 37, 12, 36];\r\n        const res: string[] = [];\r\n        // eslint-disable-next-line unicorn/no-for-loop\r\n        for (let i = 0; i < str.length; i++) {\r\n            const cur = str[i];\r\n            for (const [j, element] of code.entries()) {\r\n                if (element === i + 1) {\r\n                    res[j] = cur;\r\n                }\r\n            }\r\n        }\r\n        return res.join('');\r\n    };\r\n    const box = unsbox(arg1);\r\n    return hexXor(box, pwd);\r\n};\r\n\r\nexport { getAcwScV2ByArg1 };\r\n","import ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { config } from '@/config';\r\nimport { getAcwScV2ByArg1 } from '../5eplay/utils';\r\n\r\nconst host = 'https://segmentfault.com';\r\n\r\nconst acw_sc__v2 = (link, tryGet) =>\r\n    tryGet(\r\n        'segmentfault:acw_sc__v2',\r\n        async () => {\r\n            const response = await ofetch(link);\r\n\r\n            let acw_sc__v2 = '';\r\n            const matches = response.match(/var arg1='(.*?)';/);\r\n            if (matches) {\r\n                acw_sc__v2 = getAcwScV2ByArg1(matches[1]);\r\n            }\r\n            return acw_sc__v2;\r\n        },\r\n        config.cache.routeExpire,\r\n        false\r\n    );\r\n\r\nconst parseList = (data) =>\r\n    data.map((item) => ({\r\n        title: item.title,\r\n        link: new URL(item.url, host).href,\r\n        author: item.user.name,\r\n        pubDate: parseDate(item.created || item.modified, 'X'),\r\n        description: item.excerpt,\r\n    }));\r\n\r\nconst parseItems = (cookie, item, tryGet) =>\r\n    tryGet(item.link, async () => {\r\n        let response;\r\n        try {\r\n            response = await ofetch(item.link, {\r\n                headers: {\r\n                    cookie: `acw_sc__v2=${cookie};`,\r\n                },\r\n            });\r\n            const content = load(response);\r\n\r\n            item.description = content('article').html();\r\n            item.category = content('.badge-tag')\r\n                .toArray()\r\n                .map((item) => content(item).text());\r\n        } catch {\r\n            // ignore\r\n        }\r\n\r\n        return item;\r\n    });\r\n\r\nexport { host, acw_sc__v2, parseList, parseItems };\r\n"],"mappings":"wLAAA,MAAM,EAAoB,GAAS,CAC/B,IACM,EAAS,SAAU,EAAK,EAAK,CAC/B,IAAI,EAAM,GACV,IAAK,IAAI,EAAI,EAAK,EAAIA,EAAI,QAAU,EAAIC,EAAI,OAAQ,GAAK,EAAG,CACxD,IAAM,EAAO,OAAO,SAASD,EAAI,MAAM,EAAG,EAAI,GAAI,IAC5C,EAAO,OAAO,SAASC,EAAI,MAAM,EAAG,EAAI,GAAI,IAC9C,GAAO,EAAO,GAAM,SAAS,IAC7B,EAAI,SAAW,IACf,EAAM,IAAM,GAEhB,GAAO,EAEX,OAAO,GAEL,EAAS,SAAU,EAAa,CAClC,IAAM,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3JC,EAAgB,GAEtB,IAAK,IAAI,EAAI,EAAG,EAAI,EAAI,OAAQ,IAAK,CACjC,IAAM,EAAM,EAAI,GAChB,IAAK,GAAM,CAAC,EAAG,KAAY,EAAK,UACxB,IAAY,EAAI,IAChB,EAAI,GAAK,GAIrB,OAAO,EAAI,KAAK,KAEd,EAAM,EAAO,GACnB,OAAO,EAAO,EAAK,6CCxBjB,EAAO,2BAEP,GAAc,EAAM,IACtB,EACI,0BACA,SAAY,CACR,IAAM,EAAW,MAAMC,EAAO,GAE1BC,EAAa,GACX,EAAU,EAAS,MAAM,qBAI/B,OAHI,IACA,EAAa,EAAiB,EAAQ,KAEnCA,GAEX,EAAO,MAAM,YACb,IAGF,EAAa,GACf,EAAK,IAAK,IAAU,CAChB,MAAO,EAAK,MACZ,KAAM,IAAI,IAAI,EAAK,IAAK,GAAM,KAC9B,OAAQ,EAAK,KAAK,KAClB,QAAS,EAAU,EAAK,SAAW,EAAK,SAAU,KAClD,YAAa,EAAK,WAGpB,GAAc,EAAQ,EAAM,IAC9B,EAAO,EAAK,KAAM,SAAY,CAC1B,IAAI,EACJ,GAAI,CACA,EAAW,MAAMD,EAAO,EAAK,KAAM,CAC/B,QAAS,CACL,OAAQ,cAAc,EAAO,MAGrC,IAAM,EAAU,EAAK,GAErB,EAAK,YAAc,EAAQ,WAAW,OACtC,EAAK,SAAW,EAAQ,cACnB,UACA,IAAK,GAAS,EAAQE,GAAM,aAC7B,EAIR,OAAO"}