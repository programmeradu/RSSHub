{"version":3,"file":"forklog-DCwAZkSo.js","names":["route: Route","got"],"sources":["../../lib/routes/forklog/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport got from '@/utils/got';\r\nimport timezone from '@/utils/timezone';\r\n\r\nexport const route: Route = {\r\n    path: '/news',\r\n    categories: ['finance'],\r\n    example: '/forklog/news',\r\n    radar: [\r\n        {\r\n            source: ['forklog.com/news'],\r\n            target: '/news',\r\n        },\r\n    ],\r\n    name: 'Новости',\r\n    maintainers: ['raven428'],\r\n    handler,\r\n    url: 'forklog.com/news',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await got('https://forklog.com/wp-content/themes/forklogv2/ajax/getPosts.php', {\r\n        method: 'POST',\r\n        headers: { 'x-requested-with': 'XMLHttpRequest' },\r\n        form: { action: 'getPostsByCategory', postperpage: '333' },\r\n    });\r\n    const items = JSON.parse(response.body).map((post) => {\r\n        const link = post.link;\r\n        const title = (post.title || post.text?.post_title)?.trim();\r\n        const description = post.text?.post_content.trim();\r\n        const author = post.author_name.trim();\r\n        let pubDate;\r\n        if (post.text?.post_date_gmt) {\r\n            pubDate = timezone(parseDate(post.text.post_date_gmt), +1);\r\n        } else if (post.text?.post_date) {\r\n            pubDate = timezone(parseDate(post.text.post_date), +4);\r\n        } else if (post.date) {\r\n            pubDate = timezone(parseDate(post.date, 'DD.MM.YYYY HH:mm'), +4);\r\n        }\r\n        const imageSrc = post.image || post.image_mobile;\r\n        const views = post.views;\r\n        return {\r\n            link,\r\n            title,\r\n            author,\r\n            pubDate,\r\n            description,\r\n            category: ['news', 'crypto', 'finance'],\r\n            ...(imageSrc\r\n                ? {\r\n                      media: {\r\n                          thumbnail: {\r\n                              url: imageSrc,\r\n                              width: 250,\r\n                              height: 250,\r\n                          },\r\n                      },\r\n                  }\r\n                : {}),\r\n            extra: {\r\n                views,\r\n            },\r\n        };\r\n    });\r\n    return {\r\n        title: 'Forklog – Новости',\r\n        link: 'https://forklog.com/news',\r\n        description: 'Последние новости из мира блокчейна и криптовалют',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"uUAKA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,WACb,QAAS,gBACT,MAAO,CACH,CACI,OAAQ,CAAC,oBACT,OAAQ,UAGhB,KAAM,UACN,YAAa,CAAC,YACd,UACA,IAAK,oBAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAMC,EAAI,oEAAqE,CAC5F,OAAQ,OACR,QAAS,CAAE,mBAAoB,kBAC/B,KAAM,CAAE,OAAQ,qBAAsB,YAAa,SAEjD,EAAQ,KAAK,MAAM,EAAS,MAAM,IAAK,GAAS,CAClD,IAAM,EAAO,EAAK,KACZ,GAAS,EAAK,OAAS,EAAK,MAAM,aAAa,OAC/C,EAAc,EAAK,MAAM,aAAa,OACtC,EAAS,EAAK,YAAY,OAC5B,EACA,EAAK,MAAM,cACX,EAAU,EAAS,EAAU,EAAK,KAAK,eAAgB,GAChD,EAAK,MAAM,UAClB,EAAU,EAAS,EAAU,EAAK,KAAK,WAAY,GAC5C,EAAK,OACZ,EAAU,EAAS,EAAU,EAAK,KAAM,oBAAqB,IAEjE,IAAM,EAAW,EAAK,OAAS,EAAK,aAC9B,EAAQ,EAAK,MACnB,MAAO,CACH,OACA,QACA,SACA,UACA,cACA,SAAU,CAAC,OAAQ,SAAU,WAC7B,GAAI,EACE,CACI,MAAO,CACH,UAAW,CACP,IAAK,EACL,MAAO,IACP,OAAQ,OAIpB,GACN,MAAO,CACH,YAIZ,MAAO,CACH,MAAO,oBACP,KAAM,2BACN,YAAa,oDACb,KAAM"}