import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseRelativeDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import{load as i}from"cheerio";import a from"p-map";const o={path:`/default`,categories:[`bbs`],example:`/guozaoke/default`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`过早客`,maintainers:[`xiaoshame`],handler:s,url:`guozaoke.com/`};async function s(){let o=`https://www.guozaoke.com/`,s=await r({method:`get`,url:o,headers:{Cookie:e.guozaoke.cookies,"User-Agent":e.ua}}),c=i(s.data),l=c(`div.topic-item`).toArray(),u=l.slice(0,20).map(e=>{let t=c(e),r=t.find(`h3.title a`).text(),i=t.find(`h3.title a`).attr(`href`),a=t.find(`span.username a`).text(),o=t.find(`span.last-touched`).text(),s=n(o),l=i?i.split(`#`)[0]:void 0;return l?{title:r,link:l,author:a,pubDate:s}:void 0}).filter(e=>e!==void 0),d=await a(u,n=>t.tryGet(n.link,async()=>{let t=`https://www.guozaoke.com${n.link}`,a=await r({method:`get`,url:t,headers:{Cookie:e.guozaoke.cookies}}),o=i(a.data),s=o(`div.ui-content`).html();s=s?s.trim():``;let c=o(`.reply-item`).map((e,t)=>{let n=o(t),r=n.find(`span.content`).text().trim(),i=n.find(`span.username`).text();return{comment:r,author:i}});if(c&&c.length>0)for(let e of c)s+=`<br>`+e.author+`: `+e.comment;return n.description=s,n}),{concurrency:2});return{title:`过早客`,link:o,item:d}}export{o as route};
//# sourceMappingURL=guozaoke-DaKHVkph.js.map