import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{config_not_found_default as r}from"./config-not-found-BVqhRP9D.js";import{load as i}from"cheerio";const a={403:`720P`,404:`1080P`,405:`BDMV`,4130:`4K`,5815:`AV1`},o=e=>{let t=[],n=[],r=[];for(let i in e)t.push(e[i]),n.push(`:--:`),r.push(i);return[t.join(` | `),n.join(` | `),r.join(` | `)].map(e=>`| ${e} |`).join(`
`)},s=async a=>{let{type:o}=a.req.param(),s=e.tsdm39.cookie;if(!s)throw new r(`缺少 TSDM39 用户登录后的 Cookie 值 <a href="https://docs.rsshub.app/zh/deploy/config#route-specific-configurations">TSDM 相关路由</a>`);let c=await n(`https://www.tsdm39.com/forum.php?mod=forumdisplay&fid=85${o?`&filter=typeid&typeid=${o}`:``}`,{headers:{Cookie:s}}),l=i(c),u=l(`tbody.tsdm_normalthread`).toArray().map(e=>{let n=i(e),r=n(`a.xst`).text(),a=n(`span.xw1`).last().text(),o=n(`a.xst`).attr(`href`),s=n(`td.by em`).first().text().trim();return{title:r,description:`价格：${a}`,link:o,pubDate:t(s)}});return{title:`天使动漫论坛 - BD`,link:`https://www.tsdm39.com/forum.php?mod=forumdisplay&fid=85`,language:`zh-Hans`,item:u}},c={path:`/bd/:type?`,name:`BD`,categories:[`anime`],maintainers:[`equt`],example:`/tsdm39/bd`,parameters:{type:`BD type, checkout the table below for details`},features:{requireConfig:[{name:`TSDM39_COOKIES`,optional:!1,description:"天使动漫论坛登陆后的 cookie 值，可在浏览器控制台通过 `document.cookie` 获取。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},handler:s,description:[a].map(e=>o(e)).join(`

`)};export{c as route};
//# sourceMappingURL=bd-Ci1xDGY9.js.map