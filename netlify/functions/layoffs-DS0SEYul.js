import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i=`https://airtable.com/embed/shrqYt5kSqMzHV9R5/tbl8c8kanuNB6bPYr`,a=function(e){let t=new Map,n=new Map;for(let r in e)`name`in e[r]&&`id`in e[r]&&(n.set(e[r].name,e[r].id),t.set(e[r].id,e[r].name));return[t,n]},o={path:`/`,radar:[{source:[`layoffs.fyi/`],target:``}],name:`Unknown`,maintainers:[`BrandNewLifeJackie26`],handler:s,url:`layoffs.fyi/`};async function s(){let o={"x-airtable-application-id":`app1PaujS9zxVGUZ4`,"x-airtable-inter-service-client":`webClient`,"x-requested-with":`XMLHttpRequest`,"x-time-zone":`America/Los_Angeles`},s=await e.get(i),c=!1,l;if(s)try{l=await n({method:`get`,url:s,headers:o}),l.statusCode>=400&&(c=!0)}catch{c=!0}else c=!0;if(c){let t=await n({method:`get`,url:i}),a=r(t.data);s=`https://airtable.com`+a(`script`).text().match(/urlWithParams: "(.*?)"/)[1].replaceAll(String.raw`\u002F`,`/`),e.set(i,s),l=await n({method:`get`,url:s,headers:o})}let u=l.data.data,d=u.table,f=a(d.columns)[1],p=f.get(`Company`),m=f.get(`Date Added`),h=f.get(`# Laid Off`),g=f.get(`Source`),_=f.get(`Country`),v=a(d.columns.find(e=>e.name===`Country`).typeOptions.choices)[0],y=d.rows.slice(0,100);return{title:`Tech layoff data feed from layoffs.fyi`,link:`https://layoffs.fyi`,description:`This feed gets tech layoff data from layoffs.fyi and display them in a user friendly way`,item:y.map(e=>{let n=e.cellValuesByColumnId,r=n[p],i=t(n[m]),a=n[g],o=n[h]||`some`,s=v.get(n[_]),c=`${r} Layoffs Happening!`,l=`${r} lays off ${o} employees in ${s}. For more details, please visit ${a}.`;return{title:c,description:l,pubDate:i,link:a}})}}export{o as route};
//# sourceMappingURL=layoffs-DS0SEYul.js.map