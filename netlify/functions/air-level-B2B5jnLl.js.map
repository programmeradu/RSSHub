{"version":3,"file":"air-level-B2B5jnLl.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/air-level/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch'; // 统一使用的请求库\r\nimport { load } from 'cheerio'; // 类似 jQuery 的 API HTML 解析器\r\n\r\nexport const route: Route = {\r\n    path: '/air/:area',\r\n    radar: [\r\n        {\r\n            source: ['m.air-level.com/air/:area/'],\r\n            target: '/air/:area',\r\n        },\r\n    ],\r\n    parameters: {\r\n        area: '地区',\r\n    },\r\n    name: '空气质量',\r\n    maintainers: ['lifetraveler'],\r\n    example: '/air-level/air/xian',\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const area = ctx.req.param('area');\r\n    const currentUrl = `https://m.air-level.com/air/${area}`;\r\n    const response = await ofetch(currentUrl);\r\n    const $ = load(response);\r\n\r\n    const title = $('body > div.container > div.row.page > div:nth-child(1) > h2').text().replaceAll('[]', '');\r\n\r\n    const table = $('body > div.container > div.row.page > div:nth-child(1) > div:nth-child(3) > table');\r\n\r\n    const qt = $('body > div.container > div.row.page > div:nth-child(1) > div.aqi-dv > div > span.aqi-bg.aqi-level-2').text();\r\n    const pubtime = $('body > div.container > div.row.page > div:nth-child(1) > div.aqi-dv > div > span.label.label-info').text();\r\n\r\n    const items = [\r\n        {\r\n            title: title + ' ' + qt + ' ' + pubtime,\r\n            link: currentUrl,\r\n            description: `<table border=\"1 solid black\">${table.html()}</table>`,\r\n            guid: pubtime,\r\n        },\r\n    ];\r\n    return {\r\n        title,\r\n        item: items,\r\n        description: '订阅每个城市的天气质量',\r\n        link: currentUrl,\r\n    };\r\n}\r\n"],"mappings":"0MAIA,MAAaA,EAAe,CACxB,KAAM,aACN,MAAO,CACH,CACI,OAAQ,CAAC,8BACT,OAAQ,eAGhB,WAAY,CACR,KAAM,MAEV,KAAM,OACN,YAAa,CAAC,gBACd,QAAS,sBACT,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAa,+BAA+B,IAC5C,EAAW,MAAMC,EAAO,GACxB,EAAI,EAAK,GAET,EAAQ,EAAE,+DAA+D,OAAO,WAAW,KAAM,IAEjG,EAAQ,EAAE,qFAEV,EAAK,EAAE,uGAAuG,OAC9G,EAAU,EAAE,qGAAqG,OAEjH,EAAQ,CACV,CACI,MAAO,EAAQ,IAAM,EAAK,IAAM,EAChC,KAAM,EACN,YAAa,iCAAiC,EAAM,OAAO,UAC3D,KAAM,IAGd,MAAO,CACH,QACA,KAAM,EACN,YAAa,cACb,KAAM"}