{"version":3,"file":"pins-C_7h0ieI.js","names":["route: Route","ofetch","title"],"sources":["../../lib/routes/juejin/pins.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/pins/:type?',\r\n    categories: ['programming'],\r\n    example: '/juejin/pins/6824710202487472141',\r\n    parameters: { type: '默认为 recommend，见下表' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '沸点',\r\n    maintainers: ['xyqfer', 'laampui'],\r\n    handler,\r\n    description: `| 推荐      | 热门 | 上班摸鱼            | 内推招聘            | 一图胜千言          | 今天学到了          | 每天一道算法题      | 开发工具推荐        | 树洞一下            |\r\n| --------- | ---- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- |\r\n| recommend | hot  | 6824710203301167112 | 6819970850532360206 | 6824710202487472141 | 6824710202562969614 | 6824710202378436621 | 6824710202000932877 | 6824710203112423437 |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type') ?? 'recommend';\r\n    const title = {\r\n        recommend: '推荐',\r\n        hot: '热门',\r\n        '6824710203301167112': '上班摸鱼',\r\n        '6819970850532360206': '内推招聘',\r\n        '6824710202487472141': '一图胜千言',\r\n        '6824710202562969614': '今天学到了',\r\n        '6824710202378436621': '每天一道算法题',\r\n        '6824710202000932877': '开发工具推荐',\r\n        '6824710203112423437': '树洞一下',\r\n    };\r\n\r\n    let url = '';\r\n    let json = {};\r\n    if (/^\\d+$/.test(type)) {\r\n        url = `https://api.juejin.cn/recommend_api/v1/short_msg/topic`;\r\n        json = { id_type: 4, sort_type: 500, cursor: '0', limit: 20, topic_id: type };\r\n    } else {\r\n        url = `https://api.juejin.cn/recommend_api/v1/short_msg/${type}`;\r\n        json = { id_type: 4, sort_type: 200, cursor: '0', limit: 20 };\r\n    }\r\n\r\n    const response = await ofetch(url, {\r\n        method: 'POST',\r\n        body: json,\r\n    });\r\n\r\n    const items = response.data.data.map((item) => {\r\n        const content = item.msg_Info.content;\r\n        const title = content;\r\n        const guid = item.msg_id;\r\n        const link = `https://juejin.cn/pin/${guid}`;\r\n        const pubDate = parseDate(item.msg_Info.ctime * 1000);\r\n        const author = item.author_user_info.user_name;\r\n        let imgs = '';\r\n        for (const img of item.msg_Info.pic_list) {\r\n            imgs += `<img src=\"${img}\"><br>`;\r\n        }\r\n        const description = `\r\n            ${content.replaceAll('\\n', '<br>')}<br>\r\n            ${imgs}<br>\r\n        `;\r\n\r\n        return {\r\n            title,\r\n            link,\r\n            description,\r\n            guid,\r\n            pubDate,\r\n            author,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `沸点 - ${title[type]}`,\r\n        link: 'https://juejin.cn/pins/recommended',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gOAIA,MAAaA,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,eACb,QAAS,mCACT,WAAY,CAAE,KAAM,qBACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,SAAU,WACxB,UACA,YAAa;;iLAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,YAChC,EAAQ,CACV,UAAW,KACX,IAAK,KACL,sBAAuB,OACvB,sBAAuB,OACvB,sBAAuB,QACvB,sBAAuB,QACvB,sBAAuB,UACvB,sBAAuB,SACvB,sBAAuB,QAGvB,EAAM,GACN,EAAO,GACP,QAAQ,KAAK,IACb,EAAM,yDACN,EAAO,CAAE,QAAS,EAAG,UAAW,IAAK,OAAQ,IAAK,MAAO,GAAI,SAAU,KAEvE,EAAM,oDAAoD,IAC1D,EAAO,CAAE,QAAS,EAAG,UAAW,IAAK,OAAQ,IAAK,MAAO,KAG7D,IAAM,EAAW,MAAMC,EAAO,EAAK,CAC/B,OAAQ,OACR,KAAM,IAGJ,EAAQ,EAAS,KAAK,KAAK,IAAK,GAAS,CAC3C,IAAM,EAAU,EAAK,SAAS,QACxBC,EAAQ,EACR,EAAO,EAAK,OACZ,EAAO,yBAAyB,IAChC,EAAU,EAAU,EAAK,SAAS,MAAQ,KAC1C,EAAS,EAAK,iBAAiB,UACjC,EAAO,GACX,IAAK,IAAM,KAAO,EAAK,SAAS,SAC5B,GAAQ,aAAa,EAAI,QAE7B,IAAM,EAAc;cACd,EAAQ,WAAW;EAAM,QAAQ;cACjC,EAAK;UAGX,MAAO,CACH,MAAA,EACA,OACA,cACA,OACA,UACA,YAIR,MAAO,CACH,MAAO,QAAQ,EAAM,KACrB,KAAM,qCACN,KAAM"}