import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./cache-kimkMTWJ.js";import"./parse-date-Bgabdhlb.js";import{ofetch_default as e}from"./ofetch-Bzt0BXUH.js";import"./timezone-BrNu6iXe.js";import{ViewType as t}from"./types-A5bA50Mg.js";import{invalid_parameter_default as n}from"./invalid-parameter-CUJdROXf.js";import{processItems as r,rootUrl as i}from"./util-BXYGn3zC.js";import{load as a}from"cheerio";const o={questions:`101`,answers:`201`},s=async t=>{let{id:s,type:c=`questions`}=t.req.param();if(c&&c!==`answers`&&c!==`questions`)throw new n("请填入合法的类型 id，可选值为 `questions` 即 `主题` 或 `answer` 即 `回复`，默认为空，即全部");let l=Number.parseInt(t.req.query(`limit`)??`30`,10),u=new URL(`/people/${s}`,i).href,d=await e(u),f=a(d),p=f(`html`).prop(`lang`)??`zh`,m=d.match(/var\sPEOPLE_USER_ID\s=\s'(\d+)';/)?.[1];if(!m)throw new n(`请填入合法的用户 id，参见用户排名 https://www.jisilu.cn/users/`);let h=new URL(`people/ajax/user_actions/uid-${m}__actions-${o[c]}__page-1`,i).href,g=await e(h),_=a(g),v=await r(_,_(`*`),l),y=f(`meta[name="keywords"]`).prop(`content`).split(/,/)[0],b=f(`div.aw-logo img`).prop(`src`);return{title:`${f(`title`).text()}${c?` - ${f(`div#${c} h3`).text()}`:``}`,description:f(`meta[name="description"]`).prop(`content`),link:u,item:v,allowEmpty:!0,image:b,author:y,language:p,id:u}},c={path:`/people/:id/:type?`,name:`用户`,url:`www.jisilu.cn`,maintainers:[`nczitzk`],handler:s,example:`/jisilu/people/天书`,parameters:{id:`用户 id，可在对应用户页 URL 中找到`,type:"类型，可选值为 `questions` 即 `主题` 或 `answer` 即 `回复`，默认为 `questions` 即 `主题`"},description:"::: tip\n若订阅 [天书的主题](https://www.jisilu.cn/people/天书)，网址为 `https://www.jisilu.cn/people/天书`，请截取 `https://www.jisilu.cn/people/` 到末尾的部分 `天书` 作为 `id` 参数填入，此时目标路由为 [`/jisilu/people/天书`](https://rsshub.app/jisilu/people/天书)。\n:::\n\n::: tip\n前往 [用户排名](https://www.jisilu.cn/users/) 查看更多用户。\n:::\n",categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.jisilu.cn/people/:id`],target:`/people/:id`}],view:t.Articles};export{s as handler,c as route};
//# sourceMappingURL=people-CoKlRxnV.js.map