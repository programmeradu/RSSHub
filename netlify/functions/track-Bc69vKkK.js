import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./proxy-D7ccvALx.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{puppeteer_default as t}from"./puppeteer-f0D6AISB.js";import{load as n}from"cheerio";const r={path:`/track/:trackingNumber`,categories:[`other`],example:`/ups/track/1Z78R6790470567520`,parameters:{trackingNumber:`The UPS tracking number (e.g., 1Z78R6790470567520).`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Tracking`,maintainers:[`Aquabet`],handler:i};async function i(r){let{trackingNumber:i}=r.req.param(),a=`https://www.ups.com/track?loc=en_US&tracknum=${i}`,o=await t(),s=await o.newPage();await s.setRequestInterception(!0),s.on(`request`,e=>{[`image`,`stylesheet`,`font`,`ping`,`fetch`].includes(e.resourceType())?e.abort():e.continue()}),await s.goto(a,{waitUntil:`domcontentloaded`});let c=`#st_App_View_Details`;try{await s.waitForSelector(c),await s.click(c)}catch{return{title:`UPS Tracking - ${i}`,link:a,item:[]}}await s.waitForSelector(`tr[id^="stApp_activitydetails_row"]`);let l=await s.content();await o.close();let u=n(l),d=u(`tr[id^="stApp_activitydetails_row"]`),f=d.toArray().map((t,n)=>{let r=u(t).find(`#stApp_activitiesdateTime${n}`).text()||`Not Provided`,o=r.trim().replace(/(\d{1,}\/\d{1,}\/\d{4})(\d{1,}:\d{1,}\s[AP]\.?M\.?)/,`$1 $2`).replaceAll(`P.M.`,`PM`).replaceAll(`A.M.`,`AM`),s=e(o),c=u(t).find(`#stApp_milestoneActivityLocation${n}`).text().trim().replaceAll(/\s*\n+\s*/g,`
`),l=c.split(`
`).map(e=>e.trim()).filter(Boolean),d=l[0],f=l.at(-1)||``,p={title:d,link:a,guid:`${i}-${n}`,description:`
                Status: ${d} <br>
                Location: ${f} <br>
                Date and Time: ${o}
            `,pubDate:s};return p});return{title:`UPS Tracking - ${i}`,link:a,item:f}}export{r as route};
//# sourceMappingURL=track-Bc69vKkK.js.map