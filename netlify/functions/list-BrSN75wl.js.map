{"version":3,"file":"list-BrSN75wl.js","names":["route: Route","got","utils"],"sources":["../../lib/routes/thepaper/list.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport utils from './utils';\r\nimport { load } from 'cheerio';\r\nimport got from '@/utils/got';\r\n\r\nexport const route: Route = {\r\n    path: '/list/:id',\r\n    categories: ['new-media'],\r\n    example: '/thepaper/list/25457',\r\n    parameters: { id: '栏目 id，可在栏目页 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '栏目',\r\n    maintainers: ['nczitzk', 'bigfei'],\r\n    handler,\r\n    description: `| 栏目 ID | 栏目名       |\r\n| ------- | ------------ |\r\n| 26912   | 上直播       |\r\n| 26913   | 七环视频     |\r\n| 26965   | 温度计       |\r\n| 26908   | 一级视场     |\r\n| 27260   | World 湃     |\r\n| 26907   | 湃客科技     |\r\n| 33168   | 纪录湃       |\r\n| 26911   | 围观         |\r\n| 26918   | @所有人      |\r\n| 26906   | 大都会       |\r\n| 26909   | 追光灯       |\r\n| 26910   | 运动装       |\r\n| 26914   | 健寻记       |\r\n| 82188   | AI 播报      |\r\n| 89035   | 眼界         |\r\n| 92278   | 关键帧       |\r\n| 90069   | 战疫         |\r\n| 25462   | 中国政库     |\r\n| 25488   | 中南海       |\r\n| 97924   | 初心之路     |\r\n| 25489   | 舆论场       |\r\n| 25490   | 打虎记       |\r\n| 25423   | 人事风向     |\r\n| 25426   | 法治中国     |\r\n| 25424   | 一号专案     |\r\n| 25463   | 港台来信     |\r\n| 25491   | 长三角政商   |\r\n| 25428   | 直击现场     |\r\n| 68750   | 公益湃       |\r\n| 27604   | 暖闻         |\r\n| 25464   | 澎湃质量报告 |\r\n| 25425   | 绿政公署     |\r\n| 25429   | 澎湃国际     |\r\n| 25481   | 外交学人     |\r\n| 25430   | 澎湃防务     |\r\n| 25678   | 唐人街       |\r\n| 25427   | 澎湃人物     |\r\n| 25422   | 浦江头条     |\r\n| 25487   | 教育家       |\r\n| 25634   | 全景现场     |\r\n| 25635   | 美数课       |\r\n| 25600   | 快看         |\r\n| 25434   | 10% 公司     |\r\n| 25436   | 能见度       |\r\n| 25433   | 地产界       |\r\n| 25438   | 财经上下游   |\r\n| 25435   | 金改实验室   |\r\n| 25437   | 牛市点线面   |\r\n| 119963  | IPO 最前线   |\r\n| 25485   | 澎湃商学院   |\r\n| 25432   | 自贸区连线   |\r\n| 37978   | 进博会在线   |\r\n| 36079   | 湃客         |\r\n| 27392   | 政务         |\r\n| 77286   | 媒体         |\r\n| 27234   | 科学湃       |\r\n| 119445  | 生命科学     |\r\n| 119447  | 未来 2%      |\r\n| 119446  | 元宇宙观察   |\r\n| 119448  | 科创 101     |\r\n| 119449  | 科学城邦     |\r\n| 25444   | 社论         |\r\n| 27224   | 澎湃评论     |\r\n| 26525   | 思想湃       |\r\n| 26878   | 上海书评     |\r\n| 25483   | 思想市场     |\r\n| 25457   | 私家历史     |\r\n| 25574   | 翻书党       |\r\n| 25455   | 艺术评论     |\r\n| 26937   | 古代艺术     |\r\n| 25450   | 文化课       |\r\n| 25482   | 逝者         |\r\n| 25536   | 专栏         |\r\n| 26506   | 异次元       |\r\n| 97313   | 海平面       |\r\n| 103076  | 一问三知     |\r\n| 25445   | 澎湃研究所   |\r\n| 25446   | 全球智库     |\r\n| 26915   | 城市漫步     |\r\n| 25456   | 市政厅       |\r\n| 104191  | 世界会客厅   |\r\n| 25448   | 有戏         |\r\n| 26609   | 文艺范       |\r\n| 25942   | 身体         |\r\n| 26015   | 私・奔       |\r\n| 25599   | 运动家       |\r\n| 25842   | 私家地理     |\r\n| 80623   | 非常品       |\r\n| 26862   | 楼市         |\r\n| 25769   | 生活方式     |\r\n| 25990   | 澎湃联播     |\r\n| 26173   | 视界         |\r\n| 26202   | 亲子学堂     |\r\n| 26404   | 赢家         |\r\n| 26490   | 汽车圈       |\r\n| 115327  | IP SH        |\r\n| 117340  | 酒业         |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n    const list_url = `https://m.thepaper.cn/list/${id}`;\r\n    const list_url_resp = await got(list_url);\r\n    const list_url_data = JSON.parse(load(list_url_resp.data)('#__NEXT_DATA__').html());\r\n\r\n    const resp = await got.post('https://api.thepaper.cn/contentapi/nodeCont/getByNodeIdPortal', {\r\n        json: {\r\n            nodeId: id,\r\n        },\r\n    });\r\n    const pagePropsData = resp.data.data;\r\n    const list = pagePropsData.list;\r\n\r\n    const items = await Promise.all(list.map((item) => utils.ProcessItem(item, ctx)));\r\n    return {\r\n        title: `澎湃新闻栏目 - ${utils.ListIdToName(id, list_url_data)}`,\r\n        link: list_url,\r\n        item: items,\r\n        itunes_author: '澎湃新闻',\r\n        image: pagePropsData.nodeInfo?.pic ?? utils.ExtractLogo(list_url_resp),\r\n    };\r\n}\r\n"],"mappings":"6YAKA,MAAaA,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,aACb,QAAS,uBACT,WAAY,CAAE,GAAI,uBAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,UAAW,UACzB,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAqGjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MACnB,EAAW,8BAA8B,IACzC,EAAgB,MAAMC,EAAI,GAC1B,EAAgB,KAAK,MAAM,EAAK,EAAc,MAAM,kBAAkB,QAEtE,EAAO,MAAMA,EAAI,KAAK,gEAAiE,CACzF,KAAM,CACF,OAAQ,KAGV,EAAgB,EAAK,KAAK,KAC1B,EAAO,EAAc,KAErB,EAAQ,MAAM,QAAQ,IAAI,EAAK,IAAK,GAASC,EAAM,YAAY,EAAM,KAC3E,MAAO,CACH,MAAO,YAAYA,EAAM,aAAa,EAAI,KAC1C,KAAM,EACN,KAAM,EACN,cAAe,OACf,MAAO,EAAc,UAAU,KAAOA,EAAM,YAAY"}