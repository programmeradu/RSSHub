import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={path:`/news/:server?`,categories:[`game`],example:`/priconne-redive/news`,parameters:{server:`服务器，默认日服`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`priconne-redive.jp/news`],target:`/news/jp`},{source:[`princessconnect.so-net.tw/news`],target:`/news/zh-tw`},{source:[`game.bilibili.com/pcr/news.html`],target:`/news/zh-cn`}],name:`最新公告`,maintainers:[`SayaSS`,`frankcwl`],handler:a,url:`priconne-redive.jp/news`,description:`服务器

| 国服  | 台服  | 日服  |
| ----- | ----- | ---- |
| zh-cn | zh-tw | jp   |`};async function a(i){let{server:a=`jp`}=i.req.param();switch(a){case`jp`:{let i=e=>{let n=r(e);n(`.contents-body h3`).remove();let i=n(`.meta-info .time`).text().trim();n(`.meta-info`).remove();let a=n(`.contents-body`);return{description:a.html(),pubDate:t(i)}},a=await n({method:`get`,url:`https://priconne-redive.jp/news/`}),o=a.data,s=r(o),c=s(`.article_box`),l=await Promise.all(c.map((t,r)=>{r=s(r);let a=r.find(`a`).first().attr(`href`);return e.tryGet(a,async()=>{let e={title:r.find(`h4`).text(),link:a},t=await n(a),o=i(t.data);return e.description=o.description,e.pubDate=o.pubDate,e})}));return{title:`公主链接日服-新闻`,link:`https://priconne-redive.jp/news/`,language:`ja`,item:l}}case`zh-tw`:{let i=e=>{let n=r(e);n(`.news_con h2 > span`).remove();let i=n(`.news_con h2`).text().trim();n(`.news_con section h4`).first().remove();let a=n(`.news_con section`);return{description:a.html(),pubDate:t(i)}},a=await n({method:`get`,url:`http://www.princessconnect.so-net.tw/news`}),o=r(a.data),s=o(`.news_con dl dd`).toArray(),c=await Promise.all(s.map(t=>{let a=r(t),o=a(`a`),s=`http://www.princessconnect.so-net.tw${o.attr(`href`)}`;return e.tryGet(s,async()=>{let e={title:o.text().trim(),link:s},t=await n(s),r=i(t.data);return e.description=r.description,e.pubDate=r.pubDate,e})}));return{title:`公主连结台服-最新公告`,link:`http://www.princessconnect.so-net.tw/news`,item:c}}case`zh-cn`:{let r=await n({method:`get`,url:`https://api.biligame.com/news/list?gameExtensionId=267&positionId=2&typeId=&pageNum=1&pageSize=5`}),i=r.data,a=await Promise.all(i.data.map(r=>{let i=`https://game.bilibili.com/pcr/news.html#detail=${r.id}`;return e.tryGet(i,async()=>{let e={title:r.title,link:i,pubDate:t(r.ctime)},a=await n({method:`get`,url:`https://api.biligame.com/news/${r.id}`});return e.description=a.data.data.content,e})}));return{title:`公主连结国服-最新公告`,link:`https://game.bilibili.com/pcr/news.html`,item:a}}default:}}export{i as route};
//# sourceMappingURL=news-p62UJhuB.js.map