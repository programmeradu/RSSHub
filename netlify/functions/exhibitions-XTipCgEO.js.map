{"version":3,"file":"exhibitions-XTipCgEO.js","names":["route: Route","got"],"sources":["../../lib/routes/metmuseum/exhibitions.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nfunction generateExhibitionItem(result) {\r\n    return {\r\n        title: result.title,\r\n        link: `https://www.metmuseum.org${result.url}`,\r\n        description: result.description,\r\n        pubDate: parseDate(result.startDate),\r\n        guid: result.id,\r\n    };\r\n}\r\n\r\nexport const route: Route = {\r\n    path: '/exhibitions/:state?',\r\n    name: 'Unknown',\r\n    maintainers: [],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const searchType = ctx.req.param('state') ?? 'current';\r\n\r\n    const url = `https://www.metmuseum.org/ghidorah/ExhibitionListing/Search?searchType=${searchType}`;\r\n\r\n    const response = await got({\r\n        url,\r\n        method: 'GET',\r\n    });\r\n\r\n    const data = response.data.data;\r\n\r\n    return {\r\n        title: 'The Metropolitan Museum of Art - Exhibitions',\r\n        link: 'https://www.metmuseum.org/exhibitions',\r\n        item: data.results.map((element) => generateExhibitionItem(element)),\r\n    };\r\n}\r\n"],"mappings":"qRAIA,SAAS,EAAuB,EAAQ,CACpC,MAAO,CACH,MAAO,EAAO,MACd,KAAM,4BAA4B,EAAO,MACzC,YAAa,EAAO,YACpB,QAAS,EAAU,EAAO,WAC1B,KAAM,EAAO,IAIrB,MAAaA,EAAe,CACxB,KAAM,uBACN,KAAM,UACN,YAAa,GACb,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAa,EAAI,IAAI,MAAM,UAAY,UAEvC,EAAM,0EAA0E,IAEhF,EAAW,MAAMC,EAAI,CACvB,MACA,OAAQ,QAGN,EAAO,EAAS,KAAK,KAE3B,MAAO,CACH,MAAO,+CACP,KAAM,wCACN,KAAM,EAAK,QAAQ,IAAK,GAAY,EAAuB"}