import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./cache-kimkMTWJ.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./md5-4BNsOP-F.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{getSignedHeader as n,header as r}from"./utils-DNrWGW3Z.js";import{load as i}from"cheerio";const a={path:`/zhuanlan/:id`,categories:[`social-media`],example:`/zhihu/zhuanlan/googledevelopers`,parameters:{id:`专栏 id，可在专栏主页 URL 中找到`},features:{requireConfig:[{name:`ZHIHU_COOKIES`,description:``}],requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`zhuanlan.zhihu.com/:id`]}],name:`专栏`,maintainers:[`DIYgod`],handler:o};async function o(a){let o=a.req.param(`id`),s=`https://zhuanlan.zhihu.com/${o}`;o.search(`c_`)===0&&(s=`https://www.zhihu.com/column/${o}`);let c=await n(s,`/api/v4/columns/${o}/items`),l=await t({method:`get`,url:`https://www.zhihu.com/api/v4/columns/${o}/items`,headers:{...c,Referer:`https://zhuanlan.zhihu.com/${o}`}}),u=await t({method:`get`,url:`https://www.zhihu.com/api/v4/columns/${o}/pinned-items/v2`,headers:{...r,...c,Referer:`https://zhuanlan.zhihu.com/${o}`}});l.data.data=[...l.data.data,...u.data.data];let d=await t(s,{headers:{...c,Referer:s}}),f=i(d.data),p=f(`.css-zyehvu`).text(),m=f(`.css-1bnklpv`).text(),h=l.data.data.map(t=>{let n=``;if(t.content){let e=i(t.content);n=e.html()}f(`img`).css(`max-width`,`100%`);let r=``,a=``,o=``,s;switch(t.type){case`answer`:r=t.question.title,o=t.question.author?t.question.author.name:``,a=`https://www.zhihu.com/question/${t.question.id}/answer/${t.id}`,s=e(t.created_time*1e3);break;case`article`:r=t.title,a=t.url,o=t.author.name,s=e(t.created*1e3);break;case`zvideo`:r=t.title,a=`https://www.zhihu.com/zvideo/${t.id}`,o=t.author.name,s=e(t.created_at*1e3),n=t.description?`${t.description} <br> <br> <a href="${a}">视频内容请跳转至原页面观看</a>`:`<a href="${a}">视频内容请跳转至原页面观看</a>`;break;default:throw Error(`Unknown type: ${t.type}`)}return{title:r,link:a,description:n,pubDate:s,author:o}});return{description:m,item:h,title:`知乎专栏-${p}`,link:s}}export{a as route};
//# sourceMappingURL=zhuanlan-D1S8m117.js.map