{"version":3,"file":"common-BDbKT0GQ.js","names":["ofetch","items: DataItem[]","CommonRouteProperties: Pick<Route, 'url' | 'categories' | 'maintainers' | 'view'>","CommonDataProperties: Pick<Data, 'allowEmpty' | 'image'> | { logo: string; icon: string }"],"sources":["../../lib/routes/voronoiapp/common.ts"],"sourcesContent":["import { ViewType, type Data, type DataItem, type Route } from '@/types';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport ofetch from '@/utils/ofetch';\r\nimport type { Post } from './types';\r\n\r\nexport async function getPostItems(params: {\r\n    feed?: string;\r\n    search?: string;\r\n    swimlane?: string;\r\n    tab?: string;\r\n    time_range?: string;\r\n    category?: string;\r\n    order?: string;\r\n    author?: string;\r\n    limit?: number;\r\n    offset?: number;\r\n}): Promise<DataItem[]> {\r\n    const baseUrl = 'https://9oyi4rk426.execute-api.ca-central-1.amazonaws.com/production/post';\r\n    const url = new URL(baseUrl);\r\n    const finalSearchParams = Object.assign(\r\n        {\r\n            limit: 20,\r\n            offset: 0,\r\n        },\r\n        params\r\n    );\r\n    if (finalSearchParams.time_range !== undefined) {\r\n        finalSearchParams.time_range = finalSearchParams.time_range.toUpperCase();\r\n        if (!TimeRangeParam.options.some((option) => option.value === finalSearchParams.time_range)) {\r\n            throw new Error(`Invalid time range: ${finalSearchParams.time_range}`);\r\n        }\r\n        // The Voronoi API doesn't support \"ALL\"\r\n        if (finalSearchParams.time_range === 'ALL') {\r\n            finalSearchParams.time_range = undefined;\r\n        }\r\n    }\r\n    if (finalSearchParams.category !== undefined && finalSearchParams.category !== null) {\r\n        const category = finalSearchParams.category;\r\n        finalSearchParams.category = CategoryParam.options.find((option) => option.value.toLowerCase() === category.toLowerCase())?.value;\r\n        if (finalSearchParams.category === undefined) {\r\n            throw new Error(`Invalid category: ${finalSearchParams.category}`);\r\n        }\r\n    }\r\n    if (finalSearchParams.tab !== undefined && finalSearchParams.tab !== null) {\r\n        finalSearchParams.tab = finalSearchParams.tab.toUpperCase();\r\n        if (!Object.values(TabMap).includes(finalSearchParams.tab)) {\r\n            throw new Error(`Invalid tab: ${finalSearchParams.tab}`);\r\n        }\r\n    }\r\n    for (const key in finalSearchParams) {\r\n        if (finalSearchParams[key] !== undefined && finalSearchParams[key] !== null) {\r\n            url.searchParams.set(key, finalSearchParams[key]);\r\n        }\r\n    }\r\n    const data = await ofetch<Post[]>(url.toString());\r\n    const items: DataItem[] = data.map((post) => ({\r\n        title: post.headline,\r\n        link: `https://www.voronoiapp.com/${post.category.split(' ').join('-').toLowerCase()}/${post.link}`,\r\n        pubDate: parseDate(post.published_at),\r\n        description: `<img src=\"https://cdn.voronoiapp.com/public/${post.webp_image}\" />\r\n        ${post.description}`,\r\n        image: `https://cdn.voronoiapp.com/public/${post.webp_image}`,\r\n        author: post.author.first_name + ' ' + post.author.last_name,\r\n        updated: parseDate(post.updated_at),\r\n        category: [post.category],\r\n        enclosure_url: `https://cdn.voronoiapp.com/public/${post.dataset}`,\r\n        enclosure_type: 'text/csv',\r\n        enclosure_title: post.dataset,\r\n        upvotes: post.likes,\r\n        comments: post.commented,\r\n    }));\r\n\r\n    return items;\r\n}\r\n\r\nexport const CategoryParam = {\r\n    description: 'The category of the post',\r\n    default: '',\r\n    options: [\r\n        {\r\n            value: '',\r\n            label: 'All categories',\r\n        },\r\n        {\r\n            value: 'Automotive',\r\n            label: 'Automotive Data Insights - Explore a range of automotive data visualizations showcasing trends, innovations, and market dynamics in the automotive industry.',\r\n        },\r\n        {\r\n            value: 'Business',\r\n            label: 'Business Visualization Trends - Discover business visualizations covering market analysis, corporate strategies, and economic impacts across global industries.',\r\n        },\r\n        {\r\n            value: 'Climate',\r\n            label: 'Climate Data Visualized - Delve into climate change data visualizations that detail weather patterns, environmental impacts, and sustainability efforts worldwide.',\r\n        },\r\n        {\r\n            value: 'Demographics',\r\n            label: 'Demographic Visual Insights - Explore visual demographics data showcasing population trends, societal changes, and demographic analytics across regions.',\r\n        },\r\n        {\r\n            value: 'Economy',\r\n            label: 'Economic Visualization Insights - View economic visualizations illustrating financial markets, economic policies, and global economic health.',\r\n        },\r\n        {\r\n            value: 'Energy',\r\n            label: 'Energy Industry Visual Data - Discover the dynamics of global energy consumption, renewable sources, and energy market trends through vivid visualizations.',\r\n        },\r\n        {\r\n            value: 'Entertainment',\r\n            label: 'Entertainment Industry Data - Explore data visualizations in the entertainment industry, covering everything from box office trends to streaming service analytics.',\r\n        },\r\n        {\r\n            value: 'Geopolitics',\r\n            label: 'Geopolitical Data Visualized - Understand global geopolitical shifts and international relations through comprehensive geopolitical data visualizations.',\r\n        },\r\n        {\r\n            value: 'Healthcare',\r\n            label: 'Healthcare Insights Visualized - Analyze healthcare data visualizations spanning disease trends, healthcare services, and public health policies.',\r\n        },\r\n        {\r\n            value: 'Innovation',\r\n            label: 'Innovation in Data - Dive into innovation data visualizations highlighting technology advancements, R&D investments, and patent trends.',\r\n        },\r\n        {\r\n            value: 'Maps',\r\n            label: 'Cartographic Visual Insights - Discover cartographic visualizations that map everything from socio-economic data to geographical phenomena.',\r\n        },\r\n        {\r\n            value: 'Markets',\r\n            label: 'Market Trends Visualized - Visualize market trends, financial data, and economic forecasts through comprehensive market visualizations.',\r\n        },\r\n        {\r\n            value: 'Money',\r\n            label: 'Financial Data Visualized - Dive into financial visualizations depicting currency trends, investment flows, and banking statistics.',\r\n        },\r\n        {\r\n            value: 'Natural Resources',\r\n            label: 'Natural Resources Data - Explore visualizations of natural resources, detailing extraction, consumption, and conservation data.',\r\n        },\r\n        {\r\n            value: 'Politics',\r\n            label: 'Political Visual Insights - Analyze political trends, election results, and legislative impacts through detailed political visualizations.',\r\n        },\r\n        {\r\n            value: 'Public Opinion',\r\n            label: 'Public Opinion Trends - Discover visualizations of public opinion polls, social trends, and cultural shifts across different regions.',\r\n        },\r\n        {\r\n            value: 'Real Estate',\r\n            label: 'Real Estate Market Insights - Explore real estate market trends, property values, and urban development through targeted data visualizations.',\r\n        },\r\n        {\r\n            value: 'Sports',\r\n            label: 'Sports Data Insights - Analyze sports data visualizations that showcase performance statistics, team rankings, and sports economics.',\r\n        },\r\n        {\r\n            value: 'Technology',\r\n            label: 'Technology Trends Visualized - Dive into technology visualizations highlighting industry trends, tech adoption rates, and innovation impacts.',\r\n        },\r\n        {\r\n            value: 'Wealth',\r\n            label: 'Wealth Distribution Insights - Explore wealth distribution, financial health, and economic disparities through detailed visualizations.',\r\n        },\r\n        {\r\n            value: 'Travel',\r\n            label: 'Travel Trends Visualized - Discover travel trends, tourism statistics, and destination analytics through engaging visualizations.',\r\n        },\r\n        {\r\n            value: 'Nature',\r\n            label: 'Nature and Conservation Data - Delve into visualizations of ecological data, wildlife statistics, and conservation efforts around the globe.',\r\n        },\r\n        {\r\n            value: 'Space',\r\n            label: 'Space Exploration Data - Explore the universe with space data visualizations covering planetary science, space missions, and astronomical discoveries.',\r\n        },\r\n        {\r\n            value: 'Diagram',\r\n            label: 'Diagrammatic Data Insights - Understand complex data through diagrams that simplify information across various topics and industries.',\r\n        },\r\n        {\r\n            value: 'Other',\r\n            label: \"Diverse Data Visualizations - Explore a variety of data visualizations that don't neatly fit into any single category but offer unique insights.\",\r\n        },\r\n    ],\r\n};\r\n\r\nexport const TimeRangeParam = {\r\n    description: 'Time range between which the posts are popular.',\r\n    default: 'MONTH',\r\n    options: [\r\n        {\r\n            value: 'WEEK',\r\n            label: 'Last 7 days',\r\n        },\r\n        {\r\n            value: 'MONTH',\r\n            label: 'Last 30 days',\r\n        },\r\n        {\r\n            value: 'YEAR',\r\n            label: 'Last 12 months',\r\n        },\r\n        {\r\n            value: 'ALL',\r\n            label: 'All time',\r\n        },\r\n    ],\r\n};\r\n\r\nexport const TabMap = {\r\n    'most-popular': 'POPULAR',\r\n    'most-discussed': 'DISCUSSED',\r\n    'most-viewed': 'VIEWED',\r\n};\r\n\r\nexport const TabParam = {\r\n    description: 'The tab to get the popular posts from.',\r\n    default: 'most-popular',\r\n    options: [\r\n        {\r\n            value: 'most-popular',\r\n            label: 'Most Liked',\r\n        },\r\n        {\r\n            value: 'most-discussed',\r\n            label: 'Most Discussed',\r\n        },\r\n        {\r\n            value: 'most-viewed',\r\n            label: 'Most Viewed',\r\n        },\r\n    ],\r\n};\r\n\r\nexport const CommonRouteProperties: Pick<Route, 'url' | 'categories' | 'maintainers' | 'view'> = {\r\n    url: 'voronoiapp.com',\r\n    categories: ['picture'],\r\n    view: ViewType.Pictures,\r\n    maintainers: ['Cesaryuan'],\r\n};\r\n\r\nexport const CommonDataProperties: Pick<Data, 'allowEmpty' | 'image'> | { logo: string; icon: string } = {\r\n    logo: 'https://about.voronoiapp.com/wp-content/uploads/2023/07/voronoi-icon.png',\r\n    image: 'https://about.voronoiapp.com/wp-content/uploads/2023/07/voronoi-icon.png',\r\n    icon: 'https://about.voronoiapp.com/wp-content/uploads/2023/07/voronoi-icon.png',\r\n    allowEmpty: true,\r\n};\r\n"],"mappings":"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"}