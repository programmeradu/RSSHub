import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=async a=>{let o=a.req.query(`limit`)?Number.parseInt(a.req.query(`limit`),10):7,s=new URL(`news/index.html`,`https://app.xinhuanet.com`).href,{data:c}=await n(s),l=i(c),u=l(`html`).prop(`lang`),d=l(`a.article-item`).slice(0,o).toArray().map(e=>{e=l(e);let t=e.find(`div.article-title`).text(),n=`xinhuanet-${e.prop(`data-uuid`)}`;return{title:t,link:e.prop(`href`),guid:n,id:n,language:u}});d=await Promise.all(d.map(a=>e.tryGet(a.link,async()=>{let{data:e}=await n(a.link),o=i(e),s=o(`div.article_title`).text(),c=o(`#detail-content`).html();a.title=s,a.description=c;let l=o(`div.article_auth div`).first();return a.author=l.text(),l.remove(),a.pubDate=r(t(o(`div.article_auth div`).first().text()),8),a.content={html:c,text:o(`#detail-content`).text()},a.language=u,a})));let f=l(`meta[itemprop="image"]`).prop(`content`);return{title:l(`title`).text(),description:l(`meta[name="description"]`).prop(`content`),link:s,item:d,allowEmpty:!0,image:f,author:l(`meta[itemprop="name"]`).prop(`content`),language:u}},o={path:`/app`,name:`客户端`,url:`app.xinhuanet.com`,maintainers:[`nczitzk`],handler:a,example:`/xinhuanet/app`,parameters:void 0,description:``,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`app.xinhuanet.com`],target:`/app`}]};export{a as handler,o as route};
//# sourceMappingURL=app-sEXj2kaA.js.map