{"version":3,"file":"toutiao-EnA9yF6N.js","names":["route: Route","got","utils"],"sources":["../../lib/routes/coolapk/toutiao.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport utils from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/toutiao/:type?',\r\n    categories: ['social-media'],\r\n    example: '/coolapk/toutiao',\r\n    parameters: { type: '默认为history' },\r\n    features: {\r\n        requireConfig: [\r\n            {\r\n                name: 'ALLOW_USER_HOTLINK_TEMPLATE',\r\n                optional: true,\r\n                description: '设置为`true`并添加`image_hotlink_template`参数来代理图片',\r\n            },\r\n        ],\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '头条',\r\n    maintainers: ['xizeyoupan'],\r\n    handler,\r\n    description: `| 参数名称 | 历史头条 | 最新   |\r\n| -------- | -------- | ------ |\r\n| type     | history  | latest |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type') || 'history';\r\n    const urls = {\r\n        history: {\r\n            url: 'https://api.coolapk.com/v6/page/dataList?url=%23%2ffeed%2fheadlineV8List%3ftype%3d0%2c5%2c9%2c8%2c12%2c10%2c11%2c13%26title%3d%e5%8e%86%e5%8f%b2%e5%a4%b4%e6%9d%a1%26page%3d1',\r\n            title: '历史头条',\r\n        },\r\n        latest: {\r\n            url: 'https://api.coolapk.com/v6/page/dataList?url=%23%2ffeed%2fdigestList%3ftype%3d0%2c5%2c12%2c10%2c11%2c13%2c8%2c9%26title%3d%e6%9c%80%e6%96%b0%e5%8a%a8%e6%80%81%26page%3d1',\r\n            title: '最新动态',\r\n        },\r\n    };\r\n    const response = await got(urls[type].url, {\r\n        headers: utils.getHeaders(),\r\n    });\r\n    const data = response.data.data;\r\n\r\n    const out = await Promise.all(data.map((item) => utils.parseDynamic(item)));\r\n\r\n    return {\r\n        title: urls[type].title,\r\n        link: 'https://www.coolapk.com/',\r\n        description: urls[type].title,\r\n        item: out,\r\n    };\r\n}\r\n"],"mappings":"2WAIA,MAAaA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,gBACb,QAAS,mBACT,WAAY,CAAE,KAAM,cACpB,SAAU,CACN,cAAe,CACX,CACI,KAAM,8BACN,SAAU,GACV,YAAa,gDAGrB,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,cACd,UACA,YAAa;;mCAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,UAChC,EAAO,CACT,QAAS,CACL,IAAK,gLACL,MAAO,QAEX,OAAQ,CACJ,IAAK,4KACL,MAAO,SAGT,EAAW,MAAMC,EAAI,EAAK,GAAM,IAAK,CACvC,QAASC,EAAM,eAEb,EAAO,EAAS,KAAK,KAErB,EAAM,MAAM,QAAQ,IAAI,EAAK,IAAK,GAASA,EAAM,aAAa,KAEpE,MAAO,CACH,MAAO,EAAK,GAAM,MAClB,KAAM,2BACN,YAAa,EAAK,GAAM,MACxB,KAAM"}