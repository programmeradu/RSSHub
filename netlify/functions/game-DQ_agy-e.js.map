{"version":3,"file":"game-DQ_agy-e.js","names":[],"sources":["../../lib/routes/ymgal/game.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\nimport { load } from 'cheerio';\r\n\r\nconst host = 'https://www.ymgal.games';\r\n\r\nconst date = new Date();\r\nconst year = date.getFullYear();\r\nconst month = date.getMonth() + 1;\r\n\r\nexport const route: Route = {\r\n    path: '/game/release',\r\n    categories: ['anime'],\r\n    example: '/ymgal/game/release',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n        nsfw: true,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['ymgal.games/'],\r\n        },\r\n    ],\r\n    name: '本月新作',\r\n    maintainers: ['SunBK201'],\r\n    handler,\r\n    url: 'ymgal.games/',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await got({\r\n        method: 'get',\r\n        url: `${host}/release-list/${year}/${month}`,\r\n    });\r\n\r\n    const $ = load(response.data);\r\n    const list = $('.game-view-card').toArray();\r\n\r\n    const items =\r\n        list &&\r\n        list.map((item) => {\r\n            item = $(item);\r\n            const itemPicUrl = item.find('.lazy').first().attr('data-original');\r\n            const tags = item.find('.tag-info-list').children();\r\n            const taginfo = tags.toArray().map((elem) => $(elem).text());\r\n            return {\r\n                title: item.attr('title'),\r\n                link: `${host}${item.attr('href')}`,\r\n                description: art(path.join(__dirname, 'templates/description.art'), { itemPicUrl, taginfo }),\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: `月幕 Galgame - 本月新作`,\r\n        link: `${host}/release-list/${year}/${month}`,\r\n        description: '月幕 Galgame - 本月新作',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+WAOA,MAAM,EAAO,0BAEP,EAAO,IAAI,KACX,EAAO,EAAK,cACZ,EAAQ,EAAK,WAAa,EAEnB,EAAe,CACxB,KAAM,gBACN,WAAY,CAAC,SACb,QAAS,sBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,GACf,KAAM,IAEV,MAAO,CACH,CACI,OAAQ,CAAC,kBAGjB,KAAM,OACN,YAAa,CAAC,YACd,UACA,IAAK,gBAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAM,EAAI,CACvB,OAAQ,MACR,IAAK,GAAG,EAAK,gBAAgB,EAAK,GAAG,MAGnC,EAAI,EAAK,EAAS,MAClB,EAAO,EAAE,mBAAmB,UAE5B,EACF,GACA,EAAK,IAAK,GAAS,CACf,EAAO,EAAE,GACT,IAAM,EAAa,EAAK,KAAK,SAAS,QAAQ,KAAK,iBAC7C,EAAO,EAAK,KAAK,kBAAkB,WACnC,EAAU,EAAK,UAAU,IAAK,GAAS,EAAE,GAAM,QACrD,MAAO,CACH,MAAO,EAAK,KAAK,SACjB,KAAM,GAAG,IAAO,EAAK,KAAK,UAC1B,YAAa,EAAI,EAAA,KAAA,EAAA,sCAAmD,CAAE,aAAY,eAI9F,MAAO,CACH,MAAO,oBACP,KAAM,GAAG,EAAK,gBAAgB,EAAK,GAAG,IACtC,YAAa,oBACb,KAAM"}