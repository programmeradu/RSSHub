{"version":3,"file":"eshop-jp-c0nSrEKa.js","names":[],"sources":["../../lib/routes/nintendo/eshop-jp.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/eshop/jp',\r\n    radar: [\r\n        {\r\n            source: ['nintendo.co.jp/software/switch/index.html', 'nintendo.co.jp/'],\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: [],\r\n    handler,\r\n    url: 'nintendo.co.jp/software/switch/index.html',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const response = await got('https://search.nintendo.jp/nintendo_soft/search.json', {\r\n        searchParams: {\r\n            opt_sshow: 1,\r\n            fq: 'ssitu_s:onsale OR ssitu_s:preorder OR memo_bg:forced',\r\n            limit: ctx.req.query('limit') ? Number(ctx.req.query('limit')) : 24,\r\n            page: 1,\r\n            c: '50310840317994813',\r\n            opt_osale: 1,\r\n            opt_hard: '1_HAC',\r\n            sort: 'sodate desc,score',\r\n        },\r\n    });\r\n    const data = response.data.result.items;\r\n\r\n    return {\r\n        title: 'Nintendo eShop（日服）新游戏',\r\n        link: 'https://www.nintendo.co.jp/software/switch/index.html',\r\n        description: 'Nintendo eShop（日服）新上架的游戏',\r\n        item: data.map((item) => ({\r\n            title: item.title,\r\n            description: art(path.join(__dirname, 'templates/eshop_jp.art'), {\r\n                item,\r\n            }),\r\n            link: `https://ec.nintendo.com/JP/ja/titles/${item.id}`,\r\n            pubDate: parseDate(item.pdate),\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"qYAOA,MAAa,EAAe,CACxB,KAAM,YACN,MAAO,CACH,CACI,OAAQ,CAAC,4CAA6C,qBAG9D,KAAM,UACN,YAAa,GACb,UACA,IAAK,6CAGT,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,MAAM,EAAI,uDAAwD,CAC/E,aAAc,CACV,UAAW,EACX,GAAI,uDACJ,MAAO,EAAI,IAAI,MAAM,SAAW,OAAO,EAAI,IAAI,MAAM,UAAY,GACjE,KAAM,EACN,EAAG,oBACH,UAAW,EACX,SAAU,QACV,KAAM,uBAGR,EAAO,EAAS,KAAK,OAAO,MAElC,MAAO,CACH,MAAO,wBACP,KAAM,wDACN,YAAa,2BACb,KAAM,EAAK,IAAK,IAAU,CACtB,MAAO,EAAK,MACZ,YAAa,EAAI,EAAA,KAAA,EAAA,mCAAgD,CAC7D,SAEJ,KAAM,wCAAwC,EAAK,KACnD,QAAS,EAAU,EAAK"}