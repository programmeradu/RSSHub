{"version":3,"file":"cookbook-BzgzexIE.js","names":["route: Route","ofetch","cache","$"],"sources":["../../lib/routes/openai/cookbook.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { load } from 'cheerio';\r\nimport logger from '@/utils/logger';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const route: Route = {\r\n    path: '/cookbook',\r\n    categories: ['programming'],\r\n    description:\r\n        'OpenAI Cookbook 提供了大量使用 OpenAI API 的实用指南和示例代码,涵盖了从基础到高级的各种主题,包括 GPT 模型、嵌入、函数调用、微调等。这里汇集了最新的 API 功能介绍和流行的应用案例,是开发者学习和应用 OpenAI 技术的宝贵资源。',\r\n    maintainers: ['liyaozhong'],\r\n    radar: [\r\n        {\r\n            source: ['cookbook.openai.com/'],\r\n        },\r\n    ],\r\n    url: 'cookbook.openai.com/',\r\n    handler,\r\n    example: '/openai/cookbook',\r\n    name: 'Cookbook',\r\n};\r\n\r\nasync function handler() {\r\n    const rootUrl = 'https://cookbook.openai.com';\r\n    const currentUrl = `${rootUrl}/`;\r\n\r\n    try {\r\n        const response = await ofetch(currentUrl);\r\n        const $ = load(response);\r\n\r\n        let items = $('[class=\"min-h-[90vh] mt-4\"] .grid a')\r\n            .toArray()\r\n            .map((element) => {\r\n                const $element = $(element);\r\n                const $title = $element.find('div.font-semibold.text-sm.text-primary.line-clamp-1.overflow-ellipsis');\r\n                const $date = $element.find(String.raw`span.text-xs.text-muted-foreground.md\\:w-24.text-end`);\r\n                const $author = $element.find('p:contains(\"OpenAI\")');\r\n                const $tags = $element.find('span[style^=\"color:\"]');\r\n\r\n                return {\r\n                    title: $title.text().trim(),\r\n                    link: `${rootUrl}/${$element.attr('href')}`,\r\n                    pubDate: $date.text().trim(),\r\n                    author: $author.text().replace('OpenAI', '').trim(),\r\n                    category: $tags.toArray().map((tag) => $(tag).text().trim()),\r\n                };\r\n            });\r\n\r\n        items = (\r\n            await Promise.all(\r\n                items.map((item) =>\r\n                    cache.tryGet(item.link, async () => {\r\n                        try {\r\n                            const detailResponse = await ofetch(item.link);\r\n                            const $ = load(detailResponse);\r\n\r\n                            item.description = $(String.raw`article.prose.prose-sm.sm\\:prose-base.max-w-none.dark\\:prose-invert`).html();\r\n                            return item;\r\n                        } catch {\r\n                            return { ...item, description: '' };\r\n                        }\r\n                    })\r\n                )\r\n            )\r\n        ).filter((item) => item?.description);\r\n\r\n        return {\r\n            title: 'OpenAI Cookbook',\r\n            link: currentUrl,\r\n            item: items,\r\n        };\r\n    } catch (error) {\r\n        logger.error(`处理 OpenAI Cookbook 请求时发生错误: ${error}`);\r\n        throw error;\r\n    }\r\n}\r\n"],"mappings":"uRAMA,MAAaA,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,eACb,YACI,yIACJ,YAAa,CAAC,cACd,MAAO,CACH,CACI,OAAQ,CAAC,0BAGjB,IAAK,uBACL,UACA,QAAS,mBACT,KAAM,YAGV,eAAe,GAAU,CACrB,IAAM,EAAU,8BACV,EAAa,GAAG,EAAQ,GAE9B,GAAI,CACA,IAAM,EAAW,MAAMC,EAAO,GACxB,EAAI,EAAK,GAEX,EAAQ,EAAE,uCACT,UACA,IAAK,GAAY,CACd,IAAM,EAAW,EAAE,GACb,EAAS,EAAS,KAAK,yEACvB,EAAQ,EAAS,KAAK,OAAO,GAAG,wDAChC,EAAU,EAAS,KAAK,wBACxB,EAAQ,EAAS,KAAK,yBAE5B,MAAO,CACH,MAAO,EAAO,OAAO,OACrB,KAAM,GAAG,EAAQ,GAAG,EAAS,KAAK,UAClC,QAAS,EAAM,OAAO,OACtB,OAAQ,EAAQ,OAAO,QAAQ,SAAU,IAAI,OAC7C,SAAU,EAAM,UAAU,IAAK,GAAQ,EAAE,GAAK,OAAO,WAsBjE,MAlBA,IACI,MAAM,QAAQ,IACV,EAAM,IAAK,GACPC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,GAAI,CACA,IAAM,EAAiB,MAAMD,EAAO,EAAK,MACnCE,EAAI,EAAK,GAGf,MADA,GAAK,YAAcA,EAAE,OAAO,GAAG,uEAAuE,OAC/F,OACH,CACJ,MAAO,CAAE,GAAG,EAAM,YAAa,UAKjD,OAAQ,GAAS,GAAM,aAElB,CACH,MAAO,kBACP,KAAM,EACN,KAAM,SAEL,EAAO,CAEZ,MADA,EAAO,MAAM,+BAA+B,KACtC"}