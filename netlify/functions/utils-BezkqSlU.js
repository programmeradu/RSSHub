import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";t();const s=`https://www.javlibrary.com`,c=`1`,l=`amjq`,u=`arlq`,d=`ja`,f=async(t,c,l)=>{let u=await i({method:`get`,url:c}),d=o(u.data);d(`.toolbar, .info, .videoinfo`).remove();let f=d(`.videotextlist, #video_comments`).find(`a`).toArray().filter(e=>d(e).parent().hasClass(`video`)||d(e).parent().get(0).tagName===`strong`).map(e=>{e=d(e);let n=e.parentsUntil(`table`),i=`${s}/${t}/${e.attr(`href`).replace(/^\.\//,``)}`;return{link:i,url:i.replace(/video.*\.php/,``),title:e.text(),description:n.find(`textarea`).text(),pubDate:r(n.find(`.date`).text())}});return f=await Promise.all(f.map(t=>l(t.url,async()=>{let s=await i({method:`get`,url:t.url}),c=o(s.data);return c(`.icn_edit, .btn_videoplayer, a[rel="bookmark"]`).remove(),c(`span`).each(function(){c(this).attr(`class`)?.startsWith(`icn_`)&&c(this).remove()}),t.author=c(`.star`).toArray().map(e=>c(e).text()).filter(e=>e!==``).join(`,`),t.category=c(`a[rel]`).toArray().map(e=>c(e).text()).filter(e=>e!==``),t.description=n(a.join(e,`templates/description-2a7e2c1e.art`),{cover:c(`#video_jacket_img`).attr(`src`),info:c(`#video_info`).html().replaceAll(`span><span`,`span>,&nbsp;<span`),comment:t.description?.replace(/\[img]/g,`<img src="`)?.replace(/\[\/img]/g,`"/>`),thumbs:c(`.previewthumbs img`).toArray().map(e=>c(e).attr(`src`).replaceAll(`-`,`jp-`)),videos:[...new Set(s.data.match(/(http[^"[\]]+\.mp4)/g))]}),t.pubDate=t.pubDate.toString()===`Invalid Date`?r(c(`#video_date`).find(`.text`).text()):t.pubDate,delete t.url,t}))),{title:d(`title`).text(),link:c,item:f,allowEmpty:!0}};export{f as ProcessItems,l as defaultGenre,d as defaultLanguage,u as defaultMaker,c as defaultMode,s as rootUrl};
//# sourceMappingURL=utils-BezkqSlU.js.map