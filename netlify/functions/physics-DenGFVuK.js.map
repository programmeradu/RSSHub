{"version":3,"file":"physics-DenGFVuK.js","names":["route: Route","got"],"sources":["../../lib/routes/zju/physics/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\n// const host = 'http://physics.zju.edu.cn/redir.php?catalog_id=';\r\nconst host = 'http://physics.zju.edu.cn';\r\n// const host = 'http://10.14.122.238/redir.php?catalog_id=';\r\n\r\nconst map = new Map([\r\n    [1, { title: '浙大物理学院 -- 本院动态', id: '39060' }],\r\n    [2, { title: '浙大物理学院 -- 科研进展', id: '39070' }],\r\n    [3, { title: '浙大物理学院 -- 研究生教育最新消息', id: '39079' }],\r\n\r\n    // could not find these sections due to http://physics.zju.edu.cn/2022/0325/c39060a2510676/page.htm\r\n    /*    [4, { title: '浙大物理学院 -- 学生思政最新消息', id: '112' }],\r\n    [5, { title: '浙大物理学院 -- 研究生思政消息公告', id: '155' }],\r\n    [6, { title: '浙大物理学院 -- 研究生奖助学金', id: '661' }],\r\n    [7, { title: '浙大物理学院 -- 研究生思政就业信息', id: '664' }],\r\n    [8, { title: '浙大物理学院 -- 本科生思政消息公告', id: '667' }],\r\n    [9, { title: '浙大物理学院 -- 本科生奖助学金', id: '670' }],\r\n    [10, { title: '浙大物理学院 -- 本科生就业信息', id: '671' }],\r\n    [11, { title: '浙大物理学院 -- 学术报告', id: '3735' }],*/\r\n]);\r\n\r\nexport const route: Route = {\r\n    path: '/physics/:type',\r\n    categories: ['university'],\r\n    example: '/zju/physics/1',\r\n    parameters: { type: '分类，见下表' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '物理学院',\r\n    maintainers: ['Caicailiushui'],\r\n    handler,\r\n    description: `| 本院动态 | 科研进展 | 研究生教育最新消息 |\r\n| -------- | -------- | ------------------ |\r\n| 1        | 2        | 3                  |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = Number.parseInt(ctx.req.param('type'));\r\n    const id = map.get(type).id;\r\n    const res = await got({\r\n        method: 'get',\r\n        url: `${host}/${id}/list.htm`,\r\n    });\r\n\r\n    const $ = load(res.data);\r\n    const items = $('#arthd li')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            return {\r\n                title: item.find('a').attr('title'),\r\n                pubDate: parseDate(item.find('.art-date').text()),\r\n\r\n                link: `http://physics.zju.edu.cn/${item.find('a').attr('href')}`,\r\n                // link: `http://10.14.122.238/${item.find('a').attr('href')}`,\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: map.get(type).title,\r\n        link: `${host}${id}`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"oTAMA,MAAM,EAAO,4BAGP,EAAM,IAAI,IAAI,CAChB,CAAC,EAAG,CAAE,MAAO,iBAAkB,GAAI,UACnC,CAAC,EAAG,CAAE,MAAO,iBAAkB,GAAI,UACnC,CAAC,EAAG,CAAE,MAAO,sBAAuB,GAAI,YAa/BA,EAAe,CACxB,KAAM,iBACN,WAAY,CAAC,cACb,QAAS,iBACT,WAAY,CAAE,KAAM,UACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,iBACd,UACA,YAAa;;+CAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,OAAO,SAAS,EAAI,IAAI,MAAM,SACrC,EAAK,EAAI,IAAI,GAAM,GACnB,EAAM,MAAMC,EAAI,CAClB,OAAQ,MACR,IAAK,GAAG,EAAK,GAAG,EAAG,aAGjB,EAAI,EAAK,EAAI,MACb,EAAQ,EAAE,aACX,UACA,IAAK,IACF,EAAO,EAAE,GACF,CACH,MAAO,EAAK,KAAK,KAAK,KAAK,SAC3B,QAAS,EAAU,EAAK,KAAK,aAAa,QAE1C,KAAM,6BAA6B,EAAK,KAAK,KAAK,KAAK,aAKnE,MAAO,CACH,MAAO,EAAI,IAAI,GAAM,MACrB,KAAM,GAAG,IAAO,IAChB,KAAM"}