{"version":3,"file":"tuwen-B1jwprBO.js","names":["route: Route","utils","got"],"sources":["../../lib/routes/coolapk/tuwen.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport utils from './utils';\r\n\r\nexport const route: Route = {\r\n    path: ['/tuwen/:type?'],\r\n    categories: ['social-media'],\r\n    example: '/coolapk/tuwen',\r\n    parameters: { type: '默认为hot' },\r\n    features: {\r\n        requireConfig: [\r\n            {\r\n                name: 'ALLOW_USER_HOTLINK_TEMPLATE',\r\n                optional: true,\r\n                description: '设置为`true`并添加`image_hotlink_template`参数来代理图片',\r\n            },\r\n        ],\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '图文',\r\n    maintainers: ['xizeyoupan'],\r\n    handler,\r\n    description: `| 参数名称 | 编辑精选 | 最新   |\r\n| -------- | -------- | ------ |\r\n| type     | hot      | latest |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type') || 'hot';\r\n    let feedTitle;\r\n    const fullUrl = new URL('/v6/page/dataList', utils.base_url);\r\n    if (type === 'latest') {\r\n        // 实时\r\n        fullUrl.searchParams.append('url', `/feed/digestList?${new URLSearchParams('cacheExpires=300&type=12&message_status=all&is_html_article=1&filterEmptyPicture=1&filterTag=二手交易,酷安自贸区,薅羊毛小分队').toString()}`);\r\n        fullUrl.searchParams.append('title', '新鲜图文');\r\n        fullUrl.searchParams.append('subTitle', '');\r\n        feedTitle = '酷安 - 新鲜图文';\r\n    } else {\r\n        // 精选\r\n        fullUrl.searchParams.append('url', `#/feed/digestList?${new URLSearchParams('type=12&is_html_article=1&recommend=3,4').toString()}`);\r\n        fullUrl.searchParams.append('title', '图文');\r\n\r\n        feedTitle = '酷安图文 - 编辑精选';\r\n    }\r\n    fullUrl.searchParams.append('page', '1');\r\n\r\n    const response = await got(fullUrl, {\r\n        headers: utils.getHeaders(),\r\n    });\r\n    const data = response.data.data;\r\n\r\n    const out = await Promise.all(data.map((item) => utils.parseDynamic(item)));\r\n\r\n    return {\r\n        title: feedTitle,\r\n        link: 'https://www.coolapk.com/',\r\n        description: feedTitle,\r\n        item: out,\r\n    };\r\n}\r\n"],"mappings":"2WAIA,MAAaA,EAAe,CACxB,KAAM,CAAC,iBACP,WAAY,CAAC,gBACb,QAAS,iBACT,WAAY,CAAE,KAAM,UACpB,SAAU,CACN,cAAe,CACX,CACI,KAAM,8BACN,SAAU,GACV,YAAa,gDAGrB,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,cACd,UACA,YAAa;;mCAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,MAClC,EACE,EAAU,IAAI,IAAI,oBAAqBC,EAAM,UAC/C,IAAS,UAET,EAAQ,aAAa,OAAO,MAAO,oBAAoB,IAAI,gBAAgB,kHAAkH,cAC7L,EAAQ,aAAa,OAAO,QAAS,QACrC,EAAQ,aAAa,OAAO,WAAY,IACxC,EAAY,cAGZ,EAAQ,aAAa,OAAO,MAAO,qBAAqB,IAAI,gBAAgB,2CAA2C,cACvH,EAAQ,aAAa,OAAO,QAAS,MAErC,EAAY,eAEhB,EAAQ,aAAa,OAAO,OAAQ,KAEpC,IAAM,EAAW,MAAMC,EAAI,EAAS,CAChC,QAASD,EAAM,eAEb,EAAO,EAAS,KAAK,KAErB,EAAM,MAAM,QAAQ,IAAI,EAAK,IAAK,GAASA,EAAM,aAAa,KAEpE,MAAO,CACH,MAAO,EACP,KAAM,2BACN,YAAa,EACb,KAAM"}