{"version":3,"file":"eshop-cn-DUA-88qc.js","names":["route: Route","got","util","InvalidParameterError","cache"],"sources":["../../lib/routes/nintendo/eshop-cn.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport util from './utils';\r\nconst software_url = 'https://www.nintendoswitch.com.cn/software/';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport InvalidParameterError from '@/errors/types/invalid-parameter';\r\n\r\nexport const route: Route = {\r\n    path: '/eshop/cn',\r\n    radar: [\r\n        {\r\n            source: ['nintendoswitch.com.cn/software', 'nintendoswitch.com.cn/'],\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: [],\r\n    handler,\r\n    url: 'nintendoswitch.com.cn/software',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await got(software_url);\r\n\r\n    // 获取Nuxt对象\r\n    const result = await util.nuxtReader(response.data);\r\n\r\n    /* expectedReleaseNS[]\r\n        coverImageUrl: \"//switch-cn.gtgres.com/global-images/c50e3390-14e5-11ea-9b40-236e671bca9e.png\"\r\n        expectedReleaseDate: 0\r\n        expectedReleaseDateFuzzy: \"\"\r\n        gameName: \"Mario Tennis Aces\"\r\n        id: 1852\r\n        newsPageUrl: \"\"\r\n      recentSoftwareList[]\r\n        imgUrl: \"https://metadata-images.nintendoswitch.com.cn/formal/8332803007012-1F2B121D-743F-B868-5595-35C79BB2A817-KV.jpg\"\r\n        jumpUrl: \"https://www.nintendoswitch.com.cn/awuxa/index.html\"\r\n        publishTime: \"2022.10.31\"\r\n        title: \"附带导航！一做就上手 第一次的游戏程序设计\"\r\n    */\r\n    if (!result.recentSoftwareList) {\r\n        throw new InvalidParameterError('软件信息不存在，请报告这个问题');\r\n    }\r\n\r\n    let data = result.recentSoftwareList.map((item) => ({\r\n        title: item.title,\r\n        description: util.generateImageLink(item.imgUrl),\r\n        link: item.jumpUrl.startsWith('http') ? item.jumpUrl : `${software_url}${item.jumpUrl}`,\r\n        pubDate: parseDate(item.publishTime, 'YYYY.MM.DD'),\r\n    }));\r\n\r\n    data = await util.ProcessItemChina(data, cache);\r\n\r\n    return {\r\n        title: 'Nintendo eShop（国服）新游戏',\r\n        link: 'https://www.nintendoswitch.com.cn/software',\r\n        description: 'Nintendo（国服）新上架的游戏',\r\n        item: data,\r\n    };\r\n}\r\n"],"mappings":"seAIA,MAAM,EAAe,8CAIRA,EAAe,CACxB,KAAM,YACN,MAAO,CACH,CACI,OAAQ,CAAC,iCAAkC,4BAGnD,KAAM,UACN,YAAa,GACb,UACA,IAAK,kCAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAMC,EAAI,GAGrB,EAAS,MAAMC,EAAK,WAAW,EAAS,MAe9C,GAAI,CAAC,EAAO,mBACR,MAAM,IAAIC,EAAsB,mBAGpC,IAAI,EAAO,EAAO,mBAAmB,IAAK,IAAU,CAChD,MAAO,EAAK,MACZ,YAAaD,EAAK,kBAAkB,EAAK,QACzC,KAAM,EAAK,QAAQ,WAAW,QAAU,EAAK,QAAU,GAAG,IAAe,EAAK,UAC9E,QAAS,EAAU,EAAK,YAAa,iBAKzC,MAFA,GAAO,MAAMA,EAAK,iBAAiB,EAAME,GAElC,CACH,MAAO,wBACP,KAAM,6CACN,YAAa,qBACb,KAAM"}