{"version":3,"file":"software-D2th3jI1.js","names":["route: Route","cache","link"],"sources":["../../lib/routes/alternativeto/software.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { baseURL, puppeteerGet } from './utils';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/software/:name/:routeParams?',\r\n    categories: ['programming'],\r\n    example: '/alternativeto/software/cpp',\r\n    parameters: { name: 'Software name', routeParams: 'Filters of software type' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: true,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.alternativeto.net/software/:name'],\r\n            target: '/software/:name',\r\n        },\r\n    ],\r\n    name: 'Software Alternatives',\r\n    maintainers: ['JimenezLi'],\r\n    handler,\r\n    description: `> routeParms can be copied from original site URL, example: \\`/alternativeto/software/cpp/license=opensource&platform=windows\\``,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const name = ctx.req.param('name');\r\n    const query = new URLSearchParams(ctx.req.param('routeParams'));\r\n    const link = `https://alternativeto.net/software/${name}/?${query.toString()}`;\r\n\r\n    // use Puppeteer due to the obstacle by cloudflare challenge\r\n    const html = await puppeteerGet(link, cache);\r\n    const $ = load(html);\r\n\r\n    return {\r\n        title: $('.Heading_h1___Cf5Y').text().trim(),\r\n        description: $('.intro-text').text().trim(),\r\n        link,\r\n        item: $('.AppListItem_appInfo__h9cWP')\r\n            .toArray()\r\n            .map((element) => {\r\n                const item = $(element);\r\n                const title = item.find('.Heading_h2___LwQD').text().trim();\r\n                const link = `${baseURL}${item.find('.Heading_h2___LwQD a').attr('href')}`;\r\n                const description = item.find('.AppListItem_description__wtODK').text().trim();\r\n\r\n                return {\r\n                    title,\r\n                    link,\r\n                    description,\r\n                };\r\n            }),\r\n    };\r\n}\r\n"],"mappings":"yQAKA,MAAaA,EAAe,CACxB,KAAM,gCACN,WAAY,CAAC,eACb,QAAS,8BACT,WAAY,CAAE,KAAM,gBAAiB,YAAa,4BAClD,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,wCACT,OAAQ,oBAGhB,KAAM,wBACN,YAAa,CAAC,aACd,UACA,YAAa,iIAGjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAQ,IAAI,gBAAgB,EAAI,IAAI,MAAM,gBAC1C,EAAO,sCAAsC,EAAK,IAAI,EAAM,aAG5D,EAAO,MAAM,EAAa,EAAMC,GAChC,EAAI,EAAK,GAEf,MAAO,CACH,MAAO,EAAE,sBAAsB,OAAO,OACtC,YAAa,EAAE,eAAe,OAAO,OACrC,OACA,KAAM,EAAE,+BACH,UACA,IAAK,GAAY,CACd,IAAM,EAAO,EAAE,GACT,EAAQ,EAAK,KAAK,sBAAsB,OAAO,OAC/CC,EAAO,GAAG,IAAU,EAAK,KAAK,wBAAwB,KAAK,UAC3D,EAAc,EAAK,KAAK,mCAAmC,OAAO,OAExE,MAAO,CACH,QACA,KAAA,EACA"}