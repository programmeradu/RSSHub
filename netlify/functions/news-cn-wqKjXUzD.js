import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i={path:`/news-cn/:category?`,categories:[`game`],example:`/blizzard/news-cn/ow`,parameters:{category:`游戏类别, 默认为 ow`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ow.blizzard.cn`,`wow.blizzard.cn`,`hs.blizzard.cn`],target:`/news-cn/`}],name:`暴雪游戏国服新闻`,maintainers:[`zhangpeng2k`],description:`
| 守望先锋 | 炉石传说 | 魔兽世界 |
|----------|----------|---------|
| ow       | hs       | wow     |
`,handler:u},a={ow:`守望先锋`,hs:`炉石传说`,wow:`魔兽世界`},o={ow:e=>e(`.list-data-container .list-item-container`).toArray().map(n=>(n=e(n),{title:n.find(`.content-title`).text(),link:n.find(`.fill-link`).attr(`href`),description:n.find(`.content-intro`).text(),pubDate:t(n.find(`.content-date`).text()),image:n.find(`.item-pic`).attr(`src`)})),hs:e=>e(`.article-container>a`).toArray().map(n=>(n=e(n),{title:n.find(`.title`).text(),link:n.attr(`href`),description:n.find(`.desc`).text(),pubDate:t(n.find(`.date`).attr(`data-time`)),image:n.find(`.article-img img`).attr(`src`)})),wow:e=>e(`.Pane-list>a`).toArray().map(n=>(n=e(n),{title:n.find(`.list-title`).text(),link:n.attr(`href`),description:n.find(`.list-desc`).text(),pubDate:t(n.find(`.list-time`).attr(`data-time`)),image:n.find(`.img-box img`).attr(`src`)}))},s={ow:e=>e(`.deatil-content`).first().html(),hs:e=>e(`.article`).first().html(),wow:e=>e(`.detail`).first().html()};function c(e,t){return o[e]?o[e](t):[]}async function l(t,i){return await e.tryGet(t.link,async()=>{let e=await n(t.link),a=r(e),o=s[i];return t.description=o(a),t})}async function u(e){let t=e.req.param(`category`)||`ow`;if(!a[t])throw Error(`Invalid category`);let i=`https://${t}.blizzard.cn/news`,o=await n(i),s=r(o),u=c(t,s);if(!u.length)throw Error(`No news found`);let d=await Promise.all(u.map(e=>l(e,t)));return{title:`${a[t]}新闻`,link:i,item:d}}export{i as route};
//# sourceMappingURL=news-cn-wqKjXUzD.js.map