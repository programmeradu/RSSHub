{"version":3,"file":"user-DyCpGYIG.js","names":["route: Route","ofetch","cache"],"sources":["../../lib/routes/segmentfault/user.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { host, acw_sc__v2, parseList, parseItems } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/user/:name',\r\n    categories: ['programming'],\r\n    example: '/segmentfault/user/minnanitkong',\r\n    parameters: { name: '用户 Id，用户详情页 URL 可以找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['segmentfault.com/u/:name'],\r\n        },\r\n    ],\r\n    name: '用户',\r\n    maintainers: ['leyuuu', 'Fatpandac'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const name = ctx.req.param('name');\r\n    const apiURL = `${host}/gateway/homepage/${name}/timeline?size=20&offset=`;\r\n\r\n    const response = await ofetch(apiURL);\r\n    const data = response.rows;\r\n\r\n    const list = parseList(data);\r\n    const { author } = list[0];\r\n\r\n    const acwScV2Cookie = await acw_sc__v2(list[0].link, cache.tryGet);\r\n\r\n    const items = await Promise.all(list.map((item) => parseItems(acwScV2Cookie, item, cache.tryGet)));\r\n\r\n    return {\r\n        title: `segmentfault - ${author}`,\r\n        link: `${host}/u/${name}`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"0VAKA,MAAaA,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,eACb,QAAS,kCACT,WAAY,CAAE,KAAM,wBACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,8BAGjB,KAAM,KACN,YAAa,CAAC,SAAU,aACxB,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAS,GAAG,EAAK,oBAAoB,EAAK,2BAE1C,EAAW,MAAMC,EAAO,GACxB,EAAO,EAAS,KAEhB,EAAO,EAAU,GACjB,CAAE,UAAW,EAAK,GAElB,EAAgB,MAAM,EAAW,EAAK,GAAG,KAAMC,EAAM,QAErD,EAAQ,MAAM,QAAQ,IAAI,EAAK,IAAK,GAAS,EAAW,EAAe,EAAMA,EAAM,UAEzF,MAAO,CACH,MAAO,kBAAkB,IACzB,KAAM,GAAG,EAAK,KAAK,IACnB,KAAM"}