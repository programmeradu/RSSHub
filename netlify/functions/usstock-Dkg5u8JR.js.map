{"version":3,"file":"usstock-Dkg5u8JR.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/sina/finance/stock/usstock.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { parseArticle } from '../../utils';\r\n\r\nexport const route: Route = {\r\n    path: '/finance/stock/usstock/:cids?',\r\n    categories: ['new-media'],\r\n    example: '/sina/finance/stock/usstock',\r\n    parameters: { cids: '分区 id，见下表，默认为 `57045`' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['finance.sina.com.cn/stock/usstock', 'finance.sina.com.cn/'],\r\n            target: '/finance/stock/usstock',\r\n        },\r\n    ],\r\n    name: '美股',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    url: 'finance.sina.com.cn/stock/usstock',\r\n    description: `| 最新报道 | 中概股 | 国际财经 | 互联网 |\r\n| -------- | ------ | -------- | ------ |\r\n| 57045    | 57046  | 56409    | 40811  |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { cids = '57045' } = ctx.req.param();\r\n    const { limit = '50' } = ctx.req.query();\r\n    const { data: response } = await got('https://interface.sina.cn/pc_api/public_news_data.d.json', {\r\n        searchParams: {\r\n            cids,\r\n            pdps: '',\r\n            smartFlow: '',\r\n            editLevel: '0,1,2,3',\r\n            type: 'std_news,std_slide,std_video',\r\n            pageSize: limit,\r\n            cTime: '1483200000',\r\n            tm: Date.now(),\r\n            up: '0',\r\n            action: '0',\r\n            _: Date.now(),\r\n        },\r\n    });\r\n    const list = response.data.map((item) => ({\r\n        title: item.title,\r\n        link: item.url,\r\n        pubDate: parseDate(item.ctime, 'X'),\r\n        author: item.media,\r\n    }));\r\n\r\n    const items = await Promise.all(list.map((item) => parseArticle(item, cache.tryGet)));\r\n\r\n    return {\r\n        title: '美股|美股行情|美股新闻 - 新浪财经',\r\n        link: 'https://finance.sina.com.cn/stock/usstock/',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"wbAMA,MAAaA,EAAe,CACxB,KAAM,gCACN,WAAY,CAAC,aACb,QAAS,8BACT,WAAY,CAAE,KAAM,yBACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,oCAAqC,wBAC9C,OAAQ,2BAGhB,KAAM,KACN,YAAa,CAAC,UACd,UACA,IAAK,oCACL,YAAa;;4CAKjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,OAAO,SAAY,EAAI,IAAI,QAC7B,CAAE,QAAQ,MAAS,EAAI,IAAI,QAC3B,CAAE,KAAM,GAAa,MAAMC,EAAI,2DAA4D,CAC7F,aAAc,CACV,OACA,KAAM,GACN,UAAW,GACX,UAAW,UACX,KAAM,+BACN,SAAU,EACV,MAAO,aACP,GAAI,KAAK,MACT,GAAI,IACJ,OAAQ,IACR,EAAG,KAAK,SAGV,EAAO,EAAS,KAAK,IAAK,IAAU,CACtC,MAAO,EAAK,MACZ,KAAM,EAAK,IACX,QAAS,EAAU,EAAK,MAAO,KAC/B,OAAQ,EAAK,SAGX,EAAQ,MAAM,QAAQ,IAAI,EAAK,IAAK,GAAS,EAAa,EAAMC,EAAM,UAE5E,MAAO,CACH,MAAO,sBACP,KAAM,6CACN,KAAM"}