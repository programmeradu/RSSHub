{"version":3,"file":"home-BTfvddSh.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/lfsyd/home.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { ProcessForm, ProcessFeed } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/home',\r\n    categories: ['game'],\r\n    example: '/lfsyd/home',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.iyingdi.com/'],\r\n        },\r\n    ],\r\n    name: '首页',\r\n    maintainers: ['auto-bot-ty'],\r\n    handler,\r\n    url: 'www.iyingdi.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const rootUrl = 'https://www.iyingdi.com';\r\n    const url = 'https://api.iyingdi.com/mweb/feed/recommend-content-list';\r\n    const form = {\r\n        size: 30,\r\n        timestamp: '',\r\n    };\r\n    const response = await got({\r\n        method: 'post',\r\n        url,\r\n        headers: {\r\n            'App-Udid': 'unknown',\r\n            Host: 'api.iyingdi.com',\r\n            'Login-Token': 'nologin',\r\n            Origin: 'https://mob.iyingdi.com',\r\n            Platform: 'mweb',\r\n            Preid: '86f2007de00272e24a54831a621aecc5',\r\n            Referer: 'https://mob.iyingdi.com/',\r\n        },\r\n        form: ProcessForm(form, 'mweb'),\r\n    });\r\n    const { posts } = response.data;\r\n\r\n    const articleList = posts.map((item) => ({\r\n        title: item.post.title,\r\n        pubDate: parseDate(item.post.show_time * 1000),\r\n        link: `${rootUrl}/tz/post/${item.post.id}`,\r\n        guid: item.post.title,\r\n        postId: item.post.id,\r\n    }));\r\n    const items = await ProcessFeed(cache, articleList);\r\n\r\n    return {\r\n        title: '首页 - 旅法师营地',\r\n        link: rootUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"mcAMA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,QACb,QAAS,cACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,sBAGjB,KAAM,KACN,YAAa,CAAC,eACd,UACA,IAAK,oBAGT,eAAe,GAAU,CACrB,IAAM,EAAU,0BAEV,EAAO,CACT,KAAM,GACN,UAAW,IAET,EAAW,MAAMC,EAAI,CACvB,OAAQ,OACR,+DACA,QAAS,CACL,WAAY,UACZ,KAAM,kBACN,cAAe,UACf,OAAQ,0BACR,SAAU,OACV,MAAO,mCACP,QAAS,4BAEb,KAAM,EAAY,EAAM,UAEtB,CAAE,SAAU,EAAS,KAErB,EAAc,EAAM,IAAK,IAAU,CACrC,MAAO,EAAK,KAAK,MACjB,QAAS,EAAU,EAAK,KAAK,UAAY,KACzC,KAAM,GAAG,EAAQ,WAAW,EAAK,KAAK,KACtC,KAAM,EAAK,KAAK,MAChB,OAAQ,EAAK,KAAK,MAEhB,EAAQ,MAAM,EAAYC,EAAO,GAEvC,MAAO,CACH,MAAO,aACP,KAAM,EACN,KAAM"}