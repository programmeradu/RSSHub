import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=async n=>{let{year:i=new Date().getFullYear()}=n.req.param(),a=Number.parseInt(n.req.query(`limit`)??`30`,10),o=`https://id-info.jihs.go.jp`,s=new URL(`surveillance/idwr/jp/idwr/${i}/`,o).href,c=await t(s),l=r(c),u=l(`html`).attr(`lang`)??`ja`,d=l(`span.drawer-branding__subtitle`).text(),f=l(`a.sizeview`).slice(0,a).toArray().map(t=>{let n=l(t),r=n.parent(`p`),i=r.prev(`h2`).text(),a=r.html()??void 0,o=r.text().match(/〔(\d{4}年\d{1,2}月\d{1,2}日)発行〕/)?.[1],c=n.attr(`href`),f=o,p={title:i,description:a,pubDate:o?e(o,`YYYY年M月D日`):void 0,link:c?new URL(c,s).href:void 0,author:d,content:{html:a,text:a},updated:f?e(f,`YYYY年M月D日`):void 0,language:u},m=n,h=c?new URL(c,s).href:void 0;if(h){let e=`application/${h.split(/\./).pop()}`,t=m.text();p={...p,enclosure_url:h,enclosure_type:e,enclosure_title:t||i,enclosure_length:void 0}}return p});return{title:l(`title`).text(),description:l(`meta[name="keywords"]`).attr(`content`),link:s,item:f,allowEmpty:!0,image:l(`img.common-branding__logo-image`).attr(`src`)?new URL(l(`img.common-branding__logo-image`).attr(`src`),o).href:void 0,author:d,language:u,id:s}},a={path:`/jihs/idwr/:year?`,name:`感染症発生動向調査週報`,url:`id-info.jihs.go.jp`,maintainers:[`nczitzk`],handler:i,example:`/go/jihs/idwr/2025`,parameters:{year:{description:`Year, current year by default`}},description:":::tip\nTo subscribe to [感染症発生動向調査週報](https://id-info.jihs.go.jp/surveillance/idwr/jp/idwr/2025/), where the source URL is `https://id-info.jihs.go.jp/surveillance/idwr/jp/idwr/2025/`, extract the certain parts from this URL to be used as parameters, resulting in the route as [`/go/jihs/idwr/2025`](https://rsshub.app/go/jihs/idwr/2025).\n:::\n",categories:[`government`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`id-info.jihs.go.jp/surveillance/idwr/jp/idwr/:year`],target:e=>{let t=e.year;return`/go/jihs/idwr${t?`/${t}`:``}`}}],view:n.Articles,zh:{path:`/jihs/idwr/:year?`,name:`传染病发生动向调查周报`,url:`id-info.jihs.go.jp`,maintainers:[`nczitzk`],handler:i,example:`/go/jihs/idwr/2025`,parameters:{year:{description:`年份，默认为当前年份，可在对应页 URL 中找到`}},description:":::tip\n若订阅 [传染病发生动向调查周报](https://id-info.jihs.go.jp/surveillance/idwr/jp/idwr/2025/)，网址为 `https://id-info.jihs.go.jp/surveillance/idwr/jp/idwr/2025/`，请截取 `https://id-info.jihs.go.jp/surveillance/idwr/jp/idwr/` 到末尾 `/` 的部分 `2025` 作为 `year` 参数填入，此时目标路由为 [`/go/jihs/idwr/2025`](https://rsshub.app/go/jihs/idwr/2025)。\n:::\n"}};export{i as handler,a as route};
//# sourceMappingURL=idwr-iJof8kaX.js.map