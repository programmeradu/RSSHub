{"version":3,"file":"releases-ByOmWyeg.js","names":["route: Route","got"],"sources":["../../lib/routes/openwrt/releases.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/releases/:brand/:model',\r\n    radar: [\r\n        {\r\n            source: ['openwrt.org/toh/:band/:model'],\r\n            target: '/releases/:model',\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: [],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const brand = ctx.req.param('brand');\r\n    const model = ctx.req.param('model');\r\n    const url = `https://openwrt.org/toh/${brand}/${model}`;\r\n    const response = await got(url);\r\n    const $ = load(response.data);\r\n    const table = $('#installation').next();\r\n\r\n    return {\r\n        title: $('h1').text() + ' - OpenWrt Releases',\r\n        link: url,\r\n        description: $('.dw-content div.level1').text(),\r\n        language: 'en-US',\r\n        item: [\r\n            {\r\n                title: table.find('.supported_current_rel').text(),\r\n                link: url,\r\n                description: `Firmware OpenWrt Install: ${table.find('.firmware_openwrt_install_url').html()}<br><br>Firmware OpenWrt Upgrade: ${$('.firmware_openwrt_upgrade_url').html()}'`,\r\n            },\r\n        ],\r\n    };\r\n}\r\n"],"mappings":"+PAIA,MAAaA,EAAe,CACxB,KAAM,0BACN,MAAO,CACH,CACI,OAAQ,CAAC,gCACT,OAAQ,qBAGhB,KAAM,UACN,YAAa,GACb,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAQ,EAAI,IAAI,MAAM,SACtB,EAAQ,EAAI,IAAI,MAAM,SACtB,EAAM,2BAA2B,EAAM,GAAG,IAC1C,EAAW,MAAMC,EAAI,GACrB,EAAI,EAAK,EAAS,MAClB,EAAQ,EAAE,iBAAiB,OAEjC,MAAO,CACH,MAAO,EAAE,MAAM,OAAS,sBACxB,KAAM,EACN,YAAa,EAAE,0BAA0B,OACzC,SAAU,QACV,KAAM,CACF,CACI,MAAO,EAAM,KAAK,0BAA0B,OAC5C,KAAM,EACN,YAAa,6BAA6B,EAAM,KAAK,iCAAiC,OAAO,oCAAoC,EAAE,iCAAiC,OAAO"}