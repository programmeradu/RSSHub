import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";const n={path:`/calendar/:section?`,categories:[`finance`],example:`/wallstreetcn/calendar`,parameters:{section:"`macrodatas` 或 `report`，默认为 `macrodatas`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wallstreetcn.com/calendar`]}],name:`财经日历`,maintainers:[`TonyRL`],handler:o,url:`wallstreetcn.com/calendar`},r=`https://wallstreetcn.com`,i={CA:`CA10YR.OTC`,CN:`USDCNH.OTC`,DE:`DE30.OTC`,FR:`FR40.OTC`,IT:`EURUSD.OTC`,JP:`USDJPY.OTC`,UK:`UK100.OTC`,US:`DXY.OTC`},a=(e,t)=>`${r}/data-analyse/${t}/${i[e]}`;async function o(n){let{section:o=`macrodatas`}=n.req.param(),s=`${r}/calendar`,c=o===`macrodatas`?`https://api-one-wscn.awtmt.com`:`https://api-ddc-wscn.awtmt.com`,l=o===`macrodatas`?`${c}/apiv1/finance/macrodatas`:`${c}/finance/report/list`,u=await t(l,{query:o===`macrodatas`?{start:new Date().setHours(0,0,0,0)/1e3,end:Math.trunc(new Date().setHours(23,59,59,999)/1e3)}:void 0}),d=o===`macrodatas`?u.data.items.map(t=>({title:`${t.country}${t.title}`,description:`${t.country}${t.title} 重要性: ${`★`.repeat(t.importance)} 今值: ${t.actual||`-`}${t.actual&&t.unit} 预期: ${t.forecast||`-`}${t.forecast&&t.unit} 前值: ${t.revised||t.previous||`-`}${(t.revised||t.previous)&&t.unit}`,link:t.uri&&i[t.country_id]&&a(t.country_id,t.wscn_ticker),guid:t.id,pubDate:e(t.public_date,`X`),category:t.country})):u.data.items.map(e=>Object.fromEntries(u.data.fields.map((t,n)=>[t,e[n]]))).map(t=>({title:`${t.company_name} ${t.observation_date}`,description:`${t.code} ${t.company_name} ${t.observation_date} 预期EPS: ${t.eps_estimate===0?`-`:t.eps_estimate} 实际EPS: ${t.reported_eps===0?`-`:t.reported_eps} 差异度: ${t.surprise===0||t.surprise===-1?`-`:(t.surprise*100).toFixed(2)+`%`}`,link:s,guid:t.id,pubDate:e(t.public_date,`X`)}));return{title:`财经日历 - 华尔街见闻`,link:s,item:d,itunes_author:`华尔街见闻`,image:`https://static.wscn.net/wscn/_static/favicon.png`}}export{n as route};
//# sourceMappingURL=calendar-DSDEbulG.js.map