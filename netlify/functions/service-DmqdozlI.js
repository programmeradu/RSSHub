import{md5 as e}from"./md5-4BNsOP-F.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";const n=`https://www.showstart.com`,r=`秀动网`,i=(e=20)=>{let t=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`+Date.now(),n=[];for(let r=0;r<e;r++)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n.join(``)},a=new Map([[`token`,i(32).toLowerCase()]]),o={vendorName:``,deviceMode:``,deviceName:``,systemName:``,systemVersion:``,cpuMode:` `,cpuCores:``,cpuArch:``,memerySize:``,diskSize:``,network:``,resolution:`1920*1080`,pixelResolution:``},s=async()=>{let{result:e}=await c(`/waf/gettoken`);return a.set(`accessToken`,e.accessToken.access_token),a.set(`idToken`,e.idToken.id_token),a.get(`accessToken`)},c=async(n,r=e(Date.now().toString()),s)=>{let c=i(32)+Date.now(),l=await t(`https://www.showstart.com/api${n}`,{method:`POST`,headers:{cdeviceinfo:encodeURIComponent(JSON.stringify(o)),cdeviceno:a.get(`token`),cookie:[...a.entries()].map(([e,t])=>`${e}=${t}`).join(`; `),crpsign:e(r+`web`+a.get(`token`)+(s?JSON.stringify(s):``)+n+`999web`+c),crtraceid:c,csappid:`web`,cterminal:`web`,cusat:r,cusid:``,cusit:``,cusname:``,cusut:``,cversion:`999`},body:s});return l};function l(e,t){return e.sort((e,n)=>e[t]<n[t]?-1:e[t]>n[t]?1:0)}function u(e,t){let n=new Set;return e.filter(e=>n.has(e[t])?!1:(n.add(e[t]),!0))}async function d(e){e.pageNo=e.pageNo||`1`,e.pageSize=e.pageSize||`30`;let t=await s(),n=await c(`/web/activity/list`,t,e);return n.result.result.map(e=>_(e))}const f=e=>e?`<img src="${e}" />`:``,p=e=>e?`<p>演出时间：${e}</p>`:``,m=(e,t)=>e||t?`<p>地址：${[e,t].join(` - `)}</p>`:``,h=e=>e?`<p>艺人：${e}</p>`:``,g=e=>e?`<p>票价：${e}</p>`:``;function _(e){return{title:e.title,link:`${n}/event/${e.id}`,description:[f(e.poster),p(e.showTime),m(e.cityName,e.siteName),h(e.performers),g(e.price)].join(``)}}async function v(e){e.pageNo=e.pageNo||`1`,e.pageSize=e.pageSize||`30`;let t=await s(),r=await c(`/web/performer/list`,t,e);return r.result.result.map(e=>({title:e.name,link:`${n}/artist/${e.id}`,description:`id: ${e.id}`}))}async function y(e){let t=await s(),n=await c(`/web/performer/info`,t,e);return{id:e.performerId,name:n.result.name,content:n.result.content,avatar:n.result.avatar,poster:n.result.poster,styles:n.result.styles,activityList:n.result.activities.map(e=>_(e))}}async function b(e){let t=await s(),n=await c(`/web/brand/info`,t,e);return{id:e.brandId,name:n.result.name,content:n.result.content,avatar:n.result.avatar,poster:n.result.poster,activityList:n.result.activities.map(e=>_(e))}}async function x(e){e.pageNo=e.pageNo||`1`,e.pageSize=e.pageSize||`30`;let t=await s(),r=await c(`/web/site/list`,t,e);return r.result.result.map(e=>({title:`${e.cityName} - ${e.name}`,link:`${n}/venue/${e.id}`,description:`id: ${e.id}`}))}async function S(e){let t=await s(),n=await c(`/web/site/info`,t,e);return{id:e.siteId,name:`${n.result.cityName} - ${n.result.name}`,address:n.result.address,avatar:n.result.avatar,poster:n.result.poster}}async function C(e){e.pageNo=e.pageNo||`1`,e.pageSize=e.pageSize||`30`;let t=await s(),r=await c(`/web/brand/list`,t,e);return r.result.result.map(e=>({title:e.name,link:`${n}/host/${e.id}`,description:`id: ${e.id}`}))}async function w(){let e=await s();return c(`/web/activity/list/params`,e)}async function T(e=``){let t=await w(),r=l(t.result,`cityCode`);return r.filter(t=>t.cityName.includes(e.trim())).map(e=>({title:e.cityName,link:`${n}/event/list?cityCode=${e.cityCode}`,description:`cityCode: ${e.cityCode}`}))}async function E(e=``){let t=await w(),r=t.result.flatMap(e=>e.styles);return r=u(r,`key`),r=l(r,`key`),r.filter(t=>t.showName.includes(e.trim())).map(e=>({title:e.showName,link:`${n}/event/list?showStyle=${e.key}`,description:`showStyle: ${e.key}`}))}async function D(e,t){let n=await w(),r=n.result.find(t=>String(t.cityCode)===e);return r?{cityName:r.cityName,showName:r.styles.find(e=>String(e.key)===t)?.showName}:{}}export{n as HOST,r as TITLE,d as fetchActivityList,b as fetchBrandInfo,C as fetchBrandList,T as fetchCityList,D as fetchDictionary,y as fetchPerformerInfo,v as fetchPerformerList,S as fetchSiteInfo,x as fetchSiteList,E as fetchStyleList};
//# sourceMappingURL=service-DmqdozlI.js.map