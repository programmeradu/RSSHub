import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{load as n}from"cheerio";const r=`https://css-tricks.com`;async function i(e,i=``,a=``){let o=await t(r),s=n(o),c=s(e).toArray(),l=i?s(i).text().trim():``,u=a?s(a).text().trim():``;return{title:l,description:u,cards:c}}function a(e){return e.map(e=>{let t=n(e),r=t(e).attr(`id`),i=t(e).find(`div.article-thumbnail-wrap > a >img`).attr(`src`),a=t(`div.article-article`),o=a.find(`h2 > a`).text(),s=a.find(`h2 > a`).attr(`href`);return{id:r,title:o,link:s,thumbnail:i}})}function o(e){return e.map(e=>{let t=n(e),r=t(e).attr(`id`)?.replace(`mini-`,``),i=t(`h3.mini-card-title`).find(`a:not(.aal_anchor)`).text(),a=t(`h3.mini-card-title`).find(`a:not(.aal_anchor)`).attr(`href`);return{id:r,title:i,link:a,thumbnail:``}})}async function s(e,n=!1,i=`posts`){let s=n?o(e):a(e),l=s.map(e=>e.id.replace(`post-`,``)),u=await t(`${r}/wp-json/wp/v2/${i}?include=${l.join(`,`)}&_embed&per_page=${l.length}`),d=Object.fromEntries(u.map(e=>[e.id,e]));return l.map(e=>c(d[e]))}function c(t){let n=t.title.rendered,r=t.link,i=t.content.rendered,a=t.excerpt.rendered,o=t.date_gmt,s=t.modified_gmt,c=t._embedded?.author,l=c?.[0]?.name,u=c?.[0]?.link,d=c?.[0]?.avatar_urls[48],f=t._embedded?.[`wp:featuredmedia`]?.[0]?.source_url,p=t._embedded?.[`wp:term`]?.[1]?.map(e=>e.name);return{title:n,link:r,description:i,banner:f,image:f,pubDate:e(o),updated:e(s),author:[{name:l||``,url:u||``,avatar:d||``}],content:{html:i,text:a},category:p}}export{i as extractMiniCards,s as processWithWp,r as rootUrl};
//# sourceMappingURL=utils-4GdOexRu.js.map