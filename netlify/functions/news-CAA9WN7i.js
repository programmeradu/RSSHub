import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={ggtz:{url:`https://www.hafu.edu.cn/index/ggtz.htm`,root:`https://www.hafu.edu.cn/`,title:`河南财院 - 公告通知`,parseFn:h},jwc:{url:`https://jwc.hafu.edu.cn/tzgg.htm`,root:`https://jwc.hafu.edu.cn/`,title:`河南财院 教务处 - 公告通知`,parseFn:g},zsjyc:{url:`https://zsjyc.hafu.edu.cn/tztg.htm`,root:`https://zsjyc.hafu.edu.cn/`,title:`河南财院 招生就业处 - 公告通知`,parseFn:_}};let u=10;const d=async(e,t)=>{let n=l[t].url,r=l[t].title,i=await a(n),o=c(i.data);u=e.req.query(`limit`)||u;let s=await l[t].parseFn(e,o);return{title:r,link:n,resultList:s}};var f=d;async function p(t,n,i){let o=``,l=``;try{let t=await a(n);o=c(t.data);let u=o(`div[class=v_news_content]`).html();o(`[id^=nattach]`).length!==0&&(u=m(o,u,i)),l=r(s.join(e,`templates/hafu-5a2ab8aa.art`),u)()}catch{l=t}return{articleData:o,description:l}}function m(e,t,n){return n===`ggtz`?e(`[id^=nattach]`).prev().map((n,r)=>{let i=e(r).attr(`href`).slice(1),a=l.ggtz.root+i,o=e(r).text();return t+=`<br/>`,t+=`<a href=${a}>${o}</a>`,null}):e(`[id^=nattach]`).parent().prev().map((r,i)=>{let a=e(i).find(`a`).attr(`href`).slice(1),o=l[n].root+a,s=e(i).find(`a`).find(`span`).text();return t+=`<br/>`,t+=`<a href=${o}> ${s} </a>`,null}),t}async function h(e,t){let r=t(`a[class=c269582]`).parent().slice(0,u),a=await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c269582]`).attr(`href`).slice(3),a=l.ggtz.root+r,s=t(e).find(`a[class=c269582]`).attr(`title`),c=await n.tryGet(a,async()=>{let{articleData:n,description:c}=await p(r,a,`ggtz`),l=``,u=``;if(typeof n==`function`){let e=n(`h1`).next().text(),t=e.indexOf(`日期`);l=e.slice(0,t-2)||``;let r=e.substring(t+3,t+19);u=i(r,`YYYY-MM-DD HH:mm`)}else{let n=t(e).find(`a[class=c269582_date]`).text();u=i(n,`YYYY-MM-DD`)}return{title:s,description:c,pubDate:o(u,8),link:a,author:l}});return c}));return a}async function g(e,t){let r=t(`a[class=c259713]`).parent().parent().slice(0,u),a=await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c259713]`).attr(`href`),a=l.jwc.root+r,s=t(e).find(`a[class=c259713]`).attr(`title`),c=t(e).find(`span[class=timestyle259713]`).text(),u=i(c,`YYYY/MM/DD`),d=await n.tryGet(a,async()=>{let{articleData:e,description:t}=await p(r,a,`jwc`),n=``;return typeof e==`function`&&(n=e(`span[class=authorstyle259690]`).text()),{title:s,description:t,pubDate:o(u,8),link:a,author:`供稿单位：`+n}});return d}));return a}async function _(e,t){let r=t(`a[class=c127701]`).parent().parent().slice(0,u),a=await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c127701]`).attr(`href`),a=l.zsjyc.root+r,s=t(e).find(`a[class=c127701]`).attr(`title`),c=await n.tryGet(a,async()=>{let{articleData:n,description:c}=await p(r,a,`zsjyc`),l=``;if(typeof n==`function`){let e=n(`span[class=timestyle127702]`).text();l=i(e,`YYYY-MM-DD HH:mm`)}else{let n=t(e).find(`a[class=c269582_date]`).text();l=i(n,`YYYY-MM-DD`)}return{title:s,description:c,pubDate:o(l,8),link:a,author:`供稿单位：招生就业处`}});return c}));return a}const v={path:`/news/:type?`,categories:[`university`],example:`/hafu/news/ggtz`,parameters:{type:"分类，见下表（默认为 `ggtz`)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`河南财政金融学院`,maintainers:[],handler:y,description:`| 校内公告通知 | 教务处公告通知 | 招生就业处公告通知 |
| ------------ | -------------- | ------------------ |
| ggtz         | jwc            | zsjyc              |`};async function y(e){let t=e.req.param(`type`)??`ggtz`,{link:n,title:r,resultList:i}=await f(e,t);return{title:r,link:n,description:`河南财政金融学院 - 公告通知`,item:i}}export{v as route};
//# sourceMappingURL=news-CAA9WN7i.js.map