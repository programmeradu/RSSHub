import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import{ofetch_default as r}from"./ofetch-Bzt0BXUH.js";import*as i from"cheerio";const a=e=>e.map(e=>({title:e.title,author:e.author,description:e.brief.trim().replaceAll(`
`,`<br>`),link:`https://ak.hypergryph.com/news/${e.cid}`,pubDate:n(e.displayTime,`X`)})),o={path:`/arknights/news/:group?`,categories:[`game`],example:`/hypergryph/arknights/news`,parameters:{group:"分组，默认为 `ALL`"},radar:[{source:[`ak-conf.hypergryph.com/news`]}],name:`明日方舟 - 游戏公告与新闻`,maintainers:[`Astrian`],handler:s,url:`ak-conf.hypergryph.com/news`,description:`
| 全部 | 最新   | 公告         | 活动     | 新闻 |
| ---- | ------ | ------------ | -------- | ---- |
| ALL  | LATEST | ANNOUNCEMENT | ACTIVITY | NEWS |`};async function s(n){let{group:o=`ALL`}=n.req.param(),s=await t.tryGet(`hypergryph:arknights:news`,async()=>{let e=await r(`https://ak.hypergryph.com/news`),t=i.load(e),n=JSON.parse(t(`script:contains("initialData")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``);return JSON.parse(n[1].slice(2))[3].initialData},e.cache.routeExpire,!1),c=o===`ALL`?Object.values(s).flatMap(({list:e})=>a(e)):a(s[o].list),l=await Promise.all(c.map(e=>t.tryGet(e.link,async()=>{let t=await r(e.link),n=i.load(t),a=n(`div > div > div > div > div > div > div:nth-child(4)`);return e.description=a.length?a.html():e.description,e})));return{title:`《明日方舟》游戏公告与新闻`,link:`https://ak.hypergryph.com/news`,item:l,language:`zh-cn`}}export{o as route};
//# sourceMappingURL=news-B5bRsz_d.js.map