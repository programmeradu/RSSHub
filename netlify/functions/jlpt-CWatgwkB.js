import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{ViewType as r}from"./types-A5bA50Mg.js";import{load as i}from"cheerio";const a=async r=>{let a=Number.parseInt(r.req.query(`limit`)??`30`,10),o=`https://jlpt.neea.cn`,s=new URL(`index.do`,o).href,c=await n(s),l=i(c),u=l(`html`).attr(`lang`)??`zh-CN`,d=[];d=l(`div.indexcontent a`).slice(0,a).toArray().map(e=>{let n=l(e),r=n.text(),i=r.match(/(\d{4}-\d{2}-\d{2})/)?.[1],a=n.attr(`href`),s=i,c={title:r,pubDate:i?t(i):void 0,link:a?new URL(a,o).href:void 0,updated:s?t(s):void 0,language:u};return c}),d=(await Promise.all(d.map(t=>t.link?e.tryGet(t.link,async()=>{let e=await n(t.link),r=i(e),a=r(`div.dvTitle`).text(),o=r(`div.dvContent`).html()??``,s={title:a,description:o};return{...t,...s}}):t))).filter(e=>!0);let f=l(`title`).text();return{title:`${f.split(/-/).pop()} - ${l(`div.indexcontent h1`).text()}`,description:f,link:s,item:d,allowEmpty:!0,image:l(`div.header img`).attr(`arc`)?new URL(l(`div.header img`).attr(`arc`),o).href:void 0,author:f.split(/-/)[0],language:u,id:s}},o={path:`/jlpt`,name:`日本语能力测试 JLPT 通知`,url:`jlpt.neea.cn`,maintainers:[`nczitzk`],handler:a,example:`/neea/jlpt`,parameters:void 0,description:void 0,categories:[`study`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jlpt.neea.cn`],target:`/jlpt`}],view:r.Articles};export{a as handler,o as route};
//# sourceMappingURL=jlpt-CWatgwkB.js.map