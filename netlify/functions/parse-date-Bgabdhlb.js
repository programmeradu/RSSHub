import e from"dayjs";import t from"dayjs/plugin/customParseFormat.js";import n from"dayjs/plugin/duration.js";import r from"dayjs/plugin/isSameOrBefore.js";import i from"dayjs/plugin/weekday.js";e.extend(t),e.extend(n),e.extend(r),e.extend(i);const a=[{startAt:e(),regExp:/^(?:今[天日]|to?day?)(.*)/},{startAt:e().subtract(1,`days`),regExp:/^(?:昨[天日]|y(?:ester)?day?)(.*)/},{startAt:e().subtract(2,`days`),regExp:/^(?:前天|(?:the)?d(?:ay)?b(?:eforeyesterda)?y)(.*)/},{startAt:e().isSameOrBefore(e().weekday(1))?e().weekday(1).subtract(1,`week`):e().weekday(1),regExp:/^(?:周|星期)一(.*)/},{startAt:e().isSameOrBefore(e().weekday(2))?e().weekday(2).subtract(1,`week`):e().weekday(2),regExp:/^(?:周|星期)二(.*)/},{startAt:e().isSameOrBefore(e().weekday(3))?e().weekday(3).subtract(1,`week`):e().weekday(3),regExp:/^(?:周|星期)三(.*)/},{startAt:e().isSameOrBefore(e().weekday(4))?e().weekday(4).subtract(1,`week`):e().weekday(4),regExp:/^(?:周|星期)四(.*)/},{startAt:e().isSameOrBefore(e().weekday(5))?e().weekday(5).subtract(1,`week`):e().weekday(5),regExp:/^(?:周|星期)五(.*)/},{startAt:e().isSameOrBefore(e().weekday(6))?e().weekday(6).subtract(1,`week`):e().weekday(6),regExp:/^(?:周|星期)六(.*)/},{startAt:e().isSameOrBefore(e().weekday(7))?e().weekday(7).subtract(1,`week`):e().weekday(7),regExp:/^(?:周|星期)[天日](.*)/},{startAt:e().add(1,`days`),regExp:/^(?:明[天日]|y(?:ester)?day?)(.*)/},{startAt:e().add(2,`days`),regExp:/^(?:[后後][天日]|(?:the)?d(?:ay)?a(?:fter)?t(?:omrrow)?)(.*)/}],o=[{unit:`years`,regExp:/(\d+)(?:年|y(?:ea)?rs?)/},{unit:`months`,regExp:/(\d+)(?:[个個]?月|months?)/},{unit:`weeks`,regExp:/(\d+)(?:周|[个個]?星期|weeks?)/},{unit:`days`,regExp:/(\d+)(?:天|日|d(?:ay)?s?)/},{unit:`hours`,regExp:/(\d+)(?:[个個]?(?:小?时|時|点|點)|h(?:(?:ou)?r)?s?)/},{unit:`minutes`,regExp:/(\d+)(?:分[鐘钟]?|m(?:in(?:ute)?)?s?)/},{unit:`seconds`,regExp:/(\d+)(?:秒[鐘钟]?|s(?:ec(?:ond)?)?s?)/}],s=Object.keys(o).length,c=e=>e.toLowerCase().replaceAll(/(^an?\s)|(\san?\s)/g,`1`).replaceAll(/几|幾/g,`3`).replaceAll(/[\s,]/g,``),l=e=>{let t={},n=0;for(let r of e)for(;n<=s;n++){let e=o[n].regExp.exec(r);if(e){t[o[n].unit]=e[1];break}}return t},u=(t,...n)=>e(t,...n).toDate(),d=t=>{let n=c(t),r=n.match(/(?:\D+)?\d+(?!:|-|\/|(a|p)m)\D+/g);if(r){let t=r.pop();if(t){let n=/(.*)(?:[之以]?前|ago)$/.exec(t);if(n)return r.push(n[1]),e().subtract(e.duration(l(r))).toDate();let i=/(?:^in(.*)|(.*)[之以]?[后後])$/.exec(t);if(i)return r.push(i[1]??i[2]),e().add(e.duration(l(r))).toDate();r.push(t)}let n=r.shift();if(n)for(let t of a){let i=t.regExp.exec(n);if(i)return r.unshift(i[1]),t.startAt.set(`hour`,0).set(`minute`,0).set(`second`,0).set(`millisecond`,0).add(e.duration(l(r))).toDate()}}else for(let t of a){let r=t.regExp.exec(n);if(r)return e(`${t.startAt.format(`YYYY-MM-DD`)} ${/a|pm$/.test(r[1])?r[1].replace(/a|pm/,` $&`):r[1]}`).toDate()}return t};export{u as parseDate,d as parseRelativeDate};
//# sourceMappingURL=parse-date-Bgabdhlb.js.map