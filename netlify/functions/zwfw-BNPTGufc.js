import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import{logger_default as n}from"./logger-CWOoofbD.js";import"./proxy-D7ccvALx.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as r}from"./cache-kimkMTWJ.js";import{art as i}from"./render-CxhTJIsl.js";import{parseDate as a}from"./parse-date-Bgabdhlb.js";import{ofetch_default as o}from"./ofetch-Bzt0BXUH.js";import{got_default as s}from"./got-CdvI2yKX.js";import{timezone as c}from"./timezone-BrNu6iXe.js";import{puppeteer_default as l}from"./puppeteer-f0D6AISB.js";import u from"node:path";import{load as d}from"cheerio";t();async function f(e,t){try{let n=``,r=await t.newPage();return await r.setRequestInterception(!0),r.on(`request`,e=>{let t=e.resourceType();[`document`,`script`,`stylesheet`,`xhr`].includes(t)?e.continue():e.abort()}),await r.goto(e.link,{waitUntil:`networkidle0`,timeout:29e3}),await r.evaluate(e=>document.querySelector(e).click(),`.item-left .item .title .button`),await r.waitForSelector(`.item-left .item .bg_box div:nth-child(16)`,{timeout:5e3}),n=await r.content(),n||``}catch(e){return n.error(`Error when visiting /gov/hangzhou/zwfw:`,e),``}}function p(e){return{serviceInfo:{serviceTarget:e.find(`.row:nth(1)>div:nth(1)`).find(`.inner`).children().first().attr(`content`),processingMethods:e.find(`.row:nth(1)>div:nth(3)`).find(`.inner`).text(),processingLocation:e.find(`.row:nth(2)>div:nth(1)`).find(`.inner`).text(),processingTime:e.find(`.row:nth(3)>div:nth(1)`).find(`.inner`).text()},applicationInfo:{acceptanceConditions:e.find(`.row:nth(5)>div:nth(1)`).find(`.inner`).text(),prohibitedRequirements:e.find(`.row:nth(6)>div:nth(1)`).find(`.inner`).text(),quantityRestrictions:e.find(`.row:nth(7)>div:nth(1)`).find(`.inner`).text()},resultInfo:{approvalResult:e.find(`.row:nth(9)>div:nth(1)`).find(`.inner`).text(),approvalSample:e.find(`.row:nth(10)>div:nth(1)`).find(`.inner`).html(),approvalResultType:e.find(`.row:nth(10)>div:nth(3)`).find(`.inner`).text()},feeInfo:{isThereAFee:e.find(`.row:nth(12)>div:nth(1)`).find(`.inner`).text(),isOnlinePaymentSupported:e.find(`.row:nth(12)>div:nth(3)`).find(`.inner`).text()},approvalInfo:{authoritySource:e.find(`.row:nth(14)>div:nth(1)`).find(`.inner`).text(),exerciseLevel:e.find(`.row:nth(15)>div:nth(1)`).find(`.inner`).text(),implementingEntity:e.find(`.row:nth(15)>div:nth(3)`).find(`.inner`).text()},deliveryInfo:{isLogisticsSupported:e.find(`.row:nth(17)>div:nth(1)`).find(`.inner`).text(),deliveryTimeframe:e.find(`.row:nth(17)>div:nth(3)`).find(`.inner`).text(),deliveryMethods:e.find(`.row:nth(18)>div:nth(1)`).find(`.inner`).text()},agentService:e.find(`.row:nth(20)>div:nth(1)`).find(`.inner`).text(),otherInfo:{departmentName:e.find(`.row:nth(22)>div:nth(1)`).find(`.inner`).text(),matterType:e.find(`.row:nth(22)>div:nth(3)`).find(`.inner`).text(),acceptingInstitution:e.find(`.row:nth(23)>div:nth(1)`).find(`.inner`).text(),basicCode:e.find(`.row:nth(24)>div:nth(1)`).find(`.inner`).text(),implementationCode:e.find(`.row:nth(24)>div:nth(3)`).find(`.inner`).text(),scopeOfGeneralHandling:e.find(`.row:nth(25)>div:nth(1)`).find(`.inner`).text(),documentType:e.find(`.row:nth(25)>div:nth(3)`).find(`.inner`).text(),decisionMakingAuthority:e.find(`.row:nth(26)>div:nth(1)`).find(`.inner`).text(),delegatedDepartment:e.find(`.row:nth(26)>div:nth(3)`).find(`.inner`).text(),onlineProcessingDepth:e.find(`.row:nth(27)>div:nth(1)`).find(`.inner`).text(),reviewType:e.find(`.row:nth(27)>div:nth(3)`).find(`.inner`).text(),isItAvailableInTheGovernmentServiceHall:e.find(`.row:nth(28)>div:nth(1)`).find(`.inner`).text(),isSelfServiceTerminalProcessingSupported:e.find(`.row:nth(28)>div:nth(3)`).find(`.inner`).text(),isACommitmentSystemImplemented:e.find(`.row:nth(29)>div:nth(1)`).find(`.inner`).text(),authorityAttribute:e.find(`.row:nth(29)>div:nth(3)`).find(`.inner`).text(),isAppointmentBookingSupported:e.find(`.row:nth(30)>div:nth(1)`).find(`.inner`).text(),isOnlineProcessingAvailable:e.find(`.row:nth(30)>div:nth(3)`).find(`.inner`).text(),naturalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(1)`).find(`.inner`).text(),legalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(3)`).find(`.inner`).text(),rightsAndObligationsOfAdministrativeCounterparties:e.find(`.row:nth(32)>div:nth(1)`).find(`.inner`).text(),applicableObjectDescription:e.find(`.row:nth(33)>div:nth(1)`).find(`.inner`).text(),contentInvolved:e.find(`.row:nth(34)>div:nth(1)`).find(`.inner`).text()}}}const m={path:`/hangzhou/zwfw`,categories:[`government`],example:`/gov/hangzhou/zwfw`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hangzhou.gov.cn/col/col1256349/index.html`]}],name:`政务服务公开`,maintainers:[`flynncao`],handler:h,url:`hangzhou.gov.cn/col/col1256349/index.html`};async function h(){let t=`https://www.hangzhou.gov.cn/col/col1256349/index.html`,n=await o(t),m=await l(),h=n.replace(`<script type="text/xml">`,``).replace(`<\/script>`,``).replaceAll(`<recordset>`,``).replaceAll(`</recordset>`,``).replaceAll(`<record>`,``).replaceAll(`</record>`,``).replaceAll(`<![CDATA[`,``).replaceAll(`]]>`,``),g=d(h),_=g(`li.clearfix`).toArray().map(e=>{e=g(e);let n=e.find(`a`).first().text(),r=c(a(e.find(`span`).first().text(),`YYYY-MM-DD`),8),i=e.find(`a`).first().attr(`href`),o=new URL(i,t).href;return{title:n,link:o,pubDate:r}}).filter(e=>!e.title.includes(`置顶`)),v=await Promise.all(_.map(t=>r.tryGet(t.link,async()=>{let n=new URL(t.link).hostname;if(n===`www.zjzwfw.gov.cn`){let n=await f(t,m),r=d(n);t.description=i(u.resolve(e,`templates/jbxx-6230053c.art`),p(r(`.item-left .item .bg_box`))),t.author=`浙江政务服务网`,t.category=r(`meta[name="ColumnType"]`).attr(`content`)}else{let e=await s(t.link),r=d(e.data);n===`police.hangzhou.gov.cn`?(t.description=r(`.art-content .wz_con_content`).html(),t.author=r(`meta[name="ContentSource"]`).attr(`content`),t.category=r(`meta[name="ColumnType"]`).attr(`content`)):(t.description=r(`.article`).html(),t.author=r(`meta[name="ContentSource"]`).attr(`content`),t.category=r(`meta[name="ColumnType"]`).attr(`content`))}return t.pubDate=g(`meta[name="PubDate"]`).length?c(a(g(`meta[name="PubDate"]`).attr(`content`),`YYYY-MM-DD HH:mm`),8):t.pubDate,t})));return await m.close(),{allowEmpty:!0,title:`杭州市人民政府-政务服务公开`,link:`https://www.hangzhou.gov.cn/col/col1256349/index.html`,item:v}}export{m as route};
//# sourceMappingURL=zwfw-BNPTGufc.js.map