{"version":3,"file":"bossdesign-DBcrqRvE.js","names":["route: Route","cache","got","item"],"sources":["../../lib/routes/bossdesign/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/:category?',\r\n    categories: ['design'],\r\n    example: '/bossdesign',\r\n    parameters: { category: '分类，可在对应分类页 URL 中找到，留空为全部' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '分类',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    description: `| Boss 笔记 | 电脑日志        | 素材资源         | 设计师神器      | 设计教程        | 设计资讯            |\r\n| --------- | --------------- | ---------------- | --------------- | --------------- | ------------------- |\r\n| note      | computer-skills | design-resources | design-software | design-tutorial | design\\_information |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const category = ctx.req.param('category');\r\n    const limit = Number.parseInt(ctx.req.query('limit'), 10) || undefined;\r\n    const baseUrl = 'https://www.bossdesign.cn';\r\n\r\n    const currentCategory = await cache.tryGet(`bossdesign:categories:${category}`, async () => {\r\n        const { data: categories } = await got(`${baseUrl}/wp-json/wp/v2/categories`);\r\n        return categories.find((item) => item.slug === category || item.name === category);\r\n    });\r\n\r\n    const categoryId = currentCategory?.id;\r\n\r\n    const { data: posts } = await got(`${baseUrl}/wp-json/wp/v2/posts`, {\r\n        searchParams: {\r\n            categories: categoryId,\r\n            per_page: limit,\r\n            _embed: '',\r\n        },\r\n    });\r\n\r\n    const items = posts.map((item) => ({\r\n        title: item.title.rendered,\r\n        description: item.content.rendered,\r\n        pubDate: parseDate(item.date_gmt),\r\n        updated: parseDate(item.modified_gmt),\r\n        link: item.link,\r\n        guid: item.guid.rendered,\r\n        category: [...new Set([...item._embedded['wp:term'][0].map((item) => item.name), ...item._embedded['wp:term'][1].map((item) => item.name)])],\r\n    }));\r\n\r\n    return {\r\n        title: currentCategory?.name ? `${currentCategory.name} | Boss设计` : 'Boss设计 | 收集国外设计素材网站的资源平台。',\r\n        description: currentCategory?.description ?? 'Boss设计-收集国外设计素材网站的资源平台。专注于收集国外设计素材和国外设计网站，以及超实用的设计师神器，只为设计初学者和设计师提供海量的资源平台。..',\r\n        image: currentCategory?.cover ?? `${baseUrl}/wp-content/themes/pinghsu/images/Bossdesign-ico.ico`,\r\n        link: currentCategory?.link ?? baseUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"yUAKA,MAAaA,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,UACb,QAAS,cACT,WAAY,CAAE,SAAU,4BACxB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,UACd,UACA,YAAa;;8GAKjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,EAAI,IAAI,MAAM,YACzB,EAAQ,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,KAAO,IAAA,GACvD,EAAU,4BAEV,EAAkB,MAAMC,EAAM,OAAO,yBAAyB,IAAY,SAAY,CACxF,GAAM,CAAE,KAAM,GAAe,MAAMC,EAAI,GAAG,EAAQ,4BAClD,OAAO,EAAW,KAAM,GAAS,EAAK,OAAS,GAAY,EAAK,OAAS,KAGvE,EAAa,GAAiB,GAE9B,CAAE,KAAM,GAAU,MAAMA,EAAI,GAAG,EAAQ,sBAAuB,CAChE,aAAc,CACV,WAAY,EACZ,SAAU,EACV,OAAQ,MAIV,EAAQ,EAAM,IAAK,IAAU,CAC/B,MAAO,EAAK,MAAM,SAClB,YAAa,EAAK,QAAQ,SAC1B,QAAS,EAAU,EAAK,UACxB,QAAS,EAAU,EAAK,cACxB,KAAM,EAAK,KACX,KAAM,EAAK,KAAK,SAChB,SAAU,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,EAAK,UAAU,WAAW,GAAG,IAAK,GAASC,EAAK,MAAO,GAAG,EAAK,UAAU,WAAW,GAAG,IAAK,GAASA,EAAK,YAGxI,MAAO,CACH,MAAO,GAAiB,KAAO,GAAG,EAAgB,KAAK,WAAa,4BACpE,YAAa,GAAiB,aAAe,gFAC7C,MAAO,GAAiB,OAAS,GAAG,EAAQ,sDAC5C,KAAM,GAAiB,MAAQ,EAC/B,KAAM"}