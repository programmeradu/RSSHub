import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:category?`,categories:[`blog`],example:`/ianspriggs/portraits`,parameters:{category:`Category, see below, 3D PORTRAITS by default`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Category`,maintainers:[`nczitzk`],handler:l,description:`| 3D PORTRAITS | CHARACTERS |
| ------------ | ---------- |
| portraits    | characters |`};async function l(t){let{category:c=`portraits`}=t.req.param(),l=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):30,u=`Ian Spriggs`,d=`https://ianspriggs.com`,f=new URL(c,d).href,{data:p}=await a(f),m=s(p),h=m(`div.work-item`).slice(0,l).toArray().map(t=>{t=m(t);let n=t.find(`img`).first();return{title:t.find(`div.work-info`).text(),link:t.find(`a`).prop(`href`),description:r(o.join(e,`templates/description-0c90d488.art`),{images:n?.prop(`src`)?[{src:n.prop(`src`).replace(/_thumbnail\./,`.`),alt:n.prop(`alt`)}]:void 0}),author:u,pubDate:i(t.find(`div.work-info p`).last(),`YYYY`),enclosure_url:n?.prop(`src`)??void 0,enclosure_type:n?.prop(`src`)?`image/jpeg`:void 0}});h=await Promise.all(h.map(t=>n.tryGet(t.link,async()=>{let{data:n}=await a(t.link),c=s(n),l=c(`div.work-item img`).toArray().map(e=>(e=c(e),{src:e.prop(`src`).replace(/-\d+x\d+\./,`.`),alt:e.prop(`alt`)}));return t.title=c(`div.project-title`).text(),t.description+=r(o.join(e,`templates/description-0c90d488.art`),{images:l,description:c(`div.nectar-fancy-ul`).html()}),t.pubDate=i(c(`span.subheader`).last().text(),`YYYY`),t})));let g=new URL(`favicon.ico`,d).href;return{item:h,title:m(`title`).text(),link:f,description:m(`meta[property="og:description"]`).prop(`content`),language:m(`html`).prop(`lang`),icon:g,logo:g,subtitle:m(`a[aria-current="page"] span.menu-title-text`).text(),author:u}}export{c as route};
//# sourceMappingURL=ianspriggs-DJkF2pLt.js.map