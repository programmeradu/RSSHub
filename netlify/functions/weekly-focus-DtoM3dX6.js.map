{"version":3,"file":"weekly-focus-DtoM3dX6.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/visionias/weekly-focus.ts"],"sourcesContent":["import { Data, Route } from '@/types';\r\nimport { baseUrl, extractNews } from './utils';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/weeklyFocus',\r\n    example: '/visionias/weeklyFocus',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['visionias.in/current-affairs/weekly-focus'],\r\n            target: '/weeklyFocus',\r\n        },\r\n    ],\r\n    name: 'Weekly Focus',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx): Promise<Data> {\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 1;\r\n    const response = await ofetch(`${baseUrl}/current-affairs/weekly-focus/archive`);\r\n    const $ = load(response);\r\n    const cards = $('div.weekly-focus-single-card').slice(0, limit).toArray();\r\n    const individualLinks = cards.flatMap((card) =>\r\n        $(card)\r\n            .find('a:has(p)')\r\n            .toArray()\r\n            .map((item) => {\r\n                const link = $(item).attr('href');\r\n                return { link: link?.startsWith('http') ? link : `${baseUrl}${link}` };\r\n            })\r\n    );\r\n\r\n    const itemsPromise = await Promise.allSettled(individualLinks.map(({ link }) => extractNews({ link }, 'main > div > div.flex > div.flex.w-full > div.w-full.mt-6')));\r\n\r\n    return {\r\n        title: 'Weekly Focus | Current Affairs | Vision IAS',\r\n        link: `${baseUrl}/current-affairs/weekly-focus/archive`,\r\n        description: 'Weekly Focus provides weekly comprehensive analysis of current themes with multidimensional and consolidated content.',\r\n        language: 'en',\r\n        item: itemsPromise.map((item) => (item.status === 'fulfilled' ? item.value : { title: 'Error Parse News' })),\r\n        image: `${baseUrl}/current-affairs/images/weekly-focus-logo.svg`,\r\n        icon: `https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,\r\n        logo: `https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,\r\n        allowEmpty: true,\r\n    };\r\n}\r\n"],"mappings":"mWAKA,MAAaA,EAAe,CACxB,KAAM,eACN,QAAS,yBACT,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,6CACT,OAAQ,iBAGhB,KAAM,eACN,YAAa,CAAC,gBACd,WAGJ,eAAe,EAAQ,EAAoB,CACvC,IAAM,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,EAC/E,EAAW,MAAMC,EAAO,GAAG,EAAQ,wCACnC,EAAI,EAAK,GACT,EAAQ,EAAE,gCAAgC,MAAM,EAAG,GAAO,UAC1D,EAAkB,EAAM,QAAS,GACnC,EAAE,GACG,KAAK,YACL,UACA,IAAK,GAAS,CACX,IAAM,EAAO,EAAE,GAAM,KAAK,QAC1B,MAAO,CAAE,KAAM,GAAM,WAAW,QAAU,EAAO,GAAG,IAAU,QAIpE,EAAe,MAAM,QAAQ,WAAW,EAAgB,KAAK,CAAE,UAAW,EAAY,CAAE,QAAQ,+DAEtG,MAAO,CACH,MAAO,8CACP,KAAM,GAAG,EAAQ,uCACjB,YAAa,wHACb,SAAU,KACV,KAAM,EAAa,IAAK,GAAU,EAAK,SAAW,YAAc,EAAK,MAAQ,CAAE,MAAO,qBACtF,MAAO,GAAG,EAAQ,+CAClB,KAAM,0FACN,KAAM,0FACN,WAAY"}