import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={path:`/discuss/:type/:order`,categories:[`bbs`],example:`/nowcoder/discuss/2/4`,parameters:{type:`讨论区分区id 在 URL 中可以找到`,order:`排序方式`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`讨论区`,maintainers:[`LogicJake`],handler:o,description:`| 最新回复 | 最新发表 | 最新 | 精华 |
| -------- | -------- | ---- | ---- |
| 0        | 3        | 1    | 4    |`};async function o(a){let o=a.req.param(`type`),s=a.req.param(`order`),c=`https://www.nowcoder.com/discuss?type=${o}&order=${s}`,l=await n.get(c),u=i(l.data),d=u(`a.discuss-tab.selected`).text(),f=u(`li.selected a`).text(),p=u(`li.clearfix`).toArray().map(e=>{let t={title:u(e).find(`div.discuss-main.clearfix a:first`).text().trim().replaceAll(`
`,` `),link:u(e).find(`div.discuss-main.clearfix a[rel]`).attr(`href`)};return t}),m=await Promise.all(p.map(a=>{let o=a.title||`tzgg`,s=new URL(a.link,`https://www.nowcoder.com`).href.replace(/^(.*)\?(.*)$/,`$1`);return e.tryGet(s,async()=>{let e=await n.get(s),a=i(e.data),c=a(`span.post-time`).text(),l=a(`.nc-post-content`).html();return{title:o,link:s,description:l,pubDate:r(t(c),8)}})}));return{title:`${d}${f}——牛客网讨论区`,link:c,item:m}}export{a as route};
//# sourceMappingURL=discuss-OK8Inuzu.js.map