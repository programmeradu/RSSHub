import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{fixArticleContent as a}from"./wechat-mp-BwNEdjlr.js";import{load as o}from"cheerio";const s=`https://freewechat.com`,c={path:`/profile/:id`,categories:[`new-media`],example:`/freewechat/profile/MzI5NTUxNzk3OA==`,parameters:{id:`公众号 ID，可在URL中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`freewechat.com/profile/:id`]}],name:`公众号`,maintainers:[`TonyRL`],handler:l};async function l(c){let l=c.req.param(`id`),u=`${s}/profile/${l}`,{data:d}=await r(u,{headers:{"User-Agent":e.trueUA}}),f=o(d),p=f(`h2`).text().trim(),m=f(`.main`).toArray().slice(0,-1).map(e=>{e=f(e);let t=e.find(`h3 a`);return{title:t.text().trim(),author:p,link:`${s}${t.attr(`href`)}`,description:e.find(`.preview`).text(),category:e.find(`.classification`).text().trim()}}),h=await Promise.all(m.map(s=>t.tryGet(s.link,async()=>{let t=await r(s.link,{headers:{Referer:u,"User-Agent":e.trueUA}}),c=o(t.data);return c(`.js_img_placeholder`).remove(),c(`amp-img`).each((e,t)=>{t=c(t),t.replaceWith(`<img src="${new URL(t.attr(`src`),s.link).href}" width="${t.attr(`width`)}" height="${t.attr(`height`)}" decoding="async">`)}),c(`amp-video`).each((e,t)=>{t=c(t),t.replaceWith(`<video width="${t.attr(`width`)}" height="${t.attr(`height`)}" controls poster="${t.attr(`poster`)}">${t.html()}</video>`)}),s.description=a(c(`#js_content`)),s.pubDate=i(n(c(`#publish_time`).text()),8),s})));return{title:f(`head title`).text(),link:u,image:`https://freewechat.com/favicon.ico`,item:h}}export{c as route};
//# sourceMappingURL=profile-CxjGAgaF.js.map