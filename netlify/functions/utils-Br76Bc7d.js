import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";async function a(a,o,s,c,l,u,d){let f=await n(o).catch(()=>null);if(!f)return[];let p=i(f),m=p(`table.${c} > tbody > tr[height=20]`).toArray().map(e=>{let n=p(e),i=n.find(`td:eq(1)`),a=n.find(`td:eq(2)`),o=new URL(i.find(`a`).attr(`href`),s).href;return{title:i.find(`a`).attr(`title`),link:o,pubDate:r(t(a.find(`.${l}`).text(),`YYYY-MM-DD`),8)}}),h=await Promise.all(m.map(a=>e.tryGet(a.link,async()=>{let e=await n(a.link).catch(()=>null);if(!e||e.status>=300&&e.status<400)return{...a,description:`该通知无法直接预览，请点击原文链接↑查看`};let o=i(e);a.title=o(`.${u}`).text();let c=o(`script:contains("showVsbpdfIframe")`).length>0;if(c)a.description=`该通知无法直接预览，请点击原文链接↑查看`;else{let e=o(`.v_news_content`).html(),t=i(e);t(`a`).each(function(){let e=o(this),t=e.attr(`href`);t&&!t.startsWith(`http`)&&e.attr(`href`,new URL(t,s).href)}),a.description=t.html()}return a.pubDate=r(t(o(`.${d}`).text().replace(`发布时间：`,``)),8),a})));return h}export{a as getItems};
//# sourceMappingURL=utils-Br76Bc7d.js.map