import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{load as t}from"cheerio";const n={path:`/doulist/:id`,categories:[`social-media`],example:`/douban/doulist/37716774`,parameters:{id:`豆列id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`豆瓣豆列`,maintainers:[`LogicJake`,`honue`],handler:r};async function r(n){let r=n.req.param(`id`),i=`https://www.douban.com/doulist/${r}`,a=await e({method:`get`,url:i,headers:{Referer:`https://www.douban.com/doulist/${r}`}}),o=t(a.data),s=o(`#content h1`).text().trim(),c=o(`div.doulist-about`).text().trim(),l=o(`div.doulist-item`).toArray().map(e=>{let t=o(e).find(`div.source`).text().trim(),n=o(e).find(`div.bd.doulist-note div.title a`).text().trim(),r=o(e).find(`div.bd.doulist-note div.title a`).attr(`href`),i=o(e).find(`div.bd.doulist-note  div.abstract`).text().trim();if(t===`来自：豆瓣广播`&&(n=o(e).find(`p.status-content > a`).text().trim(),r=o(e).find(`p.status-content a`).attr(`href`),i=o(e).find(`span.status-recommend-text`).text().trim()),t===`来自：豆瓣电影`||t===`来自：豆瓣`||t===`来自：豆瓣读书`||t===`来自：豆瓣音乐`){n=o(e).find(`div.bd.doulist-subject div.title a`).text().trim(),r=o(e).find(`div.bd.doulist-subject div.title a`).attr(`href`),i=o(e).find(`div.bd.doulist-subject div.abstract`).text().trim();let t=o(e).find(`div.ft div.comment-item.content`).text().trim(),a=o(e).find(`div.post a img`).attr(`src`);i=`<div><img width="100" src="`+a+`"></div>`+i+`<blockquote>`+t+`</blockquote>`}let a=o(e).find(`div.ft div.actions time span`).attr(`title`),s={title:n,link:r,description:i,pubDate:new Date(a).toUTCString()};return s});return{title:s,link:i,description:c,item:l}}export{n as route};
//# sourceMappingURL=doulist-V4r161uf.js.map