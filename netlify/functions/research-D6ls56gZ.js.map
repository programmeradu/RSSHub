{"version":3,"file":"research-D6ls56gZ.js","names":["route: Route","got"],"sources":["../../lib/routes/nature/research.ts"],"sourcesContent":["import { Route } from '@/types';\r\n// example usage: `/nature/research/ng`\r\n// The journals from NPG are run by different group of people,\r\n// and the website of may not be consitent for all the journals\r\n//\r\n// This router has **just** been tested in:\r\n// nature:           Nature\r\n// nbt:              Nature Biotechnology\r\n// neuro:            Nature Neuroscience\r\n// ng:               Nature Genetics\r\n// ni:               Nature Immunology\r\n// nmeth:            Nature Method\r\n// nchem:            Nature Chemistry\r\n// nmat:             Nature Materials\r\n// natmachintell:    Nature Machine Intelligence\r\n\r\nimport { load } from 'cheerio';\r\nimport got from '@/utils/got';\r\nimport { baseUrl, cookieJar, getArticleList, getDataLayer, getArticle } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/research/:journal?',\r\n    categories: ['journal'],\r\n    example: '/nature/research/ng',\r\n    parameters: { journal: 'short name for a journal, `nature` by default' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: true,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['nature.com/:journal/research-articles', 'nature.com/:journal', 'nature.com/'],\r\n            target: '/research/:journal',\r\n        },\r\n    ],\r\n    name: 'Latest Research',\r\n    maintainers: ['y9c', 'TonyRL', 'pseudoyu'],\r\n    handler,\r\n    description: `|   \\`:journal\\`  |   Full Name of the Journal  | Route                                                                              |\r\n| :-----------: | :-------------------------: | ---------------------------------------------------------------------------------- |\r\n|     nature    |            Nature           | [/nature/research/nature](https://rsshub.app/nature/research/nature)               |\r\n|      nbt      |     Nature Biotechnology    | [/nature/research/nbt](https://rsshub.app/nature/research/nbt)                     |\r\n|     neuro     |     Nature Neuroscience     | [/nature/research/neuro](https://rsshub.app/nature/research/neuro)                 |\r\n|       ng      |       Nature Genetics       | [/nature/research/ng](https://rsshub.app/nature/research/ng)                       |\r\n|       ni      |      Nature Immunology      | [/nature/research/ni](https://rsshub.app/nature/research/ni)                       |\r\n|     nmeth     |        Nature Method        | [/nature/research/nmeth](https://rsshub.app/nature/research/nmeth)                 |\r\n|     nchem     |       Nature Chemistry      | [/nature/research/nchem](https://rsshub.app/nature/research/nchem)                 |\r\n|      nmat     |       Nature Materials      | [/nature/research/nmat](https://rsshub.app/nature/research/nmat)                   |\r\n| natmachintell | Nature Machine Intelligence | [/nature/research/natmachintell](https://rsshub.app/nature/research/natmachintell) |\r\n\r\n  -   Using router (\\`/nature/research/\\` + \"short name for a journal\") to query latest research paper for a certain journal of Nature Publishing Group.\r\n      If the \\`:journal\\` parameter is blank, then latest research of Nature will return.\r\n  -   The journals from NPG are run by different group of people, and the website of may not be consitent for all the journals\r\n  -   Only abstract is rendered in some researches`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const journal = ctx.req.param('journal') ?? 'nature';\r\n    const pageURL = `${baseUrl}/${journal}/research-articles`;\r\n\r\n    const pageResponse = await got(pageURL, { cookieJar });\r\n    const pageCapture = load(pageResponse.data);\r\n\r\n    const pageTitle = getDataLayer(pageCapture).content.journal.title;\r\n\r\n    let items = getArticleList(pageCapture);\r\n\r\n    items = await Promise.all(items.map((item) => getArticle(item)));\r\n\r\n    return {\r\n        title: `Nature (${pageTitle}) | Latest Research`,\r\n        description: pageCapture('meta[name=\"description\"]').attr('content') || `Nature, a nature research journal`,\r\n        link: pageURL,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+aAoBA,MAAaA,EAAe,CACxB,KAAM,sBACN,WAAY,CAAC,WACb,QAAS,sBACT,WAAY,CAAE,QAAS,iDACvB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,wCAAyC,sBAAuB,eACzE,OAAQ,uBAGhB,KAAM,kBACN,YAAa,CAAC,MAAO,SAAU,YAC/B,UACA,YAAa;;;;;;;;;;;;;;;qDAkBjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,EAAI,IAAI,MAAM,YAAc,SACtC,EAAU,GAAG,EAAQ,GAAG,EAAQ,oBAEhC,EAAe,MAAMC,EAAI,EAAS,CAAE,cACpC,EAAc,EAAK,EAAa,MAEhC,EAAY,EAAa,GAAa,QAAQ,QAAQ,MAExD,EAAQ,EAAe,GAI3B,MAFA,GAAQ,MAAM,QAAQ,IAAI,EAAM,IAAK,GAAS,EAAW,KAElD,CACH,MAAO,WAAW,EAAU,qBAC5B,YAAa,EAAY,4BAA4B,KAAK,YAAc,oCACxE,KAAM,EACN,KAAM"}