{"version":3,"file":"news-CgOxslU9.js","names":["route: Route","got"],"sources":["../../lib/routes/xboxfan/news.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseRelativeDate } from '@/utils/parse-date';\r\nimport md5 from '@/utils/md5';\r\n\r\nexport const route: Route = {\r\n    path: '/news',\r\n    categories: ['game'],\r\n    example: '/xboxfan/news',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['xboxfan.com/'],\r\n        },\r\n    ],\r\n    name: '资讯',\r\n    maintainers: ['XXY233'],\r\n    handler,\r\n    url: 'xboxfan.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://xboxfan.com/';\r\n    const { data: response } = await got(baseUrl);\r\n    const $ = load(response);\r\n\r\n    $('div.homeCom').remove();\r\n    $('div.homeMore').remove();\r\n\r\n    $('el-image').each((index, el_image) => {\r\n        const img = $('<img>');\r\n        img.attr('src', $(el_image).attr('src'));\r\n        $(el_image).replaceWith(img);\r\n    });\r\n\r\n    const items = $(`div.homeItem[v-if=\"showFeedLevel == 'read'\"]`)\r\n        .toArray()\r\n        .map((item) => {\r\n            const data = {\r\n                title: '资讯',\r\n                author: $(item).find('div.homeName').text(),\r\n                pubDate: parseRelativeDate($(item).find('div.homeTime').first().text().split(' ')[0]),\r\n            };\r\n\r\n            $(item).find('div.homeName').remove();\r\n            $(item).find('div.homeTime').remove();\r\n\r\n            const md5Value = md5($(item).text());\r\n            data.guid = md5Value;\r\n\r\n            data.description = $(item).html();\r\n\r\n            return data;\r\n        });\r\n\r\n    return {\r\n        title: '盒心光环·资讯',\r\n        link: 'https://xboxfan.com/',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"oWAMA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,QACb,QAAS,gBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,kBAGjB,KAAM,KACN,YAAa,CAAC,UACd,UACA,IAAK,gBAGT,eAAe,GAAU,CACrB,GACM,CAAE,KAAM,GAAa,MAAMC,EAAI,wBAC/B,EAAI,EAAK,GAEf,EAAE,eAAe,SACjB,EAAE,gBAAgB,SAElB,EAAE,YAAY,MAAM,EAAO,IAAa,CACpC,IAAM,EAAM,EAAE,SACd,EAAI,KAAK,MAAO,EAAE,GAAU,KAAK,QACjC,EAAE,GAAU,YAAY,KAG5B,IAAM,EAAQ,EAAE,gDACX,UACA,IAAK,GAAS,CACX,IAAM,EAAO,CACT,MAAO,KACP,OAAQ,EAAE,GAAM,KAAK,gBAAgB,OACrC,QAAS,EAAkB,EAAE,GAAM,KAAK,gBAAgB,QAAQ,OAAO,MAAM,KAAK,KAGtF,EAAE,GAAM,KAAK,gBAAgB,SAC7B,EAAE,GAAM,KAAK,gBAAgB,SAE7B,IAAM,EAAW,EAAI,EAAE,GAAM,QAK7B,MAJA,GAAK,KAAO,EAEZ,EAAK,YAAc,EAAE,GAAM,OAEpB,IAGf,MAAO,CACH,MAAO,UACP,KAAM,uBACN,KAAM"}