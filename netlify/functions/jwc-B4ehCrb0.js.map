{"version":3,"file":"jwc-B4ehCrb0.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/cupl/jwc.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport ofetch from '@/utils/ofetch';\r\n// import cache from '@/utils/cache';\r\n\r\nexport const route: Route = {\r\n    path: '/jwc',\r\n    url: 'jwc.cupl.edu.cn/index/tzgg.htm',\r\n    categories: ['university'],\r\n    example: '/cupl/jwc',\r\n    description: '中国政法大学教务处通知公告',\r\n    name: '教务处通知公告',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['jwc.cupl.edu.cn/index/tzgg.htm', 'jwc.cupl.edu.cn/'],\r\n            target: '/jwc',\r\n        },\r\n    ],\r\n    maintainers: ['Fgju'],\r\n    handler: async (/* ctx*/) => {\r\n        const host = 'https://jwc.cupl.edu.cn/';\r\n        const response = await ofetch(host + 'index/tzgg.htm');\r\n        const $ = load(response);\r\n\r\n        const list = $('li[id^=line_u8_]')\r\n            .toArray()\r\n            .map((elem) => {\r\n                const elem_ = $(elem);\r\n                const a = elem_.find('a');\r\n                return {\r\n                    link: a[1].attribs.href,\r\n                    title: $(a[1]).text(),\r\n                    pubDate: parseDate(elem_.find('span').text(), 'YYYY-MM-DD'),\r\n                    category: $(a[0]).text().slice(0, -1),\r\n                    description: '',\r\n                };\r\n            });\r\n        /*\r\n        const items = await Promise.all(\r\n            list.map((item) => {\r\n                cache.tryGet(item.link, async () => {\r\n                    const response = await ofetch(host + item.link.slice(3));\r\n                    const $ = load(response);\r\n                    const content = $('.form[name=_newscontent_fromname]').html();\r\n                    item.description = content ?? '';\r\n                    return item;\r\n                }\r\n                )\r\n            })\r\n        );\r\n        */\r\n        return {\r\n            title: '通知公告',\r\n            link: 'https://jwc.cupl.edu.cn/index/tzgg.htm',\r\n            description: '中国政法大学教务处通知公告',\r\n            language: 'zh-CN',\r\n            item: list,\r\n        };\r\n    },\r\n};\r\n"],"mappings":"+PAMA,MAAaA,EAAe,CACxB,KAAM,OACN,IAAK,iCACL,WAAY,CAAC,cACb,QAAS,YACT,YAAa,gBACb,KAAM,UACN,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,iCAAkC,oBAC3C,OAAQ,SAGhB,YAAa,CAAC,QACd,QAAS,SAAoB,CACzB,IACM,EAAW,MAAMC,EAAO,0CACxB,EAAI,EAAK,GAET,EAAO,EAAE,oBACV,UACA,IAAK,GAAS,CACX,IAAM,EAAQ,EAAE,GACV,EAAI,EAAM,KAAK,KACrB,MAAO,CACH,KAAM,EAAE,GAAG,QAAQ,KACnB,MAAO,EAAE,EAAE,IAAI,OACf,QAAS,EAAU,EAAM,KAAK,QAAQ,OAAQ,cAC9C,SAAU,EAAE,EAAE,IAAI,OAAO,MAAM,EAAG,IAClC,YAAa,MAiBzB,MAAO,CACH,MAAO,OACP,KAAM,yCACN,YAAa,gBACb,SAAU,QACV,KAAM"}