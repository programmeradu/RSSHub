{"version":3,"file":"utils-Daw-I_nW.js","names":["got"],"sources":["../../lib/routes/aisixiang/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport timezone from '@/utils/timezone';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nconst ossUrl = 'https://oss.aisixiang.com';\r\nconst rootUrl = 'https://www.aisixiang.com';\r\n\r\nconst ProcessFeed = (limit, tryGet, items) =>\r\n    Promise.all(\r\n        items.slice(0, limit).map((item) =>\r\n            tryGet(item.link, async () => {\r\n                const { data: detailResponse } = await got(item.link);\r\n\r\n                const content = load(detailResponse);\r\n\r\n                const commentMatches = content('h3.comment-header')\r\n                    .text()\r\n                    .match(/评论（\\d+）/);\r\n\r\n                item.title = content('h3').first().text().split('：').pop();\r\n                item.description = content('div.article-content').html();\r\n                item.author = content('div.about strong').first().text();\r\n                item.category = content('u')\r\n                    .first()\r\n                    .parent()\r\n                    .find('u')\r\n                    .toArray()\r\n                    .map((c) => content(c).text());\r\n                item.pubDate = timezone(parseDate(content('div.info').text().split('时间：').pop()), +8);\r\n                item.upvotes = content('span.like-num').text() ? Number.parseInt(content('span.like-num').text(), 10) : 0;\r\n                item.comments = commentMatches ? Number.parseInt(commentMatches[1], 10) : 0;\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\nexport { rootUrl, ossUrl, ProcessFeed };\r\n"],"mappings":"sLAKA,MAAM,EAAS,4BACT,EAAU,4BAEV,GAAe,EAAO,EAAQ,IAChC,QAAQ,IACJ,EAAM,MAAM,EAAG,GAAO,IAAK,GACvB,EAAO,EAAK,KAAM,SAAY,CAC1B,GAAM,CAAE,KAAM,GAAmB,MAAMA,EAAI,EAAK,MAE1C,EAAU,EAAK,GAEf,EAAiB,EAAQ,qBAC1B,OACA,MAAM,WAeX,MAbA,GAAK,MAAQ,EAAQ,MAAM,QAAQ,OAAO,MAAM,KAAK,MACrD,EAAK,YAAc,EAAQ,uBAAuB,OAClD,EAAK,OAAS,EAAQ,oBAAoB,QAAQ,OAClD,EAAK,SAAW,EAAQ,KACnB,QACA,SACA,KAAK,KACL,UACA,IAAK,GAAM,EAAQ,GAAG,QAC3B,EAAK,QAAU,EAAS,EAAU,EAAQ,YAAY,OAAO,MAAM,OAAO,OAAQ,GAClF,EAAK,QAAU,EAAQ,iBAAiB,OAAS,OAAO,SAAS,EAAQ,iBAAiB,OAAQ,IAAM,EACxG,EAAK,SAAW,EAAiB,OAAO,SAAS,EAAe,GAAI,IAAM,EAEnE"}