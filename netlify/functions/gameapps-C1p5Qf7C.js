import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{rss_parser_default as o}from"./rss-parser-1vyhErsD.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/`,example:`/gameapps`,radar:[{source:[`gameapps.hk/`]}],name:`最新消息`,maintainers:[`TonyRL`],handler:u,url:`gameapps.hk/`};async function u(){let t=`https://www.gameapps.hk`,l=await o.parseURL(`${t}/rss`),u=await Promise.all(l.items.map(o=>n.tryGet(o.link,async()=>{let n=await a(o.link,{headers:{Referer:t}}),l=c(n);o.title=l(`meta[property="og:title"]`).attr(`content`)??l(`.news-title h1`).text();let u=l(`.pagination li`).not(`.disabled`).not(`.active`).find(`a`).toArray().map(e=>`${t}${e.attribs.href}`);l(`.pages`).remove();let d=l(`.news-content`);if(delete o.content,delete o.contentSnippet,delete o.isoDate,u.length){let e=await Promise.all(u.map(async e=>{let t=await a(e,{headers:{referer:o.link}}),n=c(t);return n(`.pages`).remove(),n(`.news-content`).html()}));d.append(e)}return o.description=r(s.join(e,`templates/description-2397f90e.art`),{intro:l(`div.introduction.media.news-intro div.media-body`).html()?.trim(),desc:d.html()?.trim()}),o.guid=o.guid.slice(0,o.link.lastIndexOf(`/`)),o.pubDate=i(o.pubDate),o.enclosure_url=l(`div.introduction.media.news-intro div.media-left`).find(`img`).attr(`src`),o.enclosure_type=`image/jpeg`,o})));return{title:l.title,link:l.link,description:l.description,image:`${t}/static/favicon/apple-touch-icon.png`,item:u,language:l.language}}export{l as route};
//# sourceMappingURL=gameapps-C1p5Qf7C.js.map