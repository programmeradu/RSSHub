import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{got_default as i}from"./got-CdvI2yKX.js";import{invalid_parameter_default as a}from"./invalid-parameter-CUJdROXf.js";import o from"node:path";t();const s=`https://apiv3.fansly.com`,c=`https://fansly.com`,l=`${c}/assets/images/icons/apple-touch-icon.png`,u=(e,t)=>{let n=t.find(t=>t.id===e);return{displayName:n.displayName,username:n.username}},d=e=>n.tryGet(`fansly:account:${e.toLowerCase()}`,async()=>{let{data:t}=await i(`${s}/api/v1/account`,{searchParams:{usernames:e,"ngsw-bypass":!0}});if(!t.response.length)throw new a(`This profile or page does not exist.`);return t.response[0]}),f=async e=>{let{data:t}=await i(`${s}/api/v1/timelinenew/${e}`,{searchParams:{before:0,after:0,wallId:``,contentSearch:``,"ngsw-bypass":!0}});return t.response},p=e=>n.tryGet(`fansly:tag:${e.toLowerCase()}`,async()=>{let{data:t}=await i(`${s}/api/v1/contentdiscovery/media/tag`,{searchParams:{tag:e,"ngsw-bypass":!0}});if(!t.response.mediaOfferSuggestionTag)throw Error(`Couldn't find this hashtag.`);return t.response.mediaOfferSuggestionTag.id}),m=async e=>{let{data:t}=await i(`${s}/api/v1/contentdiscovery/media/suggestionsnew`,{searchParams:{before:0,after:0,tagIds:e,limit:25,offset:0,"ngsw-bypass":!0}});return t.response},h=(e,t)=>e.content.replaceAll(`
`,`<br>`)+`<br>`+g(e.attachments,t),g=(e,t)=>e.map(e=>{switch(e.contentType){case 1:return _(e.contentId,t.accountMedia);case 2:{let n=``,r=t.accountMediaBundles.find(t=>t.id===e.contentId);for(let e of r.accountMediaIds)n+=_(e,t.accountMedia);return n}case 8:{let n=`<br><br>`,r=t.aggregatedPosts.find(t=>t.id===e.contentId)||t.posts.find(t=>t.id===e.contentId);return n+=h(r,t),n}case 7100:return b(e.contentId,t.tipGoals);case 32001:return``;case 42001:return y(e.contentId,t.polls);default:throw Error(`Unhandled attachment type: ${e.contentType} for post ${e.postId}`)}}).join(``),_=(e,t)=>{let n=t.find(t=>t.id===e);return n?v(n.preview??n.media):``},v=t=>{switch(t.mimetype){case`image/gif`:case`image/jpeg`:case`image/png`:case`video/mp4`:case`audio/mp4`:return r(o.join(e,`templates/media-cbeaddee.art`),{poster:t.mimetype===`video/mp4`?t.variants[0].locations[0]:null,src:t.locations[0]});default:throw Error(`Unhandled media type: ${t.mimetype}`)}},y=(t,n)=>{let i=n.find(e=>e.id===t);return r(o.join(e,`templates/poll-b24b5e1f.art`),{title:i.question,options:i.options,version:i.version})},b=(t,n)=>{let i=n.find(e=>e.id===t);return r(o.join(e,`templates/tip-goal-785cdd38.art`),{label:i.label,description:i.description,currentAmount:i.currentAmount,goalAmount:i.goalAmount,currentPercentage:i.currentPercentage})};export{c as baseUrl,u as findAccountById,d as getAccountByUsername,p as getTagId,m as getTagSuggestion,f as getTimelineByAccountId,l as icon,h as parseDescription};
//# sourceMappingURL=utils-8B-4FM_T.js.map