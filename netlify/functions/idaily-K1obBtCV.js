import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";t();const s={path:[`/:language?`],name:`每日环球视野`,example:`/idaily`,maintainers:[`zphw`,`nczitzk`],parameters:{language:`语言，见下表，默认为简体中文`},radar:[{source:[`idai.ly/`]}],handler:c,description:`| 简体中文 | 繁体中文 |
| -------- | -------- |
| zh-hans  | zh-hant  |`};async function c(t){let{language:s=`zh-hans`}=t.req.param(),c=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):100,l=new URL(`api/list/v3/iphone/${s}`,`https://idaily-cdn.idailycdn.com`).href,u=`https://idai.ly`,{data:d}=await i(l),f=d.filter(e=>e.ui_sets?.caption_subtitle).slice(0,c).map(t=>{let i=t.ui_sets?.cover_landscape_hd_4k??t.cover_landscape_hd;return{title:`${t.ui_sets?.caption_subtitle} - ${t.title}`,link:t.link_share,description:n(a.join(e,`templates/description-3626107f.art`),{images:i?[{src:i,alt:t.ui_sets?.caption_subtitle??t.title}]:void 0,intro:t.content}),author:t.location,category:t.tags?.map(e=>e.name),guid:`idaily-${t.guid}`,pubDate:r(t.pubdate_timestamp,`X`),updated:r(t.lastupdate_timestamp,`X`),enclosure_url:i,enclosure_type:`image/${i.split(/\./).pop()}`}}),{data:p}=await i(u),m=o(p),h=m(`title`).text(),g=new URL(`img/idaily/logo_2x.png`,u).href;return{item:f,title:h,link:u,description:m(`meta[name="description"]`).prop(`content`),language:`zh`,image:g,subtitle:m(`meta[name="keywords"]`).prop(`content`),author:h.split(/\s/)[0],allowEmpty:!0}}export{s as route};
//# sourceMappingURL=idaily-K1obBtCV.js.map