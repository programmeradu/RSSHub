import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{load as n}from"cheerio";const r={path:`/list/:category?`,categories:[`new-media`],example:`/dedao/list/年度日更`,parameters:{category:`分类名，默认为年度日更`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`igetget.com/`]}],name:`首页`,maintainers:[`nczitzk`],handler:i,url:`igetget.com/`};async function i(r){let i=r.req.param(`category`)??`年度日更`,a=`https://www.igetget.com`,o=await t({method:`get`,url:a}),s=`${a}${o.data.match(/<a href="(.*)">年度日更<\/a>/)[1]}`,c=await t({method:`get`,url:s}),l=`${a}${c.data.match(RegExp(`<span>`+i+String.raw`<\/span><a href="(.*)" rel="tag"><\/a>`))[1].split(`"`)[0]}`,u=await t({method:`get`,url:l}),d=n(u.data),f=d(`.pro-info p a`).toArray().slice(0,r.req.query(`limit`)?Number.parseInt(r.req.query(`limit`)):10).map(e=>(e=d(e),{title:e.text(),link:`${a}${e.attr(`href`)}`}));return f=await Promise.all(f.map(r=>e.tryGet(r.link,async()=>{let e=await t({method:`get`,url:r.link}),i=n(e.data);return i(`.more-bt`).remove(),r.description=i(`.main-content-wrapper`).html(),r}))),{title:`得到 - ${i}`,link:l,item:f}}export{r as route};
//# sourceMappingURL=list-DRQZIelS.js.map