import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{invalid_parameter_default as r}from"./invalid-parameter-CUJdROXf.js";import{load as i}from"cheerio";const a={today:{label:`Today's News`,scene:12,view:14},"intrusion-daily-cyber-threat-alert":{label:`Cyberattacks`,scene:13,view:15},"ransomware-minute":{label:`Ransomware`,scene:16,view:18},cryptocrime:{label:`Cryptocrime`,scene:18,view:20},"hack-blotter":{label:`Hack Blotter`,scene:19,view:21},"cybersecurity-venture-capital-vc-deals":{label:`VC Deal Flow`,scene:3,view:3},"mergers-and-acquisitions-report":{label:`M&A Tracker`,scene:11,view:13}},o={name:`News`,categories:[`programming`],path:`/news/:category?`,example:`/cybersecurityventures/news`,radar:Object.keys(a).map(e=>({source:[`cybersecurityventures.com/${e}`],target:`/news/${e}`,title:a[e].label})),parameters:{category:{description:`news category`,default:`today`,options:Object.keys(a).map(e=>({value:e,label:a[e].label}))}},handler:s,maintainers:[`KarasuShin`],features:{supportRadar:!0},view:n.Articles};async function s(n){let o=n.req.param(`category`)??`today`,s=n.req.query(`limit`)??20;if(!(o in a))throw new r(`Invalid category`);let{scene:c,view:l,label:u}=a[o],d=await t(`https://us-east-1-renderer-read.knack.com/v1/scenes/scene_${c}/views/view_${l}/records?format=raw&page=1&rows_per_page=${s}&sort_field=field_2&sort_order=desc`,{headers:{"X-Knack-Application-Id":`6013171b60be8f001cb27363`,"X-Knack-Rest-Api-Key":`renderer`}});return{title:`${u} - Cybercrime Magazine`,link:`https://cybersecurityventures.com//${o}`,item:d.records.map(t=>{let n=i(t.field_3,null,!1),r=n(`a`).attr(`href`),a=t.field_4,o=`<p>${a}</p><br>${n.html()}`;return{title:t.field_5,description:o,pubDate:e(t.field_2.iso_timestamp),link:r,guid:`cybersecurityventures:${t.id}`}})}}export{o as route};
//# sourceMappingURL=news-CeAci0hl.js.map