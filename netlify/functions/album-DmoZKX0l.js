import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{ofetch_default as i}from"./ofetch-Bzt0BXUH.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import o from"node:path";t();const s={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},c={path:`/album/:id`,categories:[`multimedia`],example:`/radio/album/15682090498666`,parameters:{id:`专辑 id，可在对应专辑页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`专辑`,maintainers:[`nczitzk`],handler:l,description:"如果订阅 [中国相声榜](https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666)，其 URL 为 `https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666`，可以得到 `columnId` 为 `15682090498666`\n\n  所以对应路由为 [`/radio/album/15682090498666`](https://rsshub.app/radio/album/15682090498666)\n\n::: tip\n  部分专辑不适用该路由，此时可以尝试 [节目](#yun-ting-jie-mu) 路由\n:::"};async function l(t){let c=t.req.param(`id`),l=`https://ytweb.radio.cn`,u=`${l}/share/albumDetail?columnId=${c}`,d=await i(`https://ytapi.radio.cn/ytsrv/srv/wifimusicbox/demand/detail`,{method:`POST`,headers:{accept:`application/json, text/plain, */*`,"content-type":`application/x-www-form-urlencoded`,equipmentSource:`WEB`,equipmentType:`3`,platformCode:`H5`,productId:`1605403829833195520`,providerCode:`25010`,referer:`https://ytweb.radio.cn/`,timestamp:String(Date.now()),version:`4.0.0`},body:new URLSearchParams({pageIndex:`0`,sortType:``,mobileId:``,providerCode:`25010`,pid:c,paySongFlag:`1`,richText:`1`,h5flag:`1`}),parseResponse:JSON.parse}),f=d.con.map(t=>{let i=t.playUrlHigh??t.playUrlMedium??t.playUrlLow??t.playUrl;i=/\.m3u8$/.test(i)?t.downloadUrl:i;let u=new URL(i).pathname.split(`.`).pop(),d=u?`audio/${s[u]}`:``;return{guid:t.id,title:t.name,link:`${l}/share/albumPlay?correlateId=${t.id}&columnId=${c}`,description:n(o.join(e,`templates/description-368e71de.art`),{enclosure_url:i,enclosure_type:d}),pubDate:a(r(t.createTime),8),enclosure_url:i,enclosure_type:d,enclosure_length:t.fileSize,itunes_duration:t.duration,itunes_item_image:t.logoUrl}});return{title:`云听 - ${d.columnName}`,link:u,item:f,image:d.posterInfo.imgUrl,logo:d.logoUrl,description:d.descriptions??d.descriptionSimple,itunes_author:d.ownerNickName||`radio.cn`}}export{c as route};
//# sourceMappingURL=album-DmoZKX0l.js.map