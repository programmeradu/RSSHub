import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=async n=>{let{id:i}=n.req.param(),a=`https://community.chocolatey.org`,o=new URL(`packages/${i}`,a).href,s=await t(o),c=r(s),l=c(`html`).attr(`lang`)??`en`,u=c(`meta[property="og:title"]`).attr(`content`),d=c(`div#description`).html(),f=c(`h3.mt-0.mb-3`).last().text(),p=c(`a[data-package-tag]`).toArray(),m=[...new Set(p.map(e=>c(e).text()).filter(Boolean))],h=c(`img[alt="gravatar"]`).toArray(),g=h.map(e=>{let t=c(e).parent();return{name:t.find(`span`).text(),url:t.attr(`href`)?new URL(t.attr(`href`),a).href:void 0,avatar:t.attr(`src`)}}),_=`chocolatey-${u}`,v=c(`div.package-logo img`).attr(`src`)?new URL(c(`div.package-logo img`).attr(`src`),a).href:void 0,y=f,b={title:u,description:d,pubDate:f?e(f):void 0,link:o,category:m,author:g,guid:_,id:_,content:{html:d,text:d},image:v,banner:v,updated:y?e(y):void 0,language:l},x=[b];return{title:c(`title`).first().text(),description:c(`meta[property="og:description"]`).attr(`content`),link:o,item:x,allowEmpty:!0,image:c(`meta[property="og:image"]`).attr(`content`),author:c(`meta[property="og:site_name"]`).attr(`content`),language:l,id:c(`meta[property="og:url"]`).attr(`content`)}},a={path:`/packages/:id`,name:`Package`,url:`community.chocolatey.org`,maintainers:[`nczitzk`],handler:i,example:`/chocolatey/packages/microsoft-edge`,parameters:{id:{description:`Package ID`}},description:void 0,categories:[`program-update`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`community.chocolatey.org/packages`],target:e=>{let t=e.id;return`/chocolatey/package${t?`/${t}`:``}`}}],view:n.Notifications,zh:{path:`/packages/:id`,name:`程序包`,url:`community.chocolatey.org`,maintainers:[`nczitzk`],handler:i,example:`/chocolatey/package/microsoft-edge`,parameters:{id:{description:`程序包 ID`}},description:void 0}};export{i as handler,a as route};
//# sourceMappingURL=packages-CuLK91Yg.js.map