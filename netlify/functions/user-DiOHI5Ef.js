import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";const r={path:`/user/:username/:type?`,categories:[`picture`],example:`/pinterest/user/howieserious`,parameters:{username:`Username`,type:{description:"Type, default to `_created`",default:`_created`,options:[{value:`_created`,label:`Created`},{value:`_saved`,label:`Saved`}]}},radar:[{source:[`www.pinterest.com/:id/:type?`,`www.pinterest.com/:id`],target:`/user/:id/:type?`}],name:`User`,maintainers:[`TonyRL`],handler:a},i=`https://www.pinterest.com`;async function a(e){let{username:n,type:r=`_created`}=e.req.param(),a=await o(n),l=r===`_created`?await s(n,a.id):await c(n),u=r===`_created`?l.map(e=>({title:e.title||e.seo_title,description:`${e.grid_description}<br><img src="${e.images.orig.url}">`,link:`${i}${e.seo_url}`,author:e.pinner.full_name,pubDate:t(e.created_at),image:e.images.orig.url})):l.map(e=>({title:e.name,description:e.description+(e.images?.[`170x`]?`<br>`+e.images[`170x`].map(e=>`<img src="${e.url}">`).join(``):``),link:`${i}${e.url}`,author:e.owner.full_name,pubDate:t(e.created_at),image:e.image_cover_hd_url}));return{title:a.seo_title,description:a.seo_description,image:a.image_xlarge_url??a.image_medium_url,link:`${i}/${n}/`,item:u}}const o=t=>e.tryGet(`pinterest:user:${t}`,async()=>{let e=await n(`${i}/resource/UserResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_created.js`},query:{source_url:`/${t}/_created`,data:JSON.stringify({options:{username:t,field_set_key:`unauth_profile`},context:{}}),_:Date.now()}});return e.resource_response.data}),s=async(e,t)=>{let r=await n(`${i}/resource/UserActivityPinsResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_created.js`},query:{source_url:`/${e}/_created`,data:JSON.stringify({options:{exclude_add_pin_rep:!0,field_set_key:`grid_item`,is_own_profile_pins:!1,user_id:t,username:e},context:{}}),_:Date.now()}});return r.resource_response.data},c=async e=>{let t=await n(`${i}/resource/BoardsFeedResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_saved.js`},query:{source_url:`/${e}/_saved`,data:JSON.stringify({options:{field_set_key:`profile_grid_item`,filter_stories:!1,sort:`last_pinned_to`,username:e},context:{}}),_:Date.now()}});return t.resource_response.data.filter(e=>e.node_id)};export{r as route};
//# sourceMappingURL=user-DiOHI5Ef.js.map