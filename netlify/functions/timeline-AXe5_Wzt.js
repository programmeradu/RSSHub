import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./cache-kimkMTWJ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{API_HOST as i,CDN_HOST as a,HOST as o,customFetch as s,parseUserData as c}from"./utils-B7dT-_AV.js";import l from"node:path";t();const u={path:[`/timeline/:user`],categories:[`social-media`],example:`/cara/timeline/fengz`,parameters:{user:`username`},name:`Timeline`,maintainers:[`KarasuShin`],handler:d,radar:[{source:[`cara.app/:user`,`cara.app/:user/*`],target:`/timeline/:user`}]};async function d(t){let u=t.req.param(`user`),d=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):15,f=await c(u),p=`${i}/posts/getAllByUser?slug=${f.slug}&take=${d}`,m=await s(p),h=m.data.map(t=>{let i=n(l.join(e,`templates/post-11557a5b.art`),{content:t.content,images:t.images.filter(e=>!e.isCoverImg).map(e=>({...e,src:`${a}/${e.src}`}))});return{title:t.title||t.content,pubDate:r(t.createdAt),link:`${o}/post/${t.id}`,description:i}});return{title:`Timeline - ${f.name}`,link:`${o}/${u}/all`,image:`${a}/${f.photo}`,item:h}}export{u as route};
//# sourceMappingURL=timeline-AXe5_Wzt.js.map