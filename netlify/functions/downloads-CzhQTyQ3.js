import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{load as t}from"cheerio";const n=`https://www.sony.com`,r={path:`/downloads/:productType/:productId`,categories:[`program-update`],example:`/sony/downloads/product/nw-wm1am2`,parameters:{productType:`product type`,productId:`product id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`sony.com/electronics/support/:productType/:productId/downloads`]}],name:`Software Downloads`,maintainers:[`EthanWng97`],handler:i,description:"::: tip\n  Open `https://www.sony.com/electronics/support` and search for the corresponding product, such as `Sony A7M4`, the website corresponding to which is `https://www.sony.com/electronics/support/e-mount-body-ilce-7-series/ilce-7m4/downloads`, where `productType` is `e-mount-body-ilce-7-series` and `productId` is `ilce-7m4`.\n:::"};async function i(r){let{productType:i,productId:a}=r.req.param(),o=`${n}/electronics/support/${i}/${a}/downloads`,s=await e({method:`get`,url:o}),c=s.data,l=t(c),u=l(`script:contains("window.__PRELOADED_STATE__.downloads")`).text(),d=/window\.__PRELOADED_STATE__\.downloads\s*=\s*({.*?});\s*window\.__PRELOADED_STATE__/s,f=u.match(d),p={};f&&(p=JSON.parse(f[1]).searchResults.results);let m=p.map(e=>{let t={};t.title=e.title,t.pubDate=e.publicationDate;let r=e.url;return r.startsWith(`http`)?t.url=r:r.startsWith(`//`)?t.url=`https:`+r:t.url=n+r,t});return{title:`Sony - ${a.toUpperCase()}`,link:o,description:`Sony - ${a.toUpperCase()}`,item:m.map(e=>({title:e.title,guid:e.title+` - `+e.url,link:e.url,pubDate:e.pubDate}))}}export{r as route};
//# sourceMappingURL=downloads-CzhQTyQ3.js.map