import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={path:`/newlist`,categories:[`study`],example:`/ncpssd/newlist`,radar:[{source:[`ncpssd.cn/`,`ncpssd.cn/newlist`]}],name:`最新文献`,maintainers:[`LyleLee`],handler:a,url:`ncpssd.cn/`};async function a(){let i=`https://www.ncpssd.cn`,a=`/newlist?type=0`,o=await n({method:`get`,url:i+a}),s=o.data,c=r(s),l=c(`.news-list > li`),u=l.toArray().map(e=>{let t=c(e).find(`a`).text().replaceAll(/(\r\n|\n|\r)/gm,``).trim(),n=i+c(e).find(`a`).attr(`onclick`)?.match(/\('(.*?)'\)/)?.[1],r=new URL(n);return{title:t,link:n,lngid:r.searchParams.get(`id`),type:r.searchParams.get(`typename`),pageType:r.searchParams.get(`nav`)}}),d=await Promise.all(u.map(r=>e.tryGet(r.link,async()=>{let e={Accept:`application/json, text/javascript, */*; q=0.01`,"Content-Type":`application/json; charset=UTF-8`},i={lngid:r.lngid,type:r.type,pageType:r.pageType},a=await n.post(`https://www.ncpssd.cn/articleinfoHandler/getjournalarticletable`,{headers:e,json:i,responseType:`json`});return{title:r.title,link:r.link,author:a.data.data.showwriter,description:a.data.data.remarkc,pubDate:t(a.data.data.publishDateTime)}})));return{title:`国家哲学社会科学文献中心`,link:i+a,item:d}}export{i as route};
//# sourceMappingURL=newlist-C7FWxL5Z.js.map