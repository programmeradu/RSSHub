import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{rss_parser_default as n}from"./rss-parser-1vyhErsD.js";import{load as r}from"cheerio";const i=e=>{let t=r(e),n=t(`div.post-content`),i=t(`meta[property="og:image"]`);return i.length>0&&t(`<img src=${i[0].attribs.content}>`).insertBefore(n[0].firstChild),n.find(`hr`).nextAll().remove(),n.find(`hr, ins.adsbygoogle, script`).each((e,n)=>{t(n).remove()}),n.find(`div.ad-disclaimer-container`).remove(),n.find(`div`).each((e,n)=>{if(t(n)[0].attribs.class){let e=t(n)[0].attribs.class;/\w{10}\s\w{10}/g.test(e)&&t(n).remove()}}),n.html()};var a={ProcessFeed:i};const o={path:`/:subsite/:tag?`,name:`Unknown`,maintainers:[],handler:s};async function s(r){let i=`9To5`,o,s;switch(r.req.param(`subsite`)){case`mac`:o=`https://9to5mac.com`,i+=`Mac`,s=`Apple News & Mac Rumors Breaking All Day`;break;case`google`:o=`https://9to5google.com`,i+=`Google`,s=`Google, Pixel news, Android, Home, Chrome OS, apps, more`;break;case`toys`:o=`https://9to5toys.com`,i+=`Toys`,s=`New Gear, reviews and deals`;break;default:break}r.req.param(`tag`)?(o=`${o}/guides/${r.req.param(`tag`)}/feed/`,i=`${r.req.param(`tag`)} | ${i}`):o=`${o}/feed/`;let c=await n.parseURL(o),l=await Promise.all(c.items.splice(0,r.req.query(`limit`)?Number.parseInt(r.req.query(`limit`)):10).map(n=>e.tryGet(n.link,async()=>{let e=await t({method:`get`,url:n.link}),r=a.ProcessFeed(e.data),i={title:n.title,description:r,pubDate:n.pubDate,link:n.link,author:n[`dc:creator`]};return i})));return{title:i,link:o,description:s,item:l}}export{o as route};
//# sourceMappingURL=subsite-DGhD3nJd.js.map