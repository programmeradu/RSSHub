{"version":3,"file":"awsblogs-OodZpGvv.js","names":["route: Route","got"],"sources":["../../lib/routes/amazon/awsblogs.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/awsblogs/:locale?',\r\n    name: 'Unknown',\r\n    maintainers: ['HankChow'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const locale = ctx.req.param('locale') ?? 'zh_CN';\r\n\r\n    const response = await got({\r\n        url: `https://aws.amazon.com/api/dirs/items/search?item.directoryId=blog-posts&sort_by=item.additionalFields.createdDate&sort_order=desc&size=50&item.locale=${locale}`,\r\n    });\r\n\r\n    const items = response.data.items;\r\n\r\n    return {\r\n        title: 'AWS Blog',\r\n        link: 'https://aws.amazon.com/blogs/',\r\n        description: 'AWS Blog 更新',\r\n        item:\r\n            items &&\r\n            items.map((item) => ({\r\n                title: item.item.additionalFields.title,\r\n                description: item.item.additionalFields.postExcerpt,\r\n                pubDate: parseDate(item.item.dateCreated),\r\n                link: item.item.additionalFields.link,\r\n                author: item.item.additionalFields.contributors,\r\n            })),\r\n    };\r\n}\r\n"],"mappings":"qRAIA,MAAaA,EAAe,CACxB,KAAM,qBACN,KAAM,UACN,YAAa,CAAC,YACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAS,EAAI,IAAI,MAAM,WAAa,QAEpC,EAAW,MAAMC,EAAI,CACvB,IAAK,0JAA0J,MAG7J,EAAQ,EAAS,KAAK,MAE5B,MAAO,CACH,MAAO,WACP,KAAM,gCACN,YAAa,cACb,KACI,GACA,EAAM,IAAK,IAAU,CACjB,MAAO,EAAK,KAAK,iBAAiB,MAClC,YAAa,EAAK,KAAK,iBAAiB,YACxC,QAAS,EAAU,EAAK,KAAK,aAC7B,KAAM,EAAK,KAAK,iBAAiB,KACjC,OAAQ,EAAK,KAAK,iBAAiB"}