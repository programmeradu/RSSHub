{"version":3,"file":"ent-DrJkRWbf.js","names":["route: Route"],"sources":["../../lib/routes/gamersky/ent.ts"],"sourcesContent":["import type { Route } from '@/types';\r\nimport type { Context } from 'hono';\r\nimport { getArticleList, parseArticleList, getArticle, mdTableBuilder } from './utils';\r\n\r\nconst idNameMap = new Map([\r\n    ['all', { title: '热点图文', suffix: 'ent', nodeId: '20107' }],\r\n    ['qw', { title: '趣囧时间', suffix: 'ent/qw', nodeId: '20113' }],\r\n    ['movie', { title: '游民影院', suffix: 'wenku/movie', nodeId: '20111' }],\r\n    ['discovery', { title: '游观天下', suffix: 'ent/discovery', nodeId: '20114' }],\r\n    ['wp', { title: '壁纸图库', suffix: 'ent/wp', nodeId: '20117' }],\r\n    ['wenku', { title: '游民盘点', suffix: 'wenku', nodeId: '20106' }],\r\n    ['xz', { title: '游民福利', suffix: 'ent/xz', nodeId: '20119' }],\r\n]);\r\n\r\nexport const route: Route = {\r\n    path: '/ent/:category?',\r\n    categories: ['game'],\r\n    example: '/gamersky/ent/xz',\r\n    parameters: {\r\n        type: '分类类型，留空为 `all`',\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: Object.entries(idNameMap).map(([type, { title, suffix }]) => ({\r\n        title,\r\n        source: [`www.gamersky.com/${suffix}`],\r\n        target: `/ent/${type}`,\r\n    })),\r\n    name: '娱乐',\r\n    maintainers: ['LogicJake'],\r\n    description: mdTableBuilder(Object.entries(idNameMap).map(([type, { title, nodeId }]) => ({ type, name: title, nodeId }))),\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx: Context) {\r\n    const category = ctx.req.param('category') ?? 'all';\r\n\r\n    const idName = idNameMap.get(category);\r\n    if (!idName) {\r\n        throw new Error(`Invalid type: ${category}`);\r\n    }\r\n\r\n    const response = await getArticleList(idName.nodeId);\r\n    const list = parseArticleList(response);\r\n    const fullTextList = await Promise.all(list.map((item) => getArticle(item)));\r\n    return {\r\n        title: `${idName.title} - 游民娱乐`,\r\n        link: `https://www.gamersky.com/${idName.suffix}`,\r\n        item: fullTextList,\r\n    };\r\n}\r\n"],"mappings":"6VAIA,MAAM,EAAY,IAAI,IAAI,CACtB,CAAC,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,OAAQ,UAChD,CAAC,KAAM,CAAE,MAAO,OAAQ,OAAQ,SAAU,OAAQ,UAClD,CAAC,QAAS,CAAE,MAAO,OAAQ,OAAQ,cAAe,OAAQ,UAC1D,CAAC,YAAa,CAAE,MAAO,OAAQ,OAAQ,gBAAiB,OAAQ,UAChE,CAAC,KAAM,CAAE,MAAO,OAAQ,OAAQ,SAAU,OAAQ,UAClD,CAAC,QAAS,CAAE,MAAO,OAAQ,OAAQ,QAAS,OAAQ,UACpD,CAAC,KAAM,CAAE,MAAO,OAAQ,OAAQ,SAAU,OAAQ,YAGzCA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,QACb,QAAS,mBACT,WAAY,CACR,KAAM,kBAEV,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,OAAO,QAAQ,GAAW,KAAK,CAAC,EAAM,CAAE,QAAO,cAAe,CACjE,QACA,OAAQ,CAAC,oBAAoB,KAC7B,OAAQ,QAAQ,OAEpB,KAAM,KACN,YAAa,CAAC,aACd,YAAa,EAAe,OAAO,QAAQ,GAAW,KAAK,CAAC,EAAM,CAAE,QAAO,cAAe,CAAE,OAAM,KAAM,EAAO,aAC/G,WAGJ,eAAe,EAAQ,EAAc,CACjC,IAAM,EAAW,EAAI,IAAI,MAAM,aAAe,MAExC,EAAS,EAAU,IAAI,GAC7B,GAAI,CAAC,EACD,MAAU,MAAM,iBAAiB,KAGrC,IAAM,EAAW,MAAM,EAAe,EAAO,QACvC,EAAO,EAAiB,GACxB,EAAe,MAAM,QAAQ,IAAI,EAAK,IAAK,GAAS,EAAW,KACrE,MAAO,CACH,MAAO,GAAG,EAAO,MAAM,SACvB,KAAM,4BAA4B,EAAO,SACzC,KAAM"}