{"version":3,"file":"logrocket-KZfEA7NM.js","names":["route: Route","ofetch","title","cache","response","$"],"sources":["../../lib/routes/logrocket/index.ts"],"sourcesContent":["import { parseDate } from '@/utils/parse-date';\r\nimport ofetch from '@/utils/ofetch'; // 统一使用的请求库\r\nimport { load } from 'cheerio'; // 类似 jQuery 的 API HTML 解析器\r\nimport { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\n\r\nexport const route: Route = {\r\n    path: '/:type',\r\n    categories: ['blog'],\r\n    example: '/logrocket/dev',\r\n    parameters: { type: 'dev | product-management | ux-design' },\r\n    radar: [\r\n        {\r\n            source: ['blog.logrocket.com'],\r\n        },\r\n    ],\r\n    name: 'blog.logrocket',\r\n    maintainers: ['findwei'],\r\n    handler,\r\n    url: 'blog.logrocket.com/',\r\n};\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type');\r\n    const link = 'https://blog.logrocket.com/';\r\n    let title = 'Dev';\r\n    if (type === 'product-management') {\r\n        title = 'Product Management';\r\n    } else if (type === 'ux-design') {\r\n        title = 'UX Design';\r\n    }\r\n    const response = await ofetch(`${link}${type}`);\r\n    const $ = load(response);\r\n    const list = $('div.post-list .post-card')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            const a = item.find('a').first();\r\n            const title = item.find('.post-card-title').first();\r\n            return {\r\n                title: title.text(),\r\n                link: a.attr('href'),\r\n                pubDate: parseDate(item.find('.post-card-author-name').next().text().split(' ⋅ ')[0], 'MMM D, YYYY'),\r\n                author: item.find('.post-card-author-name').text(),\r\n            };\r\n        });\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const response = await ofetch(item.link);\r\n                const $ = load(response);\r\n                //\r\n                $('div.content-max-width .sidebar-container div.code-block').remove();\r\n                item.description = $('div.content-max-width .sidebar-container').html();\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n    return {\r\n        title: `logrocket-${title}`,\r\n        link,\r\n        description: `logrocket-${title}`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"mTAMA,MAAaA,EAAe,CACxB,KAAM,SACN,WAAY,CAAC,QACb,QAAS,iBACT,WAAY,CAAE,KAAM,wCACpB,MAAO,CACH,CACI,OAAQ,CAAC,wBAGjB,KAAM,iBACN,YAAa,CAAC,WACd,UACA,IAAK,uBAET,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAO,8BACT,EAAQ,MACR,IAAS,qBACT,EAAQ,qBACD,IAAS,cAChB,EAAQ,aAEZ,IAAM,EAAW,MAAMC,EAAO,GAAG,IAAO,KAClC,EAAI,EAAK,GACT,EAAO,EAAE,4BACV,UACA,IAAK,GAAS,CACX,EAAO,EAAE,GACT,IAAM,EAAI,EAAK,KAAK,KAAK,QACnBC,EAAQ,EAAK,KAAK,oBAAoB,QAC5C,MAAO,CACH,MAAOA,EAAM,OACb,KAAM,EAAE,KAAK,QACb,QAAS,EAAU,EAAK,KAAK,0BAA0B,OAAO,OAAO,MAAM,OAAO,GAAI,eACtF,OAAQ,EAAK,KAAK,0BAA0B,UAGlD,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACNC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,IAAMC,EAAW,MAAMH,EAAO,EAAK,MAC7BI,EAAI,EAAKD,GAIf,OAFA,EAAE,2DAA2D,SAC7D,EAAK,YAAcC,EAAE,4CAA4C,OAC1D,MAInB,MAAO,CACH,MAAO,aAAa,IACpB,OACA,YAAa,aAAa,IAC1B,KAAM"}