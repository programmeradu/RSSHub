import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{ViewType as o}from"./types-A5bA50Mg.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/category/:category/:staffpicks?`,categories:[`social-media`],view:o.Videos,example:`/vimeo/category/documentary/staffpicks`,parameters:{category:"Category name can get from url like `documentary` in [https://vimeo.com/categories/documentary/videos](https://vimeo.com/categories/documentary/videos) ",staffpicks:"type `staffpicks` to sort with staffpicks"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Category`,maintainers:[`MisteryMonster`],handler:u};async function u(t){let{category:o,staffpicks:l}=t.req.param(),u=o,d=`&direction=desc&sort=date`,f=o;if(l&&l!==`staffpicks`)return;l&&(d+=`&filter=conditional_featured`,f+=`: ${o} staffpicks`);let p=`https://api.vimeo.com/categories/${u}/videos?page=1&per_page=18${d}`,m=await a({method:`get`,url:`https://vimeo.com/_rv/viewer`}),h=m.data.jwt,g=await a({method:`get`,url:p,headers:{Authorization:`jwt ${h}`}}),_=g.data.data,v=`https://vimeo.com/categories/${o}/videos/sort:latest`,y=`?staffpicked=true`,b=await n.tryGet(v+(l?y:``),async()=>{let e=await a({url:v+(l?y:``)}),t=c(e.data);return t(`meta[name="description"]`).attr(`content`)});return{title:`${f} | Vimeo category`,link:v+(l?y:``),description:b,item:_.map(t=>({title:t.name,description:r(s.join(e,`templates/description-d4cec56b.art`),{videoUrl:t.uri.replace(`/videos`,``),vdescription:t.description||``}),pubDate:i(t.created_time),link:t.link,author:t.user.name}))}}export{l as route};
//# sourceMappingURL=category-CvDmXBkh.js.map