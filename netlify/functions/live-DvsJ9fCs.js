import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{ViewType as n}from"./types-A5bA50Mg.js";const r={path:`/live/:login`,categories:[`live`],view:n.Notifications,example:`/twitch/live/riotgames`,parameters:{login:`Twitch username`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Live`,maintainers:[`hoilc`],handler:i};async function i(n){let r=n.req.param(`login`),i=await t({method:`post`,url:`https://gql.twitch.tv/gql`,headers:{Referer:`https://player.twitch.tv`,"Client-ID":`kimne78kx3ncx6brgo4mv6wki5h1ko`},json:[{operationName:`ChannelShell`,extensions:{persistedQuery:{version:1,sha256Hash:`c3ea5a669ec074a58df5c11ce3c27093fa38534c94286dc14b68a25d5adcbf55`}},variables:{login:r,lcpVideosEnabled:!1}},{operationName:`StreamMetadata`,extensions:{persistedQuery:{version:1,sha256Hash:`059c4653b788f5bdb2f5a2d2a24b0ddc3831a15079001a3d927556a96fb0517f`}},variables:{channelLogin:r}},{operationName:`RealtimeStreamTagList`,extensions:{persistedQuery:{version:1,sha256Hash:`a4747cac9d8e8bf6cf80969f6da6363ca1bdbd80fe136797e71504eb404313fd`}},variables:{channelLogin:r}}]}),a=i.data[0].data,o=i.data[1].data,s=i.data[2].data;if(!a.userOrError.id)throw Error(a.userOrError.__typename);let c=a.userOrError.displayName,l=[];return o.user.stream&&l.push({title:o.user.lastBroadcast.title,author:c,category:s.user.stream.freeformTags.map(e=>e.name),description:`<img style="max-width: 100%;" src="https://static-cdn.jtvnw.net/previews-ttv/live_user_${r}.jpg">`,pubDate:e(o.user.stream.createdAt),guid:o.user.stream.id,link:`https://www.twitch.tv/${r}`}),{title:`Twitch - ${c} - Live`,link:`https://www.twitch.tv/${r}`,item:l,allowEmpty:!0}}export{r as route};
//# sourceMappingURL=live-DvsJ9fCs.js.map