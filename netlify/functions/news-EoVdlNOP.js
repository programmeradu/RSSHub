import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/news/:category/:article_type?`,categories:[`traditional-media`],example:`/nikkei/news/news`,parameters:{category:`Category, see table below`,article_type:"Only includes free articles, set `free` to enable, disabled by default"},radar:[{source:[`www.nikkei.com/:category/archive`,`www.nikkei.com/:category`],target:`/:category`}],name:`News`,maintainers:[`Arracc`,`ladeng07`],handler:l,description:`| 総合 | オピニオン | 経済    | 政治     | 金融      | マーケット | ビジネス | マネーのまなび | テック     | 国際          | スポーツ | 社会・調査 | 地域  | 文化    | ライフスタイル |
| ---- | ---------- | ------- | -------- | --------- | ---------- | -------- | -------------- | ---------- | ------------- | -------- | ---------- | ----- | ------- | -------------- |
| news | opinion    | economy | politics | financial | business   | 不支持   | 不支持         | technology | international | sports   | society    | local | culture | lifestyle      |`};async function l(t){let c=`https://www.nikkei.com`,{category:l,article_type:u=`paid`}=t.req.param(),d=``;d=l===`news`?`${c}/news/category/`:`${c}/${l}/archive/`;let f=await a(d),p=f.data,m=s(p),h=``,g=m(`[class^="container_"]  [class^="default_"]:has(article)`),_=`img[class^="icon_"]`,v=g.toArray().map(e=>(e=m(e),e.find(`p a`).remove(),{title:e.find(`[class^="titleLink_"]`).text(),link:`${c}${e.find(`[class^="title_"] a`).attr(`href`)}`,image:e.find(`[class^="image_"] img`).removeAttr(`style`).removeAttr(`width`).removeAttr(`height`).parent().html(),category:e.find(`[class^="topicItem_"] a`).toArray().map(e=>m(e).text()),paywall:!!e.find(_).length}));l===`news`?(h=`総合`,v=[...v,...m(`div#CONTENTS_MAIN .m-miM32_itemTitle`).toArray().map(e=>{e=m(e);let t=e.find(`a`).first();return{title:t.text(),link:`${c}${t.attr(`href`)}`,category:e.find(`.m-miM32_itemkeyword a`).toArray().map(e=>m(e).text()),paywall:!!e.find(_).length}})]):h=m(`h1.l-miH11_title`).text().trim();let y=await Promise.all(v.map(t=>n.tryGet(t.link,async()=>{let{data:n}=await a(t.link),c=s(n);return c(`.notFloated_n1oadkwi`).remove(),t.pubDate=i(c(`meta[property="article:published_time"]`).attr(`content`)),t.description=r(o.join(e,`templates/news-1d9ea948.art`),{item:t,description:c(`section[class^=container_]`).html()}),t})));return{title:`日本経済新聞 - `+h,description:m(`meta[name="description"]`).attr(`content`),link:d,image:m(`meta[property="og:image"]`).attr(`content`),language:`ja`,item:u===`free`?y.filter(e=>!e.paywall):y}}export{c as route};
//# sourceMappingURL=news-EoVdlNOP.js.map