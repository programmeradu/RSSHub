import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import{cache_default as r}from"./cache-kimkMTWJ.js";import{art as i}from"./render-CxhTJIsl.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import o from"node:path";t();const s=`https://skeb.jp`;function c(t){if(!t||typeof t!=`object`||t.private===!0)return null;let n=t.thumbnail_image_urls?.srcset?.split(`,`).pop()?.trim().split(` `)[0]||``,r=t.body||``,a=t.genre===`music`||t.genre===`voice`?t.preview_url:null,c=i(o.join(e,`templates/work-fd9ad2d8.art`),{imageUrl:n,body:r,audioUrl:a});return{title:t.path||``,link:`${s}${t.path||``}`,description:c}}const l={art:`Illust`,voice:`Voice`,novel:`Novel`,video:`Video`,music:`Music`,correction:`Advice`,comic:`Comic`};function u(t){if(!t||typeof t!=`object`)return null;let n=t.avatar_url||``,r;if(t.creator){let a=t.acceptable?`Yes`:`No`,s=t.nsfw_acceptable?`Yes`:`No`,c=``;Array.isArray(t.skills)&&t.skills.length>0&&(c=t.skills.map(e=>l[e.genre]||e.genre).filter(Boolean).join(`, `)),r=i(o.join(e,`templates/creator-283028b8.art`),{avatarUrl:n,acceptingCommissions:a,nsfwAcceptable:s,skills:c})}return{title:t.name||``,link:`${s}/@${t.screen_name||``}`,description:r}}async function d(e,t){let i=`${s}/api/users/${e.replace(`@`,``)}/followings`,o=await r.tryGet(`skeb:followings_data:${e}`,async()=>{let e=await a(i,{headers:{Authorization:`Bearer ${n.skeb.bearerToken}`}});return e},n.cache.routeExpire,!1);if(!o||typeof o!=`object`)throw Error(`Failed to fetch followings data`);return t===`following_creators`?o[t].map(e=>u(e)).filter(Boolean):o[t].map(e=>c(e)).filter(Boolean)}export{s as baseUrl,d as getFollowingsItems,u as processCreator,c as processWork};
//# sourceMappingURL=utils-Bzyzoa63.js.map