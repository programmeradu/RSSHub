import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c=async t=>{let{type:c=`1`}=t.req.param(),l=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):30,u=`http://www.ccfa.org.cn`,d=new URL(`portal/cn/xiehui_list.jsp?type=${c}`,u).href,{data:f}=await a(d),p=s(f),m=p(`div.page_right ul li`).slice(0,l).toArray().map(e=>{e=p(e);let t=e.find(`a`);return{title:t.text(),pubDate:i(e.find(`span.list_time`).text(),`YYYY/MM/DD`),link:new URL(t.prop(`href`),d).href}});m=await Promise.all(m.map(t=>n.tryGet(t.link,async()=>{if(!t.link.includes(`ccfa.org.cn`))return t;let{data:n}=await a(t.link),c=s(n),l=c(`h2#title`).text(),d=r(o.join(e,`templates/description-d37ebf7e.art`),{intro:c(`div.artical_info_jianjie`).html(),description:c(`div.news_artical_txt`).html()}),f=c(`div.artical_info_left`).text().match(/(\d{4}(?:\/\d{2}){2})/)?.[1]??void 0;t.title=l,t.description=d,t.pubDate=f?i(f,`YYYY/MM/DD`):t.pubDate,t.author=c(`div.artical_info_left`).text().split(/来源：/).pop(),t.content={html:d,text:c(`div.news_artical_txt`).text()};let p=c(`p.download`).length===0?void 0:c(`div.news_artical_txt a`).toArray().find(e=>c(e).prop(`href`)?.includes(`downFiles.do`));return t.enclosure_url=p?new URL(c(p).prop(`href`),u):void 0,t.enclosure_title=p?c(p).text():void 0,t})));let h=p(`li.page_tit`).contents().last().text().split(/>/).pop(),g=new URL(p(`div.logo img`).prop(`src`),d).href,_=p(`title`).text();return{title:`${_} - ${h}`,description:h,link:d,item:m,allowEmpty:!0,image:g,author:p(`meta[property="og:site_name"]`).prop(`content`)}},l={path:`/:type?`,name:`分类`,url:`www.ccfa.org.cn`,maintainers:[`nczitzk`],handler:c,example:`/ccfa/1`,parameters:{category:"分类，默认为 `1`，即协会动态，可在对应分类页 URL 中找到"},description:`::: tip
  若订阅 [协会动态](https://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=1)，网址为 \`https://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=1\`。截取 \`https://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=\` 到末尾的部分 \`1\` 作为参数填入，此时路由为 [\`/ccfa/1\`](https://rsshub.app/ccfa/1)。
:::

| 分类                                                                      | ID                                     |
| ------------------------------------------------------------------------- | -------------------------------------- |
| [协会动态](http://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=1)       | [1](https://rsshub.app/ccfa/1)         |
| [行业动态](http://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=2)       | [2](https://rsshub.app/ccfa/2)         |
| [政策/报告/标准](http://www.ccfa.org.cn/portal/cn/hybz_list.jsp?type=33)  | [33](https://rsshub.app/ccfa/33)       |
| [行业统计](http://www.ccfa.org.cn/portal/cn/lsbq.jsp?type=10003)          | [10003](https://rsshub.app/ccfa/10003) |
| [创新案例](http://www.ccfa.org.cn/portal/cn/hybzs_list.jsp?type=10004)    | [10004](https://rsshub.app/ccfa/10004) |
| [党建工作](http://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=7)       | [7](https://rsshub.app/ccfa/7)         |
| [新消费论坛](http://www.ccfa.org.cn/portal/cn/xiehui_list.jsp?type=10005) | [10005](https://rsshub.app/ccfa/10005) |

#### [政策/报告/标准](http://www.ccfa.org.cn/portal/cn/hybz_list.jsp?type=33)

| 分类                                                                            | ID                               |
| ------------------------------------------------------------------------------- | -------------------------------- |
| [行业报告](http://www.ccfa.org.cn/portal/cn/hybz_list.jsp?type=33)              | [33](https://rsshub.app/ccfa/33) |
| [行业标准](http://www.ccfa.org.cn/portal/cn/hybz_list.jsp?type=34)              | [34](https://rsshub.app/ccfa/34) |
| [行业政策](http://www.ccfa.org.cn/portal/cn/fangyizhuanqu_list.jsp?type=39)     | [39](https://rsshub.app/ccfa/39) |
| [政策权威解读](http://www.ccfa.org.cn/portal/cn/fangyizhuanqu_list.jsp?type=40) | [40](https://rsshub.app/ccfa/40) |
    `,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ccfa.org.cn/portal/cn/xiehui_list.jsp`,`www.ccfa.org.cn/portal/cn/hybz_list.jsp`,`www.ccfa.org.cn/portal/cn/lsbq.jsp`,`www.ccfa.org.cn/portal/cn/hybzs_list.jsp`,`www.ccfa.org.cn/portal/cn/fangyizhuanqu_list.jsp`],target:(e,t)=>{t=new URL(t);let n=t.searchParams.get(`type`);return n?`/${n}`:``}},{title:`协会动态`,source:[`www.ccfa.org.cn/portal/cn/xiehui_list.jsp`],target:`/1`},{title:`行业动态`,source:[`www.ccfa.org.cn/portal/cn/xiehui_list.jsp`],target:`/2`},{title:`政策/报告/标准`,source:[`www.ccfa.org.cn/portal/cn/hybz_list.jsp`],target:`/33`},{title:`行业统计`,source:[`www.ccfa.org.cn/portal/cn/lsbq.jsp`],target:`/10003`},{title:`创新案例`,source:[`www.ccfa.org.cn/portal/cn/hybzs_list.jsp`],target:`/10004`},{title:`党建工作`,source:[`www.ccfa.org.cn/portal/cn/xiehui_list.jsp`],target:`/7`},{title:`新消费论坛`,source:[`www.ccfa.org.cn/portal/cn/xiehui_list.jsp`],target:`/10005`},{title:`政策/报告/标准 - 行业报告`,source:[`www.ccfa.org.cn/portal/cn/hybz_list.jsp`],target:`/33`},{title:`政策/报告/标准 - 行业标准`,source:[`www.ccfa.org.cn/portal/cn/hybz_list.jsp`],target:`/34`},{title:`政策/报告/标准 - 行业政策`,source:[`www.ccfa.org.cn/portal/cn/fangyizhuanqu_list.jsp`],target:`/39`},{title:`政策/报告/标准 - 政策权威解读`,source:[`www.ccfa.org.cn/portal/cn/fangyizhuanqu_list.jsp`],target:`/40`}]};export{c as handler,l as route};
//# sourceMappingURL=ccfa-_Mb9qZMa.js.map