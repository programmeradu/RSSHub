{"version":3,"file":"trending-D4N3E3lq.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/makerworld/trending.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { baseUrl, getNextBuildId } from './utils';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { config } from '@/config';\r\n\r\nexport const route: Route = {\r\n    path: '/trending',\r\n    categories: ['design'],\r\n    example: '/makerworld/trending',\r\n    name: 'Trending Models',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    radar: [\r\n        {\r\n            source: ['makerworld.com/:lang'],\r\n        },\r\n    ],\r\n};\r\n\r\nasync function handler() {\r\n    const nextBuildId = await getNextBuildId();\r\n    const response = await ofetch(`${baseUrl}/_next/data/${nextBuildId}/en.json`, {\r\n        headers: {\r\n            'User-Agent': config.trueUA,\r\n        },\r\n    });\r\n\r\n    const items = response.pageProps.popularDesignsData.map((d) => ({\r\n        title: d.title,\r\n        link: `${baseUrl}/en/models/${d.id}-${d.slug}`,\r\n        author: d.designCreator.name,\r\n        category: d.tags,\r\n        pubDate: parseDate(d.startTime),\r\n        description: d.designExtension.design_pictures.map((i) => `<figure><img src=\"${i.url}\" alt=\"${d.name}\"><figcaption>${i.name}</figcaption></figure>`).join(''),\r\n    }));\r\n\r\n    return {\r\n        title: 'Trending Models - MakerWorld',\r\n        description: 'Leading 3D printing model community for designers and makers. Download thousands of 3D models and stl models for free, and your No.1 option for multicolor 3D models',\r\n        link: `${baseUrl}/en`,\r\n        image: `${baseUrl}/favicon_new.png`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+UAMA,MAAaA,EAAe,CACxB,KAAM,YACN,WAAY,CAAC,UACb,QAAS,uBACT,KAAM,kBACN,YAAa,CAAC,UACd,UACA,MAAO,CACH,CACI,OAAQ,CAAC,2BAKrB,eAAe,GAAU,CACrB,IAAM,EAAc,MAAM,IACpB,EAAW,MAAMC,EAAO,GAAG,EAAQ,cAAc,EAAY,UAAW,CAC1E,QAAS,CACL,aAAc,EAAO,UAIvB,EAAQ,EAAS,UAAU,mBAAmB,IAAK,IAAO,CAC5D,MAAO,EAAE,MACT,KAAM,GAAG,EAAQ,aAAa,EAAE,GAAG,GAAG,EAAE,OACxC,OAAQ,EAAE,cAAc,KACxB,SAAU,EAAE,KACZ,QAAS,EAAU,EAAE,WACrB,YAAa,EAAE,gBAAgB,gBAAgB,IAAK,GAAM,qBAAqB,EAAE,IAAI,SAAS,EAAE,KAAK,gBAAgB,EAAE,KAAK,yBAAyB,KAAK,OAG9J,MAAO,CACH,MAAO,+BACP,YAAa,uKACb,KAAM,GAAG,EAAQ,KACjB,MAAO,GAAG,EAAQ,kBAClB,KAAM"}