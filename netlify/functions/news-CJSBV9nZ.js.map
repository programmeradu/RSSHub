{"version":3,"file":"news-CJSBV9nZ.js","names":["route: Route","got"],"sources":["../../lib/routes/atptour/news.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport got from '@/utils/got';\r\nimport { config } from '@/config';\r\n\r\nexport const route: Route = {\r\n    path: '/news/:lang?',\r\n    categories: ['other'],\r\n    example: '/atptour/news/en',\r\n    parameters: { lang: 'en or es.' },\r\n    radar: [\r\n        {\r\n            source: ['atptour.com'],\r\n        },\r\n    ],\r\n    name: 'News',\r\n    maintainers: ['LM1207'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const baseUrl = 'https://www.atptour.com';\r\n    const favIcon = `${baseUrl}/assets/atptour/assets/favicon.ico`;\r\n    const { lang = 'en' } = ctx.req.param();\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 15;\r\n\r\n    const link = `${baseUrl}/${lang}/-/tour/news/latest-filtered-results/0/${limit}`;\r\n    const { data } = await got(link, {\r\n        headers: {\r\n            'user-agent': config.trueUA,\r\n        },\r\n    });\r\n\r\n    return {\r\n        title: lang === 'en' ? 'News' : 'Noticias',\r\n        link: `${baseUrl}/${lang}/news/news-filter-results`,\r\n        description: lang === 'en' ? \"News from the official site of men's professional tennis.\" : 'Noticias del sitio oficial del tenis profesional masculino.',\r\n        language: lang,\r\n        icon: favIcon,\r\n        logo: favIcon,\r\n        author: 'ATP',\r\n        item: data.content.map((item) => ({\r\n            title: item.title,\r\n            link: baseUrl + item.url,\r\n            description: item.description,\r\n            author: item.byline,\r\n            category: item.category,\r\n            pubDate: parseDate(item.authoredDate),\r\n            image: baseUrl + item.image,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"sSAKA,MAAaA,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,SACb,QAAS,mBACT,WAAY,CAAE,KAAM,aACpB,MAAO,CACH,CACI,OAAQ,CAAC,iBAGjB,KAAM,OACN,YAAa,CAAC,UACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,0BACV,EAAU,GAAG,EAAQ,oCACrB,CAAE,OAAO,MAAS,EAAI,IAAI,QAC1B,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,GAE/E,EAAO,GAAG,EAAQ,GAAG,EAAK,yCAAyC,IACnE,CAAE,QAAS,MAAMC,EAAI,EAAM,CAC7B,QAAS,CACL,aAAc,EAAO,UAI7B,MAAO,CACH,MAAO,IAAS,KAAO,OAAS,WAChC,KAAM,GAAG,EAAQ,GAAG,EAAK,2BACzB,YAAa,IAAS,KAAO,4DAA8D,8DAC3F,SAAU,EACV,KAAM,EACN,KAAM,EACN,OAAQ,MACR,KAAM,EAAK,QAAQ,IAAK,IAAU,CAC9B,MAAO,EAAK,MACZ,KAAM,EAAU,EAAK,IACrB,YAAa,EAAK,YAClB,OAAQ,EAAK,OACb,SAAU,EAAK,SACf,QAAS,EAAU,EAAK,cACxB,MAAO,EAAU,EAAK"}