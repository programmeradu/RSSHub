{"version":3,"file":"baijing-DxZFCVuP.js","names":["route: Route","ofetch","cache","response"],"sources":["../../lib/routes/baijing/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const route: Route = {\r\n    path: '/article',\r\n    categories: ['new-media'],\r\n    example: '/baijing/article',\r\n    url: 'www.baijing.cn/article/',\r\n    name: '资讯',\r\n    maintainers: ['p3psi-boo'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const apiUrl = 'https://www.baijing.cn/index/ajax/get_article/';\r\n    const response = await ofetch(apiUrl);\r\n    const data = response.data.article_list;\r\n\r\n    const list = data.map((item) => ({\r\n        title: item.title,\r\n        link: `https://www.baijing.cn/article/${item.id}`,\r\n        author: item.user_info.user_name,\r\n        category: item.topic?.map((t) => t.title),\r\n    }));\r\n\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const response = await ofetch(item.link);\r\n\r\n                const $ = load(response);\r\n                item.description = $('.content').html();\r\n                item.pubDate = parseDate($('.timeago').text());\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: '白鲸出海 - 资讯',\r\n        link: 'https://www.baijing.cn/article/',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"mTAMA,MAAaA,EAAe,CACxB,KAAM,WACN,WAAY,CAAC,aACb,QAAS,mBACT,IAAK,0BACL,KAAM,KACN,YAAa,CAAC,aACd,WAGJ,eAAe,GAAU,CACrB,IACM,EAAW,MAAMC,EAAO,kDACxB,EAAO,EAAS,KAAK,aAErB,EAAO,EAAK,IAAK,IAAU,CAC7B,MAAO,EAAK,MACZ,KAAM,kCAAkC,EAAK,KAC7C,OAAQ,EAAK,UAAU,UACvB,SAAU,EAAK,OAAO,IAAK,GAAM,EAAE,UAGjC,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACNC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,IAAMC,EAAW,MAAMF,EAAO,EAAK,MAE7B,EAAI,EAAKE,GAIf,MAHA,GAAK,YAAc,EAAE,YAAY,OACjC,EAAK,QAAU,EAAU,EAAE,YAAY,QAEhC,MAKnB,MAAO,CACH,MAAO,YACP,KAAM,kCACN,KAAM"}