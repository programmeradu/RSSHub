import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{ViewType as i}from"./types-A5bA50Mg.js";import{invalid_parameter_default as a}from"./invalid-parameter-CUJdROXf.js";import{isValidHost as o}from"./valid-host-DEPw8oAS.js";import{load as s}from"cheerio";async function c(e){let i=`https://www.solidot.org`;/^\/.*$/.test(e)&&(e=i+e);let a=await n({method:`get`,url:e}),o=a.data,c=s(o),l=c(`div.talk_time`).clone().children().remove().end().text(),u=l.replaceAll(/^[^`]*发表于(.*分)[^`]*$/g,`$1`),d=u.replaceAll(/[年月]/g,`-`).replaceAll(`时`,`:`).replaceAll(/[分日]/g,``),f=c(`div.block_m > div.ct_tittle > div.bg_htit > h2`).text(),p=c(`div.icon_float > a`).attr(`title`),m=c(`div.talk_time > b`).text().replaceAll(/^来自(.*)部门$/g,`$1`);c(`div.ct_tittle`).remove(),c(`div.talk_time`).remove();let h=c(`div.block_m`).html().replaceAll(/(href.*?)<u>(.*?)<\/u>/g,`$1$2`).replaceAll(`href="/`,`href="`+i+`/`).replaceAll(/(<img.*liiLIZF8Uh6yM.*?>)/g,`<br><br>$1`),g={title:f,pubDate:r(t(d),8),author:m,link:e,description:h,category:p};return g}const l={path:`/:type?`,categories:[`traditional-media`],view:i.Articles,example:`/solidot/linux`,parameters:{type:{description:`消息类型，在网站上方选择后复制子域名或参见 [https://www.solidot.org/index.rss](https://www.solidot.org/index.rss) 即可`,options:[{value:`www`,label:`全部`},{value:`startup`,label:`创业`},{value:`linux`,label:`Linux`},{value:`science`,label:`科学`},{value:`technology`,label:`科技`},{value:`mobile`,label:`移动`},{value:`apple`,label:`苹果`},{value:`hardware`,label:`硬件`},{value:`software`,label:`软件`},{value:`security`,label:`安全`},{value:`games`,label:`游戏`},{value:`books`,label:`书籍`},{value:`ask`,label:`ask`},{value:`idle`,label:`idle`},{value:`blog`,label:`博客`},{value:`cloud`,label:`云计算`},{value:`story`,label:`奇客故事`}],default:`www`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新消息`,maintainers:[`sgqy`,`hang333`,`TonyRL`],handler:u};async function u(t){let r=t.req.param(`type`)??`www`;if(!o(r))throw new a(`Invalid type`);let i=`https://${r}.solidot.org`,l=await n({method:`get`,url:i}),u=l.data,d=s(u),f=d(`div.block_m`).find(`div.bg_htit > h2 > a`),p=[];for(let e of f)p.push(d(e).attr(`href`));let m=await Promise.all(p.map(t=>e.tryGet(t,()=>c(t))));return{title:`奇客的资讯，重要的东西`,link:i,item:m}}export{l as route};
//# sourceMappingURL=main-D-Vs4ob9.js.map