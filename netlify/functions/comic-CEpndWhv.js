import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import{load as o}from"cheerio";import s from"iconv-lite";t();const c=`https://www.cartoonmad.com`,l=(t,{chapter:n,pages:i})=>{let o=``;for(let s=1;s<=i;s++){let i=`${c}/5e585/${t}/${n}/${String(s).padStart(3,`0`)}.jpg`;o+=r(a.join(e,`templates/chapter-9800b0cb.art`),{url:i})}return o},u=(e,t,n)=>Promise.all(t.map(t=>n(t.link,()=>(t.description=l(e,t),t)))),d={path:`/comic/:id`,categories:[`anime`],example:`/cartoonmad/comic/5827`,parameters:{id:`漫画ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cartoonmad.com/comic/:id`]}],name:`漫画更新`,maintainers:[`KellyHwong`],handler:f};async function f(e){let t=e.req.param(`id`),r=`${c}/comic/${t}`,{data:a}=await i(r,{responseType:`buffer`,headers:{Referer:`https://www.cartoonmad.com/`}}),l=s.decode(a,`big5`),d=o(l),f=d(`#info`).eq(0).find(`td`).text().trim(),p=d(`#info`).eq(1).find(`a`).toArray().map(e=>(e=d(e),{title:e.text(),link:`${c}${e.attr(`href`)}`,chapter:e.text().match(/\d+/)[0],pages:e.next(`font`).text().match(/\d+/)[0]})).toReversed(),m=await u(t,p,n.tryGet);return{title:d(`head title`).text(),link:r,description:f,item:m}}export{d as route};
//# sourceMappingURL=comic-CEpndWhv.js.map