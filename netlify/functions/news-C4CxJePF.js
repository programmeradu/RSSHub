import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{ViewType as o}from"./types-A5bA50Mg.js";import s from"node:path";t();const c=`https://www3.nhk.or.jp`,l=`https://nwapi.nhk.jp`,u={path:`/news/:lang?`,categories:[`traditional-media`],view:o.Articles,example:`/nhk/news/en`,parameters:{lang:{description:`Language, see below`,options:[{value:`ar`,label:`العربية`},{value:`bn`,label:`বাংলা`},{value:`my`,label:`မြန်မာဘာသာစကား`},{value:`zh`,label:`中文（简体）`},{value:`zt`,label:`中文（繁體）`},{value:`en`,label:`English`},{value:`fr`,label:`Français`},{value:`hi`,label:`हिन्दी`},{value:`id`,label:`Bahasa Indonesia`},{value:`ko`,label:`코리언`},{value:`fa`,label:`فارسی`},{value:`pt`,label:`Português`},{value:`ru`,label:`Русский`},{value:`es`,label:`Español`},{value:`sw`,label:`Kiswahili`},{value:`th`,label:`ภาษาไทย`},{value:`tr`,label:`Türkçe`},{value:`uk`,label:`Українська`},{value:`ur`,label:`اردو`},{value:`vi`,label:`Tiếng Việt`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www3.nhk.or.jp/nhkworld/:lang/news/list/`,`www3.nhk.or.jp/nhkworld/:lang/news/`],target:`/news/:lang`}],name:`WORLD-JAPAN - Top Stories`,maintainers:[`TonyRL`,`pseudoyu`,`cscnk52`],handler:d};async function d(t){let{lang:o=`en`}=t.req.param(),{data:u}=await a(`${l}/nhkworld/rdnewsweb/v7b/${o}/outline/list.json`),d=await a(`${c}/nhkworld/common/assets/news/config/${o}.json`),f=u.data.map(e=>({title:e.title,description:e.description,link:`${c}${e.page_url}`,pubDate:i(e.updated_at,`x`),id:e.id}));return f=await Promise.all(f.map(t=>n.tryGet(t.link,async()=>{let{data:n}=await a(`${l}/nhkworld/rdnewsweb/v6b/${o}/detail/${t.id}.json`);return t.category=Object.values(n.data.categories),t.description=r(s.join(e,`templates/news-3e18a046.art`),{img:n.data.thumbnails,description:n.data.detail.replaceAll(`

`,`<br><br>`)}),delete t.id,t}))),{title:`${Object.values(d.data.config.navigation.header).find(e=>e.keyname===`topstories`)?.name} | NHK WORLD-JAPAN News`,link:`${c}/nhkworld/${o}/news/list/`,item:f}}export{u as route};
//# sourceMappingURL=news-C4CxJePF.js.map