import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{load as n}from"cheerio";const r=`https://www.alicesoft.com`,i={url:`www.alicesoft.com/information`,path:`/information/:category?/:game?`,categories:[`game`],example:`/alicesoft/information/game/cat377`,parameters:{category:`Category in the URL, which can be accessed under カテゴリ一覧 on the website.`,game:"Game-specific subcategory in the URL, which can be accessed under カテゴリ一覧 on the website. In this case, the category value should be `game`."},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.alicesoft.com/information`,`www.alicesoft.com/information/:category`,`www.alicesoft.com/information/:category/:game`],target:`/information/:category/:game`}],name:`ニュース`,maintainers:[`keocheung`],handler:a};async function a(i){let{category:a,game:o}=i.req.param(),s=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):10,c=`${r}/information`;a&&(c+=`/${a}`,o&&(c+=`/${o}`));let l=await t(c),u=n(l.data),d=u(`div.cont-main li`).slice(0,s).toArray().map(e=>(e=u(e),{title:e.find(`p.txt`).text(),link:e.find(`a`).attr(`href`),pubDate:new Date(e.find(`time`).attr(`datetime`))}));return d=await Promise.all(d.map(i=>i.link.startsWith(`${r}/information/`)?e.tryGet(i.link,async()=>{let e=await t(i.link),r=n(e.data);return r(`iframe[src^="https://www.youtube.com/"]`).removeAttr(`height`).removeAttr(`width`),i.description=`<div lang="ja-JP">${r(`div.article-detail`).html()?.replaceAll(/<p class="hl1">(.+?)<\/p>/g,`<h3>$1</h3>`)?.replaceAll(/<p class="hl2">(.+?)<\/p>/g,`<h4>$1</h4>`)}</div>`,i}):i)),{title:`ALICESOFT `+u(`article h2`).clone().children().remove().end().text(),link:c,item:d,language:`ja`}}export{i as route};
//# sourceMappingURL=infomation-Iilf-api.js.map