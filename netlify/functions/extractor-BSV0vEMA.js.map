{"version":3,"file":"extractor-BSV0vEMA.js","names":["cache","got","cache","got","cache","got","cache","got","news","view","sdrj","jwc"],"sources":["../../lib/routes/sdu/data.ts","../../lib/routes/sdu/extractor/wh/news.ts","../../lib/routes/sdu/extractor/view.ts","../../lib/routes/sdu/extractor/sdrj.ts","../../lib/routes/sdu/extractor/wh/jwc.ts","../../lib/routes/sdu/extractor/index.ts"],"sourcesContent":["export default {\r\n    wh: {\r\n        news: {\r\n            name: '山东大学（威海）新闻网',\r\n            route: '/news',\r\n            source: ['/*path', '/'],\r\n            titlePrefix: '(威海)新闻网|',\r\n            docs: 'https://docs.rsshub.app/routes/university#shan-dong-da-xue-wei-hai',\r\n            getTarget(url) {\r\n                return this.route + '/' + url.replace(/\\.htm$/, '');\r\n            },\r\n            url: 'https://xinwen.wh.sdu.edu.cn/',\r\n            columns: {\r\n                xyyw: {\r\n                    name: '校园要闻',\r\n                    url: 'xyyw.htm',\r\n                },\r\n                xsdt: {\r\n                    name: '学生动态',\r\n                    url: 'xsdt.htm',\r\n                },\r\n                zhxw: {\r\n                    name: '综合新闻',\r\n                    url: 'zhxw.htm',\r\n                },\r\n                sdsd: {\r\n                    name: '山大视点',\r\n                    url: 'sdsd.htm',\r\n                },\r\n                jjxy: {\r\n                    name: '菁菁校园',\r\n                    url: 'jjxy.htm',\r\n                },\r\n                xyjx: {\r\n                    name: '校园简讯',\r\n                    url: 'xyjx.htm',\r\n                },\r\n                mjzc: {\r\n                    name: '玛珈之窗',\r\n                    url: 'mjzc.htm',\r\n                },\r\n                rdzt: {\r\n                    name: '热点专题',\r\n                    url: 'rdzt.htm',\r\n                },\r\n                mtsj: {\r\n                    name: '媒体视角',\r\n                    url: 'mtsj.htm',\r\n                },\r\n                gjsy: {\r\n                    name: '高教视野',\r\n                    url: 'gjsy.htm',\r\n                },\r\n                llxx: {\r\n                    name: '理论学习',\r\n                    url: 'llxx.htm',\r\n                },\r\n            },\r\n        },\r\n        jwc: {\r\n            name: '山东大学（威海）教务处',\r\n            route: '/jwc',\r\n            source: ['/*path', '/'],\r\n            titlePrefix: '(威海)教务处|',\r\n            docs: 'https://docs.rsshub.app/routes/university#shan-dong-da-xue-wei-hai',\r\n            getTarget(url) {\r\n                return this.route + '/' + url.replace(/\\.htm$/, '');\r\n            },\r\n            url: 'https://jwc.wh.sdu.edu.cn/',\r\n            columns: {\r\n                gzzd: {\r\n                    name: '规章制度',\r\n                    url: 'gzzd.htm',\r\n                },\r\n                zyjs: {\r\n                    name: '专业建设',\r\n                    url: 'zyjs.htm',\r\n                },\r\n                sjjx: {\r\n                    name: '实践教学',\r\n                    url: 'sjjx.htm',\r\n                },\r\n                zbfc: {\r\n                    name: '支部风采',\r\n                    url: 'zbfc.htm',\r\n                },\r\n                fwzn: {\r\n                    name: '服务指南',\r\n                    url: 'fwzn.htm',\r\n                },\r\n                jwyw: {\r\n                    name: '教务要闻',\r\n                    url: 'jwyw.htm',\r\n                },\r\n                gztz: {\r\n                    name: '工作通知',\r\n                    url: 'gztz.htm',\r\n                },\r\n                jwjb: {\r\n                    name: '教务简报',\r\n                    url: 'jwjb.htm',\r\n                },\r\n                cyxz: {\r\n                    name: '常用下载',\r\n                    url: 'cyxz.htm',\r\n                },\r\n            },\r\n        },\r\n    },\r\n};\r\n","import cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst news = (link) =>\r\n    cache.tryGet(link, async () => {\r\n        let content, author, exactDate;\r\n        try {\r\n            const result = await got(link);\r\n            const $ = load(result.data);\r\n            content = $('#main-content').html();\r\n            author = $('#source').text();\r\n            const exactDateLine = $('.news_tit > p:last-child').text();\r\n            const exactDateText = exactDateLine.match(/^发布日期：(?<date>\\d+年\\d+月\\d+日\\s\\d{2}:\\d{2})/).groups.date;\r\n            exactDate = timezone(parseDate(exactDateText, 'YYYY年MM月DD日 HH:mm'), +8);\r\n            return { description: content, author, exactDate };\r\n        } catch {\r\n            return { description: content, author, exactDate };\r\n        }\r\n    });\r\nexport default news;\r\n","import cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst view = (link) =>\r\n    cache.tryGet(link, async () => {\r\n        let content, author, exactDate;\r\n        try {\r\n            const result = await got(link);\r\n            const $ = load(result.data);\r\n            content = $('#vsb_content').html();\r\n            author = $(\"form[name='_newscontent_fromname'] > div > p:last-of-type\").text();\r\n            const exactDateLine = $('.news_tit > p:last-child').text();\r\n            const exactDateText = exactDateLine.match(/^发布日期：(?<date>\\d+年\\d+月\\d+日\\s\\d{2}:\\d{2})/).groups.date;\r\n            exactDate = timezone(parseDate(exactDateText, 'YYYY年MM月DD日 HH:mm'), +8);\r\n            return { description: content, author, exactDate };\r\n        } catch {\r\n            return { description: content, author, exactDate };\r\n        }\r\n    });\r\nexport default view;\r\n","import cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst sdrj = (link) =>\r\n    cache.tryGet(link, async () => {\r\n        let content, author, exactDate;\r\n        try {\r\n            const result = await got(link);\r\n            const $ = load(result.data);\r\n            content = $('#vsb_content').html();\r\n            author = $(\"form[name='_newscontent_fromname'] > h1\").text();\r\n            const exactDateLine = $(\"form[name='_newscontent_fromname'] > p.info\").text().trim();\r\n            const exactDateText = exactDateLine.match(/^发布时间：(?<date>\\d+\\/\\d+\\/\\d+\\s\\d{2}:\\d{2}:\\d{2})/).groups.date;\r\n            exactDate = timezone(parseDate(exactDateText, 'YYYY/MM/DD HH:mm:ss'), +8);\r\n            return { description: content, author, exactDate };\r\n        } catch {\r\n            return { description: content, author, exactDate };\r\n        }\r\n    });\r\nexport default sdrj;\r\n","import cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst jwc = (link) =>\r\n    cache.tryGet(link, async () => {\r\n        let content, exactDate;\r\n        try {\r\n            const result = await got(link);\r\n            const $ = load(result.data);\r\n            const form = $(\"form[name='_newscontent_fromname']\");\r\n            form.find('h2').remove();\r\n            const exactDateElement = form.find('#author');\r\n            const exactDateStr = exactDateElement.text();\r\n            exactDateElement.remove();\r\n            content = form.html();\r\n            const exactDateText = exactDateStr.match(/^创建时间：(?<date>\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:\\d{2})/).groups.date;\r\n            exactDate = timezone(parseDate(exactDateText, 'YYYY-MM-DD HH:mm:ss'), +8);\r\n            return { description: content, exactDate };\r\n        } catch {\r\n            return { description: content, exactDate };\r\n        }\r\n    });\r\nexport default jwc;\r\n","import news from './wh/news';\r\nimport view from './view';\r\nimport sdrj from './sdrj';\r\nimport jwc from './wh/jwc';\r\n\r\nconst index = (link) => {\r\n    if (link.startsWith('https://xinwen.wh.sdu.edu.cn/')) {\r\n        return news(link);\r\n    }\r\n    if (link.startsWith('https://www.view.sdu.edu.cn/')) {\r\n        return view(link);\r\n    }\r\n    if (link.startsWith('https://www.sdrj.sdu.edu.cn/')) {\r\n        return sdrj(link);\r\n    }\r\n    if (link.startsWith('https://jwc.wh.sdu.edu.cn/')) {\r\n        return jwc(link);\r\n    }\r\n    return {};\r\n};\r\nexport default index;\r\n"],"mappings":"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"}