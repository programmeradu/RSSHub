{"version":3,"file":"category-BAftct4O.js","names":["route: Route","route","got","cache","response","$","item"],"sources":["../../lib/routes/smashingmagazine/category.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/:category?',\r\n    categories: ['programming'],\r\n    example: '/smashingmagazine/react',\r\n    parameters: { category: 'Find in URL or Table below' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['smashingmagazine.com/category/:category'],\r\n            target: '/:category',\r\n        },\r\n    ],\r\n    name: 'Category',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n    url: 'smashingmagazine.com/articles/',\r\n    description: `| **Category**       |                    |\r\n| ------------------ | ------------------ |\r\n| Accessibility      | accessibility      |\r\n| Best practices     | best-practices     |\r\n| Business           | business           |\r\n| Career             | career             |\r\n| Checklists         | checklists         |\r\n| CSS                | css                |\r\n| Data Visualization | data-visualization |\r\n| Design             | design             |\r\n| Design Patterns    | design-patterns    |\r\n| Design Systems     | design-systems     |\r\n| E-Commerce         | e-commerce         |\r\n| Figma              | figma              |\r\n| Freebies           | freebies           |\r\n| HTML               | html               |\r\n| Illustrator        | illustrator        |\r\n| Inspiration        | inspiration        |\r\n| JavaScript         | javascript         |\r\n| Mobile             | mobile             |\r\n| Performance        | performance        |\r\n| Privacy            | privacy            |\r\n| React              | react              |\r\n| Responsive Design  | responsive-design  |\r\n| Round-Ups          | round-ups          |\r\n| SEO                | seo                |\r\n| Typography         | typography         |\r\n| Tools              | tools              |\r\n| UI                 | ui                 |\r\n| Usability          | usability          |\r\n| UX                 | ux                 |\r\n| Vue                | vue                |\r\n| Wallpapers         | wallpapers         |\r\n| Web Design         | web-design         |\r\n| Workflow           | workflow           |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const category = ctx.req.param('category');\r\n    const baseUrl = 'https://www.smashingmagazine.com';\r\n    const route = category ? `/category/${category}` : '/articles';\r\n    const { data: response } = await got(`${baseUrl}${route}`);\r\n    const $ = load(response);\r\n\r\n    const listItems = $('article.article--post')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            const a = item.find('h2.article--post__title a');\r\n            const description = item.find('p.article--post__teaser').clone().children().remove().end().text();\r\n            const author = item.find('span.article--post__author-name a').text();\r\n            const time = $('p.article--post__teaser time').attr('datetime');\r\n            const pubDate = parseDate(time, 'YYYY-MM-DD');\r\n            return {\r\n                title: a.text(),\r\n                link: `${baseUrl}${a.attr('href')}`,\r\n                pubDate,\r\n                description,\r\n                author,\r\n            };\r\n        });\r\n\r\n    const items = await Promise.all(\r\n        listItems.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const { data: response } = await got(item.link);\r\n                const $ = load(response);\r\n                item.category = $('li.meta-box--tags a')\r\n                    .toArray()\r\n                    .map((item) => $(item).text());\r\n                const header = $('div#article__content header.article-header').clone().children('ul').remove().end().html();\r\n                const summary = $('div#article__content section.article__summary').html();\r\n                const descr = $('div#article__content div.c-garfield-the-cat')\r\n                    .clone()\r\n                    .children('div')\r\n                    .remove()\r\n                    .end()\r\n                    .toArray()\r\n                    .map((element) => $(element).html());\r\n                item.description = [header, summary, ...descr].join('');\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: 'Smashing Magazine Articles',\r\n        link: `${baseUrl}${route}`,\r\n        item: items,\r\n        description: 'Latest Articles on Smashingmagazine.com',\r\n        logo: 'https://www.smashingmagazine.com/images/favicon/apple-touch-icon.png',\r\n        icon: 'https://www.smashingmagazine.com/images/favicon/favicon.svg',\r\n        language: 'en-us',\r\n    };\r\n}\r\n"],"mappings":"wWAMA,MAAaA,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,eACb,QAAS,0BACT,WAAY,CAAE,SAAU,8BACxB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,2CACT,OAAQ,eAGhB,KAAM,WACN,YAAa,CAAC,gBACd,UACA,IAAK,iCACL,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAqCjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,EAAI,IAAI,MAAM,YACzB,EAAU,mCACVC,EAAQ,EAAW,aAAa,IAAa,YAC7C,CAAE,KAAM,GAAa,MAAMC,EAAI,GAAG,IAAUD,KAC5C,EAAI,EAAK,GAET,EAAY,EAAE,yBACf,UACA,IAAK,GAAS,CACX,EAAO,EAAE,GACT,IAAM,EAAI,EAAK,KAAK,6BACd,EAAc,EAAK,KAAK,2BAA2B,QAAQ,WAAW,SAAS,MAAM,OACrF,EAAS,EAAK,KAAK,qCAAqC,OACxD,EAAO,EAAE,gCAAgC,KAAK,YAC9C,EAAU,EAAU,EAAM,cAChC,MAAO,CACH,MAAO,EAAE,OACT,KAAM,GAAG,IAAU,EAAE,KAAK,UAC1B,UACA,cACA,YAIN,EAAQ,MAAM,QAAQ,IACxB,EAAU,IAAK,GACXE,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,GAAM,CAAE,KAAMC,GAAa,MAAMF,EAAI,EAAK,MACpCG,EAAI,EAAKD,GACf,EAAK,SAAWC,EAAE,uBACb,UACA,IAAK,GAASA,EAAEC,GAAM,QAC3B,IAAM,EAASD,EAAE,8CAA8C,QAAQ,SAAS,MAAM,SAAS,MAAM,OAC/F,EAAUA,EAAE,iDAAiD,OAC7D,EAAQA,EAAE,+CACX,QACA,SAAS,OACT,SACA,MACA,UACA,IAAK,GAAYA,EAAE,GAAS,QAGjC,MAFA,GAAK,YAAc,CAAC,EAAQ,EAAS,GAAG,GAAO,KAAK,IAE7C,MAKnB,MAAO,CACH,MAAO,6BACP,KAAM,GAAG,IAAUJ,IACnB,KAAM,EACN,YAAa,0CACb,KAAM,uEACN,KAAM,8DACN,SAAU"}