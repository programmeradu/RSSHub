{"version":3,"file":"universityindex-EMITRDQ5.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/jsu/universityindex.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\n// 导入必要的模组\r\nimport got from '@/utils/got'; // 自订的 got\r\nimport { load } from 'cheerio'; // 可以使用类似 jQuery 的 API HTML 解析器\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { getPageItemAndDate } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/notice',\r\n    categories: ['university'],\r\n    example: '/jsu/notice',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '通知公告',\r\n    maintainers: ['wenjia03'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://www.jsu.edu.cn/';\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url: 'https://www.jsu.edu.cn/index/tzgg.htm',\r\n    });\r\n\r\n    const $ = load(response.data);\r\n    const list = $('body > div.container.container-fluid.dynava.no-padding.cleafix > div.con_wz_fr.fr.cleafix > div:nth-child(2) > ul > li').toArray();\r\n    const out = await Promise.all(\r\n        list.map((item) => {\r\n            item = $(item);\r\n            const link = new URL(item.find('a').attr('href'), baseUrl).href;\r\n            return cache.tryGet(link, async () => {\r\n                const description = await getPageItemAndDate(\r\n                    '#vsb_content',\r\n                    link,\r\n                    'body > div.container.container-fluid.dynava.no-padding.cleafix > div.con_wz_fr.fr.cleafix > form > div > h1',\r\n                    'body > div.container.container-fluid.dynava.no-padding.cleafix > div.con_wz_fr.fr.cleafix > form > div > div:nth-child(2)',\r\n                    (date) => date.split('时间：')[1].split(' 作者：')[0]\r\n                );\r\n                const pubDate = parseDate(description.date, 'YYYY-MM-DD');\r\n                return {\r\n                    title: description.title,\r\n                    link,\r\n                    pubDate,\r\n                    description: description.pageInfo,\r\n                    category: '通知公告',\r\n                };\r\n            });\r\n        })\r\n    );\r\n\r\n    return {\r\n        // 在此处输出您的 RSS\r\n        title: '吉首大学 - 通知公告',\r\n        link: 'https://www.jsu.edu.cn/index/tzgg.htm',\r\n        description: '吉首大学 - 通知公告',\r\n        item: out,\r\n    };\r\n}\r\n"],"mappings":"iaAQA,MAAaA,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,cACb,QAAS,cACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,YACd,WAGJ,eAAe,GAAU,CACrB,IAEM,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,0CAGH,EAAI,EAAK,EAAS,MAClB,EAAO,EAAE,0HAA0H,UACnI,EAAM,MAAM,QAAQ,IACtB,EAAK,IAAK,GAAS,CACf,EAAO,EAAE,GACT,IAAM,EAAO,IAAI,IAAI,EAAK,KAAK,KAAK,KAAK,QAAS,2BAAS,KAC3D,OAAOC,EAAM,OAAO,EAAM,SAAY,CAClC,IAAM,EAAc,MAAM,EACtB,eACA,EACA,8GACA,4HACC,GAAS,EAAK,MAAM,OAAO,GAAG,MAAM,QAAQ,IAE3C,EAAU,EAAU,EAAY,KAAM,cAC5C,MAAO,CACH,MAAO,EAAY,MACnB,OACA,UACA,YAAa,EAAY,SACzB,SAAU,aAM1B,MAAO,CAEH,MAAO,cACP,KAAM,wCACN,YAAa,cACb,KAAM"}