import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"node:querystring";const o={url:`idolmaster-official.jp/news`,path:`/news/:routeParams?`,categories:[`anime`],example:`/idolmaster/news/brand=MILLIONLIVE&brand=SHINYCOLORS&category=GAME&category=ANIME`,parameters:{routeParams:"The `brand` and `category` params in the path. The available values are as follows."},description:`**Brand**
| THE IDOLM@STER | シンデレラガールズ | ミリオンライブ！ | SideM | シャイニーカラーズ | 学園アイドルマスター | その他 |
| -------------- | --------------- | ------------- | ----- | --------------- | ----------------- | ----- |
| IDOLMASTER | CINDERELLAGIRLS | MILLIONLIVE | SIDEM | SHINYCOLORS | GAKUEN | OTHER |

**Category**
| ゲーム | ライブ・イベント | アニメ | 配信番組 | ラジオ | グッズ | コラボ・キャンペーン | ミュージック | ブック・コミック | メディア | その他 |
| ----- | ------------- | ----- | ------- | ----- | ----- | ----------------- | --------- | -------------- | ------ | ----- |
| GAME | LIVE-EVENT | ANIME | LIVESTREAM | RADIO | GOODS | COLLABO-CAMP | CD | BOOK | MEDIA | OTHER |
    `,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`idolmaster-official.jp/news`],target:`/news`}],name:`ニュース News`,maintainers:[`keocheung`],handler:c},s=`https://cmsapi-frontend.idolmaster-official.jp`;async function c(o){let c=`${s}/sitern/api/cmsbase/Token/get`,u=await n(c),d=u.data.data.token,f={category:[`NEWS`]},p=o.req.param(`routeParams`);if(p){let e=a.parse(p);f.subcategory=l(e.category),f.brand=l(e.brand)}let m=o.req.query(`limit`),h=m?Number.parseInt(m):12;h>30&&(h=30);let g=`${s}/sitern/api/idolmaster/Article/list?site=jp&ip=idolmaster&token=${d}&sort=desc&data=${JSON.stringify(f)}&limit=${h}&start=0`,_=await n(g),v=_.data.data.article_list,y=v.map(e=>({title:e.title,link:e.url,pubDate:r(t(e.dspdate),9),category:e.categories.subcategory.map(e=>e.name)}));return y=await Promise.all(y.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),r=i(e.data),a=JSON.parse(r(`script#__NEXT_DATA__`).text());return t.description=`<div lang="ja">${a.props.pageProps.data.content?.replaceAll(`<img src="`,`<img src="${s}/sitern/api/idolmaster/Image/get?path=`)}</div>`,t}))),{title:`NEWS | アイドルマスター`,link:`https://idolmaster-official.jp/news`,item:y,language:`ja`}}function l(e){return e&&(typeof e==`string`?e.toUpperCase():e.map(e=>e.toUpperCase()))}export{o as route};
//# sourceMappingURL=news-DdCdeIhj.js.map