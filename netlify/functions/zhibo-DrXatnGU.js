import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import o from"crypto-js";t();const s={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},c={path:`/zhibo/:id`,categories:[`multimedia`],example:`/radio/zhibo/1395528`,parameters:{id:`直播 id，可在对应点播页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`直播`,maintainers:[`nczitzk`],handler:l,description:"如果订阅 [新闻和报纸摘要](http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528)，其 URL 为 `http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528`，可以得到 `name` 为 `1395528`\n\n  所以对应路由为 [`/radio/zhibo/1395528`](https://rsshub.app/radio/zhibo/1395528)\n\n::: tip\n  查看更多电台直播节目，可前往 [电台直播](http://www.radio.cn/pc-portal/erji/radioStation.html)\n:::"};async function l(t){let c=t.req.param(`id`),l=t.req.query(`limit`)??`100`,u=`columnId=${c}&pageNo=0&pageSize=${l}`,d=`https://www.radio.cn`,f=`${d}/pc-portal/image/icon_32.jpg`,p=`${d}/pc-portal/sanji/zhibo_2.html?name=${c}`,m=`https://ytmsout.radio.cn/web/appProgram/pageByColumn?${u}`,h=Date.now(),g=o.MD5(`${u}&timestamp=${h}&key=f0fc4c668392f9f9a447e48584c214ee`).toString().toUpperCase(),_=await i({method:`get`,url:m,headers:{sign:g,timestamp:h,"Content-Type":`application/json`,equipmentId:`0000`,platformCode:`WEB`}}),v=_.data.data.data,y=v.map(t=>{let i=t.playUrlHigh??t.playUrlLow;i=/\.m3u8$/.test(i)?t.downloadUrl:i;let o=new URL(i).pathname.split(`.`).pop(),c=o?`audio/${s[o]}`:``,l=new Date(t.startTime),u=`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`;return{guid:t.id,title:`${u} ${t.name}`,link:i,description:n(a.join(e,`templates/description-368e71de.art`),{description:t.des,enclosure_url:i,enclosure_type:c}),pubDate:r(t.startTime),enclosure_url:i,enclosure_type:c,itunes_duration:t.durationStr,itunes_item_image:f}});return{title:`云听 - ${v[0].name}`,link:p,item:y,image:f,itunes_author:`radio.cn`,description:v[0].des}}export{c as route};
//# sourceMappingURL=zhibo-DrXatnGU.js.map