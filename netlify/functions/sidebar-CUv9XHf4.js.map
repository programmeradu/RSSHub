{"version":3,"file":"sidebar-CUv9XHf4.js","names":["route: Route","got","utils"],"sources":["../../lib/routes/thepaper/sidebar.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport utils from './utils';\r\nimport got from '@/utils/got';\r\n\r\nconst sections = {\r\n    hotNews: '澎湃热榜',\r\n    financialInformationNews: '澎湃财讯',\r\n    morningEveningNews: '早晚报',\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/sidebar/:sec?',\r\n    radar: [\r\n        {\r\n            source: ['thepaper.cn/'],\r\n            target: '/sidebar',\r\n        },\r\n    ],\r\n    name: '侧边栏',\r\n    categories: ['new-media'],\r\n    example: '/thepaper/sidebar',\r\n    parameters: { sec: '侧边栏 id，可选 `hotNews` 即 澎湃热榜、`financialInformationNews` 即 澎湃财讯、`morningEveningNews` 即 早晚报，默认为 `hotNews`' },\r\n    maintainers: ['bigfei'],\r\n    handler,\r\n    url: 'thepaper.cn/',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { sec = 'hotNews' } = ctx.req.param();\r\n\r\n    const sidebar_url = `https://cache.thepaper.cn/contentapi/wwwIndex/rightSidebar`;\r\n    const sidebar_url_resp = await got(sidebar_url);\r\n    const sidebar_url_data = sidebar_url_resp.data;\r\n    const list = sidebar_url_data.data[sec];\r\n\r\n    const items = await Promise.all(list.filter((item) => item.contId).map((item) => utils.ProcessItem(item, ctx)));\r\n    return {\r\n        title: `澎湃新闻 - ${sections[sec]}`,\r\n        item: items,\r\n        link: 'https://www.thepaper.cn',\r\n    };\r\n}\r\n"],"mappings":"8WAIA,MAAM,EAAW,CACb,QAAS,OACT,yBAA0B,OAC1B,mBAAoB,OAGXA,EAAe,CACxB,KAAM,iBACN,MAAO,CACH,CACI,OAAQ,CAAC,gBACT,OAAQ,aAGhB,KAAM,MACN,WAAY,CAAC,aACb,QAAS,oBACT,WAAY,CAAE,IAAK,yGACnB,YAAa,CAAC,UACd,UACA,IAAK,gBAGT,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,MAAM,WAAc,EAAI,IAAI,QAG9B,EAAmB,MAAMC,EAAI,8DAC7B,EAAmB,EAAiB,KACpC,EAAO,EAAiB,KAAK,GAE7B,EAAQ,MAAM,QAAQ,IAAI,EAAK,OAAQ,GAAS,EAAK,QAAQ,IAAK,GAASC,EAAM,YAAY,EAAM,KACzG,MAAO,CACH,MAAO,UAAU,EAAS,KAC1B,KAAM,EACN,KAAM"}