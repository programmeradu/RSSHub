{"version":3,"file":"price-BKIg63B2.js","names":["got","route: Route"],"sources":["../../lib/routes/tesla/price/get-price.ts","../../lib/routes/tesla/price/index.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\n\r\nasync function getTeslaPrice(link) {\r\n    const response = await got(link);\r\n\r\n    const $ = load(response.body);\r\n\r\n    let price = '';\r\n\r\n    for (let i = 0; i < $('p').length; i++) {\r\n        const $ele = $('p').eq(i);\r\n        if ($ele.text().trim().includes('经销商报价')) {\r\n            const priceDom = $ele.next();\r\n            price = ' => 经销商报价: ' + $(priceDom).text().trim();\r\n            break;\r\n        }\r\n    }\r\n\r\n    return price;\r\n}\r\n\r\nexport { getTeslaPrice };\r\n","import { Route } from '@/types';\r\nimport { getTeslaPrice } from './get-price';\r\n\r\nexport const route: Route = {\r\n    path: '/price',\r\n    categories: ['shopping'],\r\n    example: '/tesla/price',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['tesla.cn/model3/design', 'tesla.cn/'],\r\n        },\r\n    ],\r\n    name: '价格',\r\n    maintainers: ['xiaokyo'],\r\n    handler,\r\n    url: 'tesla.cn/model3/design',\r\n};\r\n\r\nasync function handler() {\r\n    const cars = [\r\n        {\r\n            name: 'Model 3',\r\n            slug: 'model3',\r\n            link: 'https://www.dongchedi.com/auto/series/3762',\r\n        },\r\n        {\r\n            name: 'Model Y',\r\n            slug: 'modely',\r\n            link: 'https://www.dongchedi.com/auto/series/4363',\r\n        },\r\n        {\r\n            name: 'Model S',\r\n            slug: 'models',\r\n            link: 'https://www.dongchedi.com/auto/series/1254',\r\n        },\r\n        {\r\n            name: 'Model X',\r\n            slug: 'modelx',\r\n            link: 'https://www.dongchedi.com/auto/series/1255',\r\n        },\r\n    ];\r\n\r\n    const promises = cars.map((car) => getTeslaPrice(car.link));\r\n    const prices = await Promise.all(promises);\r\n\r\n    return {\r\n        title: 'Tesla Model 系列价格更新',\r\n        link: 'https://www.tesla.cn/model3/design#overview',\r\n        description: 'Tesla Model 系列价格更新',\r\n        item: prices.map((price, index) => ({\r\n            title: `${cars[index].name} 价格更新为 ${price}`,\r\n            link: `https://www.tesla.cn/${cars[index].slug}/design#overview`,\r\n            author: 'Tesla',\r\n            guid: `https://www.tesla.cn/${cars[index].slug}/design#overview#${price}`,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"+PAGA,eAAe,EAAc,EAAM,CAC/B,IAAM,EAAW,MAAMA,EAAI,GAErB,EAAI,EAAK,EAAS,MAEpB,EAAQ,GAEZ,IAAK,IAAI,EAAI,EAAG,EAAI,EAAE,KAAK,OAAQ,IAAK,CACpC,IAAM,EAAO,EAAE,KAAK,GAAG,GACvB,GAAI,EAAK,OAAO,OAAO,SAAS,SAAU,CACtC,IAAM,EAAW,EAAK,OACtB,EAAQ,cAAgB,EAAE,GAAU,OAAO,OAC3C,OAIR,OAAO,EChBX,MAAaC,EAAe,CACxB,KAAM,SACN,WAAY,CAAC,YACb,QAAS,eACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,yBAA0B,eAG3C,KAAM,KACN,YAAa,CAAC,WACd,UACA,IAAK,0BAGT,eAAe,GAAU,CACrB,IAAM,EAAO,CACT,CACI,KAAM,UACN,KAAM,SACN,KAAM,8CAEV,CACI,KAAM,UACN,KAAM,SACN,KAAM,8CAEV,CACI,KAAM,UACN,KAAM,SACN,KAAM,8CAEV,CACI,KAAM,UACN,KAAM,SACN,KAAM,+CAIR,EAAW,EAAK,IAAK,GAAQ,EAAc,EAAI,OAC/C,EAAS,MAAM,QAAQ,IAAI,GAEjC,MAAO,CACH,MAAO,qBACP,KAAM,8CACN,YAAa,qBACb,KAAM,EAAO,KAAK,EAAO,KAAW,CAChC,MAAO,GAAG,EAAK,GAAO,KAAK,SAAS,IACpC,KAAM,wBAAwB,EAAK,GAAO,KAAK,kBAC/C,OAAQ,QACR,KAAM,wBAAwB,EAAK,GAAO,KAAK,mBAAmB"}