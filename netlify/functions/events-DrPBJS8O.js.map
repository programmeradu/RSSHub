{"version":3,"file":"events-DrPBJS8O.js","names":["route: Route","ofetch","cache"],"sources":["../../lib/routes/baai/events.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nimport { baseUrl, apiHost, parseEventDetail, parseItem } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/hub/events',\r\n    categories: ['programming'],\r\n    example: '/baai/hub/events',\r\n    radar: [\r\n        {\r\n            source: ['hub.baai.ac.cn/events', 'hub.baai.ac.cn/'],\r\n        },\r\n    ],\r\n    name: '智源社区 - 活动',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    url: 'hub.baai.ac.cn/events',\r\n};\r\n\r\nasync function handler() {\r\n    const response = await ofetch(`${apiHost}/api/v1/events`, {\r\n        method: 'POST',\r\n        body: {\r\n            page: 1,\r\n            tag_id: '',\r\n        },\r\n    });\r\n\r\n    const list = response.data.map((item) => parseItem(item));\r\n\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                item.description = await parseEventDetail(item);\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: '活动 - 智源社区',\r\n        link: `${baseUrl}/events`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+XAMA,MAAaA,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,eACb,QAAS,mBACT,MAAO,CACH,CACI,OAAQ,CAAC,wBAAyB,qBAG1C,KAAM,YACN,YAAa,CAAC,UACd,UACA,IAAK,yBAGT,eAAe,GAAU,CACrB,IAAM,EAAW,MAAMC,EAAO,GAAG,EAAQ,gBAAiB,CACtD,OAAQ,OACR,KAAM,CACF,KAAM,EACN,OAAQ,MAIV,EAAO,EAAS,KAAK,IAAK,GAAS,EAAU,IAE7C,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACNC,EAAM,OAAO,EAAK,KAAM,UACpB,EAAK,YAAc,MAAM,EAAiB,GACnC,MAKnB,MAAO,CACH,MAAO,YACP,KAAM,GAAG,EAAQ,SACjB,KAAM"}