import{config as e}from"./config-Dl8a1sIg.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{config_not_found_default as n}from"./config-not-found-BVqhRP9D.js";async function r(){if(!e.spotify||!e.spotify.clientId||!e.spotify.clientSecret)throw new n(`Spotify public RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let{clientId:r,clientSecret:i}=e.spotify,a=await t(`https://accounts.spotify.com/api/token`,{method:`POST`,headers:{Authorization:`Basic ${Buffer.from(`${r}:${i}`).toString(`base64`)}`,"Content-Type":`application/x-www-form-urlencoded`},body:new URLSearchParams({grant_type:`client_credentials`}).toString()});return a.access_token}async function i(){if(!e.spotify||!e.spotify.clientId||!e.spotify.clientSecret||!e.spotify.refreshToken)throw new n(`Spotify private RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let{clientId:r,clientSecret:i,refreshToken:a}=e.spotify,o=await t(`https://accounts.spotify.com/api/token`,{method:`POST`,headers:{Authorization:`Basic ${Buffer.from(`${r}:${i}`).toString(`base64`)}`,"Content-Type":`application/x-www-form-urlencoded`},body:new URLSearchParams({grant_type:`refresh_token`,refresh_token:a}).toString()});return o.access_token}const a=e=>({title:e.name,author:e.artists.map(e=>e.name).join(`, `),description:`"${e.name}" by ${e.artists.map(e=>e.name).join(`, `)} from the album "${e.album.name}"`,link:e.external_urls.spotify}),o=e=>({title:e.name,description:`${e.name}, with ${e.followers.total} followers`,link:e.external_urls.spotify});var s={getPublicToken:r,getPrivateToken:i,parseTrack:a,parseArtist:o};export{s as utils_default};
//# sourceMappingURL=utils-BahhmqTb.js.map