{"version":3,"file":"cookies-ChLypEgy.js","names":["cache","puppeteer"],"sources":["../../lib/routes/xueqiu/cookies.ts"],"sourcesContent":["import cache from '@/utils/cache';\r\nimport { config } from '@/config';\r\nimport puppeteer from '@/utils/puppeteer';\r\nimport { getCookies } from '@/utils/puppeteer-utils';\r\n\r\nexport const parseToken = (link: string) =>\r\n    cache.tryGet(\r\n        'xueqiu:token',\r\n        async () => {\r\n            const browser = await puppeteer();\r\n            const page = await browser.newPage();\r\n            await page.setRequestInterception(true);\r\n            page.on('request', (request) => {\r\n                request.resourceType() === 'document' ? request.continue() : request.abort();\r\n            });\r\n            await page.goto(link, {\r\n                waitUntil: 'domcontentloaded',\r\n            });\r\n            await page.evaluate(() => document.documentElement.innerHTML);\r\n            const cookies = await getCookies(page);\r\n            return cookies;\r\n        },\r\n        config.cache.routeExpire,\r\n        false\r\n    );\r\n"],"mappings":"yNAKA,MAAa,EAAc,GACvBA,EAAM,OACF,eACA,SAAY,CACR,IAAM,EAAU,MAAMC,IAChB,EAAO,MAAM,EAAQ,UAC3B,MAAM,EAAK,uBAAuB,IAClC,EAAK,GAAG,UAAY,GAAY,CAC5B,EAAQ,iBAAmB,WAAa,EAAQ,WAAa,EAAQ,UAEzE,MAAM,EAAK,KAAK,EAAM,CAClB,UAAW,qBAEf,MAAM,EAAK,aAAe,SAAS,gBAAgB,WACnD,IAAM,EAAU,MAAM,EAAW,GACjC,OAAO,GAEX,EAAO,MAAM,YACb"}