import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i=`http://www.nifd.cn`,a={"7a6a826d-b525-42aa-b550-4236e524227f":`周报`,"128d602c-7041-4546-beff-83e605f8a370":`双周报`,"0712e220-fa3b-44d4-9226-bc3d57944e19":`月报`,"b66aa691-87ee-4bfe-ac6b-2460386166ee":`季报`,"c714853a-f09e-4510-8835-30a448fff7e3":`年报`,"17d0b29b-7912-498a-b9c3-d30508220158":`课题报告`,"e6a6d3a5-4bda-4739-9765-e4e41c900bcc":`学术报告`,"3d23ba0e-4f46-44c2-9d21-6b38df4cdd70":`工作论文`,"3333d2af-91d6-429b-be83-28b92f31b6d7":`研究评价`,"6363bdc7-3e1b-4771-a904-6162cd3a3143":`其他报告`},o={path:`/research/:categoryGuid?`,categories:[`finance`],example:`/nifd/research/3333d2af-91d6-429b-be83-28b92f31b6d7`,parameters:{categoryGuid:`资讯类型，默认为周报`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`研究`,maintainers:[`Fatpandac`],handler:s,description:"资讯类型可以从网址中获取，如：\n\n  `http://www.nifd.cn/Research?categoryGuid=7a6a826d-b525-42aa-b550-4236e524227f` 对应 `/nifd/research/7a6a826d-b525-42aa-b550-4236e524227f`"};async function s(o){let s=o.req.param(`categoryGuid`)??`7a6a826d-b525-42aa-b550-4236e524227f`,c=`${i}/Research?categoryGuid=${s}`,l=await n.get(c),u=r(l.data),d=u(`div.qr-main-item`).toArray().map(e=>({title:u(e).find(`h2`).text(),link:i+u(e).find(`a`).attr(`href`),author:u(e).find(`p > span:nth-child(2)`).text(),pubDate:t(u(e).find(`p > span:nth-child(1)`).text(),`YYYY-MM-DD`)})),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=await n.get(t.link),a=r(e.data);t.description=a(`div.qrd-content`).html();let o=a(`div.report-bottom a`).first(),s=o.attr(`href`);if(s){let e={enclosure_url:new URL(s,i).href,enclosure_type:`application/${s.split(/\./).pop()??`pdf`}`,enclosure_title:o.prev().text()};t={...t,...e}}return t})));return{title:`国家金融与发展实验室 - ${a[s]}`,link:c,item:f}}export{o as route};
//# sourceMappingURL=research-T0WLL_wV.js.map