import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import{ViewType as s}from"./types-A5bA50Mg.js";import c from"node:path";import{load as l}from"cheerio";t();const u=async t=>{let{id:s=`jinritan`}=t.req.param(),u=Number.parseInt(t.req.query(`limit`)??`30`,10),d=`http://www.banyuetan.org`,f=new URL(`byt/${s}/index.html`,d).href,p=await a(f),m=l(p),h=m(`html`).attr(`lang`)??`zh`,g=[];g=m(`div.bty_tbtj_list ul.clearFix li`).slice(0,u).toArray().map(t=>{let n=m(t),a=n.find(`h3 a`),o=a.text(),s=n.find(`img`).attr(`src`),l=r(c.join(e,`templates/description-b958bde9.art`),{images:s?[{src:s,alt:o}]:void 0,intro:n.find(`p`).text()}),u=n.find(`span.tag3`).text(),d=a.attr(`href`),f=u,p={title:o,description:l,pubDate:u?i(u):void 0,link:d,content:{html:l,text:l},image:s,banner:s,updated:f?i(f):void 0,language:h};return p}),g=await Promise.all(g.map(t=>t.link?n.tryGet(t.link,async()=>{let n=await a(t.link),s=l(n),u=s(`div.detail_tit h1`).text(),d=t.description+r(c.join(e,`templates/description-b958bde9.art`),{description:s(`div#detail_content`).html()}),f=s(`meta[property="og:release_date"]`).attr(`content`),p=s(`META[name="keywords"]`).attr(`content`)?.split(/,/)??[],m=[...s(`META[name="author"]`).toArray(),...s(`META[name="source"]`).toArray()],g=m.map(e=>{let t=s(e);return{name:t.attr(`content`),url:void 0,avatar:void 0}}),_=s(`meta[property="og:image"]`).attr(`content`),v=f,y={title:u,description:d,pubDate:f?o(i(f),8):t.pubDate,category:p,author:g,content:{html:d,text:d},image:_,banner:_,updated:v?o(i(v),8):t.updated,language:h};return{...t,...y}}):t));let _=m(`title`).text();return{title:_,description:_,link:f,item:g,allowEmpty:!0,image:new URL(`static/v1/image/logo.png`,d).href,author:_.split(/—/).pop(),language:h,id:f}},d={path:`/:id?`,name:`栏目`,url:`www.banyuetan.org`,maintainers:[`nczitzk`],handler:u,example:`/banyuetan/jinritan`,parameters:{id:{description:"栏目 ID，默认为 `jinritan`，即今日谈，可在对应分类页 URL 中找到",options:[{label:`今日谈`,value:`jinritan`},{label:`时政讲解`,value:`shizhengjiangjie`},{label:`评论`,value:`banyuetanpinglun`},{label:`基层治理`,value:`jicengzhili`},{label:`文化`,value:`wenhua`},{label:`教育`,value:`jiaoyu`}]}},description:`:::tip
订阅 [今日谈](http://www.banyuetan.org/byt/jinritan/)，其源网址为 \`http://www.banyuetan.org/byt/jinritan/\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/banyuetan/jinritan\`](https://rsshub.app/banyuetan/jinritan)。
:::

| 栏目                                                                 | ID                                                                |
| -------------------------------------------------------------------- | ----------------------------------------------------------------- |
| [今日谈](http://www.banyuetan.org/byt/jinritan/index.html)           | [jinritan](https://rsshub.app/banyuetan/jinritan)                 |
| [时政讲解](http://www.banyuetan.org/byt/shizhengjiangjie/index.html) | [shizhengjiangjie](https://rsshub.app/banyuetan/shizhengjiangjie) |
| [评论](http://www.banyuetan.org/byt/banyuetanpinglun/index.html)     | [banyuetanpinglun](https://rsshub.app/banyuetan/banyuetanpinglun) |
| [基层治理](http://www.banyuetan.org/byt/jicengzhili/index.html)      | [jicengzhili](https://rsshub.app/banyuetan/jicengzhili)           |
| [文化](http://www.banyuetan.org/byt/wenhua/index.html)               | [wenhua](https://rsshub.app/banyuetan/wenhua)                     |
| [教育](http://www.banyuetan.org/byt/jiaoyu/index.html)               | [jiaoyu](https://rsshub.app/banyuetan/jiaoyu)                     |

`,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.banyuetan.org/byt/:id`],target:`/:id`},{title:`今日谈`,source:[`www.banyuetan.org/byt/jinritan/index.html`],target:`/jinritan`},{title:`时政讲解`,source:[`www.banyuetan.org/byt/shizhengjiangjie/index.html`],target:`/shizhengjiangjie`},{title:`评论`,source:[`www.banyuetan.org/byt/banyuetanpinglun/index.html`],target:`/banyuetanpinglun`},{title:`基层治理`,source:[`www.banyuetan.org/byt/jicengzhili/index.html`],target:`/jicengzhili`},{title:`文化`,source:[`www.banyuetan.org/byt/wenhua/index.html`],target:`/wenhua`},{title:`教育`,source:[`www.banyuetan.org/byt/jiaoyu/index.html`],target:`/jiaoyu`}],view:s.Articles};export{u as handler,d as route};
//# sourceMappingURL=banyuetan-DyDMTbTD.js.map