{"version":3,"file":"explore-CctADvLx.js","names":["route: Route","got"],"sources":["../../lib/routes/afdian/explore.ts"],"sourcesContent":["import got from '@/utils/got';\r\n\r\nconst categoryMap = {\r\n    所有: '',\r\n    绘画: '1d2c1ac230dd11e88a2052540025c377',\r\n    视频: '68cf9fc630dd11e8aca852540025c377',\r\n    写作: '9db3776230dd11e89c6c52540025c377',\r\n    游戏: 'ed45455e30dc11e89fd452540025c377',\r\n    音乐: 'f89c99b22e6f11e8940c52540025c377',\r\n    播客: '5378451a30dd11e8bd4f52540025c377',\r\n    摄影: 'ffa47c662e6f11e8b26952540025c377',\r\n    技术: 'f62d3e58c39211e88abd52540025c377',\r\n    Vtuber: 'e4f952e865cc11e98fb252540025c377',\r\n    舞蹈: '98a30fda836b11e9bbf152540025c377',\r\n    体育: 'f2212a3c836c11e9842d52540025c377',\r\n    旅游: '3935643c836e11e98cc552540025c377',\r\n    美食: 'c8d2eaae837011e9bfb652540025c377',\r\n    时尚: '05e960f6837311e9984952540025c377',\r\n    数码: 'd6163d8c837611e98ac352540025c377',\r\n    动画: '67498b10837711e99f0652540025c377',\r\n    其他: 'b1643af4328011e8b5b152540025c377',\r\n};\r\n\r\nconst typeToLabel = {\r\n    rec: '推荐',\r\n    hot: '人气',\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/explore/:type/:category?',\r\n    categories: ['other'],\r\n    example: '/afdian/explore/hot/所有',\r\n    parameters: { type: '分类', category: '目录类型，默认为 `所有`' },\r\n    name: '发现用户',\r\n    maintainers: ['sanmmm'],\r\n    description: `分类\r\n\r\n| 推荐 | 最热 |\r\n| ---- | ---- |\r\n| rec  | hot  |\r\n\r\n  目录类型\r\n\r\n| 所有 | 绘画 | 视频 | 写作 | 游戏 | 音乐 | 播客 | 摄影 | 技术 | Vtuber | 舞蹈 | 体育 | 旅游 | 美食 | 时尚 | 数码 | 动画 | 其他 |\r\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\r\n| 所有 | 绘画 | 视频 | 写作 | 游戏 | 音乐 | 播客 | 摄影 | 技术 | Vtuber | 舞蹈 | 体育 | 旅游 | 美食 | 时尚 | 数码 | 动画 | 其他 |`,\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { type = 'rec', category = '所有' } = ctx.req.param();\r\n    const baseUrl = 'https://afdian.com';\r\n    const link = `${baseUrl}/api/creator/list`;\r\n    const res = await got(link, {\r\n        searchParams: {\r\n            type,\r\n            category_id: categoryMap[category],\r\n        },\r\n    });\r\n    const list = res.data.data.list.map((item) => {\r\n        const { doing, monthly_fans, detail } = item.creator;\r\n        return {\r\n            title: item.name,\r\n            description: `正在创作 ${doing}<br/>\r\n            ${monthly_fans}发电人次/月<br/>\r\n            详情:<br/>\r\n            ${detail}<br/>\r\n            `,\r\n            link: `${baseUrl}/@${item.url_slug}`,\r\n        };\r\n    });\r\n    return {\r\n        title: `爱发电-创作者 (按 ${category}/${typeToLabel[type]})`,\r\n        description: `爱发电-发现创作者 (按 ${category}/${typeToLabel[type]})`,\r\n        link: `${baseUrl}/explore`,\r\n        item: list,\r\n    };\r\n}\r\n"],"mappings":"gOAEA,MAAM,EAAc,CAChB,GAAI,GACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,OAAQ,mCACR,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,mCACJ,GAAI,oCAGF,EAAc,CAChB,IAAK,KACL,IAAK,MAGIA,EAAe,CACxB,KAAM,4BACN,WAAY,CAAC,SACb,QAAS,yBACT,WAAY,CAAE,KAAM,KAAM,SAAU,iBACpC,KAAM,OACN,YAAa,CAAC,UACd,YAAa;;;;;;;;;;iGAWb,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,OAAO,MAAO,WAAW,MAAS,EAAI,IAAI,QAC5C,EAAU,qBACV,EAAO,GAAG,EAAQ,mBAClB,EAAM,MAAMC,EAAI,EAAM,CACxB,aAAc,CACV,OACA,YAAa,EAAY,MAG3B,EAAO,EAAI,KAAK,KAAK,KAAK,IAAK,GAAS,CAC1C,GAAM,CAAE,QAAO,eAAc,UAAW,EAAK,QAC7C,MAAO,CACH,MAAO,EAAK,KACZ,YAAa,QAAQ,EAAM;cACzB,EAAa;;cAEb,EAAO;cAET,KAAM,GAAG,EAAQ,IAAI,EAAK,cAGlC,MAAO,CACH,MAAO,cAAc,EAAS,GAAG,EAAY,GAAM,GACnD,YAAa,gBAAgB,EAAS,GAAG,EAAY,GAAM,GAC3D,KAAM,GAAG,EAAQ,UACjB,KAAM"}