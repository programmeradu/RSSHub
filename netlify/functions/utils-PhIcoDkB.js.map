{"version":3,"file":"utils-PhIcoDkB.js","names":["puppeteer","got"],"sources":["../../lib/routes/njust/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport puppeteer from '@/utils/puppeteer';\r\n\r\nasync function getContent(url, pptr = false) {\r\n    if (pptr) {\r\n        const browser = await puppeteer();\r\n        try {\r\n            const page = await browser.newPage();\r\n            // 更改 window.navigator.webdriver 值以避开反爬\r\n            // await page.evaluateOnNewDocument(() => {\r\n            //     // eslint-disable-next-line no-undef\r\n            //     Object.defineProperty(navigator, 'webdriver', {\r\n            //         get: () => undefined,\r\n            //     });\r\n            // });\r\n            await page.setRequestInterception(true);\r\n            page.on('request', (request) => {\r\n                request.resourceType() === 'document' || request.resourceType() === 'script' ? request.continue() : request.abort();\r\n            });\r\n            await page.goto(url, {\r\n                waitUntil: 'networkidle0',\r\n            });\r\n            const content = await page.content();\r\n            return content;\r\n        } finally {\r\n            await browser.close();\r\n        }\r\n    } else {\r\n        const response = await got(url);\r\n        const data = response.data;\r\n        return data;\r\n    }\r\n}\r\n\r\nexport { getContent };\r\n"],"mappings":"4GAGA,eAAe,EAAW,EAAK,EAAO,GAAO,CACzC,GAAI,EAAM,CACN,IAAM,EAAU,MAAMA,IACtB,GAAI,CACA,IAAM,EAAO,MAAM,EAAQ,UAQ3B,MAAM,EAAK,uBAAuB,IAClC,EAAK,GAAG,UAAY,GAAY,CAC5B,EAAQ,iBAAmB,YAAc,EAAQ,iBAAmB,SAAW,EAAQ,WAAa,EAAQ,UAEhH,MAAM,EAAK,KAAK,EAAK,CACjB,UAAW,iBAEf,IAAM,EAAU,MAAM,EAAK,UAC3B,OAAO,SACD,CACN,MAAM,EAAQ,aAEf,CACH,IAAM,EAAW,MAAMC,EAAI,GACrB,EAAO,EAAS,KACtB,OAAO"}