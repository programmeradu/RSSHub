{"version":3,"file":"novel-BJrJZBNE.js","names":["route: Route","got"],"sources":["../../lib/routes/linovelib/novel.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/novel/:id',\r\n    categories: ['reading'],\r\n    example: '/linovelib/novel/2547',\r\n    parameters: { id: '小说 id，对应书架开始阅读 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '小说更新',\r\n    maintainers: ['misakicoca'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const response = await got(`https://www.linovelib.com/novel/${ctx.req.param('id')}/catalog`);\r\n    const $ = load(response.data);\r\n\r\n    const meta = $('.book-meta');\r\n    const title = meta.children().first().text();\r\n    const author = meta.find('p > span > a').text();\r\n\r\n    const list = $('.chapter-list');\r\n    const items = list\r\n        .find('li')\r\n        .find('a')\r\n        .toArray()\r\n        .filter((item) => $(item).attr('href').startsWith('/novel/'))\r\n        .map((item) => ({\r\n            title: $(item).text(),\r\n            author,\r\n            description: $(item).text(),\r\n            link: `https://www.linovelib.com${$(item).attr('href')}`,\r\n        }));\r\n    items.reverse();\r\n\r\n    return {\r\n        title: `哩哔轻小说 - ${title}`,\r\n        link: `https://www.linovelib.com/novel/${ctx.req.param('id')}/catalog`,\r\n        description: title,\r\n        language: 'zh',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+PAIA,MAAaA,EAAe,CACxB,KAAM,aACN,WAAY,CAAC,WACb,QAAS,wBACT,WAAY,CAAE,GAAI,0BAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,cACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAW,MAAMC,EAAI,mCAAmC,EAAI,IAAI,MAAM,MAAM,WAC5E,EAAI,EAAK,EAAS,MAElB,EAAO,EAAE,cACT,EAAQ,EAAK,WAAW,QAAQ,OAChC,EAAS,EAAK,KAAK,gBAAgB,OAEnC,EAAO,EAAE,iBACT,EAAQ,EACT,KAAK,MACL,KAAK,KACL,UACA,OAAQ,GAAS,EAAE,GAAM,KAAK,QAAQ,WAAW,YACjD,IAAK,IAAU,CACZ,MAAO,EAAE,GAAM,OACf,SACA,YAAa,EAAE,GAAM,OACrB,KAAM,4BAA4B,EAAE,GAAM,KAAK,aAIvD,OAFA,EAAM,UAEC,CACH,MAAO,WAAW,IAClB,KAAM,mCAAmC,EAAI,IAAI,MAAM,MAAM,UAC7D,YAAa,EACb,SAAU,KACV,KAAM"}