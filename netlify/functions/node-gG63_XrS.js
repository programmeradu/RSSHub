import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import*as i from"cheerio";const a=async a=>{let{id:o=`news`,order:s=`obdate`}=a.req.param(),c=`https://www.psnine.com/node/${o}?ob=${s}`,l=await n(c),u=i.load(l);u(`.psnnode, .node`).remove();let d=u(`.title a`).toArray().map(e=>{let n=u(e),i=n.parent().next();return{title:n.text(),link:n.attr(`href`),pubDate:r(t(i.contents().filter((e,t)=>t.nodeType===3).text().trim().split(/\s{2,}/)[0],[`YYYY-MM-DD HH:mm`,`MM-DD HH:mm`]),8)}}),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),r=i.load(e);return t.author=r(`a[itemprop="author"]`).eq(0).text(),t.description=r(`div[itemprop="articleBody"]`).html(),t})));return{title:`${u(`title`).text()} - PSN中文站`,link:c,item:f}},o={path:`/node/:id?/:order?`,parameters:{id:`节点 id，见下表，默认为 news`,order:"排序，`date` 即最新，默认为 `obdate` 即综合排序"},categories:[`game`],example:`/psnine/node/news`,name:`节点`,maintainers:[`betta-cyber`,`nczitzk`],handler:a,radar:[{source:[`psnine.com/node/:id`]}]};export{o as route};
//# sourceMappingURL=node-gG63_XrS.js.map