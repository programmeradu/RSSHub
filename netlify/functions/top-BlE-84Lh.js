import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./parse-date-Bgabdhlb.js";import{ofetch_default as e}from"./ofetch-Bzt0BXUH.js";import"./timezone-BrNu6iXe.js";import{getPosts as t}from"./utils-DD245RU8.js";import{load as n}from"cheerio";const r={path:`/top/:k`,categories:[`picture`],example:`/misskon/top/60`,parameters:{k:`Top k days, can be 3, 7, 30 or 60`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{title:`Top 3 days`,source:[`misskon.com/top3/`],target:`/top/3`},{title:`Top 7 days`,source:[`misskon.com/top7/`],target:`/top/7`},{title:`Top 30 days`,source:[`misskon.com/top30/`],target:`/top/30`},{title:`Top 60 days`,source:[`misskon.com/top60/`],target:`/top/60`}],name:`Top k days`,maintainers:[`Urabartin`],handler:async r=>{let{k:i}=r.req.param();if(![`3`,`7`,`30`,`60`].includes(i))throw Error(`Invalid k: k=${i}`);let a=`https://misskon.com/top${i}/`,o=await e(a),s=n(o),c=s(`.page-title`).text(),l=s(`.content > p`).first().text(),u=s(`#main-content article.item-list > h2 a`).toArray().map(e=>new URL(s(e).attr(`href`)||``).pathname.slice(1,-1)),d=new URLSearchParams;return d.set(`slug`,u.join(`,`)),d.set(`per_page`,u.length.toString()),{title:`MissKON - ${c}`,link:a,description:l,item:await t(d)}}};export{r as route};
//# sourceMappingURL=top-BlE-84Lh.js.map