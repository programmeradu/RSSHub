import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";const r={path:`/platform/:area?/:p_type?/:uid?`,categories:[`social-media`],example:`/bilibili/platform/-1`,parameters:{area:`省市-国标码,默认为-1即全国`,p_type:`类型：见下表，默认为全部类型`,uid:`用户id，可以不填，不过不填不设置cookie，搜索结果与登入账号后搜索结果不一样。可以在url中找到，需要配置cookie值，只需要SESSDATA的值即可`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`show.bilibili.com/platform`]}],name:`会员购票务`,maintainers:[`nightmare-mio`],handler:i,url:`show.bilibili.com/platform`,description:`| 类型     |
| -------- |
| 演出     |
| 展览     |
| 本地生活 |`};async function i(r){let{area:i=-1,type:a=`全部类型`,uid:o}=r.req.param(),s=e.bilibili.cookies[o],c=`https://show.bilibili.com/api/ticket/project/listV2`,l={Referer:`https://space.bilibili.com`,Cookie:s?`SESSDATA=${s}`:void 0},{data:u}=await n({method:`get`,url:`${c}?version=134&page=1&pagesize=16&area=${i}&filter=&platform=web&p_type=${a}`,headers:l}),d=u.data.result,f=d.map(e=>{let n=`<img src="${e.cover}"></img>`,r=`<div>活动地点: ${e.city} ${e.venue_name}</div>`,i=`<div>活动时间: ${e.tlabel}</div>`,a=`<div>参展览嘉宾: ${e.staff}</div>`,o=`<div>结束日期: ${e.countdown}</div>`,s=`<div>最低价: ${e.price_low/100} ; 最高价: ${e.price_high/100}</div>`;return{title:e.project_name,link:e.url,description:n+r+i+a+o+s,pubDate:t(e.sale_start_time*1e3)}});return{title:`bilibili会员购票务-${i}`,link:c,item:f}}export{r as route};
//# sourceMappingURL=platform-C60YGgwu.js.map