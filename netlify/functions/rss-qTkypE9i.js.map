{"version":3,"file":"rss-qTkypE9i.js","names":["route: Route","parser"],"sources":["../../lib/routes/apnews/rss.ts"],"sourcesContent":["import { Route, ViewType } from '@/types';\r\nimport parser from '@/utils/rss-parser';\r\nimport { fetchArticle } from './utils';\r\nconst HOME_PAGE = 'https://apnews.com';\r\n\r\nexport const route: Route = {\r\n    path: '/rss/:category?',\r\n    categories: ['traditional-media'],\r\n    example: '/apnews/rss/business',\r\n    view: ViewType.Articles,\r\n    parameters: {\r\n        category: {\r\n            description: 'Category from the first segment of the corresponding site, or `index` for the front page.',\r\n            default: 'index',\r\n        },\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['apnews.com/:rss'],\r\n            target: '/rss/:rss',\r\n        },\r\n    ],\r\n    name: 'News',\r\n    maintainers: ['zoenglinghou', 'mjysci', 'TonyRL'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { rss = 'index' } = ctx.req.param();\r\n    const url = `${HOME_PAGE}/${rss}.rss`;\r\n    const res = await parser.parseURL(url);\r\n\r\n    const items = ctx.req.query('fulltext') === 'true' ? await Promise.all(res.items.map((item) => fetchArticle(item))) : res;\r\n\r\n    return {\r\n        ...res,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+WAGA,MAEaA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,qBACb,QAAS,uBACT,KAAM,EAAS,SACf,WAAY,CACR,SAAU,CACN,YAAa,4FACb,QAAS,UAGjB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,mBACT,OAAQ,cAGhB,KAAM,OACN,YAAa,CAAC,eAAgB,SAAU,UACxC,WAGJ,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,MAAM,SAAY,EAAI,IAAI,QAC5B,EAAM,sBAAgB,EAAI,MAC1B,EAAM,MAAMC,EAAO,SAAS,GAE5B,EAAQ,EAAI,IAAI,MAAM,cAAgB,OAAS,MAAM,QAAQ,IAAI,EAAI,MAAM,IAAK,GAAS,EAAa,KAAU,EAEtH,MAAO,CACH,GAAG,EACH,KAAM"}