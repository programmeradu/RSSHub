import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{art as n}from"./render-CxhTJIsl.js";import{ofetch_default as r}from"./ofetch-Bzt0BXUH.js";import i from"node:path";import{load as a}from"cheerio";t();const o={path:`/workshopsearch/:appid?/:routeParams?`,categories:[`game`],example:`/steam/workshopsearch/730`,parameters:{appid:`Steam appid, can be found on the community hub page or store page URL, 730 by default.`,routeParams:`Route parameters, can be found on the search result page URL. Route parameters located after the appid.`},radar:[{title:`Workshop Search Results`,source:[`steamcommunity.com/app/:appid/workshop/`],target:`/workshopsearch/:appid`}],description:`Steam Community Workshop Search Results.
The parameter 'l=language' changes the language of search results(if possible).
For example, route \`/workshopsearch/730/l=schinese\` will display the simplified Chinese descriptions of the entry.

Language Parameter:

| English | 简体中文 | 繁體中文 | 日本語   | 한국어  | ภาษาไทย | български | čeština | dansk  | Deutsch | español | latam | ελληνικά | français | italiano | Bahasa Indonesia | magyar    | Nederlands | norsk     | polski | português  | brasileiro | română   | русский | suomi   | svenska | Türkçe  | Tiếng Việt | українська |
| ------- | -------- | -------- | -------- | ------- | ------- | --------- | ------- | ------ | ------- | ------- | ----- | -------- | -------- | -------- | ---------------- | --------- | ---------- | --------- | ------ | ---------- | ---------- | -------- | ------- | ------- | ------- | ------- | ---------- | ---------- |
| english | schinese | tchinese | japanese | koreana | thai    | bulgarian | czech   | danish | german  | spanish | latam | greek    | french   | italian  | indonesian       | hungarian | dutch      | norwegian | polish | portuguese | brazilian  | romanian | russian | finnish | swedish | turkish | vietnamese | ukrainian  |

`,name:`Community Workshop Search`,maintainers:[`NyaaaDoge`],handler:async t=>{let{appid:o=730,routeParams:s}=t.req.param(),c=`https://steamcommunity.com/workshop/browse/?appid=${o}${s?`&${s}`:``}`,l=await r(c),u=a(l),d=u(`div.apphub_AppName`).first().text(),f=u(`div.customBrowseText`).first().text(),p=u(`div.apphub_AppIcon`).children(`img`).attr(`src`),m=u(`div.workshopBrowseItems .workshopItem`).toArray().map(t=>{t=u(t);let r=t.find(`a`).first().attr(`data-publishedfileid`),a=t.find(`.workshopItemTitle`).first().text(),o=t.find(`.workshop_author_link`).first().text(),s=t.find(`.workshopItemPreviewImage`).first().attr(`src`),c=t.find(`.fileRating`).first().attr(`src`),l=[];u(t).find(`.workshop_checkmark`).each((e,t)=>{let n=u(t),r=n.attr(`style`);(!r||!r.includes(`display: none;`))&&l.push(n.attr(`src`)||``)});let d=t.next(`script`).text(),f=/SharedFileBindMouseHover\(\s*"sharedfile_\d+",\s*(?:true|false),\s*({.*?})\s*\);/,p=d.match(f),m=``;if(p){let e=p[1],t=JSON.parse(e);t.id===r&&(m=t.description)}return{title:a,link:`https://steamcommunity.com/sharedfiles/filedetails/?id=${r}`,description:n(i.join(e,`templates/workshop-search-description-63f5abd9.art`),{image:s,rating:c,checkmark:l,description:m}),author:o}});return{title:`${d} Steam Workshop Content`,link:`https://steamcommunity.com/workshop/browse/?appid=${o}${s?`&${s}`:``}`,item:m,icon:p,description:f}}};export{o as route};
//# sourceMappingURL=workshop-search-EQKGsxy_.js.map