{"version":3,"file":"hacs-KF4hXaUF.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/home-assistant/hacs.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const route: Route = {\r\n    path: '/hacs/repositories',\r\n    name: 'HACS Repositories',\r\n    maintainers: ['DIYgod'],\r\n    categories: ['program-update'],\r\n    example: '/home-assistant/hacs/repositories',\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const sections = ['appdaemon', 'critical', 'integration', 'theme', 'python_script', 'plugin'];\r\n    const dataList = (\r\n        await Promise.all(\r\n            sections.map(async (section) => {\r\n                const url = `https://data-v2.hacs.xyz/${section}/data.json`;\r\n                const response = await ofetch(url);\r\n                return Object.values(response);\r\n            })\r\n        )\r\n    ).flat() as {\r\n        manifest: {\r\n            name: string;\r\n        };\r\n        manifest_name: string;\r\n        description: string;\r\n        full_name: string;\r\n        domain: string;\r\n        stargazers_count: number;\r\n        topics?: string[];\r\n        last_updated: string;\r\n        last_fetched: number;\r\n    }[];\r\n\r\n    return {\r\n        title: 'HACS Repositories',\r\n        link: `https://www.hacs.xyz/`,\r\n        item: dataList.map((item) => ({\r\n            title: item.manifest_name || item.manifest?.name || item.full_name,\r\n            description: `${item.domain ? `<img src=\"https://brands.home-assistant.io/_/${item.domain}/icon.png\" />` : ''}<br>${item.description}<br><br>Last updated: ${item.last_updated}<br>Stars: ${item.stargazers_count}<br>Topics: ${item.topics?.join(', ')}`,\r\n            link: `https://github.com/${item.full_name}`,\r\n            guid: item.domain || item.full_name,\r\n            tags: item.topics,\r\n            pubDate: new Date(item.last_fetched * 1000),\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"2KAIA,MAAaA,EAAe,CACxB,KAAM,qBACN,KAAM,oBACN,YAAa,CAAC,UACd,WAAY,CAAC,kBACb,QAAS,oCACT,WAGJ,eAAe,GAAU,CACrB,IAAM,EAAW,CAAC,YAAa,WAAY,cAAe,QAAS,gBAAiB,UAC9E,GACF,MAAM,QAAQ,IACV,EAAS,IAAI,KAAO,IAAY,CAC5B,IAAM,EAAM,4BAA4B,EAAQ,YAC1C,EAAW,MAAMC,EAAO,GAC9B,OAAO,OAAO,OAAO,OAG/B,OAcF,MAAO,CACH,MAAO,oBACP,KAAM,wBACN,KAAM,EAAS,IAAK,IAAU,CAC1B,MAAO,EAAK,eAAiB,EAAK,UAAU,MAAQ,EAAK,UACzD,YAAa,GAAG,EAAK,OAAS,gDAAgD,EAAK,OAAO,eAAiB,GAAG,MAAM,EAAK,YAAY,wBAAwB,EAAK,aAAa,aAAa,EAAK,iBAAiB,cAAc,EAAK,QAAQ,KAAK,QAClP,KAAM,sBAAsB,EAAK,YACjC,KAAM,EAAK,QAAU,EAAK,UAC1B,KAAM,EAAK,OACX,QAAS,IAAI,KAAK,EAAK,aAAe"}