{"version":3,"file":"utils-Bi6s7Nih.js","names":[],"sources":["../../lib/routes/mihoyo/bbs/utils.ts"],"sourcesContent":["import { art } from '@/utils/render';\r\nimport path from 'node:path';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nconst renderDescription = (description, images) => art(path.join(__dirname, '../templates/description.art'), { description, images });\r\n\r\nconst post2item = (e) => {\r\n    const author = e.user.nickname;\r\n    const title = e.post.subject;\r\n    const link = `https://www.miyoushe.com/ys/article/${e.post.post_id}`;\r\n    let describe = e.post.content || '';\r\n    try {\r\n        describe = JSON.parse(e.post.content).describe;\r\n    } catch (error) {\r\n        if (!(error instanceof SyntaxError)) {\r\n            throw error;\r\n        }\r\n    }\r\n    const description = renderDescription(describe || '', [...new Set([e.post.cover, ...e.post.images])].filter(Boolean));\r\n    const pubDate = parseDate(e.post.created_at * 1000);\r\n    const upvotes = e.stat.like_num;\r\n    const comments = e.stat.reply_num;\r\n    return {\r\n        author,\r\n        title,\r\n        link,\r\n        description,\r\n        pubDate,\r\n        upvotes,\r\n        comments,\r\n    };\r\n};\r\n\r\nexport { post2item };\r\n"],"mappings":"qMAIA,MAAM,GAAqB,EAAa,IAAW,EAAI,EAAA,KAAA,EAAA,sCAAsD,CAAE,cAAa,WAEtH,EAAa,GAAM,CACrB,IAAM,EAAS,EAAE,KAAK,SAChB,EAAQ,EAAE,KAAK,QACf,EAAO,uCAAuC,EAAE,KAAK,UACvD,EAAW,EAAE,KAAK,SAAW,GACjC,GAAI,CACA,EAAW,KAAK,MAAM,EAAE,KAAK,SAAS,eACjC,EAAO,CACZ,GAAI,EAAE,aAAiB,aACnB,MAAM,EAGd,IAAM,EAAc,EAAkB,GAAY,GAAI,CAAC,GAAG,IAAI,IAAI,CAAC,EAAE,KAAK,MAAO,GAAG,EAAE,KAAK,UAAU,OAAO,UACtG,EAAU,EAAU,EAAE,KAAK,WAAa,KACxC,EAAU,EAAE,KAAK,SACjB,EAAW,EAAE,KAAK,UACxB,MAAO,CACH,SACA,QACA,OACA,cACA,UACA,UACA"}