import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i={path:`/:category?`,categories:[`game`],example:`/chuapp/daily`,parameters:{category:`栏目分类，见下表`},description:"\n  | `category` | 栏目分类 |\n  | ------------ | ------- |\n  | `daily`    | 每日聚焦 |\n  | `pcz`      | 最好玩   |\n  | `night`    | 触乐夜话 |\n  | `news`     | 动态资讯 |\n    ",features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`分类`,maintainers:[`dousha`],radar:[{source:[`chuapp.com/category/:category`],target:`/:category`},{source:[`chuapp.com/tag/index/id/20369.html`],target:`/night`}],handler:l},a=`https://www.chuapp.com`,o={daily:{title:`每日聚焦`,suffix:`/category/daily`},pcz:{title:`最好玩`,suffix:`/category/pcz`},night:{title:`触乐夜话`,suffix:`/tag/index/id/20369.html`},news:{title:`动态资讯`,suffix:`/category/zsyx`},zsyx:{title:`动态资讯`,suffix:`/category/zsyx`}};function s(e){return`title`in e&&`link`in e&&e.title!==null&&e.link!==null}function c(e){return e?Number(e)*1e3:0}async function l(i){let{category:l=`night`}=i.req.param(),u=o[l];if(!u)return null;let d=`${a}${u.suffix}`,f=await n(d),p=r(f),m=p(`a.fn-clear`).toArray().map(e=>({title:p(e).attr(`title`),link:p(e).attr(`href`)})),h=m.filter(e=>s(e)).map(e=>e.link.startsWith(`/`)?e:{title:e.title,link:`/${e.link}`}).map(i=>{let o=`${a}${i.link}`;return e.tryGet(o,async()=>{let e=await n(o),a=r(e),s={title:i.title,link:i.link,description:a(`.content .the-content`).html()||``,pubDate:t(c(a(`.friendly_time`).attr(`data-time`))),author:a(`.author-time .fn-left`).text()||``};return s})}),g=await Promise.all(h);return{title:`触乐 - ${u.title}`,link:d,item:g}}export{i as route};
//# sourceMappingURL=chuapp-CjUMh_G6.js.map