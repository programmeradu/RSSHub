{"version":3,"file":"cyzone-B7lfwb6u.js","names":["route: Route","cache"],"sources":["../../lib/routes/cyzone/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { rootUrl, apiRootUrl, processItems, getInfo } from './util';\r\n\r\nexport const route: Route = {\r\n    path: ['/channel/:id?', '/:id?'],\r\n    radar: [\r\n        {\r\n            source: ['cyzone.cn/channel/:id', 'cyzone.cn/'],\r\n            target: '/:id',\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: ['nczitzk'],\r\n    handler,\r\n    description: `| 最新 | 快鲤鱼 | 创投 | 科创板 | 汽车 |\r\n| ---- | ------ | ---- | ------ | ---- |\r\n| news | 5      | 14   | 13     | 8    |\r\n\r\n| 海外 | 消费 | 科技 | 医疗 | 文娱 |\r\n| ---- | ---- | ---- | ---- | ---- |\r\n| 10   | 9    | 7    | 27   | 11   |\r\n\r\n| 城市 | 政策 | 特写 | 干货 | 科技股 |\r\n| ---- | ---- | ---- | ---- | ------ |\r\n| 16   | 15   | 6    | 12   | 33     |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { id = 'news' } = ctx.req.param();\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 5;\r\n\r\n    const apiUrl = new URL(`v2/content/channel/${id === 'news' ? 'getArticle' : 'detail'}`, apiRootUrl).href;\r\n    const currentUrl = new URL(`channel/${id}`, rootUrl).href;\r\n\r\n    const items = await processItems(\r\n        apiUrl,\r\n        limit,\r\n        cache.tryGet,\r\n        id === 'news'\r\n            ? {}\r\n            : {\r\n                  channel_id: id,\r\n              }\r\n    );\r\n\r\n    return {\r\n        item: items,\r\n        ...(await getInfo(currentUrl, cache.tryGet)),\r\n    };\r\n}\r\n"],"mappings":"2XAIA,MAAaA,EAAe,CACxB,KAAM,CAAC,gBAAiB,SACxB,MAAO,CACH,CACI,OAAQ,CAAC,wBAAyB,cAClC,OAAQ,SAGhB,KAAM,UACN,YAAa,CAAC,WACd,UACA,YAAa;;;;;;;;;;yCAajB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,KAAK,QAAW,EAAI,IAAI,QAC1B,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,EAE/E,EAAS,IAAI,IAAI,sBAAsB,IAAO,OAAS,aAAe,WAAY,GAAY,KAC9F,EAAa,IAAI,IAAI,WAAW,IAAM,GAAS,KAE/C,EAAQ,MAAM,EAChB,EACA,EACAC,EAAM,OACN,IAAO,OACD,GACA,CACI,WAAY,IAI1B,MAAO,CACH,KAAM,EACN,GAAI,MAAM,EAAQ,EAAYA,EAAM"}