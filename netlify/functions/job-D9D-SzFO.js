import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import r from"node:zlib";import{load as i}from"cheerio";const a=`https://wtu.91wllm.com/`,o=new Map([[`xxtz`,{title:`信息通知`,url:`${a}news/index/tag/xxtz`}],[`tzgg`,{title:`通知公告`,url:`${a}news/index/tag/tzgg`}],[`xwkd`,{title:`新闻快递`,url:`${a}news/index/tag/xwkd`}]]);function s(e){let t=/Base64.decode\(unzip\("(.+?)"\)\.substr\((\d+)\)\)\.substr\((\d+)\)/,n=e.match(t);if(!n)return``;let i=n[1],a=Number.parseInt(n[2]),o=Number.parseInt(n[3]),s=r.inflateSync(Buffer.from(i,`base64`)).toString(`utf8`),c=Buffer.from(s.slice(a),`base64`);return c.toString(`utf8`).slice(o)}const c={path:`/job/:type`,categories:[`university`],example:`/wtu/job/xxtz`,parameters:{type:`信息类型`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wtu.91wllm.com/news/index/tag/:type`]}],name:`就业信息`,maintainers:[`ticks-tan`],handler:l,description:`| 信息类型 | 消息通知 | 通知公告 | 新闻快递 |
| -------- | -------- | -------- | -------- |
| 参数     | xxtz     | tzgg     | xwkd     |`};async function l(r){let c=r.req.param(`type`),l=o.get(c),u=`${l.title} - 武汉纺织大学就业信息`,d=l.url,f=await n.get(d),p=s(f.data),m=i(p),h=m(`.newsList`).toArray().map(e=>{e=m(e);let n=e.find(`li[class='span2 y']`).text(),r=e.find(`li>a`),i=new URL(r.attr(`href`),a).href;return{title:r.text(),pubDate:t(n,`YYYY-MM-DD`),link:i}}),g=await Promise.all(h.map(t=>e.tryGet(t.link,async()=>{let{data:e}=await n.get(t.link),r=s(e);return t.description=r,t})));return{title:u,link:d,description:u,item:g}}export{c as route};
//# sourceMappingURL=job-D9D-SzFO.js.map