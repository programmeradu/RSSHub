import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as r}from"./cache-kimkMTWJ.js";import{art as i}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{invalid_parameter_default as o}from"./invalid-parameter-CUJdROXf.js";import s from"node:path";t();const c={path:`/news/:category?`,categories:[`traditional-media`],example:`/i-cable/news`,parameters:{category:`分類，默認為新聞資訊`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.i-cable.com`],target:`/news`},{source:[`www.i-cable.com/category/:category`],target:`/news/:category`}],name:`新聞`,maintainers:[`quiniapiezoelectricity`],handler:l,url:`www.i-cable.com/`,description:`
::: tip
分類只可用分類名稱，如：新聞資訊/港聞
:::`};async function l(t){let c=t.req.param(`category`)??`新聞資訊`,l=t.req.query(`limit`)??20,u=`https://www.i-cable.com/wp-json/wp/v2`,d=await r.tryGet(`${u}/categories?slug=${c}`,async()=>await a(`${u}/categories?slug=${c}`),n.cache.routeExpire,!1);if(d.data.length<1)throw new o(`Invalid Category: ${c}`);let f=d.data[0],p=await a(`${u}/posts?_embed=1&categories=${f.id}&per_page=${l}`),m=p.data.map(t=>{let n=i(s.join(e,`templates/description-362cb00d.art`),{media:t._embedded[`wp:featuredmedia`]??[],content:t.content.rendered});return{title:t.title.rendered,link:t.link,pubDate:t.date_gmt,description:n,category:t._embedded[`wp:term`][0].map(e=>e.name)??[]}});return{title:`有線新聞 - ${f.name}`,description:f.description,link:f.link,item:m}}export{c as route};
//# sourceMappingURL=news-Ccus-i5t.js.map