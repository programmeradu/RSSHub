{"version":3,"file":"zhongchou-Bpx7g3VZ.js","names":[],"sources":["../../lib/routes/taobao/zhongchou.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/zhongchou/:type?',\r\n    categories: ['shopping'],\r\n    example: '/taobao/zhongchou/all',\r\n    parameters: { type: '类型, 默认为 `all` 全部' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '众筹项目',\r\n    maintainers: ['xyqfer', 'Fatpandac'],\r\n    handler,\r\n    description: `| 全部 | 科技 | 食品        | 动漫 | 设计   | 公益 | 娱乐 | 影音  | 书籍 | 游戏 | 其他  |\r\n| ---- | ---- | ----------- | ---- | ------ | ---- | ---- | ----- | ---- | ---- | ----- |\r\n| all  | tech | agriculture | acg  | design | love | tele | music | book | game | other |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { type = 'all' } = ctx.req.param();\r\n    const map = {\r\n        all: '',\r\n        tech: '121288001',\r\n        agriculture: '123330001,125672021',\r\n        acg: '122018001',\r\n        design: '121292001,126176002,126202001',\r\n        love: '121280001',\r\n        tele: '121284001',\r\n        music: '121278001',\r\n        book: '121274002',\r\n        game: '122020001',\r\n        other: '125706031,125888001,125886001,123332001',\r\n    };\r\n    const url = `https://izhongchou.taobao.com/dream/ajax/getProjectListNew.htm?_input_charset=utf-8&type=6&pageSize=20&page=1&sort=1&status=&projectType=${encodeURIComponent(map[type])}&_=${Date.now()}&callback=`;\r\n    const response = await got({\r\n        method: 'get',\r\n        url,\r\n    });\r\n\r\n    const items = response.data.data.map((item) => {\r\n        const title = item.name;\r\n        const link = `https://izhongchou.taobao.com/dreamdetail.htm?id=${item.id}`;\r\n        const description = art(path.join(__dirname, 'templates/zhongchou.art'), {\r\n            item,\r\n        });\r\n\r\n        return {\r\n            title,\r\n            link,\r\n            description,\r\n            guid: item.id,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `淘宝众筹-${type}`,\r\n        link: 'https://izhongchou.taobao.com/index.htm',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gVAMA,MAAa,EAAe,CACxB,KAAM,oBACN,WAAY,CAAC,YACb,QAAS,wBACT,WAAY,CAAE,KAAM,oBACpB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,SAAU,aACxB,UACA,YAAa;;4FAKjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,OAAO,OAAU,EAAI,IAAI,QAC3B,EAAM,CACR,IAAK,GACL,KAAM,YACN,YAAa,sBACb,IAAK,YACL,OAAQ,gCACR,KAAM,YACN,KAAM,YACN,MAAO,YACP,KAAM,YACN,KAAM,YACN,MAAO,2CAEL,EAAM,4IAA4I,mBAAmB,EAAI,IAAO,KAAK,KAAK,MAAM,YAChM,EAAW,MAAM,EAAI,CACvB,OAAQ,MACR,QAGE,EAAQ,EAAS,KAAK,KAAK,IAAK,GAAS,CAC3C,IAAM,EAAQ,EAAK,KACb,EAAO,oDAAoD,EAAK,KAChE,EAAc,EAAI,EAAA,KAAA,EAAA,oCAAiD,CACrE,SAGJ,MAAO,CACH,QACA,OACA,cACA,KAAM,EAAK,MAInB,MAAO,CACH,MAAO,QAAQ,IACf,KAAM,0CACN,KAAM"}