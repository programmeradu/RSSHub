{"version":3,"file":"java-runtime-XVNT-T4M.js","names":["route: Route","items: DataItem[]","response: any","got","data: any"],"sources":["../../lib/routes/minecraft/java-runtime.ts"],"sourcesContent":["import { DataItem, Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { Context } from 'hono';\r\n\r\nexport const route: Route = {\r\n    path: '/java-runtime/:arch?/:javaType?',\r\n    categories: ['game'],\r\n    example: '/minecraft/java-runtime',\r\n    parameters: {\r\n        arch: `Arch, \\`all\\` by default`,\r\n        javaType: `Java runtime type, \\`all\\` by default`,\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['minecraft.net/'],\r\n        },\r\n    ],\r\n    name: 'Java Runtimes',\r\n    maintainers: ['xtexChooser'],\r\n    handler,\r\n    url: 'minecraft.net/',\r\n    description: `\r\narch:\r\n\r\n- gamecore (Currently not used by Mojang)\r\n- linux\r\n- linux-i386\r\n- mac-os\r\n- mac-os-arm64\r\n- windows-arm64\r\n- windows-x64\r\n- windows-x86\r\n\r\njavaType:\r\n\r\n- java-runtime-alpha\r\n- java-runtime-beta\r\n- java-runtime-delta\r\n- java-runtime-gamma\r\n- java-runtime-gamma-snapshot\r\n- jre-legacy\r\n- minecraft-java-exe (Only on Windows)\r\n`,\r\n    zh: {\r\n        name: 'Java运行时',\r\n    },\r\n};\r\n\r\ninterface RuntimeInManifest {\r\n    manifest: { url: string };\r\n    version: { name: string; released: string };\r\n}\r\n\r\nfunction generateJava(arch: string, javaType: string, data: RuntimeInManifest): DataItem {\r\n    return {\r\n        title: `${arch} ${javaType} 更新了 ${data.version.name}`,\r\n        description: `${arch} ${javaType} 更新了 ${data.version.name}`,\r\n        pubDate: new Date(data.version.released).toUTCString(),\r\n        link: data.manifest.url,\r\n        guid: arch + javaType + data.version.name,\r\n    };\r\n}\r\n\r\nfunction generateJavas(arch: string, javaType: string, data: RuntimeInManifest[]): DataItem[] {\r\n    return data.map((item) => generateJava(arch, javaType, item));\r\n}\r\n\r\nfunction generateArch(arch: string, data: any, javaType: string): DataItem[] {\r\n    let items: DataItem[] = [];\r\n\r\n    if (javaType === 'all') {\r\n        for (const k in data) {\r\n            if (!(k in data)) {\r\n                continue;\r\n            }\r\n            items = [...items, ...generateJavas(arch, k, data[k])];\r\n        }\r\n    } else {\r\n        items = [...items, ...generateJavas(arch, javaType, data[javaType])];\r\n    }\r\n    return items;\r\n}\r\n\r\nasync function handler(ctx: Context) {\r\n    const url = 'https://launchermeta.mojang.com/v1/products/java-runtime/2ec0cc96c44e5a76b9c8b7c39df7210883d12871/all.json';\r\n\r\n    const response: any = await got({\r\n        method: 'get',\r\n        url,\r\n        responseType: 'json',\r\n    });\r\n\r\n    const data: any = response.data;\r\n\r\n    const arch = ctx.req.param('arch') ?? 'all';\r\n    const javaType = ctx.req.param('javaType') ?? 'all';\r\n\r\n    let items: DataItem[] = [];\r\n\r\n    if (arch === 'all') {\r\n        for (const k in data) {\r\n            if (!(k in data)) {\r\n                continue;\r\n            }\r\n            items = [...items, ...generateArch(k, data[k], javaType)];\r\n        }\r\n    } else {\r\n        items = [...items, ...generateArch(arch, data[arch], javaType)];\r\n    }\r\n\r\n    const title = 'Minecraft Java运行时';\r\n\r\n    return {\r\n        title,\r\n        link: 'https://www.minecraft.net/',\r\n        description: title,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gOAIA,MAAaA,EAAe,CACxB,KAAM,kCACN,WAAY,CAAC,QACb,QAAS,0BACT,WAAY,CACR,KAAM,yBACN,SAAU,uCAEd,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,oBAGjB,KAAM,gBACN,YAAa,CAAC,eACd,UACA,IAAK,iBACL,YAAa;;;;;;;;;;;;;;;;;;;;;EAsBb,GAAI,CACA,KAAM,YASd,SAAS,EAAa,EAAc,EAAkB,EAAmC,CACrF,MAAO,CACH,MAAO,GAAG,EAAK,GAAG,EAAS,OAAO,EAAK,QAAQ,OAC/C,YAAa,GAAG,EAAK,GAAG,EAAS,OAAO,EAAK,QAAQ,OACrD,QAAS,IAAI,KAAK,EAAK,QAAQ,UAAU,cACzC,KAAM,EAAK,SAAS,IACpB,KAAM,EAAO,EAAW,EAAK,QAAQ,MAI7C,SAAS,EAAc,EAAc,EAAkB,EAAuC,CAC1F,OAAO,EAAK,IAAK,GAAS,EAAa,EAAM,EAAU,IAG3D,SAAS,EAAa,EAAc,EAAW,EAA8B,CACzE,IAAIC,EAAoB,GAExB,GAAI,IAAa,MACb,IAAK,IAAM,KAAK,EAAM,CAClB,GAAI,EAAE,KAAK,GACP,SAEJ,EAAQ,CAAC,GAAG,EAAO,GAAG,EAAc,EAAM,EAAG,EAAK,UAGtD,EAAQ,CAAC,GAAG,EAAO,GAAG,EAAc,EAAM,EAAU,EAAK,KAE7D,OAAO,EAGX,eAAe,EAAQ,EAAc,CACjC,IAEMC,EAAgB,MAAMC,EAAI,CAC5B,OAAQ,MACR,iHACA,aAAc,SAGZC,EAAY,EAAS,KAErB,EAAO,EAAI,IAAI,MAAM,SAAW,MAChC,EAAW,EAAI,IAAI,MAAM,aAAe,MAE1CH,EAAoB,GAExB,GAAI,IAAS,MACT,IAAK,IAAM,KAAK,EAAM,CAClB,GAAI,EAAE,KAAK,GACP,SAEJ,EAAQ,CAAC,GAAG,EAAO,GAAG,EAAa,EAAG,EAAK,GAAI,SAGnD,EAAQ,CAAC,GAAG,EAAO,GAAG,EAAa,EAAM,EAAK,GAAO,IAGzD,IAAM,EAAQ,oBAEd,MAAO,CACH,QACA,KAAM,6BACN,YAAa,EACb,KAAM"}