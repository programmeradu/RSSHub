import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import o from"node:path";import{load as s}from"cheerio";import c from"iconv-lite";t();const l={path:`/author/:id?`,categories:[`reading`],example:`/jjwxc/author/4364484`,parameters:{id:`作者 id，可在对应作者页中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作者最新作品`,maintainers:[`nczitzk`],handler:u};async function u(t){let l=t.req.param(`id`),u=`https://www.jjwxc.net`,d=new URL(`oneauthor.php?authorid=${l}`,u).href,{data:f}=await i(d,{responseType:`buffer`}),p=s(c.decode(f,`gbk`)),m=p(`font a`).first(),h=m.parent(),g=m.text(),_=new URL(m.prop(`href`),u).href,v=h.find(`font`).first().text(),y=h.find(`font`).eq(1).text(),b=h.parent().contents().last().text().trim(),x=_.split(/=/).pop(),S=`${g}(${v}/${y}/${b})`,C=p(`span[itemprop="name"]`).text(),w=[{title:S,link:_,description:n(o.join(e,`templates/author-e5fc819c.art`),{bookName:g,bookUrl:_,bookStatus:v,bookWords:y,bookUpdatedTime:b}),author:C,category:[v],guid:`jjwxc-${l}-${x}#${y}`,pubDate:a(r(b),8)}],T=p(`div.logo a img`),E=`https:${T.prop(`src`)}`,D=new URL(`favicon.ico`,u).href;return{item:w,title:`${T.prop(`alt`).replace(/logo/,``)} | ${C} - 最近更新`,link:d,description:p(`span[itemprop="description"]`).text(),language:`zh`,image:E,icon:D,logo:D,subtitle:p(`meta[name="Description"]`).prop(`content`),author:C}}export{l as route};
//# sourceMappingURL=author-B8ARuxMh.js.map