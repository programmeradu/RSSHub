{"version":3,"file":"learn-oxOxm_vv.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/modelscope/learn.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/learn',\r\n    categories: ['programming'],\r\n    example: '/modelscope/learn',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.modelscope.cn/learn'],\r\n        },\r\n    ],\r\n    name: '研习社',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    url: 'www.modelscope.cn/learn',\r\n};\r\n\r\nconst uselessKey = new Set(['data-type', 'ind', 'jc', 'list', 'metadata', 'newcode', 'spacing', 'subtype', 'sz', 'szunit', 'uuid']);\r\n\r\nfunction render(item) {\r\n    if (typeof item === 'string') {\r\n        return item;\r\n    }\r\n\r\n    if (Array.isArray(item)) {\r\n        const tag = item[0];\r\n        const attributes = item[1] || {};\r\n        const children = item.slice(2);\r\n\r\n        const attrs = Object.keys(attributes)\r\n            .filter((key) => !uselessKey.has(key))\r\n            .map((key) => `${key}=\"${attributes[key]}\"`)\r\n            .join(' ');\r\n\r\n        const child = children.map((element) => render(element)).join('');\r\n\r\n        return `<${tag} ${attrs}>${child}</${tag}>`;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nasync function handler(ctx) {\r\n    const baseUrl = 'https://www.modelscope.cn';\r\n\r\n    const data = await ofetch(`${baseUrl}/api/v1/dolphin/articles`, {\r\n        method: 'POST',\r\n        body: {\r\n            PageNumber: 1,\r\n            PageSize: ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit')) : 18,\r\n            Type: 2,\r\n            Sort: 'gmt_modified',\r\n            Query: '',\r\n            ExcludeIds: [1558, 1436, 881, 399, 1129],\r\n            IsCourse: [0, 1],\r\n        },\r\n    });\r\n\r\n    const items = data.Data.Articles.map((i) => ({\r\n        title: i.Title,\r\n        description:\r\n            (i.Content\r\n                ? render(JSON.parse(i.Content))\r\n                : JSON.parse(i.CourseInfo)\r\n                      .map((info) => info.Content && render(JSON.parse(info.Content)))\r\n                      .join('')) || i.Desc,\r\n        author: i.CreatedBy,\r\n        link: `${baseUrl}/learn/${i.Id}`,\r\n        pubDate: parseDate(i.GmtCreated, 'X'),\r\n        updated: parseDate(i.GmtModified, 'X'),\r\n        category: [...new Set([...JSON.parse(i.Domains), ...JSON.parse(i.Subjects)])],\r\n        image: i.ImageUrl,\r\n    }));\r\n\r\n    return {\r\n        title: '研习社 · 魔搭社区',\r\n        description: 'ModelScope——汇聚各领域先进的机器学习模型，提供模型探索体验、推理、训练、部署和应用的一站式服务。在这里，共建模型开源社区，发现、学习、定制和分享心仪的模型。',\r\n        image: 'https://g.alicdn.com/sail-web/maas/0.8.10/favicon/128.ico',\r\n        link: `${baseUrl}/learn`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gOAKA,MAAaA,EAAe,CACxB,KAAM,SACN,WAAY,CAAC,eACb,QAAS,oBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,6BAGjB,KAAM,MACN,YAAa,CAAC,UACd,UACA,IAAK,2BAGH,EAAa,IAAI,IAAI,CAAC,YAAa,MAAO,KAAM,OAAQ,WAAY,UAAW,UAAW,UAAW,KAAM,SAAU,SAE3H,SAAS,EAAO,EAAM,CAClB,GAAI,OAAO,GAAS,SAChB,OAAO,EAGX,GAAI,MAAM,QAAQ,GAAO,CACrB,IAAM,EAAM,EAAK,GACX,EAAa,EAAK,IAAM,GACxB,EAAW,EAAK,MAAM,GAEtB,EAAQ,OAAO,KAAK,GACrB,OAAQ,GAAQ,CAAC,EAAW,IAAI,IAChC,IAAK,GAAQ,GAAG,EAAI,IAAI,EAAW,GAAK,IACxC,KAAK,KAEJ,EAAQ,EAAS,IAAK,GAAY,EAAO,IAAU,KAAK,IAE9D,MAAO,IAAI,EAAI,GAAG,EAAM,GAAG,EAAM,IAAI,EAAI,GAG7C,MAAO,GAGX,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,4BAEV,EAAO,MAAMC,EAAO,GAAG,EAAQ,0BAA2B,CAC5D,OAAQ,OACR,KAAM,CACF,WAAY,EACZ,SAAU,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,GAC7E,KAAM,EACN,KAAM,eACN,MAAO,GACP,WAAY,CAAC,KAAM,KAAM,IAAK,IAAK,MACnC,SAAU,CAAC,EAAG,MAIhB,EAAQ,EAAK,KAAK,SAAS,IAAK,IAAO,CACzC,MAAO,EAAE,MACT,aACK,EAAE,QACG,EAAO,KAAK,MAAM,EAAE,UACpB,KAAK,MAAM,EAAE,YACR,IAAK,GAAS,EAAK,SAAW,EAAO,KAAK,MAAM,EAAK,WACrD,KAAK,MAAQ,EAAE,KAC9B,OAAQ,EAAE,UACV,KAAM,GAAG,EAAQ,SAAS,EAAE,KAC5B,QAAS,EAAU,EAAE,WAAY,KACjC,QAAS,EAAU,EAAE,YAAa,KAClC,SAAU,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,KAAK,MAAM,EAAE,SAAU,GAAG,KAAK,MAAM,EAAE,aACjE,MAAO,EAAE,YAGb,MAAO,CACH,MAAO,aACP,YAAa,uFACb,MAAO,4DACP,KAAM,GAAG,EAAQ,QACjB,KAAM"}