{"version":3,"file":"group-BsqfPcZZ.js","names":["route: Route","got","title","link"],"sources":["../../lib/routes/gihyo/group.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nexport const route: Route = {\r\n    path: '/list/group/:id',\r\n    categories: ['programming'],\r\n    example: '/gihyo/list/group/Ubuntu-Weekly-Recipe',\r\n    parameters: { id: 'Series' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['gihyo.jp/list/group/:id'],\r\n        },\r\n    ],\r\n    name: 'Series',\r\n    maintainers: ['masakichi'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const groupId = ctx.req.param('id');\r\n\r\n    const baseUrl = 'https://gihyo.jp';\r\n    const url = `${baseUrl}/list/group/${groupId}`;\r\n\r\n    const response = await got(url);\r\n\r\n    const $ = load(response.data);\r\n    const articles = $('ul[class=m-listitem]').find('li').not('.m-listitem--ad');\r\n    const title = $('head title').text();\r\n    const link = url;\r\n    const description = $('head meta[name=description]').attr('content');\r\n    const language = 'ja';\r\n\r\n    const item = articles.toArray().map((article) => {\r\n        const _subtitle = $('p.m-listitem__title span.subtitle', article).text();\r\n        const _title = $('p.m-listitem__title', article)\r\n            .contents()\r\n            .filter((_, el) => el.nodeType === 3)\r\n            .text();\r\n        const title = `${_subtitle} ${_title}`;\r\n        const author = $('p.m-listitem__author', article).text();\r\n        const pubDate = timezone(parseDate($('span.date', article).text(), 'YYYY-MM-DD'), +9);\r\n        const link = `${baseUrl}${$('a', article).attr('href')}`.replace(/\\?summary$/, '');\r\n        return {\r\n            title,\r\n            author,\r\n            pubDate,\r\n            link,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title,\r\n        link,\r\n        description,\r\n        language,\r\n        item,\r\n    };\r\n}\r\n"],"mappings":"sWAMA,MAAaA,EAAe,CACxB,KAAM,kBACN,WAAY,CAAC,eACb,QAAS,yCACT,WAAY,CAAE,GAAI,UAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,6BAGjB,KAAM,SACN,YAAa,CAAC,aACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,EAAI,IAAI,MAAM,MAExB,EAAU,mBACV,EAAM,GAAG,EAAQ,cAAc,IAE/B,EAAW,MAAMC,EAAI,GAErB,EAAI,EAAK,EAAS,MAClB,EAAW,EAAE,wBAAwB,KAAK,MAAM,IAAI,mBACpD,EAAQ,EAAE,cAAc,OACxB,EAAO,EACP,EAAc,EAAE,+BAA+B,KAAK,WAGpD,EAAO,EAAS,UAAU,IAAK,GAAY,CAC7C,IAAM,EAAY,EAAE,oCAAqC,GAAS,OAC5D,EAAS,EAAE,sBAAuB,GACnC,WACA,QAAQ,EAAG,IAAO,EAAG,WAAa,GAClC,OACCC,EAAQ,GAAG,EAAU,GAAG,IACxB,EAAS,EAAE,uBAAwB,GAAS,OAC5C,EAAU,EAAS,EAAU,EAAE,YAAa,GAAS,OAAQ,cAAe,GAC5EC,EAAO,GAAG,IAAU,EAAE,IAAK,GAAS,KAAK,UAAU,QAAQ,aAAc,IAC/E,MAAO,CACH,MAAA,EACA,SACA,UACA,KAAA,KAIR,MAAO,CACH,QACA,OACA,cACA,cACA"}