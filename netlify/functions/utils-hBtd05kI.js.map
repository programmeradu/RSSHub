{"version":3,"file":"utils-hBtd05kI.js","names":["got"],"sources":["../../lib/routes/leiphone/utils.ts"],"sourcesContent":["import { load } from 'cheerio';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport * as url from 'node:url';\r\n\r\nconst ProcessFeed = async (list, cache) => {\r\n    const host = 'https://www.leiphone.com';\r\n\r\n    const items = await Promise.all(\r\n        list.map(async (e) => {\r\n            const link = url.resolve(host, e);\r\n\r\n            const single = await cache.tryGet(link, async () => {\r\n                const response = await got.get(link);\r\n\r\n                const $ = load(response.data);\r\n\r\n                let description = '';\r\n                if ($('.top-img').html() !== null) {\r\n                    description += $('.top-img').html();\r\n                }\r\n\r\n                return {\r\n                    title: $('.headTit').text(),\r\n                    description: description + $('.article-lead').text() + $('.lph-article-comView').html(),\r\n                    pubDate: parseDate($('.time').text(), 8),\r\n                    author: $('.aut > a').text(),\r\n                    link,\r\n                };\r\n            });\r\n\r\n            return single;\r\n        })\r\n    );\r\n\r\n    return items;\r\n};\r\n\r\nexport default { ProcessFeed };\r\n"],"mappings":"+JAKA,MAAM,EAAc,MAAO,EAAM,IAAU,CACvC,IAEM,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAI,KAAO,IAAM,CAClB,IAAM,EAAO,EAAI,QAAQ,2BAAM,GAEzB,EAAS,MAAM,EAAM,OAAO,EAAM,SAAY,CAChD,IAAM,EAAW,MAAMA,EAAI,IAAI,GAEzB,EAAI,EAAK,EAAS,MAEpB,EAAc,GAKlB,OAJI,EAAE,YAAY,SAAW,OACzB,GAAe,EAAE,YAAY,QAG1B,CACH,MAAO,EAAE,YAAY,OACrB,YAAa,EAAc,EAAE,iBAAiB,OAAS,EAAE,wBAAwB,OACjF,QAAS,EAAU,EAAE,SAAS,OAAQ,GACtC,OAAQ,EAAE,YAAY,OACtB,UAIR,OAAO,KAIf,OAAO,GAGX,IAAA,EAAe,CAAE"}