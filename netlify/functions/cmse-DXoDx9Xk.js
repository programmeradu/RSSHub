import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i=`http://www.cmse.sdu.edu.cn/`,a=[`通知公告`,`学院新闻`,`本科生教育`,`研究生教育`,`学术动态`],o=[`zxzx/tzgg.htm`,`zxzx/xyxw.htm`,`zxzx/bksjy.htm`,`zxzx/yjsjy.htm`,`zxzx/xsdt.htm`],s={path:`/cmse/:type?`,categories:[`university`],example:`/sdu/cmse/0`,parameters:{type:"默认为 `0`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`材料科学与工程学院通知`,maintainers:[`Ji4n1ng`],handler:c,description:`| 通知公告 | 学院新闻 | 本科生教育 | 研究生教育 | 学术动态 |
| -------- | -------- | ---------- | ---------- | -------- |
| 0        | 1        | 2          | 3          | 4        |`};async function c(s){let c=s.req.param(`type`)?Number.parseInt(s.req.param(`type`)):0,l=new URL(o[c],i).href,u=await n(l),d=r(u.data),f=d(`.article_list li`).toArray().map(e=>{e=d(e);let n=e.find(`a`);return{title:n.text().trim(),link:n.attr(`href`),pubDate:t(e.find(`.date`).text(),`YYYY/MM/DD`)}});return f=await Promise.all(f.filter(e=>e.link.startsWith(`../info`)).map(t=>(t.link=new URL(t.link.slice(`3`),i).href,e.tryGet(t.link,async()=>{let e=await n(t.link),i=r(e.data);return t.title=i(`.contentTitle`).text(),t.author=i(`.contentTitle2`).find(`span`).eq(1).text().trim().match(/作者：(.*)/)[1]||`山东大学材料科学与工程学院`,i(`.contentTitle, .contentTitle2`).remove(),t.description=i(`.content_detail`).html(),t})))),{title:`山东大学材料科学与工程学院${a[c]}`,description:d(`title`).text(),link:l,item:f}}export{s as route};
//# sourceMappingURL=cmse-DXoDx9Xk.js.map