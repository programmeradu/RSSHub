import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{processItems as r}from"./utils-BjSN3wJF.js";const i={path:`/news/:lang?/:id?`,categories:[`traditional-media`],example:`/dw/news`,parameters:{lang:`Language, see below, default to en`,id:`Category ID, see below, default to the id of the Top Stories Page of the language chosen`},features:{requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,requireConfig:!1},name:`News`,maintainers:[`quiniapiezoelectricity`],handler:o,description:`
::: tip
Parameters can be obtained from the official website, for instance:
For the site https://www.dw.com/de/deutschland/s-12321 the language code would be \`de\` and the category ID would be \`s-1432\`.
:::
`,radar:[{source:[`www.dw.com/:lang/:name/:id`],target:`/news/:lang/:id`}]},a=new Set([`Article`,`Liveblog`,`Video`]);async function o(i){let o=i.req.param(`lang`)??`en`,s=i.req.param(`id`);if(/^s-\d+$/.test(s))s=s.match(/^s-(\d+)$/i)[1];else if(s===void 0){let r=await t.tryGet(`dw:navigation`,async()=>{let e=await n(`https://www.dw.com/graph-api/en/content/navigation/9097`);return e.data.data.content.topStoriesNavigations},e.cache.routeExpire,!1);s=r.map(e=>e.namedUrl.split(`/`)).find(e=>e[1]===o)[3].match(/^s-(\d+)$/i)[1]}let c=await n(`https://www.dw.com/graph-api/${o}/content/navigation/${s}`),l=c.data.data.content;t.set(`dw:navigation`,l.topStoriesNavigations,e.cache.routeExpire);let u=l.contentComposition.informationSpaces.flatMap(e=>Object.values(e).flatMap(e=>e[0]?.contents||[])).filter(e=>a.has(e.__typename)&&e.id),d=await r(u.map(e=>(e.link=new URL(e.namedUrl,`https://www.dw.com`).href,e.pubDate=e.contentDate,e.description=e.teaser,e.language=o,e.type=e.__typename.toLowerCase(),e)));return{title:`DW | ${l.title}`,link:l.canonicalUrl,description:l.metaDescription,language:l.topStoriesNavigations.find(e=>e.namedUrl.startsWith(`/${o}/`))?.localeLang??o,item:d}}export{i as route};
//# sourceMappingURL=news-BAOhEN_e.js.map