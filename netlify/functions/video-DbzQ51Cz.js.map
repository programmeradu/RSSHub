{"version":3,"file":"video-DbzQ51Cz.js","names":["route: Route","got"],"sources":["../../lib/routes/ntdm/utils.ts","../../lib/routes/ntdm/video.ts"],"sourcesContent":["const rootUrl = 'https://www.ntdm9.com';\r\n\r\nexport { rootUrl };\r\n","import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { rootUrl } from './utils';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/video/:id',\r\n    categories: ['anime'],\r\n    example: '/ntdm/video/4309',\r\n    parameters: { id: '番剧 id，对应详情 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['ntdm9.com/video/:id'],\r\n        },\r\n    ],\r\n    name: '番剧详情',\r\n    maintainers: ['Yamico'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n    const url = `${rootUrl}/video/${id}.html`;\r\n    const response = await got(url);\r\n    const $ = load(response.data);\r\n\r\n    const dmtitle = $('.detail_imform_name').text();\r\n    const dmdesc = $('.detail_imform_desc_pre').text();\r\n\r\n    const items = $('.movurl.mod ul')\r\n        .first()\r\n        .find('li')\r\n        .toArray()\r\n        .map((item) => {\r\n            const dom = $(item);\r\n            const a = dom.find('a');\r\n            return {\r\n                title: a.text(),\r\n                link: `${rootUrl}${a.attr('href')}`,\r\n            };\r\n        })\r\n        .toReversed();\r\n    return {\r\n        title: `NT动漫 - ${dmtitle}`,\r\n        link: `${rootUrl}/video/${id}.html`,\r\n        description: dmdesc,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+PAAA,MAAM,EAAU,wBCKHA,EAAe,CACxB,KAAM,aACN,WAAY,CAAC,SACb,QAAS,mBACT,WAAY,CAAE,GAAI,sBAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,yBAGjB,KAAM,OACN,YAAa,CAAC,UACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MACnB,EAAM,GAAG,EAAQ,SAAS,EAAG,OAC7B,EAAW,MAAMC,EAAI,GACrB,EAAI,EAAK,EAAS,MAElB,EAAU,EAAE,uBAAuB,OACnC,EAAS,EAAE,2BAA2B,OAEtC,EAAQ,EAAE,kBACX,QACA,KAAK,MACL,UACA,IAAK,GAAS,CACX,IAAM,EAAM,EAAE,GACR,EAAI,EAAI,KAAK,KACnB,MAAO,CACH,MAAO,EAAE,OACT,KAAM,GAAG,IAAU,EAAE,KAAK,aAGjC,aACL,MAAO,CACH,MAAO,UAAU,IACjB,KAAM,GAAG,EAAQ,SAAS,EAAG,OAC7B,YAAa,EACb,KAAM"}