import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=async e=>{let t=await n(`https://db2.gamersky.com/LabelJsonpAjax.aspx?${new URLSearchParams({jsondata:JSON.stringify({type:`updatenodelabel`,isCache:!0,cacheTime:60,nodeId:e,isNodeId:`true`,page:1})})}`,{parseResponse:e=>JSON.parse(e.match(/\((.+)\);/)?.[1]??`{}`)});return t.body},o=e=>{let n=i(e);return n(`li`).toArray().map(e=>{let i=n(e),a=i.find(`.tt`).length?i.find(`.tt`):i.find(`a`),o=a.text(),s=a.attr(`href`),c=r(t(i.find(`.time`).text()),8),l=i.find(`.txt`).text();if(s)return{title:o,link:s,pubDate:c,description:l}}).filter(e=>e!==void 0)},s=t=>e.tryGet(t.link,async()=>{let e=await n(t.link),r=i(e),a=r(`.Mid2L_con, .MidLcon`);return a.find(`.appGameBuyCardIframe, .GSAppButton, .Mid2L_down`).remove(),a.find(`a`).each((e,t)=>{t.attribs.href?.startsWith(`https://www.gamersky.com/showimage/id_gamersky.shtml?`)&&(t.attribs.href=t.attribs.href.replace(`https://www.gamersky.com/showimage/id_gamersky.shtml?`,``))}),a.find(`img`).each((e,t)=>{t.attribs.src===`http://image.gamersky.com/webimg13/zhuanti/common/blank.png`?t.attribs.src=t.attribs[`data-origin`]:t.attribs.src.endsWith(`_S.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_S.jpg`,`.jpg`))}),a.find(`.Slides li`).each((e,t)=>{t.attribs.style===`display: none;`&&(t.attribs.style=`display: list-item;`)}),t.description=a.html()||t.description,t});function c(e){let t=`|`+e.map(e=>`${e.type}|`).join(``)+`
|`+Array.from({length:e.length}).fill(`---|`).join(``)+`
|`+e.map(e=>`${e.name}|`).join(``)+`
`;return t}export{s as getArticle,a as getArticleList,c as mdTableBuilder,o as parseArticleList};
//# sourceMappingURL=utils-DH7pXmmI.js.map