{"version":3,"file":"mall-ip-BsCrtmTv.js","names":["route: Route","got"],"sources":["../../lib/routes/bilibili/mall-ip.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\n\r\nexport const route: Route = {\r\n    path: '/mall/ip/:id',\r\n    categories: ['social-media'],\r\n    example: '/bilibili/mall/ip/0_3000294',\r\n    parameters: { id: '作品 id, 可在作品列表页 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '会员购作品',\r\n    maintainers: ['DIYgod'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n\r\n    const detail = await got({\r\n        method: 'get',\r\n        url: `https://mall.bilibili.com/mall-c-search/ipright/detail?type=ip&id=${id}`,\r\n        headers: {\r\n            Referer: `https://mall.bilibili.com/ip.html?noTitleBar=1&ip=${id}&from=detail`,\r\n        },\r\n    });\r\n\r\n    const response = await got({\r\n        method: 'get',\r\n        url: `https://mall.bilibili.com/mall-c-search/ipright/newitems?type=ip&id=${id}`,\r\n        headers: {\r\n            Referer: `https://mall.bilibili.com/ip.html?noTitleBar=1&ip=${id}&from=detail`,\r\n        },\r\n    });\r\n\r\n    const data = response.data.data;\r\n\r\n    return {\r\n        title: `${detail.data.data.name} - 会员购`,\r\n        description: detail.data.data.intro,\r\n        link: `https://mall.bilibili.com/list.html?ip=${id}`,\r\n        item: data.map((item) => ({\r\n            title: item.name,\r\n            description: `${item.name}<br>￥${item.price}<br><img src=\"${item.itemsImg}\">`,\r\n            link: item.jumpUrlH5,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"gOAGA,MAAaA,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,gBACb,QAAS,8BACT,WAAY,CAAE,GAAI,0BAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,QACN,YAAa,CAAC,UACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MAEnB,EAAS,MAAMC,EAAI,CACrB,OAAQ,MACR,IAAK,qEAAqE,IAC1E,QAAS,CACL,QAAS,qDAAqD,EAAG,iBAInE,EAAW,MAAMA,EAAI,CACvB,OAAQ,MACR,IAAK,uEAAuE,IAC5E,QAAS,CACL,QAAS,qDAAqD,EAAG,iBAInE,EAAO,EAAS,KAAK,KAE3B,MAAO,CACH,MAAO,GAAG,EAAO,KAAK,KAAK,KAAK,QAChC,YAAa,EAAO,KAAK,KAAK,MAC9B,KAAM,0CAA0C,IAChD,KAAM,EAAK,IAAK,IAAU,CACtB,MAAO,EAAK,KACZ,YAAa,GAAG,EAAK,KAAK,OAAO,EAAK,MAAM,gBAAgB,EAAK,SAAS,IAC1E,KAAM,EAAK"}