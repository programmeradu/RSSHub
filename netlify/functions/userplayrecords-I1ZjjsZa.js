import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as r}from"./render-CxhTJIsl.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";t();const o={cookie:n.ncm.cookies,Referer:`https://music.163.com/`};function s(t){return!t||t.length===0?[{title:`暂无听歌排行`}]:t.map((t,n)=>{let i=t.song,o=i.ar.map(e=>e.name).join(`/`),s=r(a.join(e,`templates/userplayrecords-dec9fe0b.art`),{index:n,record:t,song:i});return{title:`[${n+1}] ${i.name} - ${o}`,link:`http://music.163.com/song?id=${i.id}`,author:o,description:s}})}const c={path:`/music/user/playrecords/:uid/:type?`,categories:[`multimedia`],example:`/163/music/user/playrecords/45441555/1`,parameters:{uid:`用户 uid, 可在用户主页 URL 中找到`,type:`排行榜类型，0所有时间(默认)，1最近一周`},features:{requireConfig:[{name:`NCM_COOKIES`,optional:!0,description:"网易云音乐登陆后的 cookie 值，可在浏览器控制台通过`document.cookie`获取。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户听歌排行`,maintainers:[`alfredcai`],handler:l};async function l(e){let t=e.req.param(`uid`),n=Number.parseInt(e.req.param(`type`))||0,r=`https://music.163.com/api/v1/play/record?uid=${t}&type=${n}`,a=await i(r,{headers:o}),c=n===1?a.data.weekData:a.data.allData;return{title:`${n===1?`听歌榜单（最近一周）`:`听歌榜单（所有时间}`} - ${t}}`,link:`https://music.163.com/user/home?id=${t}`,updated:a.headers.date,item:s(c)}}export{c as route};
//# sourceMappingURL=userplayrecords-I1ZjjsZa.js.map