import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import{apiTopicUrl as o,processItems as s,rootUrl as c}from"./util-B1ZxGs5l.js";import l from"node:path";import{load as u}from"cheerio";t();const d={path:`/:category?`,categories:[`new-media`],example:`/readhub`,parameters:{category:`分类，见下表，默认为热门话题`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`分类`,maintainers:[`WhiteWorld`,`nczitzk`,`Fatpandac`],handler:f,description:`| 热门话题 | 科技动态 | 医疗产业 | 财经快讯           |
| -------- | -------- | -------- | ------------------ |
|          | news     | medical  | financial_express |`};async function f(t){let{category:d=``}=t.req.param(),f=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):30,p=new URL(d??``,c).href,{data:m}=await a(p),h=m.match(/\[\\"type\\",\\"(\d+)\\",\\"d\\"]/)?.[1]??`1`,{data:g}=await a(o,{searchParams:{type:h,page:1,size:f}}),_=g.data.items.slice(0,f).map(t=>({title:t.title,link:t.url??new URL(`topic/${t.uid}`,c).href,description:r(l.join(e,`templates/description-a89345b3.art`),{description:t.summary,news:t.newsAggList,timeline:t.timeline}),author:t.siteNameDisplay,category:[...t.entityList.map(e=>e.name)??[],...t.tagList.map(e=>e.name)??[]],guid:t.uid,pubDate:i(t.publishDate)}));_=await s(_,n.tryGet);let v=u(m),y=v(`meta[property="og:site_name"]`).prop(`content`),b=v(`a[data-path="/${d}"]`).text(),x=v(`link[rel="preload"][as="image"]`).prop(`href`),S=v(`meta[property="og:image"]`).prop(`content`);return{item:_,title:`${y} - ${b}`,link:p,description:v(`meta[property="og:description"]`).prop(`content`),language:`zh`,image:x,icon:S,logo:S,subtitle:b,author:y,allowEmpty:!0}}export{d as route};
//# sourceMappingURL=readhub-9bP0Qanf.js.map