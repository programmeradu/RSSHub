{"version":3,"file":"utils-Dj2cDxDP.js","names":["cache","ofetch"],"sources":["../../lib/routes/landiannews/utils.ts"],"sourcesContent":["import ofetch from '@/utils/ofetch';\r\nimport cache from '@/utils/cache';\r\n\r\nconst rootUrl = 'https://www.landiannews.com/';\r\n\r\nconst fetchTaxonomy = async (slug: string, type: 'categories' | 'tags') => {\r\n    const taxonomyUrl = `${rootUrl}wp-json/wp/v2/${type}?slug=${slug}`;\r\n    const cachedTaxonomy = await cache.tryGet(taxonomyUrl, async () => {\r\n        const taxonomyData = await ofetch(taxonomyUrl);\r\n        if (!taxonomyData[0] || !taxonomyData[0].id || !taxonomyData[0].name) {\r\n            throw new Error(`${type} ${slug} not found`);\r\n        }\r\n        return { id: taxonomyData[0].id, name: taxonomyData[0].name };\r\n    });\r\n    return cachedTaxonomy;\r\n};\r\n\r\nconst fetchCategory = async (categorySlug: string) => await fetchTaxonomy(categorySlug, 'categories');\r\nconst fetchTag = async (tagSlug: string) => await fetchTaxonomy(tagSlug, 'tags');\r\n\r\nasync function fetchNewsItems(apiUrl: string) {\r\n    const data = await ofetch(apiUrl);\r\n\r\n    return data.map((item) => ({\r\n        title: item.title.rendered,\r\n        description: item.content.rendered,\r\n        link: item.link,\r\n        pubDate: new Date(item.date).toUTCString(),\r\n        author: item._embedded.author[0].name,\r\n        category: item._embedded['wp:term'].flat().map((term) => term.name),\r\n    }));\r\n}\r\n\r\nexport { fetchCategory, fetchTag, fetchNewsItems };\r\n"],"mappings":"0GAGA,MAEM,EAAgB,MAAO,EAAc,IAAgC,CACvE,IAAM,EAAc,6CAA2B,EAAK,QAAQ,IACtD,EAAiB,MAAMA,EAAM,OAAO,EAAa,SAAY,CAC/D,IAAM,EAAe,MAAMC,EAAO,GAClC,GAAI,CAAC,EAAa,IAAM,CAAC,EAAa,GAAG,IAAM,CAAC,EAAa,GAAG,KAC5D,MAAU,MAAM,GAAG,EAAK,GAAG,EAAK,aAEpC,MAAO,CAAE,GAAI,EAAa,GAAG,GAAI,KAAM,EAAa,GAAG,QAE3D,OAAO,GAGL,EAAgB,KAAO,IAAyB,MAAM,EAAc,EAAc,cAClF,EAAW,KAAO,IAAoB,MAAM,EAAc,EAAS,QAEzE,eAAe,EAAe,EAAgB,CAC1C,IAAM,EAAO,MAAMA,EAAO,GAE1B,OAAO,EAAK,IAAK,IAAU,CACvB,MAAO,EAAK,MAAM,SAClB,YAAa,EAAK,QAAQ,SAC1B,KAAM,EAAK,KACX,QAAS,IAAI,KAAK,EAAK,MAAM,cAC7B,OAAQ,EAAK,UAAU,OAAO,GAAG,KACjC,SAAU,EAAK,UAAU,WAAW,OAAO,IAAK,GAAS,EAAK"}