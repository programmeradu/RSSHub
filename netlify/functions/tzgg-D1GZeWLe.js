import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{load as n}from"cheerio";const r={path:`/lib/tzgg/:category`,categories:[`university`],example:`/tsinghua/lib/tzgg/qtkx`,parameters:{category:`分类，可在对应分类页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lib.tsinghua.edu.cn/tzgg/:category`]}],name:`图书馆通知公告`,maintainers:[`linsenwang`],handler:i};async function i(r){let{category:i}=r.req.param(),a=`https://lib.tsinghua.edu.cn/tzgg/${i}.htm`,o=await t(a),s=n(o),c=s(`.tags .on`).text(),l=s(`ul.notice-list li`).toArray().map(e=>{e=s(e);let t=e.find(`a`).first().text(),n=e.find(`.notice-date`).first().text(),r=e.find(`a`).first().attr(`href`),i=new URL(r,a).href;return{title:t,link:i,pubDate:n}}),u=await Promise.all(l.map(r=>e.tryGet(r.link,async()=>{let e=await t(r.link),i=n(e);return r.description=i(`.v_news_content`).first().html(),r})));return{allowEmpty:!0,title:`图书馆通知公告 - `+c,link:a,item:u}}export{r as route};
//# sourceMappingURL=tzgg-D1GZeWLe.js.map