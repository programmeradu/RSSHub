import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t,parseRelativeDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import{load as i}from"cheerio";const a=a=>{let o=`https://aijishu.com${a.url||a.object.url}`;return e.tryGet(o,async()=>{let e=t(a.createdDate,[`YYYY-MM-DD`,`M-DD`]),s=n(a.createdDate),c,l;try{c=await r(o);let e=i(c.data);l=e(`article.fmt`).html()}catch(e){if(e.response.status!==403)throw e}let u={title:a.title||a.object.title,link:o,description:l,pubDate:e.toString()===`Invalid Date`?s:e};return u})};var o={parseArticle:a};const s={path:`/:type/:name?`,categories:[`programming`],example:`/aijishu/channel/ai`,parameters:{type:`文章类型，可以取值如下`,name:`名字，取自URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`频道、专栏、用户`,maintainers:[],handler:c,description:`| type    | 说明 |
| ------- | ---- |
| channel | 频道 |
| blog    | 专栏 |
| u       | 用户 |`};async function c(e){let{type:t,name:n=`newest`}=e.req.param(),a=n===`newest`?`https://aijishu.com/`:`https://aijishu.com/${t}/${n}`,s=await r(a),c=i(s.data),l=c(`title`).text(),u=c(`li[data-js-stream-load-more]`).attr(`data-api-url`),d=`https://aijishu.com${u}?page=1`,f=await r(d),p=f.data,m=p.data.rows,h=await Promise.all(m.filter(e=>e?.url?.startsWith(`/a/`)||e?.object?.url.startsWith(`/a/`)).map(e=>o.parseArticle(e)));return{title:l.split(` - `).slice(0,2).join(` - `),link:a,item:h}}export{s as route};
//# sourceMappingURL=aijishu-C3hHKL1E.js.map