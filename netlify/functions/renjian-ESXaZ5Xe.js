import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"iconv-lite";const o={texie:`特写`,jishi:`记事`,daxie:`大写`,haodu:`好读`,kanke:`看客`},s={path:`/renjian/:category?`,categories:[`new-media`],example:`/163/renjian/texie`,parameters:{category:`分类，见下表，默认为特写`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`renjian.163.com/:category`,`renjian.163.com/`]}],name:`人间`,maintainers:[`nczitzk`],handler:c,description:`| 特写  | 记事  | 大写  | 好读  | 看客  |
| ----- | ----- | ----- | ----- | ----- |
| texie | jishi | daxie | haodu | kanke |`};async function c(s){let c=s.req.param(`category`)??`texie`,l=`https://renjian.163.com/special/renjian_${c}/`,u=await n({method:`get`,url:l,responseType:`buffer`}),d=a.decode(u.data,`gbk`),f={},p=d.match(/url:"(.*)",/g);if(p)f=p.slice(0,s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`)):50).map(e=>({link:e.match(/url:"(.*)",/)[1]}));else{let e=i(d);f=e(`.article h3 a`).slice(0,s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`)):50).toArray().map((t,n)=>(n=e(n),{link:n.attr(`href`)}))}return f=await Promise.all(f.map(a=>e.tryGet(a.link,async()=>{let e=await n({method:`get`,url:a.link}),o=i(e.data);return a.title=o(`h1`).text(),a.author=o(`script`).text().match(/renjian_author = '(.*)'/)[1],a.description=o(`#endText`).html()??o(`#content`).html(),a.pubDate=r(t(o(`.pub_time`).text()??o(`.post_info`).text().split(`来源:`)[0].trim()),8),a}))),{title:`人间 - ${o[c]} - 网易新闻`,link:l,item:f}}export{s as route};
//# sourceMappingURL=renjian-ESXaZ5Xe.js.map