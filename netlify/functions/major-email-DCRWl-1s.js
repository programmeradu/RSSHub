import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";import i from"iconv-lite";const a=`http://wlwz.changsha.gov.cn`,o={path:`/hunan/changsha/major-email`,categories:[`government`],example:`/gov/hunan/changsha/major-email`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wlwz.changsha.gov.cn/webapp/cs2020/email/*`]}],name:`长沙市人民政府`,maintainers:[`shansing`],handler:s,url:`wlwz.changsha.gov.cn/webapp/cs2020/email/*`,description:`#### 市长信箱 {#hu-nan-sheng-ren-min-zheng-fu-chang-sha-shi-ren-min-zheng-fu-shi-zhang-xin-xiang}


可能仅限中国大陆服务器访问，以实际情况为准。`};async function s(){let o=await n(`http://wlwz.changsha.gov.cn/webapp/cs2020/email/index.jsp`,{responseType:`buffer`});o.data=i.decode(o.data,`gbk`);let s=r(o.data),c=s(`.table1 tbody tr`).slice(1).toArray().map(e=>(e=s(e),{title:e.find(`td[title]`).attr(`title`),link:a+e.find(`td[title] > a`).attr(`href`),author:e.find(`td:last`).text()})),l=await Promise.all(c.map(a=>e.tryGet(a.link,async()=>{let e=await n(a.link,{responseType:`buffer`});e.data=i.decode(e.data,`gbk`);let o=r(e.data),s={title:a.title,description:o(`.letter-details`).html().trim(),pubDate:t(o(`.letter-details div:first table tr:nth-child(2) > .td_label2`).text()+` +0800`,`YYYY-MM-DD HH:mm:ss ZZ`),link:a.link,author:a.author};return s})));return{title:`来信反馈 - 长沙市市长信箱`,link:`${a}/webapp/cs2020/email/index.jsp`,item:l}}export{o as route};
//# sourceMappingURL=major-email-DCRWl-1s.js.map