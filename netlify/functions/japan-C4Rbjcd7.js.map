{"version":3,"file":"japan-C4Rbjcd7.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/hypergryph/arknights/japan.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport type { Context } from 'hono';\r\n\r\ntype ContentItem = {\r\n    key: string;\r\n    value: string;\r\n    bannerUrl: string;\r\n    bannerUrlMobile: string;\r\n    digest: string;\r\n    imgCount: number;\r\n    imgInfo: any[];\r\n    ext_0: string;\r\n    ext_1: string;\r\n    ext_2: string;\r\n    ext_3: string;\r\n    ext_4: string;\r\n    ext_5: string;\r\n    ext_6: string;\r\n    ext_7: string;\r\n    ext_8: string;\r\n    ext_9: string;\r\n};\r\n\r\ntype NewsDetail = {\r\n    id: string;\r\n    title: string;\r\n    category: number;\r\n    content: ContentItem[];\r\n    lang: string;\r\n    highlight: number;\r\n    publishedAt: string;\r\n    ext1: null | string;\r\n    ext2: null | string;\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/arknights/japan',\r\n    categories: ['game'],\r\n    example: '/hypergryph/arknights/japan',\r\n    radar: [\r\n        {\r\n            source: ['ak.arknights.jp/news', 'ak.arknights.jp/'],\r\n        },\r\n    ],\r\n    name: 'アークナイツ (日服新闻)',\r\n    maintainers: ['ofyark'],\r\n    handler,\r\n    url: 'ak.arknights.jp/news',\r\n};\r\n\r\nasync function handler(ctx: Context) {\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit'), 10) : 9;\r\n\r\n    const response = await ofetch('https://www.arknights.jp:10014/news', {\r\n        query: {\r\n            lang: 'ja',\r\n            limit,\r\n            page: 1,\r\n        },\r\n    });\r\n\r\n    const newsList = (response.data.items as NewsDetail[]).map((item) => ({\r\n        title: item.title,\r\n        description: item.content[0].value,\r\n        pubDate: parseDate(item.publishedAt),\r\n        link: `https://www.arknights.jp/news/${item.id}`,\r\n    }));\r\n\r\n    return {\r\n        title: 'アークナイツ',\r\n        link: 'https://www.arknights.jp/news',\r\n        description: 'アークナイツ ニュース',\r\n        language: 'ja',\r\n        item: newsList,\r\n    };\r\n}\r\n"],"mappings":"gOAqCA,MAAaA,EAAe,CACxB,KAAM,mBACN,WAAY,CAAC,QACb,QAAS,8BACT,MAAO,CACH,CACI,OAAQ,CAAC,uBAAwB,sBAGzC,KAAM,gBACN,YAAa,CAAC,UACd,UACA,IAAK,wBAGT,eAAe,EAAQ,EAAc,CACjC,IAAM,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,SAAU,IAAM,EAE/E,EAAW,MAAMC,EAAO,sCAAuC,CACjE,MAAO,CACH,KAAM,KACN,QACA,KAAM,KAIR,EAAY,EAAS,KAAK,MAAuB,IAAK,IAAU,CAClE,MAAO,EAAK,MACZ,YAAa,EAAK,QAAQ,GAAG,MAC7B,QAAS,EAAU,EAAK,aACxB,KAAM,iCAAiC,EAAK,QAGhD,MAAO,CACH,MAAO,SACP,KAAM,gCACN,YAAa,cACb,SAAU,KACV,KAAM"}