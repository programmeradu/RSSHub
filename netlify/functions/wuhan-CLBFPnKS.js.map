{"version":3,"file":"wuhan-CLBFPnKS.js","names":["route: Route","got"],"sources":["../../lib/routes/tingshuitz/wuhan.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\nconst baseUrl = 'https://www.whwater.com';\r\n\r\nexport const route: Route = {\r\n    path: '/wuhan/:channelId?',\r\n    radar: [\r\n        {\r\n            source: ['whwater.com/IWater.shtml', 'whwater.com/'],\r\n            target: '/wuhan',\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: [],\r\n    handler,\r\n    url: 'whwater.com/IWater.shtml',\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { channelId = 68 } = ctx.req.param();\r\n    const response = await got.post('https://manager.whwater.com:8900/website/article/findChannelArticle', {\r\n        form: {\r\n            channelId,\r\n            searchKey: '',\r\n            thumbnailStatus: 0,\r\n            topStatus: 0,\r\n            recommendStatus: 0,\r\n            page: 1,\r\n            size: ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit')) : 30,\r\n        },\r\n    });\r\n\r\n    const data = response.data.data;\r\n    const items = data.articleArray.map((item) => ({\r\n        title: item.title,\r\n        description: item.content,\r\n        pubDate: parseDate(item.publishTime),\r\n        link: `https://${baseUrl}/IPolicyDetails.shtml?id=31&sid=${channelId}${item.articleLink}`,\r\n    }));\r\n\r\n    return {\r\n        title: `${data.channelName}通知 - 武汉市水务集团有限公司`,\r\n        link: `${baseUrl}/IWater.shtml?id=31&sid=48`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"qRAGA,MAAM,EAAU,0BAEHA,EAAe,CACxB,KAAM,qBACN,MAAO,CACH,CACI,OAAQ,CAAC,2BAA4B,gBACrC,OAAQ,WAGhB,KAAM,UACN,YAAa,GACb,UACA,IAAK,4BAGT,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,YAAY,IAAO,EAAI,IAAI,QAC7B,EAAW,MAAMC,EAAI,KAAK,sEAAuE,CACnG,KAAM,CACF,YACA,UAAW,GACX,gBAAiB,EACjB,UAAW,EACX,gBAAiB,EACjB,KAAM,EACN,KAAM,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,MAI3E,EAAO,EAAS,KAAK,KACrB,EAAQ,EAAK,aAAa,IAAK,IAAU,CAC3C,MAAO,EAAK,MACZ,YAAa,EAAK,QAClB,QAAS,EAAU,EAAK,aACxB,KAAM,WAAW,EAAQ,kCAAkC,IAAY,EAAK,iBAGhF,MAAO,CACH,MAAO,GAAG,EAAK,YAAY,kBAC3B,KAAM,GAAG,EAAQ,4BACjB,KAAM"}