import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import n from"markdown-it";const r=n({html:!0}),i={path:`/commits/:owner/:repo/:branch?`,categories:[`programming`],example:`/gitcode/commits/openharmony-sig/flutter_flutter`,parameters:{owner:`用户名/组织名`,repo:`仓库名`,branch:`分支名，可选，默认为主分支`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`gitcode.com/:owner/:repo/commits`,`gitcode.com/:owner/:repo/commits/:branch`],target:e=>`/gitcode/commits/${e.owner}/${e.repo}${e.branch?`/${e.branch}`:``}`}],name:`仓库提交`,maintainers:[`JiZhi-Error`],handler:a};async function a(n){let{owner:i,repo:a,branch:o}=n.req.param(),s=`https://web-api.gitcode.com/api/v2/projects/${encodeURIComponent(`${i}/${a}`)}/repository/commits`,c={per_page:n.req.query(`limit`)?Number(n.req.query(`limit`)):100,ref_name:o},{data:l}=await t(s,{searchParams:c});if(!l||!l.content)throw Error(`无法获取提交数据`);let u=l.content.map(t=>({title:r.renderInline(t.title),description:r.render(t.message),author:t.author_name,pubDate:e(t.committed_date),guid:t.id,link:`https://gitcode.com/${i}/${a}/commit/${t.id}`})),d=o?` (${o})`:``;return{title:`${i}/${a}/${d} - 提交记录`,link:`https://gitcode.com/${i}/${a}/commits/${o||``}`,item:u}}export{i as route};
//# sourceMappingURL=commits-C7-J0Ohf.js.map