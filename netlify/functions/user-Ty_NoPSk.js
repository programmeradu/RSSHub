import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{getCurrentPath as t}from"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import o from"node:path";const s=t(import.meta.url),c={path:`/user/:user`,categories:[`social-media`],example:`/rattibha/user/elonmusk`,parameters:{user:`Twitter username, without @`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`rattibha.com/:user`]}],name:`User Threads`,maintainers:[`yshalsager`],handler:l};async function l(t){let c=`https://rattibha.com`,{user:l}=t.req.param(),u=await n.tryGet(`rattibha:user:${l}`,async()=>{let e=await a(`${c}/user`,{query:{id:l}});return e.user}),d=await n.tryGet(`rattibha:userThreads:${l}`,()=>a(`${c}/u_threads`,{query:{id:u.account_user_id,page:0,post_type:0}}),e.cache.routeExpire,!1),f=d.map(e=>({title:e.thread.t.info.text.split(`
`)[0],link:`${c}/thread/${e.thread_id}`,pubDate:i(e.thread.created_at),updated:i(e.thread.updated_at),author:u.name,category:e.thread.categories.map(e=>e.tag.name),description:r(o.join(s,`templates/description-f4c5aa2f.art`),{text:e.thread.t.info.text.replaceAll(`
`,`<br>`),media:e.thread.m})}));return{title:`سلاسل تغريدات ${l}`,link:`${c}/${l}`,item:f}}export{c as route};
//# sourceMappingURL=user-Ty_NoPSk.js.map