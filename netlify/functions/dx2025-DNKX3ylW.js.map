{"version":3,"file":"dx2025-DNKX3ylW.js","names":["route: Route","got","cache"],"sources":["../../lib/routes/dx2025/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/:type?/:category?',\r\n    categories: ['new-media'],\r\n    example: '/dx2025',\r\n    parameters: { type: '内容类别，见下表，默认为空', category: '行业分类，见下表，默认为空' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '分类',\r\n    maintainers: ['nczitzk'],\r\n    handler,\r\n    description: `内容类别\r\n\r\n| 产业观察             | 行业报告         | 政策   | 数据 |\r\n| -------------------- | ---------------- | ------ | ---- |\r\n| industry-observation | industry-reports | policy | data |\r\n\r\n  行业分类\r\n\r\n| 行业                 | 行业名称                                                          |\r\n| -------------------- | ----------------------------------------------------------------- |\r\n| 新一代信息技术       | next-generation-information-technology-industry-reports           |\r\n| 高档数控机床和机器人 | high-grade-cnc-machine-tools-and-robots-industry-reports          |\r\n| 航空航天装备         | aerospace-equipment-industry-reports                              |\r\n| 海工装备及高技术船舶 | marine-engineering-equipment-and-high-tech-ships-industry-reports |\r\n| 先进轨道交通装备     | advanced-rail-transportation-equipment-industry-reports           |\r\n| 节能与新能源汽车     | energy-saving-and-new-energy-vehicles-industry-reports            |\r\n| 电力装备             | electric-equipment-industry-reports                               |\r\n| 农机装备             | agricultural-machinery-equipment-industry-reports                 |\r\n| 新材料               | new-material-industry-reports                                     |\r\n| 生物医药及医疗器械   | biomedicine-and-medical-devices-industry-reports                  |\r\n| 现代服务业           | modern-service-industry-industry-reports                          |\r\n| 制造业人才           | manufacturing-talent-industry-reports                             |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const type = ctx.req.param('type') || '';\r\n    const category = ctx.req.param('category') || '';\r\n\r\n    const rootUrl = 'https://www.dx2025.com';\r\n    const currentUrl = `${rootUrl}${type === '' ? '' : `/archives/${type === 'tag' ? `tag${category === '' ? '' : `/${category}`}` : `category/${type}${category === '' ? '' : `/${category}`}`}`}`;\r\n    const response = await got({\r\n        method: 'get',\r\n        url: currentUrl,\r\n    });\r\n\r\n    const $ = load(response.data);\r\n\r\n    const list = $('.entry-title a')\r\n        .slice(0, 10)\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            return {\r\n                title: item.text(),\r\n                link: item.attr('href'),\r\n            };\r\n        });\r\n\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                const detailResponse = await got({\r\n                    method: 'get',\r\n                    url: item.link,\r\n                });\r\n                const content = load(detailResponse.data);\r\n\r\n                item.author = content('.entry-author-name').text();\r\n                item.description = content('.bpp-post-content, .entry-content').html();\r\n                item.pubDate = new Date(content('.entry-date').attr('datetime')).toUTCString();\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: $('title').text(),\r\n        link: currentUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"mTAKA,MAAaA,EAAe,CACxB,KAAM,qBACN,WAAY,CAAC,aACb,QAAS,UACT,WAAY,CAAE,KAAM,gBAAiB,SAAU,iBAC/C,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,KACN,YAAa,CAAC,WACd,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;0FAwBjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,SAAW,GAChC,EAAW,EAAI,IAAI,MAAM,aAAe,GAGxC,EAAa,yBAAa,IAAS,GAAK,GAAK,aAAa,IAAS,MAAQ,MAAM,IAAa,GAAK,GAAK,IAAI,MAAe,YAAY,IAAO,IAAa,GAAK,GAAK,IAAI,UACzK,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,IAAK,IAGH,EAAI,EAAK,EAAS,MAElB,EAAO,EAAE,kBACV,MAAM,EAAG,IACT,UACA,IAAK,IACF,EAAO,EAAE,GACF,CACH,MAAO,EAAK,OACZ,KAAM,EAAK,KAAK,WAItB,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACNC,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,IAAM,EAAiB,MAAMD,EAAI,CAC7B,OAAQ,MACR,IAAK,EAAK,OAER,EAAU,EAAK,EAAe,MAMpC,MAJA,GAAK,OAAS,EAAQ,sBAAsB,OAC5C,EAAK,YAAc,EAAQ,qCAAqC,OAChE,EAAK,QAAU,IAAI,KAAK,EAAQ,eAAe,KAAK,aAAa,cAE1D,MAKnB,MAAO,CACH,MAAO,EAAE,SAAS,OAClB,KAAM,EACN,KAAM"}