{"version":3,"file":"utils-GkAYEOfJ.js","names":["got"],"sources":["../../lib/routes/gelonghui/utils.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate, parseRelativeDate } from '@/utils/parse-date';\r\nimport timezone from '@/utils/timezone';\r\n\r\nconst parseItem = (item, tryGet) =>\r\n    tryGet(item.link, async () => {\r\n        const { data: res } = await got(item.link);\r\n        const $ = load(res);\r\n        if (item.link.startsWith('https://www.gelonghui.com/live/')) {\r\n            item.title = $('.type-name').next().text().trim();\r\n            item.description = $('.dtb-content').html();\r\n        } else {\r\n            // article\r\n            item.title = $('.article-title').text().trim();\r\n            item.description = $('.article-summary').html() + $('article.article-with-html').html();\r\n            if (!item.pubDate) {\r\n                const isRelativeDate = $('time.date').text().includes('前') || $('time.date').text().includes('天');\r\n                item.pubDate = isRelativeDate ? parseRelativeDate($('time.date').text()) : timezone(parseDate($('time.date').text(), 'MM-DD HH:mm'), +8);\r\n            }\r\n        }\r\n        return item;\r\n    });\r\n\r\nexport { parseItem };\r\n"],"mappings":"6MAKA,MAAM,GAAa,EAAM,IACrB,EAAO,EAAK,KAAM,SAAY,CAC1B,GAAM,CAAE,KAAM,GAAQ,MAAMA,EAAI,EAAK,MAC/B,EAAI,EAAK,GACf,GAAI,EAAK,KAAK,WAAW,mCACrB,EAAK,MAAQ,EAAE,cAAc,OAAO,OAAO,OAC3C,EAAK,YAAc,EAAE,gBAAgB,eAGrC,EAAK,MAAQ,EAAE,kBAAkB,OAAO,OACxC,EAAK,YAAc,EAAE,oBAAoB,OAAS,EAAE,6BAA6B,OAC7E,CAAC,EAAK,QAAS,CACf,IAAM,EAAiB,EAAE,aAAa,OAAO,SAAS,MAAQ,EAAE,aAAa,OAAO,SAAS,KAC7F,EAAK,QAAU,EAAiB,EAAkB,EAAE,aAAa,QAAU,EAAS,EAAU,EAAE,aAAa,OAAQ,eAAgB,GAG7I,OAAO"}