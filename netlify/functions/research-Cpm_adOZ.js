import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";import i from"p-map";const a={path:`/research`,categories:[`programming`],example:`/anthropic/research`,parameters:{},radar:[{source:[`www.anthropic.com/research`,`www.anthropic.com`]}],name:`Research`,maintainers:[`ttttmr`],handler:o,url:`www.anthropic.com/research`};async function o(){let a=`https://www.anthropic.com/research`,o=await n(a),s=r(o),c=/self\.__next_f\.push\((.+)\)/,l=[];for(let e of s(`script`).toArray()){let t=s(e),n=t.text(),r=c.exec(n);if(r){let e;try{e=JSON.parse(r[1]),Array.isArray(e)&&e.length===2&&e[0]===1&&l.push(e[1])}catch{}}}let u=/^([0-9a-zA-Z]+):([0-9a-zA-Z]+)?(\[.*)$/,d=l.join(``).split(`
`).map(e=>{let t=u.exec(e);return t?{id:t[1],tag:t[2],data:JSON.parse(t[3])}:{id:``,tag:``,data:e}}),f=d.flatMap(e=>Array.isArray(e.data)?e.data:[]).flatMap(e=>e?.page?.sections??[]),p=f.flatMap(e=>e?.tabPages??[]).filter(e=>e?.label===`Overview`),m=p.flatMap(e=>e.sections).filter(e=>e?.title===`Publications`),h=m.flatMap(e=>e?.posts??[]).map(e=>({title:e.title,link:`https://www.anthropic.com/research/${e.slug.current}`,pubDate:t(e.publishedOn)})),g=await i(h,t=>e.tryGet(t.link,async()=>{let e=await n(t.link),i=r(e),a=i(`div[class*="PostDetail_post-detail__"]`);return a.find(`img`).each((e,t)=>{let n=i(t);n.removeAttr(`style srcset`);let r=n.attr(`src`),a=new URLSearchParams(r),o=a.get(`/_next/image?url`);o&&n.attr(`src`,o)}),t.description=a.html(),t}),{concurrency:5});return{title:`Anthropic Research`,link:a,description:`Latest research from Anthropic`,item:g}}export{a as route};
//# sourceMappingURL=research-Cpm_adOZ.js.map