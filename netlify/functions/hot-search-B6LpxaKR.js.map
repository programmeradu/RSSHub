{"version":3,"file":"hot-search-B6LpxaKR.js","names":["route: Route","cache","utils","got"],"sources":["../../lib/routes/bilibili/hot-search.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport cache from './cache';\r\nimport utils from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/hot-search',\r\n    categories: ['social-media'],\r\n    example: '/bilibili/hot-search',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.bilibili.com/', 'm.bilibili.com/'],\r\n        },\r\n    ],\r\n    name: '热搜',\r\n    maintainers: ['CaoMeiYouRen'],\r\n    handler,\r\n    url: 'www.bilibili.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const wbiVerifyString = await cache.getWbiVerifyString();\r\n    const params = utils.addWbiVerifyInfo('limit=10&platform=web', wbiVerifyString);\r\n    const url = `https://api.bilibili.com/x/web-interface/wbi/search/square?${params}`;\r\n    const response = await got({\r\n        method: 'get',\r\n        url,\r\n        headers: {\r\n            Referer: `https://api.bilibili.com`,\r\n        },\r\n    });\r\n    const trending = response?.data?.data?.trending;\r\n    const title = trending?.title;\r\n    const list = trending?.list || [];\r\n    return {\r\n        title,\r\n        link: url,\r\n        description: 'bilibili热搜',\r\n        item: list.map((item) => ({\r\n            title: item.keyword,\r\n            description: `${item.keyword}<br>${item.icon ? `<img src=\"${item.icon}\">` : ''}`,\r\n            link: item.link || item.goto || `https://search.bilibili.com/all?${new URLSearchParams({ keyword: item.keyword })}&from_source=webtop_search`,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"udAKA,MAAaA,EAAe,CACxB,KAAM,cACN,WAAY,CAAC,gBACb,QAAS,uBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,oBAAqB,qBAGtC,KAAM,KACN,YAAa,CAAC,gBACd,UACA,IAAK,qBAGT,eAAe,GAAU,CACrB,IAAM,EAAkB,MAAMC,EAAM,qBAC9B,EAASC,EAAM,iBAAiB,wBAAyB,GACzD,EAAM,8DAA8D,IACpE,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,MACA,QAAS,CACL,QAAS,8BAGX,EAAW,GAAU,MAAM,MAAM,SACjC,EAAQ,GAAU,MAClB,EAAO,GAAU,MAAQ,GAC/B,MAAO,CACH,QACA,KAAM,EACN,YAAa,aACb,KAAM,EAAK,IAAK,IAAU,CACtB,MAAO,EAAK,QACZ,YAAa,GAAG,EAAK,QAAQ,MAAM,EAAK,KAAO,aAAa,EAAK,KAAK,IAAM,KAC5E,KAAM,EAAK,MAAQ,EAAK,MAAQ,mCAAmC,IAAI,gBAAgB,CAAE,QAAS,EAAK,UAAW"}