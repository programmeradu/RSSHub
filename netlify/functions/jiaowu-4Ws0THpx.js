import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{Language as i}from"./constants-Co2rEYdo.js";import{load as a}from"cheerio";const o=async(e,t=`gb2312`)=>new TextDecoder(t).decode(await n(e,{responseType:`arrayBuffer`})),s=e=>{let t=e.trim();return t=t.startsWith(`&nbsp;&nbsp;`)?t.slice(12):t,t=t.endsWith(`<br>`)?t.slice(0,Math.max(0,t.length-4)):t,t.trim()},c={path:`/jiaowu/jxtz/:detail?`,categories:[`university`],example:`/sicau/jiaowu/jxtz/detail`,parameters:{detail:`是否抓取全文，该值只要不为空就抓取全文返回，否则只返回标题`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jiaowu.sicau.edu.cn/web/web/web/index.asp`],target:`/jiaowu/jxtz`}],name:`教务处`,maintainers:[`hualiong`],description:`
::: tip
抓取全文返回会导致更长的响应时间，可以尝试使用 \`/sicau/jiaowu/jxtz\` 路径，这将只返回标题，然后再在应用内抓取全文内容。
:::
`,url:`jiaowu.sicau.edu.cn/`,handler:async n=>{let c=`https://jiaowu.sicau.edu.cn/web/web/web`,{detail:l=null}=n.req.param(),u=await o(`${c}/gwmore.asp`),d=a(u),f=d(`tbody > .text-c:nth-child(-n+10)`).toArray().map(e=>{let n=d(e).children(),i=n.eq(2).find(`a`);return{category:[n.eq(1).text()],link:`${c}/${i.attr(`href`)}`,title:i.children().first().text(),pubDate:r(t(n.eq(3).text(),`YYYY-M-D`),8),author:n.eq(4).text(),description:`请在应用内抓取全文内容`}});return l&&(f=await Promise.all(f.map(t=>e.tryGet(t.link,async()=>{let e=a(await o(t.link));return t.description=s(e(`.text1[width="95%"] b`).html()),t})))),{title:`教学通知 - 四川农业大学教务处`,link:`https://jiaowu.sicau.edu.cn/web/web/web/gwmore.asp`,language:i.Chinese,item:f}}};export{c as route};
//# sourceMappingURL=jiaowu-4Ws0THpx.js.map