import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import{ViewType as o}from"./types-A5bA50Mg.js";import s from"node:path";import{load as c}from"cheerio";t();const l=async t=>{let{id:o=`tzgg`}=t.req.param(),l=Number.parseInt(t.req.query(`limit`)??`10`,10),u=`https://hitgs.hit.edu.cn`,d=new URL(`${o}/list.htm`,u).href,f=await a(d),p=c(f),m=p(`html`).attr(`lang`)??`zh`,h=[];h=p(`li.news, div.tbt17`).slice(0,l).toArray().map(t=>{let n=p(t),a=n.find(`div.news_title, span.div.news_title, div.bttb2`).text(),o=r(s.join(e,`templates/description-d37ebf7e.art`),{intro:n.find(`div.news_text, div.jj5`).text()}),c=p(`span.news_meta`).text()||(p(`span.news_days`).text()?`${p(`span.news_days`).text()}-${p(`span.news_year`).text()}`:`${p(`div.tm-3`).text()}-${p(`div.tm-1`).text()}`),l=n.find(`div.news_title a`).attr(`href`)??n.find(`div.bttb2 a`).attr(`href`)??n.find(`a`).attr(`href`),d=c,f={title:a,description:o,pubDate:i(c),link:l?new URL(l,u).href:void 0,content:{html:o,text:o},updated:i(d),language:m};return f}),h=await Promise.all(h.map(t=>t.link?n.tryGet(t.link,async()=>{let n=await a(t.link),o=c(n),l=o(`h1.arti_title`).text()+o(`h2.arti_title`).text(),d=r(s.join(e,`templates/description-d37ebf7e.art`),{description:o(`div.wp_articlecontent`).html()}),f=o(`span.arti_update`).text().split(/：/).pop()?.trim(),p=f,h={title:l,description:d,pubDate:f?i(f):t.pubDate,content:{html:d,text:d},updated:p?i(p):t.updated,language:m},g=o(`a[sudyfile-attr]`).filter((e,t)=>{let n=o(t);return!n.attr(`href`)?.endsWith(`htm`)}).first(),_=g.attr(`href`);if(_){let e=`application/${_.split(/\./).pop()||`octet-stream`}`,t=g.attr(`sudyfile-attr`)?.match(/'title':'(.*?)'/)?.[1];h={...h,enclosure_url:new URL(_,u).href,enclosure_type:e,enclosure_title:t||l}}return{...t,...h}}):t));let g=p(`title`).text(),_=p(`p.copyright span`).first().text().split(/©/).pop()??``;return{title:`${_?`${_} - `:``}${g}`,description:g,link:d,item:h,allowEmpty:!0,image:p(`div.foot-logo img`).attr(`src`),author:_,language:m,id:d}},u={path:`/hitgs/:id?`,name:`研究生院`,url:`hitgs.hit.edu.cn`,maintainers:[`hlmu`,`nczitzk`],handler:l,example:`/hit/hitgs/tzgg`,parameters:{category:{description:"分类，默认为 `tzgg`，即通知公告，可在对应分类页 URL 中找到",options:[{label:`通知公告`,value:`tzgg`},{label:`综合新闻`,value:`zhxw`},{label:`高水平课程与学术交流`,value:`gspkcyxsjl`},{label:`国家政策`,value:`gjzc`},{label:`规章制度`,value:`17546`},{label:`办事流程`,value:`17547`},{label:`常见问题`,value:`17548`},{label:`常见下载`,value:`17549`}]}},description:`:::tip
订阅 [通知公告](https://hitgs.hit.edu.cn/tzgg/list.htm)，其源网址为 \`https://hitgs.hit.edu.cn/tzgg/list.htm\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/hit/hitgs/tzgg\`](https://rsshub.app/hit/hitgs/tzgg)。
:::

<details>
  <summary>更多栏目</summary>

| 栏目 | ID |
| - | - |
| [通知公告](https://hitgs.hit.edu.cn/tzgg/list.htm) | [tzgg](https://rsshub.app/hit/hitgs/tzgg) |
| [综合新闻](https://hitgs.hit.edu.cn/zhxw/list.htm) | [zhxw](https://rsshub.app/hit/hitgs/zhxw) |
| [高水平课程与学术交流](https://hitgs.hit.edu.cn/gspkcyxsjl/list.htm) | [gspkcyxsjl](https://rsshub.app/hit/hitgs/gspkcyxsjl) |
| [国家政策](https://hitgs.hit.edu.cn/gjzc/list.htm) | [gjzc](https://rsshub.app/hit/hitgs/gjzc) |
| [规章制度](https://hitgs.hit.edu.cn/17546/list.htm) | [17546](https://rsshub.app/hit/hitgs/17546) |
| [办事流程](https://hitgs.hit.edu.cn/17547/list.htm) | [17547](https://rsshub.app/hit/hitgs/17547) |
| [常见问题](https://hitgs.hit.edu.cn/17548/list.htm) | [17548](https://rsshub.app/hit/hitgs/17548) |
| [常见下载](https://hitgs.hit.edu.cn/17549/list.htm) | [17549](https://rsshub.app/hit/hitgs/17549) |

</details>
`,categories:[`university`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hitgs.hit.edu.cn`,`hitgs.hit.edu.cn/:id/list.htm`],target:e=>{let t=e.id;return`/hit/hitgs${t?`/${t}`:``}`}},{title:`通知公告`,source:[`hitgs.hit.edu.cn/tzgg/list.htm`],target:`/hitgs/tzgg`},{title:`综合新闻`,source:[`hitgs.hit.edu.cn/zhxw/list.htm`],target:`/hitgs/zhxw`},{title:`高水平课程与学术交流`,source:[`hitgs.hit.edu.cn/gspkcyxsjl/list.htm`],target:`/hitgs/gspkcyxsjl`},{title:`国家政策`,source:[`hitgs.hit.edu.cn/gjzc/list.htm`],target:`/hitgs/gjzc`},{title:`规章制度`,source:[`hitgs.hit.edu.cn/17546/list.htm`],target:`/hitgs/17546`},{title:`办事流程`,source:[`hitgs.hit.edu.cn/17547/list.htm`],target:`/hitgs/17547`},{title:`常见问题`,source:[`hitgs.hit.edu.cn/17548/list.htm`],target:`/hitgs/17548`},{title:`常见下载`,source:[`hitgs.hit.edu.cn/17549/list.htm`],target:`/hitgs/17549`}],view:o.Articles};export{l as handler,u as route};
//# sourceMappingURL=hitgs-BFKmreq-.js.map