import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{baseUrl as r,journalMap as i}from"./utils-B3NMDEnK.js";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";const s={path:`/cover`,categories:[`journal`],example:`/nature/cover`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nature.com/`]}],name:`Cover Story`,maintainers:[`y9c`,`pseudoyu`],handler:c,url:`nature.com/`,description:`Subscribe to the cover images of the Nature journals, and get the latest publication updates in time.`};async function c(){let s=new o;await n(`https://www.nature.com`,{cookieJar:s});let c=i.items.filter(e=>e.id).map(e=>({...e,link:`${r}/${e.title}/current-issue`})),l=await Promise.all(c.map(r=>e.tryGet(r.link,async()=>{let{id:e,name:i,link:o}=r,c=await n(o,{cookieJar:s}),l=a(c.data),u=l(`meta[property="og:url"]`).attr(`content`),d=/volumes\/(?<volume>\d+)\/issues\/(?<issue>\d+)/,{volume:f,issue:p}=u?.match(d)?.groups??{},m=`https://media.springernature.com/full/springer-static/cover-hires/journal/${e}/${f}/${p}?as=webp`,h=`<div align="center"><img src="${m}" alt="Volume ${f} Issue ${p}"></div>`,g=l(`title`).text().split(`,`)[1].trim(),_=l(`div[data-test=issue-description]`).html()??``;return{title:`${i} | Volume ${f} Issue ${p}`,description:h+_,link:c.url,pubDate:t(g,`MMMM YYYY`)}})));return{title:`Nature Covers Story`,description:`Find out the cover story of some Nature journals.`,link:r,item:l}}export{s as route};
//# sourceMappingURL=cover-Dmn_xHEY.js.map