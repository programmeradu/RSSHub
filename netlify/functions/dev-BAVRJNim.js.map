{"version":3,"file":"dev-BAVRJNim.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/syosetu/dev.ts"],"sourcesContent":["import { Data, Route } from '@/types';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport ofetch from '@/utils/ofetch';\r\n\r\nexport const route: Route = {\r\n    path: '/dev',\r\n    categories: ['program-update'],\r\n    example: '/syosetu/dev',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'なろう小説 API の更新履歴',\r\n    url: 'dev.syosetu.com',\r\n    maintainers: ['SnowAgar25'],\r\n    handler,\r\n    radar: [\r\n        {\r\n            title: 'なろう小説 API の更新履歴',\r\n            source: ['dev.syosetu.com'],\r\n            target: '/dev',\r\n        },\r\n    ],\r\n};\r\n\r\nasync function handler(): Promise<Data> {\r\n    const url = 'https://dev.syosetu.com';\r\n\r\n    const data = await ofetch(url);\r\n    const $ = load(data);\r\n\r\n    const logContainer = $('.c-log');\r\n\r\n    const dates = logContainer\r\n        .find('dt')\r\n        .toArray()\r\n        .map((element) => $(element).text().trim());\r\n\r\n    const contents = logContainer\r\n        .find('dd')\r\n        .toArray()\r\n        .map((element) => $(element).text().trim());\r\n\r\n    const updates = dates\r\n        .map((date, index) => ({\r\n            date,\r\n            content: contents[index]?.replace(/\\n/g, '<br>') ?? '',\r\n        }))\r\n        .filter((update) => update.content);\r\n\r\n    return {\r\n        title: 'なろうデベロッパー - なろう小説 API の更新履歴',\r\n        link: url,\r\n        language: 'ja',\r\n        item: updates.map((update) => ({\r\n            title: update.date,\r\n            description: update.content,\r\n            pubDate: parseDate(update.date.replace('/', '-')),\r\n            guid: `syosetu:dev:${update.date}`,\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"+PAKA,MAAaA,EAAe,CACxB,KAAM,OACN,WAAY,CAAC,kBACb,QAAS,eACT,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,kBACN,IAAK,kBACL,YAAa,CAAC,cACd,UACA,MAAO,CACH,CACI,MAAO,kBACP,OAAQ,CAAC,mBACT,OAAQ,UAKpB,eAAe,GAAyB,CACpC,IAAM,EAAM,0BAEN,EAAO,MAAMC,EAAO,GACpB,EAAI,EAAK,GAET,EAAe,EAAE,UAEjB,EAAQ,EACT,KAAK,MACL,UACA,IAAK,GAAY,EAAE,GAAS,OAAO,QAElC,EAAW,EACZ,KAAK,MACL,UACA,IAAK,GAAY,EAAE,GAAS,OAAO,QAElC,EAAU,EACX,KAAK,EAAM,KAAW,CACnB,OACA,QAAS,EAAS,IAAQ,QAAQ,MAAO,SAAW,MAEvD,OAAQ,GAAW,EAAO,SAE/B,MAAO,CACH,MAAO,8BACP,KAAM,EACN,SAAU,KACV,KAAM,EAAQ,IAAK,IAAY,CAC3B,MAAO,EAAO,KACd,YAAa,EAAO,QACpB,QAAS,EAAU,EAAO,KAAK,QAAQ,IAAK,MAC5C,KAAM,eAAe,EAAO"}