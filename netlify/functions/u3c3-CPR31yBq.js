import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{load as n}from"cheerio";const r={path:[`/search/:keyword/:preview?`,`/:type?/:preview?`],categories:[`multimedia`],example:`/u3c3/search/新片速递`,parameters:{keyword:`Search keyword`,preview:`Show image preview, off by default, non empty value means on`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!0,supportPodcast:!1,supportScihub:!1},name:`Search`,maintainers:[`storytellerF`],handler:i};async function i(r){let{type:i,keywoard:a,preview:o}=r.req.param(),s=`https://www.u3c3.com`,c,l;a?(c=`${s}/?search=${a}`,l=`search ${a} - u3c3`):i===void 0?(c=s,l=`home - u3c3`):(c=`${s}/?type=${i}&p=1`,l=`${i} - u3c3`);let u=await t(c),d=n(u.data),f=d(`body > div.container > div.table-responsive > table > tbody > tr`).toArray().map(e=>{e=d(e);let t=e.find(`td:nth-of-type(2) > a `).attr(`title`),n=s+e.find(`td:nth-of-type(2) > a`).attr(`href`),r=n,i=e.find(`td:nth-of-type(5)`).text(),a=e.find(`td:nth-of-type(3) > a:nth-of-type(2)`).attr(`href`);return{title:t,guid:n,link:r,pubDate:i,enclosure_url:a,enclosure_type:`application/x-bittorrent`}}),p=o?await Promise.all(f.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await t(r.link),i=n(e);return r.description=i(`div.panel-footer > img:first-child`).parent().html(),r}))):f;return{title:l,description:l,link:c,item:p}}export{r as route};
//# sourceMappingURL=u3c3-CPR31yBq.js.map