{"version":3,"file":"patch-notes-SofqkWjV.js","names":["route: Route","got","list: PatchNotesItem[]"],"sources":["../../lib/routes/leagueoflegends/patch-notes.ts"],"sourcesContent":["import { DataItem, Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/patch-notes',\r\n    categories: ['game'],\r\n    example: '/leagueoflegends/patch-notes',\r\n    radar: [\r\n        {\r\n            source: ['www.leagueoflegends.com/en-us/news/tags/patch-notes/', 'www.leagueoflegends.com/en-us/news/game-updates/:postSlug'],\r\n        },\r\n    ],\r\n    name: 'Patch Notes',\r\n    maintainers: ['noahm'],\r\n    async handler() {\r\n        const url = 'https://www.leagueoflegends.com/en-us/news/tags/patch-notes/';\r\n        const response = await got({\r\n            method: 'get',\r\n            url,\r\n        });\r\n\r\n        const data = response.data;\r\n\r\n        const $ = load(data);\r\n        const nextData = $('script[id=\"__NEXT_DATA__\"]').text();\r\n        if (!nextData) {\r\n            throw new Error('missing next data');\r\n        }\r\n        const list: PatchNotesItem[] = JSON.parse(nextData).props.pageProps.page.blades[2].items;\r\n\r\n        return {\r\n            title: 'League of Legends Patch Notes',\r\n            link: url,\r\n            item: list.map(\r\n                (item): DataItem => ({\r\n                    title: item.title,\r\n                    description: item.description.body,\r\n                    pubDate: parseDate(item.publishedAt),\r\n                    link: item.action.payload.url,\r\n                    guid: item.analytics.contentId,\r\n                    image: item.media.url,\r\n                    itunes_item_image: item.media.url,\r\n                })\r\n            ),\r\n        };\r\n    },\r\n};\r\n\r\n// partial type definition of JSON data pre-filled on the page\r\ninterface PatchNotesItem {\r\n    title: string;\r\n    publishedAt: string;\r\n    description: {\r\n        type: 'html';\r\n        body: string;\r\n    };\r\n    media: {\r\n        dimensions: {\r\n            height: number;\r\n            width: number;\r\n        };\r\n        mimeType: string;\r\n        url: string;\r\n    };\r\n    action: {\r\n        payload: {\r\n            url: string;\r\n        };\r\n        type: 'weblink';\r\n    };\r\n    analytics: {\r\n        contentId: string;\r\n    };\r\n}\r\n"],"mappings":"oTAKA,MAAaA,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,QACb,QAAS,+BACT,MAAO,CACH,CACI,OAAQ,CAAC,uDAAwD,+DAGzE,KAAM,cACN,YAAa,CAAC,SACd,MAAM,SAAU,CACZ,IAAM,EAAM,+DACN,EAAW,MAAMC,EAAI,CACvB,OAAQ,MACR,QAGE,EAAO,EAAS,KAEhB,EAAI,EAAK,GACT,EAAW,EAAE,8BAA8B,OACjD,GAAI,CAAC,EACD,MAAU,MAAM,qBAEpB,IAAMC,EAAyB,KAAK,MAAM,GAAU,MAAM,UAAU,KAAK,OAAO,GAAG,MAEnF,MAAO,CACH,MAAO,gCACP,KAAM,EACN,KAAM,EAAK,IACN,IAAoB,CACjB,MAAO,EAAK,MACZ,YAAa,EAAK,YAAY,KAC9B,QAAS,EAAU,EAAK,aACxB,KAAM,EAAK,OAAO,QAAQ,IAC1B,KAAM,EAAK,UAAU,UACrB,MAAO,EAAK,MAAM,IAClB,kBAAmB,EAAK,MAAM"}