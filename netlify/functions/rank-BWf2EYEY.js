import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{ViewType as i}from"./types-A5bA50Mg.js";import{load as a}from"cheerio";const o=async i=>{let{id:o=`yw`}=i.req.param(),s=Number.parseInt(i.req.query(`limit`)??`30`,10),c=`https://www.stcn.com`,l=new URL(`article/list/${o}.html`,c).href,u=new URL(`article/category-news-rank.html`,c).href,d=await n(u,{headers:{"x-requested-with":`XMLHttpRequest`},query:{type:o}}),f=await n(l),p=a(f),m=p(`html`).attr(`lang`)??`zh-CN`,h=[];return h=d.data.slice(0,s).map(e=>{let t=e.title,n=e.url,r={title:t,link:n?new URL(n,c).href:void 0,language:m};return r}),h=(await Promise.all(h.map(i=>i.link?e.tryGet(i.link,async()=>{let e=await n(i.link),o=a(e),s=o(`div.detail-title`).text(),c=o(`div.detail-content`).html()??``,l=o(`div.detail-info span`).last().text().trim(),u=o(`meta[name="keywords"]`).attr(`content`)?.split(/,/)??[],d=o(`div.detail-info span`).first().text().split(/：/).pop(),f=l,p={title:s,description:c,pubDate:l?r(t(l),8):i.pubDate,category:u,author:d,content:{html:c,text:c},updated:f?r(t(f),8):i.updated,language:m};return{...i,...p}}):i))).filter(e=>!0),{title:p(`title`).text(),description:p(`meta[name="description"]`).attr(`content`),link:l,item:h,allowEmpty:!0,image:p(`img.stcn-logo`).attr(`src`),author:p(`meta[name="keywords"]`).attr(`content`)?.split(/,/)[0],language:m,id:l}},s={path:`/article/rank/:id?`,name:`热榜`,url:`www.stcn.com`,maintainers:[`nczitzk`],handler:o,example:`/stcn/article/rank/yw`,parameters:{category:{description:"分类，默认为 `yw`，即要闻，可在对应分类页 URL 中找到",options:[{label:`要闻`,value:`yw`},{label:`股市`,value:`gs`},{label:`公司`,value:`company`},{label:`基金`,value:`fund`},{label:`金融`,value:`finance`},{label:`评论`,value:`comment`},{label:`产经`,value:`cj`},{label:`科创板`,value:`kcb`},{label:`新三板`,value:`xsb`},{label:`ESG`,value:`zk`},{label:`滚动`,value:`gd`}]}},description:`:::tip
若订阅 [要闻](https://www.stcn.com/article/list/yw.html)，网址为 \`https://www.stcn.com/article/list/yw.html\`，请截取 \`https://www.stcn.com/article/list/\` 到末尾 \`.html\` 的部分 \`yw\` 作为 \`id\` 参数填入，此时目标路由为 [\`/stcn/article/rank/yw\`](https://rsshub.app/stcn/article/rank/yw)。

:::

| 要闻 | 股市 | 公司    | 基金 | 金融    | 评论    |
| ---- | ---- | ------- | ---- | ------- | ------- |
| yw   | gs   | company | fund | finance | comment |

| 产经 | 科创板 | 新三板 | ESG | 滚动 |
| ---- | ------ | ------ | --- | ---- |
| cj   | kcb    | xsb    | zk  | gd   |
`,categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/:id`],target:(e,t)=>{let n=new URL(t),r=n.searchParams.get(`type`)??e.id;return`/stcn/article/rank${r?`/${r}`:``}`}},{title:`要闻`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/yw.html`],target:`/article/rank/yw`},{title:`股市`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/gs.html`],target:`/article/rank/gs`},{title:`公司`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/company.html`],target:`/article/rank/company`},{title:`基金`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/fund.html`],target:`/article/rank/fund`},{title:`金融`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/finance.html`],target:`/article/rank/finance`},{title:`评论`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/comment.html`],target:`/article/rank/comment`},{title:`产经`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/cj.html`],target:`/article/rank/cj`},{title:`科创板`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/kcb.html`],target:`/article/rank/kcb`},{title:`新三板`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/xsb.html`],target:`/article/rank/xsb`},{title:`ESG`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/zk.html`],target:`/article/rank/zk`},{title:`滚动`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/gd.html`],target:`/article/rank/gd`}],view:i.Articles};export{o as handler,s as route};
//# sourceMappingURL=rank-BWf2EYEY.js.map