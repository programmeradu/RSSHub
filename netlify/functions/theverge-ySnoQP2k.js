import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{ofetch_default as i}from"./ofetch-Bzt0BXUH.js";import{rss_parser_default as a}from"./rss-parser-1vyhErsD.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:hub?`,categories:[`new-media`],example:`/theverge`,parameters:{hub:`Hub, see below, All Posts by default`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`theverge.com/:hub`,`theverge.com/`]}],name:`Category`,maintainers:[`HenryQW`,`vbali`],handler:u,description:`| Hub         | Hub name            |
| ----------- | ------------------- |
|             | All Posts           |
| android     | Android             |
| apple       | Apple               |
| apps        | Apps & Software     |
| blackberry  | BlackBerry          |
| culture     | Culture             |
| gaming      | Gaming              |
| hd          | HD & Home           |
| microsoft   | Microsoft           |
| photography | Photography & Video |
| policy      | Policy & Law        |
| web         | Web & Social        |

  Provides a better reading experience (full text articles) over the official one.`},l=e=>{switch(e.__typename){case`CoreEmbedBlockType`:return e.embedHtml;case`CoreGalleryBlockType`:return e.images.map(e=>`<figure><img src="${e.image.thumbnails.horizontal.url.split(`?`)[0]}" alt="${e.alt}" /><figcaption>${e.caption.html}</figcaption></figure>`).join(``);case`CoreHeadingBlockType`:return`<h${e.level}>${e.contents.html}</h${e.level}>`;case`CoreHTMLBlockType`:return e.markup;case`CoreImageBlockType`:return`<figure><img src="${e.thumbnail.url.split(`?`)[0]}" alt="${e.alt}" /><figcaption>${e.caption.html}</figcaption></figure>`;case`CoreListBlockType`:return`${e.ordered?`<ol>`:`<ul>`}${e.items.map(e=>`<li>${e.contents.html}</li>`).join(``)}${e.ordered?`</ol>`:`</ul>`}`;case`CoreParagraphBlockType`:return e.contents.html;case`CorePullquoteBlockType`:return`<blockquote>${e.contents.html}</blockquote>`;case`CoreQuoteBlockType`:return`<blockquote>${e.children.map(e=>l(e)).join(``)}</blockquote>`;case`CoreSeparatorBlockType`:return`<hr>`;case`HighlightBlockType`:return e.children.map(e=>l(e)).join(``);case`MethodologyAccordionBlockType`:return`<h2>${e.heading.html}</h2>${e.sections.map(e=>`<h3>${e.heading.html}</h3>${e.content.html}`).join(``)}`;default:throw Error(`Unsupported block type: ${e.__typename}`)}};async function u(t){let c=t.req.param(`hub`)?`https://www.theverge.com/${t.req.param(`hub`)}/rss/index.xml`:`https://www.theverge.com/rss/index.xml`,u=await a.parseURL(c),d=await Promise.all(u.items.map(t=>n.tryGet(t.link,async()=>{let n=await i(t.link),a=s(n),c=JSON.parse(a(`script#__NEXT_DATA__`).text()),u=c.props.pageProps.hydration.responses.find(e=>e.operationName===`PostLayoutQuery`||e.operationName===`StreamLayoutQuery`).data.node,d=r(o.join(e,`templates/header-c47f5411.art`),{featuredImage:u.featuredImage,ledeMediaData:u.ledeMediaData});return d+=u.blocks.filter(e=>e.__typename!==`NewsletterBlockType`&&e.__typename!==`RelatedPostsBlockType`&&e.__typename!==`ProductBlockType`&&e.__typename!==`TableOfContentsBlockType`).map(e=>l(e)).join(`<br><br>`),u.__typename===`StreamResourceType`&&(d+=u.posts.edges.map(({node:t})=>{let n=`<h2><a href="${t.permalink}">${t.promo.headline||t.title}</a></h2>`+r(o.join(e,`templates/header-c47f5411.art`),{ledeMediaData:t.ledeMediaData});switch(t.__typename){case`PostResourceType`:n+=t.excerpt.map(e=>e.contents.html).join(`<br>`);break;case`QuickPostResourceType`:n+=t.blocks.map(e=>l(e)).join(`<br>`);break;default:break}return n}).join(`<br>`)),t.description=d,t.category=u.categories,t})));return{title:u.title,link:u.link,description:u.description,item:d}}export{c as route};
//# sourceMappingURL=theverge-ySnoQP2k.js.map