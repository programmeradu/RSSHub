import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"markdown-it";const o=a({html:!0,linkify:!0}),s=async(a,s)=>{let c=s||(a.req.param(`id`)??`weekly`),l=a.req.query(`limit`)?Number.parseInt(a.req.query(`limit`)):50,u=`https://studygolang.com`,d=`${u}/go/${c}`,f=await n({method:`get`,url:d}),p=i(f.data),m=p(`.right-info .title`).slice(0,l).toArray().map(e=>{e=p(e);let t=e.find(`a`);return{title:t.text(),link:`${u}${t.attr(`href`)}`,author:e.next().find(`.author`).text(),category:e.next().find(`.node`).toArray().map(e=>p(e).text())}});return m=await Promise.all(m.map(a=>e.tryGet(a.link,async()=>{let e=await n({method:`get`,url:a.link}),s=i(e.data);a.pubDate=r(t(s(`.timeago`).first().attr(`title`)),8);try{a.description=o.render(s(`.content`).html())}catch{}return a}))),{title:`Go语言中文网 - ${p(`.title h2`).text()}`,link:d,item:m}};export{s as FetchGoItems};
//# sourceMappingURL=utils-BOusfAye.js.map