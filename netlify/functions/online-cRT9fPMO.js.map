{"version":3,"file":"online-cRT9fPMO.js","names":[],"sources":["../../lib/routes/bangumi.online/online.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { art } from '@/utils/render';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/',\r\n    categories: ['anime'],\r\n    example: '/bangumi.online',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['bangumi.online/'],\r\n        },\r\n    ],\r\n    name: '當季新番',\r\n    maintainers: ['devinmugen'],\r\n    handler,\r\n    url: 'bangumi.online/',\r\n};\r\n\r\nasync function handler() {\r\n    const url = 'https://api.bangumi.online/serve/home';\r\n\r\n    const response = await got.post(url);\r\n\r\n    const list = response.data.data.list;\r\n\r\n    const items = list.map((item) => ({\r\n        title: `${item.title.zh ?? item.title.ja} - 第 ${item.volume} 集`,\r\n        description: art(path.join(__dirname, 'templates/image.art'), {\r\n            src: `https:${item.cover}`,\r\n            alt: `${item.title_zh} - 第 ${item.volume} 集`,\r\n        }),\r\n        link: `https://bangumi.online/watch/${item.vid}`,\r\n        pubDate: parseDate(item.create_time),\r\n    }));\r\n\r\n    return {\r\n        title: 'アニメ新番組',\r\n        link: 'https://bangumi.online',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"qYAOA,MAAa,EAAe,CACxB,KAAM,IACN,WAAY,CAAC,SACb,QAAS,kBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,qBAGjB,KAAM,OACN,YAAa,CAAC,cACd,UACA,IAAK,mBAGT,eAAe,GAAU,CACrB,IAEM,EAAW,MAAM,EAAI,KAAK,yCAE1B,EAAO,EAAS,KAAK,KAAK,KAE1B,EAAQ,EAAK,IAAK,IAAU,CAC9B,MAAO,GAAG,EAAK,MAAM,IAAM,EAAK,MAAM,GAAG,OAAO,EAAK,OAAO,IAC5D,YAAa,EAAI,EAAA,KAAA,EAAA,gCAA6C,CAC1D,IAAK,SAAS,EAAK,QACnB,IAAK,GAAG,EAAK,SAAS,OAAO,EAAK,OAAO,MAE7C,KAAM,gCAAgC,EAAK,MAC3C,QAAS,EAAU,EAAK,gBAG5B,MAAO,CACH,MAAO,SACP,KAAM,yBACN,KAAM"}