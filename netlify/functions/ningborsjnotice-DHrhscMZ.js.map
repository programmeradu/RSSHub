{"version":3,"file":"ningborsjnotice-DHrhscMZ.js","names":["route: Route","got"],"sources":["../../lib/routes/gov/zj/ningborsjnotice.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/zj/ningborsjnotice/:colId?',\r\n    categories: ['government'],\r\n    example: '/gov/zj/ningborsjnotice/1229676740',\r\n    parameters: {\r\n        colId: '公告分类id、详细信息点击源网站http://rsj.ningbo.gov.cn/请求中寻找',\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['rsj.ningbo.gov.cn/col/col1229676740/index.html'],\r\n            target: '/zj/ningborsjnotice/:colId?',\r\n        },\r\n    ],\r\n    name: '宁波市人力资源和社会保障局-公告',\r\n    url: 'rsj.ningbo.gov.cn',\r\n    maintainers: ['HaoyuLee'],\r\n    description: `\r\n| 公告类别         | colId |\r\n| ------------ | -- |\r\n| 事业单位进人公告     | 1229676740  |\r\n    `,\r\n    async handler(ctx) {\r\n        const { colId = '1229676740' } = ctx.req.param();\r\n        const url = `http://rsj.ningbo.gov.cn/col/col${colId}/index.html`;\r\n        const { data: response } = await got(url);\r\n        const noticeCate = load(response)('.titel.bgcolor01').text();\r\n        const reg = /<li class=\"news_line\">.*<\\/li>/g;\r\n        const item = response.match(reg).map((line) => {\r\n            const $ = load(line);\r\n            const title = $('.news_titel');\r\n            return {\r\n                title: `宁波人社公告-${noticeCate}:${title.text()}`,\r\n                link: `http://rsj.ningbo.gov.cn${title.attr('href')}`,\r\n                pubDate: parseDate($('.news_date').text().replaceAll(/\\[|]/g, '')),\r\n                author: '宁波市人力资源和社会保障局',\r\n                description: title.text(),\r\n            };\r\n        });\r\n        return {\r\n            title: '宁波市人力资源和社会保障局-公告',\r\n            link: url,\r\n            item,\r\n        };\r\n    },\r\n};\r\n"],"mappings":"oTAKA,MAAaA,EAAe,CACxB,KAAM,8BACN,WAAY,CAAC,cACb,QAAS,qCACT,WAAY,CACR,MAAO,kDAEX,MAAO,CACH,CACI,OAAQ,CAAC,kDACT,OAAQ,gCAGhB,KAAM,mBACN,IAAK,oBACL,YAAa,CAAC,YACd,YAAa;;;;MAKb,MAAM,QAAQ,EAAK,CACf,GAAM,CAAE,QAAQ,cAAiB,EAAI,IAAI,QACnC,EAAM,mCAAmC,EAAM,aAC/C,CAAE,KAAM,GAAa,MAAMC,EAAI,GAC/B,EAAa,EAAK,GAAU,oBAAoB,OAChD,EAAM,kCACN,EAAO,EAAS,MAAM,GAAK,IAAK,GAAS,CAC3C,IAAM,EAAI,EAAK,GACT,EAAQ,EAAE,eAChB,MAAO,CACH,MAAO,UAAU,EAAW,GAAG,EAAM,SACrC,KAAM,2BAA2B,EAAM,KAAK,UAC5C,QAAS,EAAU,EAAE,cAAc,OAAO,WAAW,QAAS,KAC9D,OAAQ,gBACR,YAAa,EAAM,UAG3B,MAAO,CACH,MAAO,mBACP,KAAM,EACN"}