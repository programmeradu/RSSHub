import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import o from"node:path";import*as s from"cheerio";import{destr as c}from"destr";t();const l=new Set([`style`,`watches`,`lifestyle`,`health`,`money-investment`,`gear`,`people`,`watch`,`mens-talk`]),u=async t=>{let{id:u=`Fashion`}=t.req.param();u=u.toLowerCase();let d=`https://www.esquirehk.com`,f=`${d}/tag/${u}`;l.has(u)&&(f=`${d}/${u}`);let p=await a(f),m=s.load(p),h=[...m(`div[class^="max-w-[100%]"] > div > div:nth-child(2) > a`).toArray().map(e=>(e=m(e),{title:e.text().trim(),link:new URL(e.attr(`href`),f).href})),...m(`div.list-item > div > div:nth-child(2) > a`).toArray().map(e=>(e=m(e),{title:e.text().trim(),link:new URL(e.attr(`href`),f).href}))].map(e=>({...e,slug:e.link.replace(d,``)})).filter(e=>!e.slug.startsWith(`/campaign`)),g=await Promise.all(h.map(t=>n.tryGet(t.link,async()=>{let n=await a(`https://api.esquirehk.com${t.slug}`),s=c(n);return s.status===`404`?t:(t.description=s.intro.raw+r(o.join(e,`templates/subpages-abd0530d.art`),{subpages:s.subpages}),t.pubDate=i(s.date.published,`X`),t.updated=i(s.date.lastModified,`X`),t.author=s.author.name,t.category=[...s.tags.topic.map(e=>e.name),...s.tags.normal.map(e=>e.name)],t)})));return{title:`${m(`head title`).text()} - Esquirehk`,description:m(`head meta[name="description"]`).attr(`content`),image:m(`head meta[property="og:image"]`).attr(`content`),logo:m(`head meta[property="og:image"]`).attr(`content`),link:f,item:g}},d={path:`/tag/:id?`,categories:[`new-media`],example:`/esquirehk/tag/Fashion`,parameters:{id:`标签，可在对应标签页 URL 中找到`},name:`Tag`,maintainers:[`nczitzk`],radar:[{source:[`www.esquirehk.com/tag/:id`,`www.esquirehk.com/:id`]}],handler:u};export{d as route};
//# sourceMappingURL=tag-V22Se_74.js.map