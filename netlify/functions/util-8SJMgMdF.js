import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{got_default as i}from"./got-CdvI2yKX.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import o from"node:path";import{load as s}from"cheerio";import c from"iconv-lite";t();const l=`https://www.56kog.com`,u=async(t,u,d)=>{let{data:f}=await i(u,{responseType:`buffer`}),p=s(c.decode(f,`gbk`)),m=p(`p.line`).toArray().map(e=>{e=p(e);let t=e.find(`a`);return{title:t.text(),link:new URL(t.prop(`href`),l).href,author:e.find(`span`).last().text()}});m=await Promise.all(m.map(t=>d(t.link,async()=>{try{let{data:u}=await i(t.link,{responseType:`buffer`}),d=s(c.decode(u,`gbk`)),f=d(`div.mohe-content p`).toArray().map(e=>{e=d(e);let t=e.find(`a`);return{label:e.find(`span.c-l-depths`).text().split(/：/)[0],value:t.length===0?d(e.contents().toArray().find(e=>e.nodeType===3)).text().trim():{href:new URL(t.first().prop(`href`),l).href,text:t.first().text().trim()}}}),p=f.find(e=>e.label===`更新`).value;t.title=d(`h1`).contents().first().text(),t.description=n(o.join(e,`templates/description-b3801694.art`),{images:[{src:new URL(d(`a.mohe-imgs img`).prop(`src`),l).href,alt:t.title}],details:f}),t.author=f.find(e=>e.label===`作者`).value,t.category=[f.find(e=>e.label===`状态`).value,f.find(e=>e.label===`类型`).value.text].filter(Boolean),t.guid=`56kog-${t.link.match(/\/(\d+)\.html$/)[1]}#${p}`,t.pubDate=a(r(p),8)}catch{}return t})));let h=new URL(`favicon.ico`,l).href;return{item:m.filter(e=>e.description).slice(0,t),title:p(`title`).text(),link:u,description:p(`meta[name="description"]`).prop(`content`),language:p(`html`).prop(`lang`),icon:h,logo:h,subtitle:p(`meta[name="keywords"]`).prop(`content`),author:p(`div.uni_footer a`).text(),allowEmpty:!0}};export{u as fetchItems,l as rootUrl};
//# sourceMappingURL=util-8SJMgMdF.js.map