import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as t}from"./got-CdvI2yKX.js";import{load as n}from"cheerio";const r={path:`/podcast/:id/:region?`,categories:[`multimedia`],example:`/apple/podcast/id1559695855/cn`,parameters:{id:`播客id，可以在 Apple 播客app 内分享的播客的 URL 中找到`,region:`地區代碼，例如 cn、us、jp，預設為 cn`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`podcasts.apple.com/:region/podcast/:id`]}],name:`播客`,maintainers:[`Acring`],handler:i,url:`www.apple.com/apple-podcasts/`};async function i(r){let{id:i,region:a}=r.req.param(),o=`https://podcasts.apple.com/${a||`cn`}/podcast/${i}`,s=await t({method:`get`,url:o}),c=n(s.data),l=JSON.parse(c(String.raw`#schema\:show`).text()),u=JSON.parse(c(`#serialized-server-data`).text()),d=l.workExample,f=u[0].data.shelves.find(e=>e.contentType===`episode`).items,p=u[0].data.shelves.find(e=>e.contentType===`showHeaderRegular`).items[0],m=f.map(t=>{let n=d.find(e=>e.name===t.title)||null,r=(n?n.description:t.summary).replaceAll(`
`,`<br>`);return{title:t.title,enclosure_url:t.playAction.episodeOffer.streamUrl,enclosure_type:`audio/mp4`,itunes_duration:t.duration,link:t.playAction.episodeOffer.storeUrl,pubDate:e(t.releaseDate),description:r}});return{title:p.title,link:p.contextAction.podcastOffer.storeUrl,itunes_author:p.contextAction.podcastOffer.author,item:m,description:p.description.replaceAll(`
`,` `)}}export{r as route};
//# sourceMappingURL=podcast-Bi8Icu8b.js.map