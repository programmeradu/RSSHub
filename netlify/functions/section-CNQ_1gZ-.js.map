{"version":3,"file":"section-CNQ_1gZ-.js","names":["route: Route","cache"],"sources":["../../lib/routes/1point3acres/section.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { rootUrl, apiRootUrl, types, ProcessThreads } from './utils';\r\n\r\nconst sections = {\r\n    257: '留学申请',\r\n    379: '世界公民',\r\n    400: '投资理财',\r\n    31: '生活干货',\r\n    345: '职场达人',\r\n    391: '人际关系',\r\n    38: '海外求职',\r\n    265: '签证移民',\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/section/:id?/:type?/:order?',\r\n    categories: ['bbs'],\r\n    example: '/1point3acres/section/345',\r\n    parameters: { id: '分区 id，见下表，默认为全部', type: '帖子分类, 见下表，默认为 hot，即热门帖子', order: '排序方式，见下表，默认为空，即最新回复' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['instant.1point3acres.com/section/:id', 'instant.1point3acres.com/'],\r\n        },\r\n    ],\r\n    name: '分区',\r\n    maintainers: ['nczitzk'],\r\n    handler,\r\n    description: `分区\r\n\r\n| 分区     | id  |\r\n| -------- | --- |\r\n| 留学申请 | 257 |\r\n| 世界公民 | 379 |\r\n| 投资理财 | 400 |\r\n| 生活干货 | 31  |\r\n| 职场达人 | 345 |\r\n| 人际关系 | 391 |\r\n| 海外求职 | 38  |\r\n| 签证移民 | 265 |\r\n\r\n  分类\r\n\r\n| 热门帖子 | 最新帖子 |\r\n| -------- | -------- |\r\n| hot      | new      |\r\n\r\n  排序方式\r\n\r\n| 最新回复 | 最新发布 |\r\n| -------- | -------- |\r\n|          | post     |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id') ?? '';\r\n    const type = ctx.req.param('type') ?? 'hot';\r\n    const order = ctx.req.param('order') ?? '';\r\n    const limit = ctx.req.query('limit') ? Number.parseInt(ctx.req.query('limit')) : 10;\r\n\r\n    const currentUrl = `${rootUrl}${id ? (Number.isNaN(id) ? `/category/${id}` : `/section/${id}`) : ''}`;\r\n    const apiUrl = `${apiRootUrl}/api${id ? (Number.isNaN(id) ? `/tags/${id}/` : `/forums/${id}/`) : ''}threads?type=${type}&includes=tags,forum_name,summary&ps=${limit}&pg=1&order=${order === '' ? '' : 'time_desc'}&is_groupid=1`;\r\n\r\n    return {\r\n        title: `一亩三分地 - ${Object.hasOwn(sections, id) ? sections[id] : id}${types[type]}`,\r\n        link: currentUrl,\r\n        item: await ProcessThreads(cache.tryGet, apiUrl, order),\r\n    };\r\n}\r\n"],"mappings":"yZAIA,MAAM,EAAW,CACb,IAAK,OACL,IAAK,OACL,IAAK,OACL,GAAI,OACJ,IAAK,OACL,IAAK,OACL,GAAI,OACJ,IAAK,QAGIA,EAAe,CACxB,KAAM,+BACN,WAAY,CAAC,OACb,QAAS,4BACT,WAAY,CAAE,GAAI,kBAAmB,KAAM,0BAA2B,MAAO,uBAC7E,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,uCAAwC,+BAGzD,KAAM,KACN,YAAa,CAAC,WACd,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;;;0BA0BjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,OAAS,GAC5B,EAAO,EAAI,IAAI,MAAM,SAAW,MAChC,EAAQ,EAAI,IAAI,MAAM,UAAY,GAClC,EAAQ,EAAI,IAAI,MAAM,SAAW,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,GAE3E,EAAa,GAAG,IAAU,EAAM,OAAO,MAAM,GAAM,aAAa,IAAO,YAAY,IAAQ,KAC3F,EAAS,GAAG,EAAW,MAAM,EAAM,OAAO,MAAM,GAAM,SAAS,EAAG,GAAK,WAAW,EAAG,GAAM,GAAG,eAAe,EAAK,uCAAuC,EAAM,cAAc,IAAU,GAAK,GAAK,YAAY,eAEnN,MAAO,CACH,MAAO,WAAW,OAAO,OAAO,EAAU,GAAM,EAAS,GAAM,IAAK,EAAM,KAC1E,KAAM,EACN,KAAM,MAAM,EAAeC,EAAM,OAAQ,EAAQ"}