import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i={path:`/`,categories:[`new-media`],example:`/newswav`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`newswav.com/latest`,`newswav.com`]}],name:`Latest`,maintainers:[`TonyRL`],handler:a};async function a(){let i=`https://newswav.com`,a=await n(`https://feed-api.newswav.com/api/web/feeds/latest`,{query:{languages:`en,ms,zh`}}),o=a.data.content.filter(e=>e.contentId!==`AD`).map(e=>({title:e.title,description:e.description,category:e.topics.map(e=>e.en),link:`${i}/article/${e.permalink}`,permalink:e.permalink,pubDate:t(e.publishedAt),author:e.publisher.name,image:e.thumbnailUrl})),s=await Promise.all(o.map(t=>e.tryGet(t.link,async()=>{let e=await n(`https://api.newswav.com/v4/api/v1/web/contents/${t.permalink}`);if(e.contentType===`video`){let n=e.meta.video;return t.description=`<video controls preload="metadata" poster="${n.thumbnailUrl}"><source src="${n.videoUrl}" type="${n.mimeType}"></video><br>${n.content}`,t}else if(e.contentType===`podcast`){let n=e.meta.podcast;return t.description=`<audio controls"><source src="${n.url}" type="audio/mpeg"></audio><br>${n.content}`,t.enclosure_type=`audio/mpeg`,t}let i=e.meta.article,a=r(i.content);a(`*`).contents().filter((e,t)=>t.type===`comment`&&t.data.trim()===`AD`).remove(),a(`iframe`).each((e,t)=>{let n=a(t);(n.attr(`src`)?.includes(`ga4-track.html`)||n.attr(`src`)?.includes(`ga4-v2-track.html`))&&n.remove()}),t.description=a.html();let o=new URL(i.originalUrl);return t.image=o.pathname.startsWith(`/1000x0,q50=/`)?o.pathname.replace(`/1000x0,q50=/`,``):o.pathname,t})));return{title:`Newswav - Malaysiaâ€™s #1 Content Aggregator | Malaysia Breaking News, World News, and Latest News`,description:`Latest news, videos and podcasts on Politics, Lifestyle, Sports, Current Affairs, Business & Finance, Entertainment and more from Malaysia & around the world.`,link:`${i}/latest`,item:s}}export{i as route};
//# sourceMappingURL=latest-DelTi7qk.js.map