{"version":3,"file":"censorbib-Cc9Zc5IC.js","names":["route: Route","got"],"sources":["../../lib/routes/nymity/censorbib.ts"],"sourcesContent":["import { DataItem, Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nconst url = 'https://censorbib.nymity.ch/';\r\n\r\nexport const route: Route = {\r\n    path: '/censorbib',\r\n    categories: ['journal'],\r\n    example: '/nymity/censorbib',\r\n    radar: [\r\n        {\r\n            source: ['censorbib.nymity.ch/'],\r\n        },\r\n    ],\r\n    name: 'CensorBib Updates',\r\n    maintainers: ['xtexChooser'],\r\n    handler,\r\n    url: 'censorbib.nymity.ch/',\r\n};\r\n\r\nasync function handler() {\r\n    const resp = await got.get(url);\r\n\r\n    const $ = load(resp.data);\r\n    const items = $('#container ul li')\r\n        .toArray()\r\n        .map((item): DataItem => {\r\n            const c = $(item);\r\n            const id = c.attr('id')!;\r\n            const title = c.find('span.paper').text().trim();\r\n            const author = c.find('span.author').text().trim();\r\n            const other = c.find('span.other').text().trim();\r\n            const download = c.find(\"img.icon[title='Download paper']\").parent().attr('href');\r\n            const downloadBibTex = c.find(\"img.icon[title='Download BibTeX']\").parent().attr('href');\r\n            const linkToPaper = c.find(\"img.icon[title='Link to paper']\").parent().attr('href');\r\n            return {\r\n                title,\r\n                description: `${other}<br/><br/><a href='${download}'>Download</a><br/><a href='${downloadBibTex}'>Download BibTex</a>`,\r\n                author,\r\n                guid: id,\r\n                link: linkToPaper,\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: 'CensorBib',\r\n        link: url,\r\n        description: 'CensorBib Updates',\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+PAGA,MAAM,EAAM,+BAECA,EAAe,CACxB,KAAM,aACN,WAAY,CAAC,WACb,QAAS,oBACT,MAAO,CACH,CACI,OAAQ,CAAC,0BAGjB,KAAM,oBACN,YAAa,CAAC,eACd,UACA,IAAK,wBAGT,eAAe,GAAU,CACrB,IAAM,EAAO,MAAMC,EAAI,IAAI,GAErB,EAAI,EAAK,EAAK,MACd,EAAQ,EAAE,oBACX,UACA,IAAK,GAAmB,CACrB,IAAM,EAAI,EAAE,GACN,EAAK,EAAE,KAAK,MACZ,EAAQ,EAAE,KAAK,cAAc,OAAO,OACpC,EAAS,EAAE,KAAK,eAAe,OAAO,OACtC,EAAQ,EAAE,KAAK,cAAc,OAAO,OACpC,EAAW,EAAE,KAAK,oCAAoC,SAAS,KAAK,QACpE,EAAiB,EAAE,KAAK,qCAAqC,SAAS,KAAK,QAC3E,EAAc,EAAE,KAAK,mCAAmC,SAAS,KAAK,QAC5E,MAAO,CACH,QACA,YAAa,GAAG,EAAM,qBAAqB,EAAS,8BAA8B,EAAe,uBACjG,SACA,KAAM,EACN,KAAM,KAIlB,MAAO,CACH,MAAO,YACP,KAAM,EACN,YAAa,oBACb,KAAM"}