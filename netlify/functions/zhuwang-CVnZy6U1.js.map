{"version":3,"file":"zhuwang-CVnZy6U1.js","names":["route: Route","got"],"sources":["../../lib/routes/zhuwang/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\n\r\nexport const route: Route = {\r\n    path: '/zhujia',\r\n    categories: ['shopping'],\r\n    example: '/zhuwang/zhujia',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['zhujia.zhuwang.cc/'],\r\n        },\r\n    ],\r\n    name: '全国今日生猪价格',\r\n    maintainers: [],\r\n    handler,\r\n    url: 'zhujia.zhuwang.cc/',\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://zhujia.zhuwang.com.cn/';\r\n    const now = new Date();\r\n    const date = `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`;\r\n    const response = await got(`${baseUrl}/api/chartData`, {\r\n        searchParams: {\r\n            areaId: -1,\r\n        },\r\n    });\r\n\r\n    const names = {\r\n        pigprice: '生猪(外三元)',\r\n        pig_in: '生猪(内三元)',\r\n        pig_local: '生猪(土杂猪)',\r\n    };\r\n\r\n    const priceItems = Object.entries(names).map(([key, name], i) => {\r\n        const items = response.data[key];\r\n        const today = items.at(-1);\r\n        const yesterday = items.at(-2);\r\n        const change = (today - yesterday).toFixed(2);\r\n        let description = `较昨日价格, 每公斤上涨${change}元`;\r\n        if (yesterday > today) {\r\n            description = `较昨日价格, 下跌${-change}元`;\r\n        }\r\n        if (yesterday === today) {\r\n            description = '较昨日价格持平';\r\n        }\r\n\r\n        return {\r\n            title: `${date} ${name} ${today}元/公斤. ${description}`,\r\n            description,\r\n            link: `https://xt.yangzhu.vip/manage/datamap/ptype/${i + 1}/areano/-1.html`,\r\n            guid: `${date} ${name}`,\r\n        };\r\n    });\r\n\r\n    return {\r\n        title: `全国今日生猪价格`,\r\n        desription: '中国养猪网猪价频道是中国猪价权威平台,提供每日猪评,猪价和行情分析,并且预测猪价和分析每天的猪价排行。',\r\n        link: baseUrl,\r\n        item: priceItems,\r\n    };\r\n}\r\n"],"mappings":"gOAGA,MAAaA,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,YACb,QAAS,kBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,wBAGjB,KAAM,WACN,YAAa,GACb,UACA,IAAK,sBAGT,eAAe,GAAU,CACrB,IAAM,EAAU,iCACV,EAAM,IAAI,KACV,EAAO,GAAG,EAAI,cAAc,GAAG,EAAI,WAAa,EAAE,GAAG,EAAI,YACzD,EAAW,MAAMC,EAAI,GAAG,EAAQ,gBAAiB,CACnD,aAAc,CACV,OAAQ,MAIV,EAAQ,CACV,SAAU,UACV,OAAQ,UACR,UAAW,WAGT,EAAa,OAAO,QAAQ,GAAO,KAAK,CAAC,EAAK,GAAO,IAAM,CAC7D,IAAM,EAAQ,EAAS,KAAK,GACtB,EAAQ,EAAM,GAAG,IACjB,EAAY,EAAM,GAAG,IACrB,GAAU,EAAQ,GAAW,QAAQ,GACvC,EAAc,eAAe,EAAO,GAQxC,OAPI,EAAY,IACZ,EAAc,YAAY,CAAC,EAAO,IAElC,IAAc,IACd,EAAc,WAGX,CACH,MAAO,GAAG,EAAK,GAAG,EAAK,GAAG,EAAM,QAAQ,IACxC,cACA,KAAM,+CAA+C,EAAI,EAAE,iBAC3D,KAAM,GAAG,EAAK,GAAG,OAIzB,MAAO,CACH,MAAO,WACP,WAAY,sDACZ,KAAM,EACN,KAAM"}