import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import"./got-CdvI2yKX.js";import{ViewType as a}from"./types-A5bA50Mg.js";import{getFeed as o,getFeedGenerator as s,resolveHandle as c}from"./utils-oK-DyWtL.js";import l from"node:path";t();const u={path:`/profile/:handle/feed/:space/:routeParams?`,categories:[`social-media`],view:a.SocialMedia,example:`/bsky.app/profile/jaz.bsky.social/feed/cv:cat`,parameters:{handle:`User handle, can be found in URL`,space:`Space ID, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Feeds`,maintainers:[`FerrisChi`],handler:d};async function d(t){let a=t.req.param(`handle`),u=t.req.param(`space`),d=await c(a,n.tryGet),f=`at://${d}/app.bsky.feed.generator/${u}`,p=await s(f,n.tryGet),m=await o(f,n.tryGet),h=m.feed.map(({post:t})=>({title:t.record.text.split(`
`)[0],description:r(l.join(e,`templates/post-74d9acc2.art`),{text:t.record.text.replaceAll(`
`,`<br>`),embed:t.embed}),author:t.author.displayName,pubDate:i(t.record.createdAt),link:`https://bsky.app/profile/${t.author.handle}/post/${t.uri.split(`app.bsky.feed.post/`)[1]}`,upvotes:t.likeCount,comments:t.replyCount}));return t.set(`json`,{DID:d,profile:p,feeds:m}),{title:`${p.view.displayName} â€” Bluesky`,description:p.view.description?.replaceAll(`
`,` `),link:`https://bsky.app/profile/${a}/feed/${u}`,image:p.view.avatar,icon:p.view.avatar,logo:p.view.avatar,item:h,allowEmpty:!0}}export{u as route};
//# sourceMappingURL=feeds-Dlbc2JA2.js.map