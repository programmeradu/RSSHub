{"version":3,"file":"news-fPsvcqPl.js","names":["route: Route","got"],"sources":["../../lib/routes/gov/immiau/news.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nconst url = 'https://immi.homeaffairs.gov.au/_layouts/15/api/Data.aspx/GetNews';\r\n\r\nconst reqBodyByYear = (year) => ({\r\n    siteUrl: 'https://www.homeaffairs.gov.au',\r\n    webUrl: '/News-subsite',\r\n    filter: {\r\n        Categories: [],\r\n        PageNumber: 1,\r\n        RowLimit: 20,\r\n        ShowCurrentSiteOnly: false,\r\n        CurrentSite: 'Immi',\r\n        Year: year + '',\r\n    },\r\n});\r\n\r\nconst getItemUrl = (id) => `https://immi.homeaffairs.gov.au/news-media/archive/article?itemId=${id}`;\r\n\r\nexport const route: Route = {\r\n    path: '/immiau/news',\r\n    categories: ['government'],\r\n    example: '/gov/immiau/news',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Immigration and Citizenship - News',\r\n    maintainers: ['liu233w'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const { data: res } = await got({\r\n        method: 'post',\r\n        url,\r\n        json: reqBodyByYear(new Date().getFullYear()),\r\n    });\r\n\r\n    const list = res.d.data.map((item) => ({\r\n        title: item.Title,\r\n        author: item.Source,\r\n        category: item.Category,\r\n        description: item.Content,\r\n        pubDate: parseDate(item.Date),\r\n        link: getItemUrl(item.Id),\r\n    }));\r\n\r\n    return {\r\n        title: 'News - Immigration and Citizenship',\r\n        link: 'https://immi.homeaffairs.gov.au/news-media/archive',\r\n        description: 'Australia Government, Department of Home Affairs',\r\n        item: list,\r\n    };\r\n}\r\n"],"mappings":"qRAIA,MAEM,EAAiB,IAAU,CAC7B,QAAS,iCACT,OAAQ,gBACR,OAAQ,CACJ,WAAY,GACZ,WAAY,EACZ,SAAU,GACV,oBAAqB,GACrB,YAAa,OACb,KAAM,EAAO,MAIf,EAAc,GAAO,qEAAqE,IAEnFA,EAAe,CACxB,KAAM,eACN,WAAY,CAAC,cACb,QAAS,mBACT,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,qCACN,YAAa,CAAC,WACd,WAGJ,eAAe,GAAU,CACrB,GAAM,CAAE,KAAM,GAAQ,MAAMC,EAAI,CAC5B,OAAQ,OACR,wEACA,KAAM,EAAc,IAAI,OAAO,iBAG7B,EAAO,EAAI,EAAE,KAAK,IAAK,IAAU,CACnC,MAAO,EAAK,MACZ,OAAQ,EAAK,OACb,SAAU,EAAK,SACf,YAAa,EAAK,QAClB,QAAS,EAAU,EAAK,MACxB,KAAM,EAAW,EAAK,OAG1B,MAAO,CACH,MAAO,qCACP,KAAM,qDACN,YAAa,mDACb,KAAM"}