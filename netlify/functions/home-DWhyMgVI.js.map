{"version":3,"file":"home-DWhyMgVI.js","names":[],"sources":["../../lib/routes/chaincatcher/home.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport cache from '@/utils/cache';\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nconst rootUrl = 'https://www.chaincatcher.com';\r\n\r\nexport const route: Route = {\r\n    path: '/',\r\n    radar: [\r\n        {\r\n            source: ['chaincatcher.com/'],\r\n            target: '',\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    url: 'chaincatcher.com/',\r\n};\r\n\r\nasync function handler() {\r\n    const { data } = await got.post(`${rootUrl}/api/article/lists`, {\r\n        form: {\r\n            page: 1,\r\n            home: 1,\r\n        },\r\n    });\r\n\r\n    const list = data.data.map((item) => ({\r\n        title: item.title,\r\n        description: item.description,\r\n        link: `${rootUrl}/article/${item.id}`,\r\n        pubDate: parseDate(item.add_time, 'X'),\r\n        categoryId: item.categoryid,\r\n        category: [...item.keywords.split(','), item.category_name],\r\n    }));\r\n\r\n    const items = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(item.link, async () => {\r\n                if (item.categoryId !== 3) {\r\n                    const { data: response } = await got(item.link);\r\n                    const $ = load(response);\r\n                    item.description = art(path.join(__dirname, 'templates/home.art'), {\r\n                        summary: item.description,\r\n                        article: $('.article-container').html(),\r\n                    });\r\n                }\r\n\r\n                return item;\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: '链捕手ChainCatcher — 专业的区块链技术研究与资讯平台-Chain Catcher',\r\n        description: '链捕手ChainCatcher为区块链技术爱好者与项目决策者提供NFT、Web3社交、DID、Layer2等专业的资讯与研究内容，Chain Catcher输出对Scroll、Sui、Aptos、ENS等项目的思考，拓宽读者对区块链与数字经济认知的边界。',\r\n        image: `${rootUrl}/logo.png`,\r\n        link: rootUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"wdASA,MAAM,EAAU,+BAEH,EAAe,CACxB,KAAM,IACN,MAAO,CACH,CACI,OAAQ,CAAC,qBACT,OAAQ,KAGhB,KAAM,UACN,YAAa,CAAC,UACd,UACA,IAAK,qBAGT,eAAe,GAAU,CACrB,GAAM,CAAE,QAAS,MAAM,EAAI,KAAK,GAAG,EAAQ,oBAAqB,CAC5D,KAAM,CACF,KAAM,EACN,KAAM,KAIR,EAAO,EAAK,KAAK,IAAK,IAAU,CAClC,MAAO,EAAK,MACZ,YAAa,EAAK,YAClB,KAAM,GAAG,EAAQ,WAAW,EAAK,KACjC,QAAS,EAAU,EAAK,SAAU,KAClC,WAAY,EAAK,WACjB,SAAU,CAAC,GAAG,EAAK,SAAS,MAAM,KAAM,EAAK,kBAG3C,EAAQ,MAAM,QAAQ,IACxB,EAAK,IAAK,GACN,EAAM,OAAO,EAAK,KAAM,SAAY,CAChC,GAAI,EAAK,aAAe,EAAG,CACvB,GAAM,CAAE,KAAM,GAAa,MAAM,EAAI,EAAK,MACpC,EAAI,EAAK,GACf,EAAK,YAAc,EAAI,EAAA,KAAA,EAAA,+BAA4C,CAC/D,QAAS,EAAK,YACd,QAAS,EAAE,sBAAsB,SAIzC,OAAO,MAKnB,MAAO,CACH,MAAO,kDACP,YAAa,kIACb,MAAO,GAAG,EAAQ,WAClB,KAAM,EACN,KAAM"}