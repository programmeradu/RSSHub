{"version":3,"file":"artist-songs-BbQqsRnF.js","names":[],"sources":["../../lib/routes/163/music/artist-songs.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\n\r\nexport const route: Route = {\r\n    path: '/music/artist/songs/:id',\r\n    categories: ['multimedia'],\r\n    example: '/163/music/artist/songs/2116',\r\n    parameters: { id: '歌手 id, 可在歌手详情页 URL 中找到' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '歌手歌曲',\r\n    maintainers: ['ZhongMingKun'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const id = ctx.req.param('id');\r\n\r\n    const { data } = await got(`https://music.163.com/api/v1/artist/songs`, {\r\n        headers: {\r\n            Referer: 'https://music.163.com/',\r\n        },\r\n        searchParams: {\r\n            id,\r\n            private_cloud: 'true',\r\n            work_type: 1,\r\n            order: 'time',\r\n            offset: 0,\r\n            limit: 100,\r\n        },\r\n    });\r\n\r\n    const artist = data.songs.find(({ ar }) => ar[0].id === Number.parseInt(id)).ar[0];\r\n    const items = data.songs.map((song) => ({\r\n        title: `${song.name} - ${song.ar.map(({ name }) => name).join(' / ')}`,\r\n        description: art(path.join(__dirname, '../templates/music/playlist.art'), {\r\n            singer: song.ar.map(({ name }) => name).join(' / '),\r\n            album: song.al.name,\r\n            picUrl: song.al.picUrl,\r\n        }),\r\n        link: `https://music.163.com/#/song?id=${song.id}`,\r\n    }));\r\n\r\n    return {\r\n        title: `${artist.name} - 歌手歌曲`,\r\n        link: `https://music.163.com/#/artist?id=${id}`,\r\n        description: `网易云音乐 - 歌手歌曲 - ${artist.name}`,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"gVAMA,MAAa,EAAe,CACxB,KAAM,0BACN,WAAY,CAAC,cACb,QAAS,+BACT,WAAY,CAAE,GAAI,0BAClB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,gBACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAK,EAAI,IAAI,MAAM,MAEnB,CAAE,QAAS,MAAM,EAAI,4CAA6C,CACpE,QAAS,CACL,QAAS,0BAEb,aAAc,CACV,KACA,cAAe,OACf,UAAW,EACX,MAAO,OACP,OAAQ,EACR,MAAO,OAIT,EAAS,EAAK,MAAM,MAAM,CAAE,QAAS,EAAG,GAAG,KAAO,OAAO,SAAS,IAAK,GAAG,GAC1E,EAAQ,EAAK,MAAM,IAAK,IAAU,CACpC,MAAO,GAAG,EAAK,KAAK,KAAK,EAAK,GAAG,KAAK,CAAE,UAAW,GAAM,KAAK,SAC9D,YAAa,EAAI,EAAA,KAAA,EAAA,mCAAyD,CACtE,OAAQ,EAAK,GAAG,KAAK,CAAE,UAAW,GAAM,KAAK,OAC7C,MAAO,EAAK,GAAG,KACf,OAAQ,EAAK,GAAG,SAEpB,KAAM,mCAAmC,EAAK,QAGlD,MAAO,CACH,MAAO,GAAG,EAAO,KAAK,SACtB,KAAM,qCAAqC,IAC3C,YAAa,kBAAkB,EAAO,OACtC,KAAM"}