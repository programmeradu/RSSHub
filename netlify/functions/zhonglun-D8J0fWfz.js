import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as a}from"./got-CdvI2yKX.js";import o from"node:path";import{load as s}from"cheerio";t();const c=async t=>{let{language:c=`zh`}=t.req.param(),l=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):30,u=`https://${c===`zh`?`www`:c.replaceAll(/[^\dA-Za-z-]/g,``)}.zhonglun.com`,d=new URL(`research/articles`,u).href,{data:f}=await a(d),p=s(f),m=p(`div#dataList > dl > dd, div#dataList > ul > li`).slice(0,l).toArray().map(t=>{t=p(t);let n=r(o.join(e,`templates/description-d37ebf7e.art`),{intro:t.find(`p`).text()});return{title:t.find(`h3 > a`).text(),description:n,pubDate:i(t.find(`span`).text()),link:t.find(`h3 > a`).prop(`href`),language:c}});m=await Promise.all(m.map(t=>n.tryGet(t.link,async()=>{let{data:n}=await a(t.link),l=s(n),u=l(`div.news_dtitle h2`).text(),d=t.description+r(o.join(e,`templates/description-d37ebf7e.art`),{description:l(`div.edit_con_original`).html()}),f=l(`img.raw-image`).first().prop(`src`);return t.title=u,t.description=d,t.pubDate=i(l(`span.posttime`).text()),t.author=l(`span.author`).text().split(/：/).pop(),t.content={html:d,text:l(`div.edit_con_original`).text()},t.image=f,t.banner=f,t.language=c,t})));let h=new URL(p(`header.header h1 a img`).prop(`src`),u).href;return{title:`${p(`title`).text()} - ${p(`div.siteban_text`).text()}`,description:p(`meta[name="description"]`).prop(`content`),link:d,item:m,allowEmpty:!0,image:h,author:p(`meta[name="author"]`).prop(`content`),language:c}},l={path:`/research/article/:language{[a-zA-Z0-9-]+}?`,name:`中伦研究专业文章`,url:`zhonglun.com`,maintainers:[`nczitzk`],handler:c,example:`/zhonglun/research/article/zh`,parameters:{category:`语言，默认为 zh，即简体中文，可在对应分类页 URL 中找到`},description:`
| ENG | 简体中文 | 日本語 | 한국어 |
| --- | -------- | ------ | ------ |
| en  | zh       | ja     | kr     |
    `,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{title:`专业文章`,source:[`zhonglun.com/research/articles`],target:`/research/article/zh`},{title:` Articles`,source:[`en.zhonglun.com/research/articles`],target:`/research/article/en`},{title:`論評`,source:[`ja.zhonglun.com/research/articles`],target:`/research/article/ja`},{title:`전문기사`,source:[`kr.zhonglun.com/research/articles`],target:`/research/article/kr`}]};export{c as handler,l as route};
//# sourceMappingURL=zhonglun-D8J0fWfz.js.map