{"version":3,"file":"home-DvX_VtXH.js","names":["route: Route"],"sources":["../../lib/routes/mixi2/home.ts"],"sourcesContent":["import { type Data, type Route, ViewType } from '@/types';\r\nimport type { Context } from 'hono';\r\nimport { CONFIG_OPTIONS, generatePostDataItem, getClient, postFilter } from './utils';\r\n\r\nconst handler = async (ctx: Context) => {\r\n    const limit = Number.parseInt(ctx.req.query('limit') ?? '20', 10);\r\n\r\n    const client = getClient();\r\n\r\n    const data = await client.getSubscribingFeeds({\r\n        limit,\r\n    });\r\n\r\n    const personasData = await client.getPersonas({\r\n        personaIds: data?.feeds?.map((feed) => feed.post.personaId) ?? [],\r\n    });\r\n\r\n    return {\r\n        title: 'フォロー中',\r\n        link: 'https://mixi.social/home',\r\n        image: 'https://mixi.social/_next/static/media/image_logo.8bb36f11.svg',\r\n        item:\r\n            data?.feeds\r\n                ?.filter((feed) => postFilter(feed.post))\r\n                .map((feed) => ({\r\n                    title: `@${personasData.personas.find((persona) => persona.personaId === feed.post.personaId)?.name}`,\r\n                    ...generatePostDataItem(feed.post, personasData.personas),\r\n                })) ?? [],\r\n    } as Data;\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/home',\r\n    name: 'フォロー中',\r\n    categories: ['social-media'],\r\n    example: '/mixi2/home',\r\n    features: {\r\n        requireConfig: CONFIG_OPTIONS,\r\n        supportRadar: true,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['mixi.social/home'],\r\n            target: '/home',\r\n            title: 'フォロー中',\r\n        },\r\n    ],\r\n    view: ViewType.SocialMedia,\r\n    handler,\r\n    maintainers: ['KarasuShin'],\r\n};\r\n"],"mappings":"uXAIA,MAAM,EAAU,KAAO,IAAiB,CACpC,IAAM,EAAQ,OAAO,SAAS,EAAI,IAAI,MAAM,UAAY,KAAM,IAExD,EAAS,IAET,EAAO,MAAM,EAAO,oBAAoB,CAC1C,UAGE,EAAe,MAAM,EAAO,YAAY,CAC1C,WAAY,GAAM,OAAO,IAAK,GAAS,EAAK,KAAK,YAAc,KAGnE,MAAO,CACH,MAAO,QACP,KAAM,2BACN,MAAO,iEACP,KACI,GAAM,OACA,OAAQ,GAAS,EAAW,EAAK,OAClC,IAAK,IAAU,CACZ,MAAO,IAAI,EAAa,SAAS,KAAM,GAAY,EAAQ,YAAc,EAAK,KAAK,YAAY,OAC/F,GAAG,EAAqB,EAAK,KAAM,EAAa,cAC7C,KAIVA,EAAe,CACxB,KAAM,QACN,KAAM,QACN,WAAY,CAAC,gBACb,QAAS,cACT,SAAU,CACN,cAAe,EACf,aAAc,IAElB,MAAO,CACH,CACI,OAAQ,CAAC,oBACT,OAAQ,QACR,MAAO,UAGf,KAAM,EAAS,YACf,UACA,YAAa,CAAC"}