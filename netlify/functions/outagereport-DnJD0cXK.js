import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";const t={path:`/:name/:count?`,categories:[`forecast`],example:`/outagereport/ubisoft/5`,parameters:{name:`Service name, spelling format must be consistent with URL`,count:`Counting threshold, will only be written in RSS if the number of people who report to stop serving is not less than this number`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Report`,maintainers:[`cxumol`,`nczitzk`],handler:n,description:"Please skip the local service area code for `name`, for example `https://outage.report/us/verizon-wireless` to `verizon-wireless`."};async function n(t){let n=t.req.param(`name`),r=t.req.param(`count`)||10,i=`https://outage.report/${n}`,a=await e({method:`get`,url:i}),o=a.data,s=/class="Gauge__Count.*?>(\d+)<\/text>/,c=/class="Gauge__MessageWrapper.*?class="Gauge__Message.*?>(.*?)<\/span>/,l=/<p class="PageSubheader.*?>(.*?)<\/p>/,u=Number(o.match(s)[1]),d=o.match(c)[1],f=o.match(l)[1],p=[];if(u>=r){let e={title:`${n} appear to be (partially) down`,description:String(u)+` `+d,pubDate:new Date().toUTCString(),guid:Date.now(),link:i};p.push(e)}return{title:`Is ${n} Down Right Now?`,link:i,description:f,item:p,allowEmpty:!0}}export{t as route};
//# sourceMappingURL=outagereport-DnJD0cXK.js.map