import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./proxy-D7ccvALx.js";import{art as n}from"./render-CxhTJIsl.js";import{puppeteer_default as r}from"./puppeteer-f0D6AISB.js";import i from"node:path";import*as a from"cheerio";t();const o=`dm514/new`,s={path:`/new`,categories:[`multimedia`],example:`/missav/new`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`missav.ws/${o}`,`missav.ws/new`,`missav.ws/`]},{source:[`missav.ai/${o}`,`missav.ai/new`,`missav.ai/`]}],name:`最近更新`,maintainers:[`TonyRL`],handler:c,url:`missav.ws/dm397/new`};async function c(){let t=`https://missav.ws`,s=`${t}/${o}`,c=await r(),l=await c.newPage();await l.setRequestInterception(!0),l.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`||e.resourceType()===`xhr`?e.continue():e.abort()}),await l.goto(s,{waitUntil:`domcontentloaded`});let u=await l.evaluate(()=>document.documentElement.innerHTML);await c.close();let d=a.load(u),f=d(`.grid .group`).toArray().map(t=>{let r=d(t),a=r.find(`.text-secondary`),o=new URL(r.find(`img`).data(`src`));o.searchParams.set(`class`,`normal`);let s=r.find(`video`).data(`src`);return{title:a.text().trim(),link:a.attr(`href`),description:n(i.join(e,`templates/preview-01535389.art`),{poster:o.href,video:s,type:s.split(`.`).pop()})}});return{title:d(`head title`).text(),description:d(`head meta[name="description"]`).attr(`content`),link:t,item:f}}export{s as route};
//# sourceMappingURL=new-D4hiYYnn.js.map