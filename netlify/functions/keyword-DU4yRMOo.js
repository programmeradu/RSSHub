import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{ViewType as i}from"./types-A5bA50Mg.js";import{fallback as a,queryToBoolean as o}from"./readable-social-D7TWDGpz.js";import{utils_default as s}from"./utils-ClHazoih.js";import c from"node:querystring";const l={path:`/keyword/:keyword/:routeParams?`,categories:[`social-media`],view:i.SocialMedia,example:`/weibo/keyword/RSSHub`,parameters:{keyword:`你想订阅的微博关键词`,routeParams:`额外参数；请参阅上面的说明和表格`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`关键词`,maintainers:[`DIYgod`,`Rongronggg9`],handler:u};async function u(i){let l=i.req.param(`keyword`),u=await t.tryGet(`weibo:keyword:${l}`,async()=>{let e=await n({method:`get`,url:`https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D61%26q%3D${encodeURIComponent(l)}%26t%3D0`,headers:{Referer:`https://m.weibo.cn/p/searchall?containerid=100103type%3D1%26q%3D${encodeURIComponent(l)}`,"MWeibo-Pwa":1,"X-Requested-With":`XMLHttpRequest`,"User-Agent":`Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1`}});return e.data.data.cards},e.cache.routeExpire,!1),d=c.parse(i.req.param(`routeParams`));return s.sinaimgTvax({title:`又有人在微博提到${l}了`,link:`http://s.weibo.com/weibo/${encodeURIComponent(l)}&b=1&nodup=1`,description:`又有人在微博提到${l}了`,item:u.filter(e=>e.mblog).map(e=>(e.mblog.created_at=r(e.mblog.created_at,8),e.mblog.retweeted_status&&e.mblog.retweeted_status.created_at&&(e.mblog.retweeted_status.created_at=r(e.mblog.retweeted_status.created_at,8)),s.formatExtended(i,e.mblog,void 0,{showAuthorInTitle:a(void 0,o(d.showAuthorInTitle),!0),showAuthorInDesc:a(void 0,o(d.showAuthorInDesc),!0)})))})}export{l as route};
//# sourceMappingURL=keyword-DU4yRMOo.js.map