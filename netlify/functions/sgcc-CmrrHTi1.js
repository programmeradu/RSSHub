import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={path:`/mem/gk/sgcc/:category?`,categories:[`government`],example:`/gov/mem/gk/sgcc/tbzdsgdcbg`,parameters:{category:`分类，见下表，默认为挂牌督办`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.mem.gov.cn/gk/sgcc/:category`],target:`/mem/gk/sgcc/:category`}],name:`事故及灾害查处`,maintainers:[`nczitzk`],handler:a,description:`| 挂牌督办 | 调查报告   |
| -------- | ---------- |
| sggpdbqk | tbzdsgdcbg |`};async function a(i){let{category:a=`sggpdbqk`}=i.req.param(),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):30,s=`https://www.mem.gov.cn`,c=new URL(`gk/sgcc/${a}`,s).href,{data:l}=await n(c),u=r(l),d=u(`table.center_main02`).find(`a[title]`).slice(0,o).toArray().map(e=>{e=u(e);let n=RegExp(`\\/sgcc\\/${a}\\/\\.\\.\\.`),r=new URL(`${a}/${e.prop(`href`).replace(/\.\//,``)}`,c).href.replace(n,``);return{title:e.contents().first().text(),link:r,pubDate:t(e.find(`span`).text()),enclosure_url:r,enclosure_type:`application/${r.split(/\./).pop()}`}});d=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{if(t.link.endsWith(`html`)){let{data:e}=await n(t.link),i=r(e);t.description=i(`#content`).html()}return t})));let f=new URL(u(`link[rel="shortcut icon"]`).prop(`href`),s).href;return{item:d,title:u(`title`).text(),link:c,description:u(`meta[name="ColumnDescription"]`).prop(`content`),language:`zh`,image:new URL(u(`#imag`).prop(`src`),s).href,icon:f,logo:f,subtitle:u(`meta[name="ColumnName"]`).prop(`content`),author:u(`meta[name="SiteName"]`).prop(`content`)}}export{i as route};
//# sourceMappingURL=sgcc-CmrrHTi1.js.map