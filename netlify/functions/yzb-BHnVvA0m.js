import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"iconv-lite";const o=`http://yzb.tju.edu.cn/`,s=`https://github.com/DIYgod/RSSHub/issues`,c=e=>{if(e===void 0)return`unknown`;if(!e.startsWith(`http`))return`in-site`;let t=new URL(e);return t.hostname===`yzb.tju.edu.cn`?`tju-yzb`:`unknown`},l={path:`/yzb/:type?`,categories:[`university`],example:`/tju/yzb/notice`,parameters:{type:"default `notice`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Admission Office of Graduate`,maintainers:[`SuperPung`],handler:u,description:`| School-level Notice | Master | Doctor | On-the-job Degree |
| :-----------------: | :----: | :----: | :---------------: |
|        notice       | master | doctor |        job        |`};async function u(l){let{type:u}=l.req.param(),d,f;switch(u){case`notice`:f=`校级公告`,d=`xwzx/zxxx/`;break;case`master`:f=`统考硕士`,d=`xwzx/tkss_xw/`;break;case`doctor`:f=`统考博士`,d=`xwzx/tkbs_xw/`;break;case`job`:f=`在职学位`,d=`xwzx/zzxw/`;break;default:f=`校级公告`,d=`xwzx/zxxx/`}let p=null;try{p=await n(o+d,{headers:{Referer:o},responseType:`buffer`})}catch{}if(p===null)return{title:`天津大学研究生招生网 - `+f,link:o+d,description:`链接失效`+o+d,item:[{title:`提示信息`,link:s,description:`<h2>请到<a href=${s}>此处</a>提交Issue</h2>`}]};{let s=i(a.decode(p.data,`gbk`)),l=s(`td.table_left_right > table > tbody > tr:nth-child(3) > td > table > tbody > tr:nth-child(1) > td > table > tbody > tr`).slice(1,-1).toArray().map(e=>{let n=s(`td > a`,e).attr(`href`),i=c(n);return{title:s(`td > a`,e).text(),link:i===`in-site`?o+d+n:n,pubDate:r(t(s(`.font_10_time`,e).text().slice(2,-2),`YYYY-MM-DD`),8),type:i}}),u=await Promise.all(l.map(t=>{switch(t.type){case`tju-yzb`:case`in-site`:return e.tryGet(t.link,async()=>{let e=null;try{e=await n(t.link,{responseType:`buffer`});let r=i(a.decode(e.data,`gbk`));r(`.font_18_b`).remove(),r(`.font_grey_en`).remove(),t.description=r(`.nav_a10 > table > tbody`).html()}catch{}return t});default:return t}}));return{title:`天津大学研究生招生网 - `+f,link:o+d,item:u}}}export{l as route};
//# sourceMappingURL=yzb-BHnVvA0m.js.map