import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{ofetch_default as e}from"./ofetch-Bzt0BXUH.js";import{ViewType as t}from"./types-A5bA50Mg.js";import{load as n}from"cheerio";const r=async t=>{let{language:r=``}=t.req.param(),i=Number.parseInt(t.req.query(`limit`)??`30`,10),a=`https://musify.club`,o=new URL(r,a).href,s=await e(o),c=n(s),l=c(`div.playlist__item`).slice(0,i).toArray().map(e=>{let t=c(e),n=t.attr(`data-artist`),r=t.attr(`data-name`),i=[n,r].filter(Boolean).join(` - `),o=t.find(`a.strong`).attr(`href`),s=t.find(`div.playlist__heading a`).toArray(),l=s.map(e=>{let t=c(e);return{name:t.text(),url:t.attr(`href`)?new URL(t.attr(`href`),a).href:void 0,avatar:void 0}}),u={title:i,link:o?new URL(o,a).href:void 0,author:l},d=t.find(`div.playlist__control`),f=d.attr(`data-play-url`);return f&&(u={...u,enclosure_url:new URL(f,a).href,enclosure_type:`audio/${f.split(/\./).pop()}`,enclosure_title:i,enclosure_length:void 0,itunes_duration:void 0,itunes_item_image:void 0}),u});return{title:c(`title`).text(),description:c(`meta[property="og:description"]`).attr(`content`),link:o,item:l,allowEmpty:!0,image:c(`meta[property="og:image"]`).attr(`content`),author:c(`meta[property="og:site_name"]`).attr(`content`),id:c(`meta[property="og:url"]`).attr(`content`)}},i={path:`/:language?`,name:`Latest`,url:`musify.club`,maintainers:[`nczitzk`],handler:r,example:`/musify/en`,parameters:{category:{description:`Language, Russian by default`,options:[{label:`Russian`,value:``},{label:`English`,value:`en`}]}},description:":::tip\nTo subscribe to [Latest](https://musify.club/en), where the source URL is `https://musify.club/en`, extract the certain parts from this URL to be used as parameters, resulting in the route as [`/musify/en`](https://rsshub.app/musify/en).\n:::\n",categories:[`multimedia`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`musify.club/:language`],target:`/:language`},{title:`Latest`,source:[`musify.club/en`],target:`/en`},{title:`​​Последняя`,source:[`musify.club`],target:`/`}],view:t.Articles};export{r as handler,i as route};
//# sourceMappingURL=musify-CTPasc3X.js.map