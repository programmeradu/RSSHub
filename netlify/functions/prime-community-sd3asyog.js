import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";const r={path:`/prime/community`,categories:[`new-media`],example:`/sspai/prime/community`,features:{requireConfig:[{name:`SSPAI_BEARERTOKEN`,optional:!1,description:"少数派会员账号认证 token。获取方式：登陆后打开少数派会员社区界面，打开浏览器开发者工具中 “网络”(Network) 选项卡，筛选 URL 找到任一个地址为 `sspai.com/api` 开头的请求，点击检查其 “消息头”，在 “请求头” 中找到Authorization字段，将其值复制填入配置即可。你的配置应该形如 `SSPAI_BEARERTOKEN: 'Bearer eyJxxxx......xx_U8'`。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`sspai.com/community`]}],name:`会员社区`,maintainers:[`mintyfrankie`],handler:i};async function i(){let r,i=await t.get(`sspai:token`);i?r=i:e.sspai.bearertoken?(r=e.sspai.bearertoken,t.set(`sspai:token`,e.sspai.bearertoken)):r=`Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjcyNzU3NiIsInR5cGUiOiJ1c2VyIiwiZXhwIjoxNzQ4NTI2MDEzfQ.di8RB-lxHI_JMBQHFd2xhcpk6Zd_3bvfQlAti6HAuZA`;let a={Authorization:r},o=await n(`https://sspai.com/api/v1/community/page/get`,{headers:a}),s=o.data.map(e=>({title:e.title,link:`https://sspai.com/t/${e.id_hash}`,pubDate:new Date(e.created_at*1e3),author:e.author.nickname,category:e.channel.title,id_hash:e.id_hash})),c=await Promise.all(s.map(e=>t.tryGet(e.link,async()=>{let t=`https://sspai.com/api/v1/community/topic/single/info/get?id_hash=${e.id_hash}`,r=await n(t,{headers:a});return e.description=r.data.body||`No content`,e})));return{title:`少数派会员社区`,link:`https://sspai.com/community`,lang:`zh-CN`,description:`少数派会员社区`,item:c}}export{r as route};
//# sourceMappingURL=prime-community-sd3asyog.js.map