{"version":3,"file":"common-BMjGMb2g.js","names":["got"],"sources":["../../lib/routes/pku/ss/common.ts"],"sourcesContent":["import got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nconst baseUrl = 'https://www.ss.pku.edu.cn';\r\n\r\nconst getSingleRecord = async (url) => {\r\n    const res = await got(url);\r\n\r\n    const $ = load(res.data);\r\n    const list = $('#info-list-ul').find('li');\r\n\r\n    return list.toArray().map((item) => {\r\n        item = $(item);\r\n        const date = item.find('.time').text();\r\n        return {\r\n            title: item.find('a').attr('title'),\r\n            pubDate: parseDate(date),\r\n            link: baseUrl + item.find('a').attr('href'),\r\n        };\r\n    });\r\n};\r\n\r\nconst getArticle = (item, tryGet) =>\r\n    tryGet(item.link, async () => {\r\n        const response = await got(item.link);\r\n        const $ = load(response.data);\r\n\r\n        item.description = $('.article-content').html();\r\n        return item;\r\n    });\r\n\r\nexport { baseUrl, getSingleRecord, getArticle };\r\n"],"mappings":"oIAIA,MAAM,EAAU,4BAEV,EAAkB,KAAO,IAAQ,CACnC,IAAM,EAAM,MAAMA,EAAI,GAEhB,EAAI,EAAK,EAAI,MACb,EAAO,EAAE,iBAAiB,KAAK,MAErC,OAAO,EAAK,UAAU,IAAK,GAAS,CAChC,EAAO,EAAE,GACT,IAAM,EAAO,EAAK,KAAK,SAAS,OAChC,MAAO,CACH,MAAO,EAAK,KAAK,KAAK,KAAK,SAC3B,QAAS,EAAU,GACnB,KAAM,EAAU,EAAK,KAAK,KAAK,KAAK,YAK1C,GAAc,EAAM,IACtB,EAAO,EAAK,KAAM,SAAY,CAC1B,IAAM,EAAW,MAAMA,EAAI,EAAK,MAC1B,EAAI,EAAK,EAAS,MAGxB,MADA,GAAK,YAAc,EAAE,oBAAoB,OAClC"}