{"version":3,"file":"topic-B4t8tB7T.js","names":["route: Route","cache"],"sources":["../../lib/routes/pincong/topic.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\nimport { baseUrl, puppeteerGet } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/topic/:topic',\r\n    radar: [\r\n        {\r\n            source: ['pincong.rocks/topic/:topic'],\r\n        },\r\n    ],\r\n    name: 'Unknown',\r\n    maintainers: ['zphw'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const url = `${baseUrl}/topic/${ctx.req.param('topic')}`;\r\n\r\n    // use Puppeteer due to the obstacle by cloudflare challenge\r\n    const html = await puppeteerGet(url, cache);\r\n\r\n    const $ = load(html);\r\n    const list = $('div.aw-item');\r\n\r\n    return {\r\n        title: `品葱 - ${ctx.req.param('topic')}`,\r\n        link: url,\r\n        item: list.toArray().map((item) => ({\r\n            title: $(item).find('h4 a').text().trim(),\r\n            link: baseUrl + $(item).find('h4 a').attr('href'),\r\n            pubDate: parseDate($(item).attr('data-created-at') * 1000),\r\n        })),\r\n    };\r\n}\r\n"],"mappings":"8TAMA,MAAaA,EAAe,CACxB,KAAM,gBACN,MAAO,CACH,CACI,OAAQ,CAAC,gCAGjB,KAAM,UACN,YAAa,CAAC,QACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAM,GAAG,EAAQ,SAAS,EAAI,IAAI,MAAM,WAGxC,EAAO,MAAM,EAAa,EAAKC,GAE/B,EAAI,EAAK,GACT,EAAO,EAAE,eAEf,MAAO,CACH,MAAO,QAAQ,EAAI,IAAI,MAAM,WAC7B,KAAM,EACN,KAAM,EAAK,UAAU,IAAK,IAAU,CAChC,MAAO,EAAE,GAAM,KAAK,QAAQ,OAAO,OACnC,KAAM,EAAU,EAAE,GAAM,KAAK,QAAQ,KAAK,QAC1C,QAAS,EAAU,EAAE,GAAM,KAAK,mBAAqB"}