import"./esm-shims-Dqvxr0BZ.js";import{rand_user_agent_default as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n,parseRelativeDate as r}from"./parse-date-Bgabdhlb.js";import{ofetch_default as i}from"./ofetch-Bzt0BXUH.js";import{load as a}from"cheerio";const o=e({browser:`mobile safari`,os:`ios`,device:`mobile`}),s={path:`/:category?`,categories:[`new-media`],example:`/fortunechina`,parameters:{category:`分类，见下表，默认为首页`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`fortunechina.com/:category`,`fortunechina.com/`]}],name:`分类`,maintainers:[`nczitzk`],handler:c,description:`| 商业    | 领导力    | 科技 | 研究   |
| ------- | --------- | ---- | ------ |
| shangye | lindgaoli | keji | report |`};async function c(e){let s=e.req.param(`category`)??``,c=`https://www.fortunechina.com${s?`/${s}`:``}`,l=await i(c),u=a(l),d=u(`.main`).find(s===``?`a:has(h2)`:`h2 a`).slice(0,e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):15).toArray().map(e=>{e=u(e);let t=e.attr(`href`);return{title:e.text(),link:t.indexOf(`http`)===0?t:`${c}/${e.attr(`href`)}`}});return d=await Promise.all(d.map(e=>t.tryGet(e.link,async()=>{let t=await i(e.link,{headers:{"User-Agent":o}}),s=a(t),c=s(`.date`).text(),l=c.match(/(\d{4}-\d{2}-\d{2})/);if(l?e.pubDate=n(l[1]):(l=c.match(/(\d+小时前)/),l&&(e.pubDate=r(l[1]))),e.author=s(`.author`).text(),s(`.mod-info, .title, .eval-zan, .eval-pic, .sae-more, .ugo-kol, .word-text .word-box .word-cn`).remove(),e.description=s(e.link.includes(`content`)?`.contain .text`:`.contain .top`).html(),e.link.includes(`jingxuan`))e.description+=s(`.eval-mod_ugo`).html();else if(e.link.includes(`events`)){let t=await i(`https://www.bagevent.com/event/${e.link.match(/\d+/)[0]}`),n=a(t);e.description=n(`.page_con`).html()}else e.link.includes(`zhuanlan`)&&(e.description+=s(`.mod-word`).html());return e}))),{title:s?u(`title`).text():`财富中文网`,link:c,item:d}}export{s as route};
//# sourceMappingURL=fortunechina-w2wYnD2Z.js.map