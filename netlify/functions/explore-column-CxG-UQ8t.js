import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import*as t from"node:url";import{load as n}from"cheerio";const r={path:`/explore/column/:id`,name:`Unknown`,maintainers:[],handler:i};async function i(r){let i=r.req.param(`id`),a=t.resolve(`https://www.douban.com/explore/column/`,i),o=await e.get(a),s=n(o.data),c=s(`div.h1`).text(),l=s(`div.item`).slice(0,10).toArray().map(e=>{let t={title:s(e).find(`div.title a`).text(),link:s(e).find(`div.title a`).attr(`href`),author:s(e).find(`div.usr-pic a`).text()};return t});for(let e=l.length-1;e>=0;e--)l[e].author===`[已注销]`&&l.splice(e,1);let u=await Promise.all(l.map(async t=>{let r=t.title,i=t.author,a=t.link,o=await e.get(a),s=n(o.data),c=s(`#link-report`).html(),l={title:r,link:a,description:c,author:i};return l}));return{title:`${c}-豆瓣发现`,link:a,item:u}}export{r as route};
//# sourceMappingURL=explore-column-CxG-UQ8t.js.map