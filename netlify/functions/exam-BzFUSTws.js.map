{"version":3,"file":"exam-BzFUSTws.js","names":[],"sources":["../../lib/routes/crac/exam.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport path from 'node:path';\r\nimport { art } from '@/utils/render';\r\n\r\nexport const route: Route = {\r\n    path: '/exam',\r\n    categories: ['government'],\r\n    example: '/crac/exam',\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: '考试信息',\r\n    maintainers: ['admxj'],\r\n    radar: [\r\n        {\r\n            source: ['www.crac.org.cn/*'],\r\n            target: '/exam',\r\n        },\r\n    ],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'http://82.157.138.16:8091/CRAC';\r\n\r\n    const response = await got({\r\n        method: 'post',\r\n        url: `${baseUrl}/app/exam_advice/examAdviceList`,\r\n        body: { req: { type: '0', page_no: '1', page_size: '10' } },\r\n    });\r\n\r\n    const list = response.data.res.list.map((item) => {\r\n        const id = Buffer.from(item.id).toString('base64');\r\n        const type = Buffer.from(item.type).toString('base64');\r\n        const link = `${baseUrl}/crac/pages/list_detail.html?id=${id}&type=${type}`;\r\n        return {\r\n            title: item.name,\r\n            link,\r\n            id: item.id,\r\n            author: item.exam.organizer,\r\n            pubDate: item.createDate,\r\n            updated: item.updateDate,\r\n            startDate: item.exam.signUpStartDate,\r\n            category: [item.examType],\r\n            image: item.weixin,\r\n            description: art(path.join(__dirname, 'templates/exam.art'), { item }),\r\n        };\r\n    });\r\n    return {\r\n        title: '考试信息-中国无线电协会业余无线电分会',\r\n        link: 'http://82.157.138.16:8091/CRAC/crac/pages/list_examMsg.html',\r\n        item: list,\r\n    };\r\n}\r\n"],"mappings":"gVAKA,MAAa,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,cACb,QAAS,aACT,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,OACN,YAAa,CAAC,SACd,MAAO,CACH,CACI,OAAQ,CAAC,qBACT,OAAQ,UAGhB,WAGJ,eAAe,GAAU,CACrB,IAAM,EAAU,iCAEV,EAAW,MAAM,EAAI,CACvB,OAAQ,OACR,IAAK,GAAG,EAAQ,iCAChB,KAAM,CAAE,IAAK,CAAE,KAAM,IAAK,QAAS,IAAK,UAAW,SAGjD,EAAO,EAAS,KAAK,IAAI,KAAK,IAAK,GAAS,CAC9C,IAAM,EAAK,OAAO,KAAK,EAAK,IAAI,SAAS,UACnC,EAAO,OAAO,KAAK,EAAK,MAAM,SAAS,UACvC,EAAO,GAAG,EAAQ,kCAAkC,EAAG,QAAQ,IACrE,MAAO,CACH,MAAO,EAAK,KACZ,OACA,GAAI,EAAK,GACT,OAAQ,EAAK,KAAK,UAClB,QAAS,EAAK,WACd,QAAS,EAAK,WACd,UAAW,EAAK,KAAK,gBACrB,SAAU,CAAC,EAAK,UAChB,MAAO,EAAK,OACZ,YAAa,EAAI,EAAA,KAAA,EAAA,+BAA4C,CAAE,YAGvE,MAAO,CACH,MAAO,sBACP,KAAM,8DACN,KAAM"}