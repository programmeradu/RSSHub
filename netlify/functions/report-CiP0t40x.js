import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{timezone as n}from"./timezone-BrNu6iXe.js";import{load as r}from"cheerio";const i={path:`/report/list/:report?`,categories:[`finance`],example:`/cih-index/report/list/p1-oaddtime-ddesc`,parameters:{report:"报告 id，可在 URL 中找到，留空为 `p1-oaddtime-ddesc`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`报告`,maintainers:[`TonyRL`],handler:a,url:`www.cih-index.com/report/list/p1-oaddtime-ddesc`,radar:[{source:[`www.cih-index.com/report/list/:report`]}]};async function a(i){let{report:a=`p1-oaddtime-ddesc`}=i.req.param(),o=`https://www.cih-index.com`,s=`${o}/report/list/${a}`,c=await t(s),l=r(c),u=JSON.parse(l(`script:contains("window.__INITIAL_STATE__")`).text().match(/window\.__INITIAL_STATE__\s*=\s*({.*?});/)?.[1]||`{}`),{dataResult:d,indNavLists:f,secondNameFilter:p,tagList:m,param:h}=u.data,g=d.reportInfoDtoList.map(t=>{let r=t.isCharging===1?3:t.pageCount,i=``;for(let e=1;e<=r;e++)i+=`<img src="${o}/report/bp-creis-report-detail/getImg?id=${t.reportId}&pageNum=${e}"><br>`;return{title:t.reportTitle,link:`${o}/report/detail/${t.reportId}.html`,pubDate:n(e(t.addTime),8),category:[...new Set([...t.reportClassTagDtoList.map(e=>e.tag),...t.keywordList||[]])],description:`${t.context}<br>${i}`,image:`${t.coverFigureUrl}/200`}}),_=h.firstId?f.find(e=>e.classId===h.firstId)?.className+` - `:``,v=h.secondId?p.find(e=>e.classId===h.secondId)?.className+` - `:``,y=h.tagId?m.find(e=>e.tagId===Number.parseInt(h.tagId))?.tag+` - `:``;return{title:`${_}${v}${y}中指报告`,description:l(`meta[name="description"]`).attr(`content`),image:`${o}/favicon.ico`,lang:`zh-CN`,link:s,item:g}}export{i as route};
//# sourceMappingURL=report-CiP0t40x.js.map