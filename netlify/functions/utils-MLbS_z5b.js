import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{md5 as t}from"./md5-4BNsOP-F.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i=`https://www.techpowerup.com`,a={cookie:`botcheck=${t(Date.now().toString())}`},o=e=>{e(`div.responsive-image-xx`).each((e,t)=>{l(t)}),e(`figure`).each((e,t)=>{c(t)}),e(`.newspost img`).each((e,t)=>{s(t)})},s=e=>{e.attribs.src=e.attribs.src.replace(`_thm`,``).replace(`_small`,``),e.parentNode.name===`a`&&e.parentNode.attribs[`data-width`]&&e.parentNode.attribs[`data-height`]&&(e.attribs.width=e.parentNode.attribs[`data-width`],e.attribs.height=e.parentNode.attribs[`data-height`])},c=e=>{delete e.attribs.style},l=e=>{delete e.attribs.style},u=async(t,o)=>{let{review:u}=JSON.parse(t(`script[type="application/ld+json"]`).text()),d=t(`.text`),f=t(`#pagesel option`).toArray().map(e=>`${i}${e.attribs.value}`).slice(1,-1);if(f.length){let e=await Promise.all(f.map(async e=>{let t=await n(e,{headers:a}),i=r(t);return i(`.text div.responsive-image-xx`).each((e,t)=>{l(t)}),i(`.text figure`).each((e,t)=>{c(t)}),i(`.text img`).each((e,t)=>{s(t)}),i(`.text`).html()}));d.append(e)}o.author=u.author.name,o.pubDate=e(u.datePublished),o.updated=e(u.dateModified),o.description=d.html()};export{i as baseUrl,o as fixImages,a as headers,u as parseReviews};
//# sourceMappingURL=utils-MLbS_z5b.js.map