import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t,parseRelativeDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{load as a}from"cheerio";const o={path:[`/u/:uid`,`/user/:id`],categories:[`programming`],example:`/oschina/u/3920392`,parameters:{uid:`用户 id，可通过查看用户博客网址得到，以 u/数字结尾，数字即为 id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`my.oschina.net/u/:uid`]}],name:`数字型账号用户博客`,maintainers:[],handler:s};async function s(o){let{id:s,uid:c}=o.req.param(),l=s?await r(`https://my.oschina.net/${s}`):await r(`https://my.oschina.net/u/${c}`),u=a(l.data),d=u(`.user-name .name`).text(),f=u(`#newestBlogList .blog-item`).toArray().map(e=>{e=u(e);let r=e.find(`.extra div .item:nth-of-type(2)`).text(),a=!e.find(`div.label[data-tooltip=审核中]`).length;return e.find(`.label`).remove(),{title:e.find(`.content a.header`).text(),description:e.find(`.description p`).text(),link:e.find(`a.header`).attr(`href`),pubDate:i(/\//.test(r)?t(r,[`YYYY/MM/DD HH:mm`,`MM/DD HH:mm`]):n(r),8),author:d,accessible:a}}),p=await Promise.all(f.map(t=>e.tryGet(t.link,async()=>{if(t.accessible){let e=await r(t.link),n=a(e.data);t.description=n(`.article-detail`).html()}return delete t.accessible,t})));return{title:d+`的博客`,description:u(`.user-text .user-signature`).text(),link:`https://my.oschina.net/u/${s??c}`,item:p}}export{o as route};
//# sourceMappingURL=user-BXaYDfLX.js.map