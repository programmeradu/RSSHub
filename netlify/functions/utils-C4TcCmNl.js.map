{"version":3,"file":"utils-C4TcCmNl.js","names":["ofetch","item"],"sources":["../../lib/routes/coindesk/utils.ts"],"sourcesContent":["import ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const parseItem = async (item) => {\r\n    const response = await ofetch(item.link);\r\n    const $ = load(response);\r\n    const ldJson = JSON.parse($('script[type=\"application/ld+json\"]').text());\r\n\r\n    $('.article-ad, #strategy-rules-player-wrapper, [data-module-name=\"newsletter-article-sign-up-module\"], div.flex.flex-col.gap-2').remove();\r\n    const cover = $('.article-content-wrapper figure');\r\n    cover.find('img').attr('src', cover.find('img').attr('url')?.split('?')[0]);\r\n    cover.find('img').removeAttr('style srcset url');\r\n\r\n    item.description =\r\n        cover.parent().html() +\r\n        $('.document-body')\r\n            .toArray()\r\n            .map((item) => $(item).html())\r\n            .join('');\r\n    item.pubDate = parseDate(ldJson.datePublished);\r\n    item.author = ldJson.author.map((a) => ({ name: a.name }));\r\n    item.image = ldJson.image.url.split('?')[0];\r\n\r\n    return item;\r\n};\r\n"],"mappings":"0IAIA,MAAa,EAAY,KAAO,IAAS,CACrC,IAAM,EAAW,MAAMA,EAAO,EAAK,MAC7B,EAAI,EAAK,GACT,EAAS,KAAK,MAAM,EAAE,sCAAsC,QAElE,EAAE,gIAAgI,SAClI,IAAM,EAAQ,EAAE,mCAchB,OAbA,EAAM,KAAK,OAAO,KAAK,MAAO,EAAM,KAAK,OAAO,KAAK,QAAQ,MAAM,KAAK,IACxE,EAAM,KAAK,OAAO,WAAW,oBAE7B,EAAK,YACD,EAAM,SAAS,OACf,EAAE,kBACG,UACA,IAAK,GAAS,EAAEC,GAAM,QACtB,KAAK,IACd,EAAK,QAAU,EAAU,EAAO,eAChC,EAAK,OAAS,EAAO,OAAO,IAAK,IAAO,CAAE,KAAM,EAAE,QAClD,EAAK,MAAQ,EAAO,MAAM,IAAI,MAAM,KAAK,GAElC"}