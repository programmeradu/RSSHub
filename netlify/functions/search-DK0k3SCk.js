import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as i}from"./got-CdvI2yKX.js";import a from"node:path";import o from"aes-js";t();const s={path:`/search/:wd`,categories:[`shopping`],example:`/duozhuayu/search/JavaScript`,parameters:{wd:`搜索关键词`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`duozhuayu.com/search/book/:wd`]}],name:`搜索结果`,maintainers:[`fengkx`],handler:c};async function c(t){let s=t.req.param(`wd`),c=`https://www.duozhuayu.com`,l=`book`,u=`${c}/search/${l}/${s}`,d=[...`DkOliWvFNR7C4WvR`].map(e=>e.charCodeAt()),f=[...`GQWKUE2CVGOOBKXU`].map(e=>e.charCodeAt()),p=new o.ModeOfOperation.cfb(d,f),m=e=>{let t=o.utils.utf8.toBytes(e),n=p.encrypt(t);return o.utils.hex.fromBytes(n)},h=()=>{let e=Date.now(),t=Math.floor(1e8*Math.random()),n=m([e,0,t].join(`:`)),r=[0,e,Math.round(1e5*Math.random())].join(`-`);return{"x-api-version":`0.0.48`,"x-refer-request-id":r,"x-request-id":r,"x-request-misc":`{"platform":"browser","originSource":"search","originFrom":"normal","webVersion":"1.2.201774"}`,"x-request-token":n,"x-security-key":t,"x-timestamp":e,"x-user-id":0}},g=await i({method:`get`,url:`${c}/api/search/book`,searchParams:{type:`normal`,q:s},headers:h()}),_=g.data.data.filter(e=>e.type===l).map(({[l]:t})=>({title:t.title,link:`${c}/books/${t.id}`,pubDate:r(t.updated),description:n(a.join(e,`templates/book-2930de24.art`),{item:t})}));return{title:`多抓鱼搜索-${s}`,link:u,description:`多抓鱼搜索-${s}`,item:_}}export{s as route};
//# sourceMappingURL=search-DK0k3SCk.js.map