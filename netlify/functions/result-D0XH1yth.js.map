{"version":3,"file":"result-D0XH1yth.js","names":["route: Route","got","data"],"sources":["../../lib/routes/dongqiudi/result.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got';\r\nimport { JSDOM } from 'jsdom';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/result/:team',\r\n    categories: ['new-media'],\r\n    example: '/dongqiudi/result/50001755',\r\n    parameters: { team: '球队 id, 可在[懂球帝数据](https://www.dongqiudi.com/data)中找到' },\r\n    radar: [\r\n        {\r\n            source: ['www.dongqiudi.com/team/*team'],\r\n            target: (params) => `/dongqiudi/result/${params.team.replace('.html', '')}`,\r\n        },\r\n    ],\r\n    name: '足球赛果',\r\n    maintainers: ['HenryQW'],\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const team = ctx.req.param('team');\r\n    const link = `https://www.dongqiudi.com/team/${team}.html`;\r\n\r\n    const response = await got(link);\r\n    const dom = new JSDOM(response.data, {\r\n        runScripts: 'dangerously',\r\n    });\r\n    const data = dom.window.__NUXT__.data[0];\r\n    const resultData = data.teamScheduleData.filter((data) => data.fs_A && data.fs_B);\r\n\r\n    const teamName = data.teamDetail.base_info.team_name;\r\n\r\n    const out = resultData.map((result) => ({\r\n        title: `${result.match_title} ${result.team_A_name} ${result.fs_A}-${result.fs_B} ${result.team_B_name}`,\r\n        guid: result.match_id,\r\n        link: result.scheme.replace('dongqiudi:///game/', 'https://www.dongqiudi.com/liveDetail/'),\r\n        pubDate: parseDate(result.start_time),\r\n    }));\r\n\r\n    return {\r\n        title: `${teamName} 比赛结果`,\r\n        link,\r\n        item: out.slice(-10),\r\n    };\r\n}\r\n"],"mappings":"mTAKA,MAAaA,EAAe,CACxB,KAAM,gBACN,WAAY,CAAC,aACb,QAAS,6BACT,WAAY,CAAE,KAAM,uDACpB,MAAO,CACH,CACI,OAAQ,CAAC,gCACT,OAAS,GAAW,qBAAqB,EAAO,KAAK,QAAQ,QAAS,QAG9E,KAAM,OACN,YAAa,CAAC,WACd,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAO,kCAAkC,EAAK,OAE9C,EAAW,MAAMC,EAAI,GACrB,EAAM,IAAI,EAAM,EAAS,KAAM,CACjC,WAAY,gBAEV,EAAO,EAAI,OAAO,SAAS,KAAK,GAChC,EAAa,EAAK,iBAAiB,OAAQ,GAASC,EAAK,MAAQA,EAAK,MAEtE,EAAW,EAAK,WAAW,UAAU,UAErC,EAAM,EAAW,IAAK,IAAY,CACpC,MAAO,GAAG,EAAO,YAAY,GAAG,EAAO,YAAY,GAAG,EAAO,KAAK,GAAG,EAAO,KAAK,GAAG,EAAO,cAC3F,KAAM,EAAO,SACb,KAAM,EAAO,OAAO,QAAQ,qBAAsB,yCAClD,QAAS,EAAU,EAAO,eAG9B,MAAO,CACH,MAAO,GAAG,EAAS,OACnB,OACA,KAAM,EAAI,MAAM"}