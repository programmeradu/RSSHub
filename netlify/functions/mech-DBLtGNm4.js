import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=[`通知公告`,`院所新闻`,`教学信息`,`学术动态`,`学院简报`],o=[`xwdt/tzgg.htm`,`xwdt/ysxw.htm`,`xwdt/jxxx.htm`,`xwdt/xsdt.htm`,`xwdt/xyjb.htm`],s=`https://www.mech.sdu.edu.cn/`,c={path:`/mech/:type?`,categories:[`university`],example:`/sdu/mech/0`,parameters:{type:"默认为 `0`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`机械工程学院通知`,maintainers:[`Ji4n1ng`],handler:l,description:`| 通知公告 | 院所新闻 | 教学信息 | 学术动态 | 学院简报 |
| -------- | -------- | -------- | -------- | -------- |
| 0        | 1        | 2        | 3        | 4        |`};async function l(c){let l=c.req.param(`type`)?Number.parseInt(c.req.param(`type`)):0,u=new URL(o[l],s).href,d=await n(u),f=i(d.data),p=f(`#page_list li a`).toArray().map(e=>(e=f(e),{title:e.attr(`title`),link:e.attr(`href`)}));return p=await Promise.all(p.filter(e=>e.link.startsWith(`../info`)||e.link.startsWith(`https://www.rd.sdu.edu.cn/`)).map(a=>{let o=a.link.startsWith(`../info`);return o&&(a.link=new URL(a.link.slice(`3`),s).href),e.tryGet(a.link,async()=>{let e=await n(a.link),o=i(e.data),s=o(`#show_info`).text().split(/\s{4}/),c=s[0].split(`：`)[1];return a.title=o(`#show_title`).text().trim(),a.author=s[1].replace(`作者：`,``)||`山东大学机械工程学院`,o(`#show_title, #show_info`).remove(),a.description=o(`form[name=_newscontent_fromname] div`).html(),a.pubDate=r(t(c),8),a})})),{title:`山东大学机械工程学院${a[l]}`,description:f(`title`).text(),link:u,item:p}}export{c as route};
//# sourceMappingURL=mech-DBLtGNm4.js.map