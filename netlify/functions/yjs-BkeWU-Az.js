import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{load as r}from"cheerio";const i={zsgz:{tzgg:{title:`招生工作 - 通知公告`,path:`/zsgz/tzgg.htm`},xwsd:{title:`招生工作 - 新闻速递`,path:`/zsgz/xwsd.htm`}},pygz:{tzgg:{title:`培养工作 - 通知公告`,path:`/pygz/tzgg.htm`},gzzd:{title:`培养工作 - 规章制度`,path:`/pygz/gzzd.htm`}},xwgz:{tzgg:{title:`学位工作 - 通知公告`,path:`/xwgz/tzgg.htm`},dsgl:{title:`学位工作 - 导师管理`,path:`/xwgz/dsgl.htm`},xwgl:{title:`学位工作 - 学位管理`,path:`/xwgz/xwgl.htm`},pggz:{title:`学位工作 - 评估工作`,path:`/xwgz/pggz.htm`}},xsgz:{tzgg:{title:`学生工作 - 通知公告`,path:`/xsgz/tzgg.htm`},xwsd:{title:`学生工作 - 新闻速递`,path:`/xsgz/xwsd.htm`},xshd:{title:`学生工作 - 学生活动`,path:`/xsgz/xshd.htm`},jzgz:{title:`学生工作 - 奖助工作`,path:`/xsgz/jzgz.htm`}},xzzx:{zsxz:{title:`下载中心 - 招生下载`,path:`/xzzx/zsxz.htm`},pyxz:{title:`下载中心 - 培养下载`,path:`/xzzx/pyxz.htm`},xwxz:{title:`下载中心 - 学位下载`,path:`/xzzx/xwxz.htm`}}},a={path:`/yjs/:type/:subtype`,categories:[`university`],example:`/gmu/yjs/zsgz/tzgg`,parameters:{type:{description:`分类，见下表`,options:[{value:`zsgz`,label:`招生工作`},{value:`pygz`,label:`培养工作`},{value:`xwgz`,label:`学位工作`},{value:`xsgz`,label:`学生工作`},{value:`xzzx`,label:`下载中心`}]},subtype:{description:`子分类，见下表`,options:[{value:`tzgg`,label:`通知公告`},{value:`xwsd`,label:`新闻速递`},{value:`gzzd`,label:`规章制度`},{value:`dsgl`,label:`导师管理`},{value:`xwgl`,label:`学位管理`},{value:`pggz`,label:`评估工作`},{value:`xshd`,label:`学生活动`},{value:`jzgz`,label:`奖助工作`},{value:`zsxz`,label:`招生下载`},{value:`pyxz`,label:`培养下载`},{value:`xwxz`,label:`学位下载`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`研究生院`,maintainers:[`FrankFahey`],radar:[{source:[`yjs.gmu.cn/:type/:subtype.htm`,`yjs.gmu.cn/`],target:`/yjs/:type/:subtype`}],handler:o};async function o(a){let{type:o,subtype:s}=a.req.param();if(!i[o]||!i[o][s])throw Error(`Invalid type or subtype`);let{title:c,path:l}=i[o][s],u=`https://yjs.gmu.cn`+l,d=await n(u,{https:{rejectUnauthorized:!1}}),f=r(d.data),p=f(`.n_listxx1 li`);if(p.length===0)throw Error(`No content found. The page structure might have changed.`);let m=await Promise.all(p.toArray().map(async i=>{let a=f(i),o=a.find(`a`),s=a.find(`span`).text(),c=o.attr(`href`),l=o.text().trim();if(!c||!l)return null;let d=t(s);if(!d)return null;let p=new URL(c,u).href;return await e.tryGet(`gmu:yjs:${p}`,async()=>{try{let e=await n(p,{https:{rejectUnauthorized:!1}}),t=r(e.data),i=t(`.v_news_content`).html()||`暂无详细内容`;return{title:l,link:p,pubDate:d,description:i}}catch{return{title:l,link:p,pubDate:d,description:`暂无详细内容`}}})})),h=m.filter(e=>e!==null);return{title:c,link:u,description:`广州医科大学研究生院 - ${c}`,item:h}}export{o as handler,a as route};
//# sourceMappingURL=yjs-BkeWU-Az.js.map