import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=async n=>{let i=Number.parseInt(n.req.query(`limit`)??`100`,10),a=`https://cursor.com`,o=new URL(`changelog`,a).href,s=await t(o,{headers:{cookie:`NEXT_LOCALE=en`}}),c=r(s),l=c(`html`).attr(`lang`)??`en`,u=c(`article.relative`).slice(0,i).toArray().map(t=>{let n=c(t),r=``,i;n.find(`div`).each((e,t)=>{let n=c(t).text().trim(),a=n.match(/^(\w+\s+\d{1,2},\s+\d{4})(\d+\.\d+)$/);if(a)return i=a[1],r=a[2],!1});let o=n.find(`a[href^="/changelog/"]`).first(),s=o.length?o.text().trim():n.find(`h2`).first().text().trim(),u=r?`[${r}] ${s}`:s,d=o.attr(`href`),f=`cursor-changelog-${r||`unknown`}`,p=i,m=n.find(`h2`).first();m.length&&(m.prevAll().remove(),m.remove());let h=n.html()||``,g={title:u,description:h,pubDate:i?e(i):void 0,link:d?new URL(d,a).href:void 0,guid:f,id:f,content:{html:h,text:h},updated:p?e(p):void 0,language:l};return g});return{title:c(`title`).text(),description:c(`meta[property="og:description"]`).attr(`content`),link:o,item:u,allowEmpty:!0,image:c(`meta[property="og:image"]`).attr(`content`),language:l}},a={path:`/changelog`,name:`Changelog`,url:`cursor.com`,maintainers:[`p3psi-boo`,`nczitzk`],handler:i,example:`/cursor/changelog`,parameters:void 0,description:void 0,categories:[`program-update`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cursor.com/changelog`],target:`/changelog`}],view:n.Articles};export{i as handler,a as route};
//# sourceMappingURL=changelog-CUNdn6Ju.js.map