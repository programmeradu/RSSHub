import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as t}from"./cache-kimkMTWJ.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as r}from"./got-CdvI2yKX.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{config_not_found_default as a}from"./config-not-found-BVqhRP9D.js";import{getHeaders as o}from"./utils-C3VIOjjx.js";import{load as s}from"cheerio";const c={path:`/baoliao/:uid`,categories:[`shopping`],example:`/smzdm/baoliao/7367111021`,parameters:{uid:`用户id，网址上直接可以看到`},features:{requireConfig:[{name:`SMZDM_COOKIE`,description:`什么值得买登录后的 Cookie 值`}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`zhiyou.smzdm.com/member/:uid/baoliao`]}],name:`用户爆料`,maintainers:[`nczitzk`],handler:l};async function l(c){if(!e.smzdm.cookie)throw new a(`什么值得买排行榜 is disabled due to the lack of SMZDM_COOKIE`);let l=`https://zhiyou.smzdm.com/member/${c.req.param(`uid`)}/baoliao/`,u=await r(l,{headers:o()}),d=s(u.data),f=d(`.info-stuff-nickname`).text(),p=d(`.pandect-content-stuff`).toArray().map(e=>(e=d(e),{title:e.find(`.pandect-content-title a`).text(),link:e.find(`.pandect-content-title a`).attr(`href`),pubDate:i(n(e.find(`.pandect-content-time`).text(),[`YYYY-MM-DD`,`MM-DD HH:mm`]),8)})),m=await Promise.all(p.map(e=>t.tryGet(e.link,async()=>{let t=await r(e.link,{headers:o()}),a=s(t.data);return e.description=a(`article.txt-detail`).html(),e.pubDate=i(n(a(`.time`).first().text().trim().replace(`更新时间：`,``)),8),e.author=f,e})));return{title:`${f}的爆料 - 什么值得买`,link:l,item:m}}export{c as route};
//# sourceMappingURL=baoliao-CxqxdawW.js.map