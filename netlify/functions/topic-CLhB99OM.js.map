{"version":3,"file":"topic-CLhB99OM.js","names":["route: Route"],"sources":["../../lib/routes/grist/topic.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport { getData, getList } from './utils';\r\n\r\nexport const route: Route = {\r\n    path: '/topic/:topic',\r\n    categories: ['new-media'],\r\n    example: '/grist/topic/extreme-heat',\r\n    parameters: { topic: 'Any Topic from Table below' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['grist.org/:topic'],\r\n        },\r\n    ],\r\n    name: 'Topic',\r\n    maintainers: ['Rjnishant530'],\r\n    handler,\r\n    url: 'grist.org/articles/',\r\n    description: `Topics\r\n\r\n| Topic Name               | Topic Link         |\r\n| ------------------------ | ------------------ |\r\n| Accountability           | accountability     |\r\n| Agriculture              | agriculture        |\r\n| Ask Umbra                | ask-umbra-series   |\r\n| Buildings                | buildings          |\r\n| Cities                   | cities             |\r\n| Climate & Energy         | climate-energy     |\r\n| Climate Fiction          | climate-fiction    |\r\n| Climate of Courage       | climate-of-courage |\r\n| COP26                    | cop26              |\r\n| COP27                    | cop27              |\r\n| Culture                  | culture            |\r\n| Economics                | economics          |\r\n| Energy                   | energy             |\r\n| Equity                   | equity             |\r\n| Extreme Weather          | extreme-weather    |\r\n| Fix                      | fix                |\r\n| Food                     | food               |\r\n| Grist                    | grist              |\r\n| Grist News               | grist-news         |\r\n| Health                   | health             |\r\n| Housing                  | housing            |\r\n| Indigenous Affairs       | indigenous         |\r\n| International            | international      |\r\n| Labor                    | labor              |\r\n| Language                 | language           |\r\n| Migration                | migration          |\r\n| Opinion                  | opinion            |\r\n| Politics                 | politics           |\r\n| Protest                  | protest            |\r\n| Race                     | race               |\r\n| Regulation               | regulation         |\r\n| Science                  | science            |\r\n| Shift Happens Newsletter | shift-happens      |\r\n| Solutions                | solutions          |\r\n| Spanish                  | spanish            |\r\n| Sponsored                | sponsored          |\r\n| Technology               | technology         |\r\n| Temperature Check        | temperature-check  |\r\n| Uncategorized            | article            |\r\n| Updates                  | updates            |\r\n| Video                    | video              |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const baseUrl = 'https://grist.org';\r\n    const searchRoute = '/wp-json/wp/v2/categories?slug=';\r\n    const articleRoute = '/wp-json/wp/v2/posts?categories=';\r\n    const topic = ctx.req.param('topic');\r\n    const id = (await getData(`${baseUrl}${searchRoute}${topic}`))[0].id;\r\n    const data = await getData(`${baseUrl}${articleRoute}${id}&_embed`);\r\n    const items = await getList(data);\r\n\r\n    return {\r\n        title: `${topic[0].toUpperCase() + topic.slice(1)} - Gist Articles`,\r\n        link: `${baseUrl}/${topic}`,\r\n        item: items,\r\n        description: `${topic[0].toUpperCase() + topic.slice(1)} Articles on grist.org`,\r\n        logo: 'https://grist.org/wp-content/uploads/2021/03/cropped-Grist-Favicon.png?w=192',\r\n        icon: 'https://grist.org/wp-content/uploads/2021/03/cropped-Grist-Favicon.png?w=32',\r\n        language: 'en-us',\r\n    };\r\n}\r\n"],"mappings":"6QAGA,MAAaA,EAAe,CACxB,KAAM,gBACN,WAAY,CAAC,aACb,QAAS,4BACT,WAAY,CAAE,MAAO,8BACrB,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,sBAGjB,KAAM,QACN,YAAa,CAAC,gBACd,UACA,IAAK,sBACL,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oDA+CjB,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAU,oBAGV,EAAQ,EAAI,IAAI,MAAM,SACtB,GAAM,MAAM,EAAQ,GAAG,mCAAwB,MAAU,GAAG,GAC5D,EAAO,MAAM,EAAQ,GAAG,oCAAyB,EAAG,UACpD,EAAQ,MAAM,EAAQ,GAE5B,MAAO,CACH,MAAO,GAAG,EAAM,GAAG,cAAgB,EAAM,MAAM,GAAG,kBAClD,KAAM,GAAG,EAAQ,GAAG,IACpB,KAAM,EACN,YAAa,GAAG,EAAM,GAAG,cAAgB,EAAM,MAAM,GAAG,wBACxD,KAAM,+EACN,KAAM,8EACN,SAAU"}