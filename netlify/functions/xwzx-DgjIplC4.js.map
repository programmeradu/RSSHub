{"version":3,"file":"xwzx-DgjIplC4.js","names":["route: Route","got","titles: { [key: string]: string }"],"sources":["../../lib/routes/jlu/ccst/xwzx/index.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport got from '@/utils/got'; // Custom got instance\r\nimport { load } from 'cheerio'; // HTML parser with jQuery-like API\r\n\r\nexport const route: Route = {\r\n    path: '/ccst/xwzx/:category',\r\n    categories: ['university'],\r\n    example: '/jlu/ccst/xwzx/gsl',\r\n    radar: [\r\n        {\r\n            source: ['ccst.jlu.edu.cn/xwzx/gsl.htm', 'ccst.jlu.edu.cn/xwzx/xstd.htm', 'ccst.jlu.edu.cn/xwzx/xytz.htm', 'ccst.jlu.edu.cn/xwzx/xyxw.htm', 'ccst.jlu.edu.cn/xwzx/zsjy.htm'],\r\n        },\r\n    ],\r\n    name: '吉林大学计算机科学与技术学院 - 新闻中心',\r\n    maintainers: ['mayouxi'],\r\n    handler,\r\n    url: 'ccst.jlu.edu.cn',\r\n};\r\n\r\nasync function handler(ctx: any) {\r\n    const category = ctx.req.param('category');\r\n    const baseUrl = 'https://ccst.jlu.edu.cn';\r\n    const url = `${baseUrl}/xwzx/${category}.htm`;\r\n    const response = await got(url);\r\n    const $ = load(response.body);\r\n\r\n    const list = $('.section.container .main .list3 ul li');\r\n\r\n    const titles: { [key: string]: string } = {\r\n        gsl: '公示栏',\r\n        xstd: '学生天地',\r\n        xytz: '学院通知',\r\n        xyxw: '学院新闻',\r\n        zsjy: '招生就业',\r\n    };\r\n\r\n    const titleSuffix = titles[category] || '新闻中心'; // Fallback to '新闻中心' if category is not found\r\n\r\n    return {\r\n        title: `吉林大学计算机科学与技术学院 - 新闻中心${titleSuffix}`,\r\n        link: baseUrl,\r\n        description: `吉林大学计算机科学与技术学院 - 新闻中心${titleSuffix}`,\r\n\r\n        item: list.toArray().map((item) => {\r\n            const el = $(item);\r\n\r\n            const linkEl = el.find('a');\r\n            const dateEl = el.find('.date');\r\n            const dateStr = dateEl.text().trim();\r\n            const title = linkEl.text().trim();\r\n            const rawLink = linkEl.attr('href')!.replaceAll('..', ''); // Replace all occurrences of '..'\r\n            const link = `${baseUrl}${encodeURI(rawLink)}`; // Encode the URL properly\r\n\r\n            const newsDate = new Date(dateStr);\r\n\r\n            return {\r\n                title,\r\n                link,\r\n                pubDate: newsDate,\r\n            };\r\n        }),\r\n    };\r\n}\r\n"],"mappings":"+PAIA,MAAaA,EAAe,CACxB,KAAM,uBACN,WAAY,CAAC,cACb,QAAS,qBACT,MAAO,CACH,CACI,OAAQ,CAAC,+BAAgC,gCAAiC,gCAAiC,gCAAiC,mCAGpJ,KAAM,wBACN,YAAa,CAAC,WACd,UACA,IAAK,mBAGT,eAAe,EAAQ,EAAU,CAC7B,IAAM,EAAW,EAAI,IAAI,MAAM,YACzB,EAAU,0BACV,EAAM,GAAG,EAAQ,QAAQ,EAAS,MAClC,EAAW,MAAMC,EAAI,GACrB,EAAI,EAAK,EAAS,MAElB,EAAO,EAAE,yCAETC,EAAoC,CACtC,IAAK,MACL,KAAM,OACN,KAAM,OACN,KAAM,OACN,KAAM,QAGJ,EAAc,EAAO,IAAa,OAExC,MAAO,CACH,MAAO,wBAAwB,IAC/B,KAAM,EACN,YAAa,wBAAwB,IAErC,KAAM,EAAK,UAAU,IAAK,GAAS,CAC/B,IAAM,EAAK,EAAE,GAEP,EAAS,EAAG,KAAK,KACjB,EAAS,EAAG,KAAK,SACjB,EAAU,EAAO,OAAO,OACxB,EAAQ,EAAO,OAAO,OACtB,EAAU,EAAO,KAAK,QAAS,WAAW,KAAM,IAChD,EAAO,GAAG,IAAU,UAAU,KAE9B,EAAW,IAAI,KAAK,GAE1B,MAAO,CACH,QACA,OACA,QAAS"}