{"version":3,"file":"cursed-knowledge-x3qsQwnq.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/immich/cursed-knowledge.ts"],"sourcesContent":["import { Route } from '@/types';\r\nimport { load } from 'cheerio';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/cursed-knowledge',\r\n    categories: ['blog'],\r\n    example: '/immich/cursed-knowledge',\r\n    radar: [\r\n        {\r\n            source: ['immich.app/cursed-knowledge', 'immich.app'],\r\n            target: '/cursed-knowledge',\r\n        },\r\n    ],\r\n    name: 'Cursed Knowledge',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n};\r\n\r\nasync function handler() {\r\n    const baseUrl = 'https://immich.app';\r\n    const link = `${baseUrl}/cursed-knowledge/`;\r\n\r\n    const response = await ofetch(link);\r\n    const $ = load(response);\r\n\r\n    const items = $('div.justify-around ul li')\r\n        .toArray()\r\n        .map((item) => {\r\n            const $item = $(item);\r\n            const href = $item.find('a').attr('href');\r\n            const title = $item.find('section p').first().text();\r\n            return {\r\n                title,\r\n                description: $item.find('section p').last().text(),\r\n                link: href ?? `${link}#${title}`,\r\n                pubDate: parseDate($item.find('div.justify-start').text()),\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: $('head title').text(),\r\n        description: $('p.text-center').text(),\r\n        image: `${baseUrl}${$('head link[rel=\"icon\"]').attr('href')}`,\r\n        link,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"+PAKA,MAAaA,EAAe,CACxB,KAAM,oBACN,WAAY,CAAC,QACb,QAAS,2BACT,MAAO,CACH,CACI,OAAQ,CAAC,8BAA+B,cACxC,OAAQ,sBAGhB,KAAM,mBACN,YAAa,CAAC,UACd,WAGJ,eAAe,GAAU,CACrB,IAAM,EAAU,qBACV,EAAO,GAAG,EAAQ,oBAElB,EAAW,MAAMC,EAAO,GACxB,EAAI,EAAK,GAET,EAAQ,EAAE,4BACX,UACA,IAAK,GAAS,CACX,IAAM,EAAQ,EAAE,GACV,EAAO,EAAM,KAAK,KAAK,KAAK,QAC5B,EAAQ,EAAM,KAAK,aAAa,QAAQ,OAC9C,MAAO,CACH,QACA,YAAa,EAAM,KAAK,aAAa,OAAO,OAC5C,KAAM,GAAQ,GAAG,EAAK,GAAG,IACzB,QAAS,EAAU,EAAM,KAAK,qBAAqB,WAI/D,MAAO,CACH,MAAO,EAAE,cAAc,OACvB,YAAa,EAAE,iBAAiB,OAChC,MAAO,GAAG,IAAU,EAAE,yBAAyB,KAAK,UACpD,OACA,KAAM"}