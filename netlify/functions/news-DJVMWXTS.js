import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-Bzt0BXUH.js";import{load as r}from"cheerio";const i={path:`/news`,categories:[`game`],example:`/warhammer-community/news`,radar:[{source:[`www.warhammer-community.com/en-gb/all-news-and-features/`,`www.warhammer-community.com/en-gb/`]}],name:`News`,maintainers:[`TonyRL`],handler:a,url:`www.warhammer-community.com/en-gb/all-news-and-features/`};async function a(i){let a=`https://www.warhammer-community.com`,o=Number.parseInt(i.req.query(`limit`)||`16`,10),s=await n(`${a}/api/search/news/`,{method:`POST`,body:{sortBy:`date_desc`,category:``,collections:[`articles`],game_systems:[],index:`news`,locale:`en-gb`,page:0,perPage:o,topics:[]}}),c=s.news.map(e=>({title:e.title,link:`${a}/en-gb${e.uri}/`,description:e.excerpt,image:`https://assets.warhammer-community.com/${e.image.path}`,pubDate:t(e.date),category:e.topics.map(e=>e.title)})),l=await Promise.all(c.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),i=r(e),a=i(`.article-content`);return a.find(`button`).remove(),t.description=a.html()||t.description,t})));return{title:`All News and Features - Warhammer Community`,link:`${a}/en-gb/all-news-and-features/`,image:`${a}/images/apple-favicon.png`,item:l}}export{i as route};
//# sourceMappingURL=news-DJVMWXTS.js.map