import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{invalid_parameter_default as r}from"./invalid-parameter-CUJdROXf.js";import{load as i}from"cheerio";const a=`http://xg.swjtu.edu.cn`,o={tzgg:`${a}/web/Home/PushNewsList?Lmk7LJw34Jmu=010j.shtml`,yhxw:`${a}/web/Home/NewsList?LJw34Jmu=011e.shtml`,dcxy:`${a}/web/Home/ColourfulCollegeNewsList`,xgzj:`${a}/web/Home/NewsList?xvw34vmu=010e.shtml`},s=(e,r)=>{let o=e.find(`h4`).find(`a`),s=e.find(`span.ctxlist-time`).text(),c=o.text(),l=`${a}${o.attr(`href`)}`;return r.tryGet(l,async()=>{try{let e=await n({method:`get`,url:l}),r=i(e.data),a=r(`.detail-content-text`).html();return a||(a=`转发通知`),{title:c,pubDate:t(String(s)),link:l,description:a}}catch(e){if(e.response&&e.response.status===404)return{title:c,pubDate:t(String(s)),link:l,description:``};throw e}})},c={path:`/xg/:code?`,categories:[`university`],example:`/swjtu/xg/tzgg`,parameters:{code:`栏目(默认为tzgg)`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xg.swjtu.edu.cn/web/Home/PushNewsList`,`xg.swjtu.edu.cn/web/Home/NewsList`,`xg.swjtu.edu.cn/web/Home/ColourfulCollegeNewsList`,`xg.swjtu.edu.cn/web/Publicity/List`,`xg.swjtu.edu.cn/`],target:`/xg`}],name:`扬华素质网`,maintainers:[`mobyw`],handler:l,url:`xg.swjtu.edu.cn/web/Home/PushNewsList`,description:`栏目列表：

| 通知公告 | 扬华新闻 | 多彩学院 | 学工之家 |
| -------- | -------- | -------- | -------- |
| tzgg     | yhxw     | dcxy     | xgzj     |`};async function l(t){let a=t.req.param(`code`)??`tzgg`,c=o[a];if(!c)throw new r(`code not supported`);let l=await n({method:`get`,url:c}),u=i(l.data),d=u(`div.right-side ul.block-ctxlist li`),f=await Promise.all(d.toArray().map(t=>{let n=u(t);return s(n,e)}));return{title:`西南交大-扬华素质网`,link:c,item:f,allowEmpty:!0}}export{c as route};
//# sourceMappingURL=xg-3cKZ01hf.js.map