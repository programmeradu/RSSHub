import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{got_default as t}from"./got-CdvI2yKX.js";const n=async(n,r)=>{let i=await Promise.all(n.map(async n=>{let i=n.uuid,o=await r.tryGet(i,async()=>{let r=`https://www.infoq.cn/article/${i}`,o=await t.post(`https://www.infoq.cn/public/v1/article/getDetail`,{headers:{Referer:r},json:{uuid:i}}),s=o.data.data,c=s.author?s.author.map(e=>e.nickname).join(`,`):s.no_author,l=[...n.topic.map(e=>e.name),...n.label.map(e=>e.name)],u=s.content_url?(await t(s.content_url)).body:s.content;return{title:s.article_title,description:a(u),pubDate:e(n.publish_time,`x`),category:l,author:c,link:r}});return o}));return i},r=e=>i(e).join(``),i=e=>e.map(e=>{let t={doc:()=>i(e.content).map(e=>`<p>${e}</p>`).join(``),text:()=>e.text,heading:()=>{if(e.content){let t=e.attrs.level,n=r(e.content);return`<h${t}>${n}</h${t}>`}else return``},blockquote:()=>{if(e.content){let t=r(e.content);return`<blockquote>${t}</blockquote>`}else return``},image:()=>{let t=e.attrs.src;return`<img src="${t}"></img>`},codeblock:()=>{if(e.content){let t=e.attrs.lang,n=r(e.content);return`<code lang="${t}">${n}</code>`}else return``},link:()=>{let t=e.attrs.href,n=e.content?r(e.content):``;return`<a href="${t}">${n}</a>"`}};return e.type in t?t[e.type]():e.content?r(e.content):``});function a(e){let t=e.startsWith(`{"`);return t?r([JSON.parse(e)]):e}var o={ProcessFeed:n};export{o as utils_default};
//# sourceMappingURL=utils-CHMNk-GC.js.map