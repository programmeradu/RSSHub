{"version":3,"file":"blog-DOMphTEe.js","names":["route: Route","ofetch","list: DataItem[]","items: DataItem[]","cache","response","$","description: string","pubDateText: string","currentYear: number","pubDate: Date"],"sources":["../../lib/routes/manus/blog.ts"],"sourcesContent":["import { Route, DataItem, Data, ViewType } from '@/types';\r\nimport cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch';\r\nimport { load } from 'cheerio';\r\n\r\nexport const route: Route = {\r\n    path: '/blog',\r\n    categories: ['programming'],\r\n    example: '/manus/blog',\r\n    url: 'manus.im',\r\n    parameters: {},\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    radar: [\r\n        {\r\n            source: ['www.manus.im'],\r\n            target: '/blog',\r\n        },\r\n    ],\r\n    name: 'Blog',\r\n    maintainers: ['cscnk52'],\r\n    handler,\r\n    description: 'Manus Blog',\r\n    view: ViewType.Notifications,\r\n};\r\n\r\nasync function handler() {\r\n    const rootUrl = 'https://manus.im/blog';\r\n\r\n    const response = await ofetch(rootUrl);\r\n    const $ = load(response);\r\n\r\n    const list: DataItem[] = $('div.mt-10.px-6 > a')\r\n        .toArray()\r\n        .map((item) => {\r\n            const element = $(item);\r\n            const link = new URL(String(element.attr('href')), rootUrl).href;\r\n            const title = String(element.find('h2').attr('title'));\r\n\r\n            return {\r\n                link,\r\n                title,\r\n            };\r\n        });\r\n\r\n    const items: DataItem[] = await Promise.all(\r\n        list.map((item) =>\r\n            cache.tryGet(String(item.link), async () => {\r\n                const response = await ofetch(String(item.link));\r\n                const $ = load(response);\r\n                const description: string = $('div.relative:nth-child(3)').html() ?? '';\r\n                const pubDateText: string = $('div.gap-3:nth-child(1) > span:nth-child(2)').text().trim();\r\n                const currentYear: number = new Date().getFullYear();\r\n                const pubDate: Date = new Date(`${pubDateText} ${currentYear}`);\r\n\r\n                return {\r\n                    ...item,\r\n                    description,\r\n                    pubDate,\r\n                };\r\n            })\r\n        )\r\n    );\r\n\r\n    return {\r\n        title: 'Manus',\r\n        link: rootUrl,\r\n        item: items,\r\n        language: 'en',\r\n    } satisfies Data;\r\n}\r\n"],"mappings":"6SAKA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,eACb,QAAS,cACT,IAAK,WACL,WAAY,GACZ,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,MAAO,CACH,CACI,OAAQ,CAAC,gBACT,OAAQ,UAGhB,KAAM,OACN,YAAa,CAAC,WACd,UACA,YAAa,aACb,KAAM,EAAS,eAGnB,eAAe,GAAU,CACrB,IAAM,EAAU,wBAEV,EAAW,MAAMC,EAAO,GACxB,EAAI,EAAK,GAETC,EAAmB,EAAE,sBACtB,UACA,IAAK,GAAS,CACX,IAAM,EAAU,EAAE,GACZ,EAAO,IAAI,IAAI,OAAO,EAAQ,KAAK,SAAU,GAAS,KACtD,EAAQ,OAAO,EAAQ,KAAK,MAAM,KAAK,UAE7C,MAAO,CACH,OACA,WAINC,EAAoB,MAAM,QAAQ,IACpC,EAAK,IAAK,GACNC,EAAM,OAAO,OAAO,EAAK,MAAO,SAAY,CACxC,IAAMC,EAAW,MAAMJ,EAAO,OAAO,EAAK,OACpCK,EAAI,EAAKD,GACTE,EAAsBD,EAAE,6BAA6B,QAAU,GAC/DE,EAAsBF,EAAE,8CAA8C,OAAO,OAC7EG,EAAsB,IAAI,OAAO,cACjCC,EAAgB,IAAI,KAAK,GAAG,EAAY,GAAG,KAEjD,MAAO,CACH,GAAG,EACH,cACA,eAMhB,MAAO,CACH,MAAO,QACP,KAAM,EACN,KAAM,EACN,SAAU"}