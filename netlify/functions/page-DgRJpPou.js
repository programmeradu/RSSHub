import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import*as n from"cheerio";const r={path:`/page/:bookId`,example:`/fanqienovel/page/6621052928482348040`,parameters:{bookId:`小说 ID，可在 URL 中找到`},maintainers:[`TonyRL`],name:`小说更新`,handler:i,radar:[{source:[`fanqienovel.com/page/:bookId`]}]};async function i(r){let{bookId:i}=r.req.param(),a=`https://fanqienovel.com/page/${i}`,o=await t(a),s=n.load(o),c=JSON.parse(s(`script:contains("window.__INITIAL_STATE__")`).text().match(/window\.__INITIAL_STATE__\s*=\s*(.*);/)?.[1]??`{}`),l=c.page,u=l.chapterListWithVolume.flatMap(t=>t.map(t=>({title:t.title,link:`https://fanqienovel.com/reader/${t.itemId}`,description:t.volume_name,pubDate:e(t.firstPassTime,`X`),author:l.author})));return{title:`${l.bookName} - ${l.author}`,description:l.abstract,link:a,language:`zh-CN`,image:l.thumbUri,item:u}}export{r as route};
//# sourceMappingURL=page-DgRJpPou.js.map