import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-kimkMTWJ.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-Bzt0BXUH.js";import{got_default as n}from"./got-CdvI2yKX.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"iconv-lite";async function o(e){let t;try{t=await n.get(e,{responseType:`buffer`})}catch{return{description:``}}let r=t.data,o=i(a.decode(r,`utf-8`)),s=o(`meta[charset]`).attr(`charset`);s?.toLowerCase()!==`utf-8`&&(o=i(a.decode(r,s??`utf-8`)));let c=(o(`.template-body`).length?o(`.template-body`).html():``)+(o(`.template-tail`).length?o(`.template-tail`).html():``);return{description:c}}const s=(e,n,a)=>Promise.all(n.map(n=>{let s=i(n),c=s(`a`),l=new URL(c.attr(`href`),e).href,u=r(t(s(`span`).text().match(/\d{4}-\d{2}-\d{2}/)),8);return a.tryGet(l,async()=>{let{description:e}=await o(l);return{title:c.text(),link:l,author:`北林信息`,description:e,pubDate:u}})}));var c={ProcessFeed:s};const l={path:`/it/:type`,categories:[`university`],example:`/bjfu/it/xyxw`,parameters:{type:`通知类别`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`it.bjfu.edu.cn/:type/index.html`]}],name:`信息学院通知`,maintainers:[`wzc-blog`],handler:u,description:`| 学院新闻 | 科研动态 | 本科生培养 | 研究生培养 |
| -------- | -------- | ---------- | ---------- |
| xyxw     | kydt     | pydt       | pydt2      |`};async function u(t){let r=t.req.param(`type`),o,s;switch(r){case`kydt`:o=`科研动态`,s=`kyxz/kydt/`;break;case`pydt`:o=`本科生培养`,s=`bkspy/pydt/`;break;case`pydt2`:o=`研究生培养`,s=`yjspy/pydt2/`;break;default:o=`学院新闻`,s=`xyxw/`}let l=`http://it.bjfu.edu.cn/`+s,u=await n({method:`get`,responseType:`buffer`,url:l}),d=u.data,f=i(a.decode(d,`utf-8`)),p=f(`meta[charset]`).attr(`charset`);p?.toLowerCase()!==`utf-8`&&(f=i(a.decode(d,p??`utf-8`)));let m=f(`.item-content`).toArray(),h=await c.ProcessFeed(l,m,e);return{title:`北林信息 - `+o,link:`http://it.bjfu.edu.cn/`+s,description:`北京林业大学信息学院 - `+o,item:h}}export{l as route};
//# sourceMappingURL=it-DMSZfXH4.js.map