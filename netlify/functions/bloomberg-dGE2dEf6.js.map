{"version":3,"file":"bloomberg-dGE2dEf6.js","names":["route: Route"],"sources":["../../lib/routes/bloomberg/index.ts"],"sourcesContent":["import { Route, ViewType } from '@/types';\r\nimport { rootUrl, parseNewsList, parseArticle } from './utils';\r\nimport pMap from 'p-map';\r\nconst siteTitleMapping = {\r\n    '/': 'News',\r\n    bpol: 'Politics',\r\n    bbiz: 'Business',\r\n    markets: 'Markets',\r\n    technology: 'Technology',\r\n    green: 'Green',\r\n    wealth: 'Wealth',\r\n    pursuits: 'Pursuits',\r\n    bview: 'Opinion',\r\n    equality: 'Equality',\r\n    businessweek: 'Businessweek',\r\n    citylab: 'CityLab',\r\n};\r\n\r\nexport const route: Route = {\r\n    path: '/:site?',\r\n    categories: ['finance'],\r\n    view: ViewType.Articles,\r\n    example: '/bloomberg/bbiz',\r\n    parameters: {\r\n        site: {\r\n            description: 'Site ID, can be found below',\r\n            options: Object.keys(siteTitleMapping).map((key) => ({ value: key, label: siteTitleMapping[key] })),\r\n        },\r\n    },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: true,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Bloomberg Site',\r\n    maintainers: ['bigfei'],\r\n    description: `\r\n| Site ID      | Title        |\r\n| ------------ | ------------ |\r\n| /            | News         |\r\n| bpol         | Politics     |\r\n| bbiz         | Business     |\r\n| markets      | Markets      |\r\n| technology   | Technology   |\r\n| green        | Green        |\r\n| wealth       | Wealth       |\r\n| pursuits     | Pursuits     |\r\n| bview        | Opinion      |\r\n| equality     | Equality     |\r\n| businessweek | Businessweek |\r\n| citylab      | CityLab      |\r\n  `,\r\n    handler,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const site = ctx.req.param('site');\r\n    const currentUrl = site ? `${rootUrl}/${site}/sitemap_news.xml` : `${rootUrl}/sitemap_news.xml`;\r\n\r\n    const list = await parseNewsList(currentUrl, ctx);\r\n    const items = await pMap(list, (item) => parseArticle(item), { concurrency: 1 });\r\n    return {\r\n        title: `Bloomberg - ${siteTitleMapping[site ?? '/']}`,\r\n        link: currentUrl,\r\n        item: items,\r\n    };\r\n}\r\n"],"mappings":"2bAGA,MAAM,EAAmB,CACrB,IAAK,OACL,KAAM,WACN,KAAM,WACN,QAAS,UACT,WAAY,aACZ,MAAO,QACP,OAAQ,SACR,SAAU,WACV,MAAO,UACP,SAAU,WACV,aAAc,eACd,QAAS,WAGAA,EAAe,CACxB,KAAM,UACN,WAAY,CAAC,WACb,KAAM,EAAS,SACf,QAAS,kBACT,WAAY,CACR,KAAM,CACF,YAAa,8BACb,QAAS,OAAO,KAAK,GAAkB,IAAK,IAAS,CAAE,MAAO,EAAK,MAAO,EAAiB,QAGnG,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,iBACN,YAAa,CAAC,UACd,YAAa;;;;;;;;;;;;;;;IAgBb,WAGJ,eAAe,EAAQ,EAAK,CACxB,IAAM,EAAO,EAAI,IAAI,MAAM,QACrB,EAAa,EAAO,GAAG,EAAQ,GAAG,EAAK,mBAAqB,GAAG,EAAQ,mBAEvE,EAAO,MAAM,EAAc,EAAY,GACvC,EAAQ,MAAM,EAAK,EAAO,GAAS,EAAa,GAAO,CAAE,YAAa,IAC5E,MAAO,CACH,MAAO,eAAe,EAAiB,GAAQ,OAC/C,KAAM,EACN,KAAM"}