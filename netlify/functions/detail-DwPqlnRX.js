import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{timezone as n}from"./timezone-BrNu6iXe.js";import{load as r}from"cheerio";const i={path:`/detail/:id`,categories:[`reading`],example:`/zongheng/detail/1366535`,parameters:{id:`作品 ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.zongheng.org/detail/:id`]}],name:`章节更新`,maintainers:[`TonyRL`],handler:a,url:`www.zongheng.com`};async function a(i){let{id:a}=i.req.param(),o=`https://www.zongheng.com/detail/${a}`,s=await t(o),c=r(s),l=JSON.parse(c(`script:contains("window.__NUXT__")`).text().match(/description:(.*?),totalWords/)?.[1]||`""`).replaceAll(`<br>`,` `),u=c(`.book-info--tags span`).toArray().map(e=>c(e).text().trim()),d=c(`.author-info--name`).text().trim(),f=await t(`https://bookapi.zongheng.com/api/chapter/getChapterList`,{method:`POST`,headers:{"Content-Type":`application/x-www-form-urlencoded`},body:new URLSearchParams({bookId:a})}),p=f.result.chapterList.flatMap(t=>t.chapterViewList.map(r=>({title:`${t.tome.tomeName?`${t.tome.tomeName} - `:``}${r.chapterName}`,link:`https://read.zongheng.com/chapter/${a}/${r.chapterId}.html`,pubDate:n(e(r.createTime),8),guid:`zongheng:${a}:${t.tome.tomeId}:${r.chapterId}`,author:d,category:u})));return{title:`${c(`.book-info--title span`).text()}（${d}）- 纵横中文网`,description:`${c(`.book-info--nums`).text().trim()} ${l}`,link:o,allowEmpty:!0,image:c(`.book-info--coverImage-img`).attr(`src`),item:p}}export{i as route};
//# sourceMappingURL=detail-DwPqlnRX.js.map