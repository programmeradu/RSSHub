import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{cache_default as n}from"./cache-kimkMTWJ.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-Bzt0BXUH.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://www.dcfever.com`,l=e=>n.tryGet(e.link,async()=>{let t=await a(e.link),n=s(t),r=n(`div[itemprop="articleBody"], .column_article_content_html`),o=n(`.article_multi_page a`).not(`.selected`).toArray().map(t=>({link:new URL(n(t).attr(`href`),e.link).href}));if(o.length){let e=await Promise.all(o.map(async e=>{let t=await a(e.link),n=s(t);return n(`div[itemprop="articleBody"]`).html()}));r.append(e)}return r.find(`img`).each((e,t)=>{t.attribs.src?.includes(`?`)&&(t.attribs.src=t.attribs.src.split(`?`)[0])}),r.find(`p a`).each((e,t)=>{t=n(t),t.text().startsWith(`下一頁為`)&&t.remove()}),r.find(`iframe`).each((e,t)=>{t=n(t),t.attr(`src`).startsWith(`https://www.facebook.com/plugins/like.php`)&&t.remove()}),e.description=r.html(),e.pubDate=i(n(`meta[property="article:published_time"]`).attr(`content`)),e}),u=t=>n.tryGet(t.link,async()=>{let n=await a(t.link),i=s(n),c=i(`#trading_item_section .description`).contents().filter((e,t)=>t.type===`comment`).toArray().map(e=>e.data).join(``),l=s(c,null,!1);return l(`.selector_text`).remove(),l(`.selector_image_div`).each((e,t)=>{delete t.attribs.onclick}),l(`.desktop_photo_selector img`).each((e,t)=>{t.attribs.src.endsWith(`_sqt.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_sqt.jpg`,`.jpg`))}),t.description=r(o.join(e,`templates/trading-0f97a704.art`),{info:i(`.info_col`),description:i(`.description_text`).html(),photo:l(`.desktop_photo_selector`).html()}),t});export{c as baseUrl,l as parseItem,u as parseTradeItem};
//# sourceMappingURL=utils-Ci4w1lqo.js.map