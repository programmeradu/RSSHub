{"version":3,"file":"home-BygNHwnK.js","names":["route: Route","ofetch"],"sources":["../../lib/routes/dealstreetasia/home.ts"],"sourcesContent":["import { Route } from '@/types';\r\n// import cache from '@/utils/cache';\r\nimport ofetch from '@/utils/ofetch'; // Unified request library used\r\nimport { load } from 'cheerio'; // An HTML parser with an API similar to jQuery\r\n// import puppeteer from '@/utils/puppeteer';\r\n// import { parseDate } from '@/utils/parse-date';\r\n\r\nexport const route: Route = {\r\n    path: '/home',\r\n    categories: ['traditional-media'],\r\n    example: '/dealstreetasia/home',\r\n    // parameters: { section: 'target section' },\r\n    radar: [\r\n        {\r\n            source: ['dealstreetasia.com/'],\r\n        },\r\n    ],\r\n    name: 'Home',\r\n    maintainers: ['jack2game'],\r\n    handler,\r\n    url: 'dealstreetasia.com/',\r\n};\r\n\r\nasync function handler() {\r\n    // const section = ctx.req.param('section');\r\n    const items = await fetchPage();\r\n\r\n    return items;\r\n}\r\n\r\nasync function fetchPage() {\r\n    const baseUrl = 'https://dealstreetasia.com'; // Define base URL\r\n\r\n    const response = await ofetch(`${baseUrl}/`);\r\n    const $ = load(response);\r\n\r\n    const jsonData = JSON.parse($('#__NEXT_DATA__').text());\r\n    // const headingText = jsonData.props.pageProps.sectionData.name;\r\n\r\n    const pageProps = jsonData.props.pageProps;\r\n    const list = [\r\n        ...pageProps.topStories,\r\n        ...pageProps.privateEquity,\r\n        ...pageProps.ventureCapital,\r\n        ...pageProps.unicorns,\r\n        ...pageProps.interviews,\r\n        ...pageProps.deals,\r\n        ...pageProps.analysis,\r\n        ...pageProps.ipos,\r\n        ...pageProps.opinion,\r\n        ...pageProps.policyAndRegulations,\r\n        ...pageProps.people,\r\n        ...pageProps.earningsAndResults,\r\n        ...pageProps.theLpView,\r\n        ...pageProps.dvNewsletters,\r\n        ...pageProps.reports,\r\n    ].map((item) => ({\r\n        title: item.post_title || item.title || 'No Title',\r\n        link: item.post_url || item.link || '',\r\n        description: item.post_excerpt || item.excerpt || '',\r\n        pubDate: item.post_date ? new Date(item.post_date).toUTCString() : item.date ? new Date(item.date).toUTCString() : '',\r\n        category: item.category_link ? item.category_link.replaceAll(/(<([^>]+)>)/gi, '') : '', // Clean HTML if category_link exists\r\n        image: item.image_url ? item.image_url.replace(/\\?.*$/, '') : '', // Remove query parameters if image_url exists\r\n    }));\r\n\r\n    return {\r\n        title: 'Deal Street Asia',\r\n        language: 'en',\r\n        item: list,\r\n        link: 'https://dealstreetasia.com/',\r\n    };\r\n}\r\n"],"mappings":"0MAOA,MAAaA,EAAe,CACxB,KAAM,QACN,WAAY,CAAC,qBACb,QAAS,uBAET,MAAO,CACH,CACI,OAAQ,CAAC,yBAGjB,KAAM,OACN,YAAa,CAAC,aACd,UACA,IAAK,uBAGT,eAAe,GAAU,CAErB,IAAM,EAAQ,MAAM,IAEpB,OAAO,EAGX,eAAe,GAAY,CACvB,IAEM,EAAW,MAAMC,EAAO,+BACxB,EAAI,EAAK,GAET,EAAW,KAAK,MAAM,EAAE,kBAAkB,QAG1C,EAAY,EAAS,MAAM,UAC3B,EAAO,CACT,GAAG,EAAU,WACb,GAAG,EAAU,cACb,GAAG,EAAU,eACb,GAAG,EAAU,SACb,GAAG,EAAU,WACb,GAAG,EAAU,MACb,GAAG,EAAU,SACb,GAAG,EAAU,KACb,GAAG,EAAU,QACb,GAAG,EAAU,qBACb,GAAG,EAAU,OACb,GAAG,EAAU,mBACb,GAAG,EAAU,UACb,GAAG,EAAU,cACb,GAAG,EAAU,SACf,IAAK,IAAU,CACb,MAAO,EAAK,YAAc,EAAK,OAAS,WACxC,KAAM,EAAK,UAAY,EAAK,MAAQ,GACpC,YAAa,EAAK,cAAgB,EAAK,SAAW,GAClD,QAAS,EAAK,UAAY,IAAI,KAAK,EAAK,WAAW,cAAgB,EAAK,KAAO,IAAI,KAAK,EAAK,MAAM,cAAgB,GACnH,SAAU,EAAK,cAAgB,EAAK,cAAc,WAAW,gBAAiB,IAAM,GACpF,MAAO,EAAK,UAAY,EAAK,UAAU,QAAQ,QAAS,IAAM,MAGlE,MAAO,CACH,MAAO,mBACP,SAAU,KACV,KAAM,EACN,KAAM"}