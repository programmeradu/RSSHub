import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{invalid_parameter_default as r}from"./invalid-parameter-CUJdROXf.js";import{load as i}from"cheerio";const a={name:`ニュース`,categories:[`anime`],path:`/news/:category?`,example:`/m-78/news`,radar:[{source:[`m-78.jp/news`],target:`/news`},{source:[`m-78.jp/news/category/:category`],target:`/news/:category`}],parameters:{category:{description:`news category`,default:`news`,options:[{value:`news`,label:`ニュース`},{value:`streaming`,label:`動画配信`},{value:`event`,label:`イベント`},{value:`onair`,label:`放送`},{value:`broadcast`,label:`放送/配信`},{value:`goods`,label:`グッズ`},{value:`ultraman-cardgame`,label:`ウルトラマン カードゲーム`},{value:`shop`,label:`ショップ`},{value:`blu-ray_dvd`,label:`Blu-ray・DVD`},{value:`digital`,label:`デジタル`}]}},handler:o,maintainers:[`KarasuShin`],features:{supportRadar:!0},view:n.Articles};async function o(n){let a=`https://m-78.jp`,o=`${a}/wp-json/wp/v2/categories`,s=`${a}/wp-json/wp/v2/posts`,c=n.req.param(`category`)??`news`,l=n.req.query(`limit`)?Number.parseInt(n.req.query(`limit`),10):20,u=await t(`${o}?slug=${c}`);if(u.length===0)throw new r(`Category not found`);let{id:d,link:f,name:p}=u[0],m=await t(`${s}?categories=${d}&per_page=${l}`);return{title:`${p} | ニュース`,link:f,item:m.map(t=>{let n=i(t.content.rendered,null,!1);return n(`#ez-toc-container`).remove(),n(`img`).each((e,t)=>{/wp-content\/uploads/.test(t.attribs.src)&&(t.attribs.src=t.attribs.src.replace(/(-\d+x\d+)/,``))}),{title:t.title.rendered,link:t.link,description:n.html(),pubDate:e(t.date_gmt),updated:e(t.modified_gmt)}})}}export{a as route};
//# sourceMappingURL=news-fnpOz0Ty.js.map