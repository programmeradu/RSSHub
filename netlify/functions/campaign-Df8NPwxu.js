import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import"./helpers-DzX-lcQO.js";import"./ofetch-Bzt0BXUH.js";import{got_default as e}from"./got-CdvI2yKX.js";import{invalid_parameter_default as t}from"./invalid-parameter-CUJdROXf.js";import{load as n}from"cheerio";const r=`https://www.dlsite.com`,i={home:{type:`home`,name:`「DLsite 同人」`,url:`/home/fsr`,params:{campaign:`campaign`,work_category:[`doujin`],order:[`cstart_d`],per_page:30,show_type:1}},comic:{type:`comic`,name:`「DLsite コミック」`,url:`/comic/fsr`,params:{campaign:`campaign`,work_category:[`books`],order:[`cstart_d`],per_page:30,show_type:1}},soft:{type:`soft`,name:`「DLsite PCソフト」`,url:`/soft/fsr`,params:{campaign:`campaign`,work_category:[`pc`],order:[`cstart_d`],per_page:30,show_type:1}},maniax:{type:`maniax`,name:`「DLsite 同人 - R18」`,url:`/maniax/fsr`,params:{campaign:`campaign`,work_category:[`doujin`],order:[`cstart_d`],per_page:30,show_type:1}},books:{type:`books`,name:`「DLsite 成年コミック - R18」`,url:`/books/fsr`,params:{campaign:`campaign`,work_category:[`books`],order:[`cstart_d`],per_page:30,show_type:1}},pro:{type:`pro`,name:`「DLsite 美少女ゲーム」`,url:`/pro/fsr`,params:{campaign:`campaign`,work_category:[`pc`],order:[`cstart_d`],per_page:30,show_type:1}},girls:{type:`girls`,name:`「DLsite 乙女」`,url:`/girls/fsr`,params:{campaign:`campaign`,work_category:[`doujin`],order:[`cstart_d`],per_page:30,show_type:1}},bl:{type:`bl`,name:`「DLsite BL」`,url:`/bl/fsr`,params:{campaign:`campaign`,work_category:[`doujin`],order:[`cstart_d`],per_page:30,show_type:1}}},a=e=>{let t=`${e.url}/=/`,n=e.params;for(let e in n)if(Array.isArray(n[e]))for(let r in n[e])t+=`${e}[${r}]/${n[e][r]}/`;else t+=`${e}/${n[e]}/`;return t.slice(1)},o={path:`/campaign/:type/:free?`,categories:[`anime`],example:`/dlsite/campaign/home`,parameters:{type:{description:`类型`,options:Object.values(i).map(e=>({value:e.type,label:e.name}))},free:{description:`免费`,options:[{value:`1`,label:`是`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Discounted Works`,maintainers:[`cssxsh`],handler:s};async function s(o){let s=i[o.req.param(`type`)];if(s===void 0)throw new t(`不支持指定类型！`);o.req.param(`free`)!==void 0&&(s.params.is_free=1);let c=a(s),l=await e(new URL(c,r),{method:`GET`}),u=l.data,d=n(u),f=`${s.name} | 割引中の作品`,p=d(`meta[name="description"]`).attr(`content`),m=d(`tr[class]`,`.n_worklist`),h=m.toArray().map(e=>{let t=d(`.work_name`,e).text(),n=d(`.work_name > a`,e).attr(`href`);d(`a`,e).each((e,t)=>{d(t).attr(`target`,`_blank`)});let r=d(e).html(),i=d(`.search_tag`,e),a=d(`a`,i).toArray().map(e=>d(e).text()),o=d(`.maker_name`,e).text(),s={title:t,link:n,description:r,category:a,author:o};return s});return{title:f,link:`${r}/${c}`,description:p,language:`ja-jp`,allowEmpty:!0,item:h}}export{o as route};
//# sourceMappingURL=campaign-Df8NPwxu.js.map