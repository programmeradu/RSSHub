{"version":3,"file":"util-BCD_qgmp.js","names":["got"],"sources":["../../lib/routes/bt0/util.ts"],"sourcesContent":["import { CookieJar } from 'tough-cookie';\r\nimport got from '@/utils/got';\r\nconst cookieJar = new CookieJar();\r\n\r\nasync function doGot(num, host, link) {\r\n    if (num > 4) {\r\n        throw new Error('The number of attempts has exceeded 5 times');\r\n    }\r\n    const response = await got.get(link, {\r\n        cookieJar,\r\n    });\r\n    const data = response.data;\r\n    if (typeof data === 'string') {\r\n        const regex = /document\\.cookie\\s*=\\s*\"([^\"]*)\"/;\r\n        const match = data.match(regex);\r\n        if (!match) {\r\n            throw new Error('api error');\r\n        }\r\n        cookieJar.setCookieSync(match[1], host);\r\n        return doGot(++num, host, link);\r\n    }\r\n    return data;\r\n}\r\n\r\nconst genSize = (sizeStr) => {\r\n    // 正则表达式，用于匹配数字和单位 GB 或 MB\r\n    const regex = /^(\\d+(\\.\\d+)?)\\s*(gb|mb)$/i;\r\n    const match = sizeStr.match(regex);\r\n\r\n    if (!match) {\r\n        return 0;\r\n    }\r\n\r\n    const value = Number.parseFloat(match[1]);\r\n    const unit = match[3].toUpperCase();\r\n\r\n    let bytes;\r\n    switch (unit) {\r\n        case 'GB':\r\n            bytes = Math.floor(value * 1024 * 1024 * 1024);\r\n            break;\r\n        case 'MB':\r\n            bytes = Math.floor(value * 1024 * 1024);\r\n            break;\r\n        default:\r\n            bytes = 0;\r\n    }\r\n    return bytes;\r\n};\r\n\r\nexport { doGot, genSize };\r\n"],"mappings":"yFAEA,MAAM,EAAY,IAAI,EAEtB,eAAe,EAAM,EAAK,EAAM,EAAM,CAClC,GAAI,EAAM,EACN,MAAU,MAAM,+CAEpB,IAAM,EAAW,MAAMA,EAAI,IAAI,EAAM,CACjC,cAEE,EAAO,EAAS,KACtB,GAAI,OAAO,GAAS,SAAU,CAC1B,IAAM,EAAQ,mCACR,EAAQ,EAAK,MAAM,GACzB,GAAI,CAAC,EACD,MAAU,MAAM,aAGpB,OADA,EAAU,cAAc,EAAM,GAAI,GAC3B,EAAM,EAAE,EAAK,EAAM,GAE9B,OAAO,EAGX,MAAM,EAAW,GAAY,CAEzB,IAAM,EAAQ,6BACR,EAAQ,EAAQ,MAAM,GAE5B,GAAI,CAAC,EACD,MAAO,GAGX,IAAM,EAAQ,OAAO,WAAW,EAAM,IAChC,EAAO,EAAM,GAAG,cAElB,EACJ,OAAQ,EAAR,CACI,IAAK,KACD,EAAQ,KAAK,MAAM,EAAQ,KAAO,KAAO,MACzC,MACJ,IAAK,KACD,EAAQ,KAAK,MAAM,EAAQ,KAAO,MAClC,MACJ,QACI,EAAQ,EAEhB,OAAO"}