{"version":3,"file":"example-Db8kTIXk.js","names":[],"sources":["../../lib/routes/mindmeister/example.ts"],"sourcesContent":["import { Route } from '@/types';\r\n\r\nimport got from '@/utils/got';\r\nimport { load } from 'cheerio';\r\nimport { art } from '@/utils/render';\r\nimport path from 'node:path';\r\nconst baseUrl = 'https://www.mindmeister.com';\r\n\r\nexport const route: Route = {\r\n    path: '/:category?/:language?',\r\n    categories: ['study'],\r\n    example: '/mindmeister/mind-map-examples',\r\n    parameters: { category: 'Categories, see the table below, `mind-map-examples` by default', language: 'Languages, see the table below, `en` by default' },\r\n    features: {\r\n        requireConfig: false,\r\n        requirePuppeteer: false,\r\n        antiCrawler: false,\r\n        supportBT: false,\r\n        supportPodcast: false,\r\n        supportScihub: false,\r\n    },\r\n    name: 'Public Maps',\r\n    maintainers: ['TonyRL'],\r\n    handler,\r\n    description: `| Categories    | parameter         |\r\n| ------------- | ----------------- |\r\n| Featured Map  | mind-map-examples |\r\n| Business      | business          |\r\n| Design        | design            |\r\n| Education     | education         |\r\n| Entertainment | entertainment     |\r\n| Life          | life              |\r\n| Marketing     | marketing         |\r\n| Productivity  | productivity      |\r\n| Summaries     | summaries         |\r\n| Technology    | technology        |\r\n| Other         | other             |\r\n\r\n| Languages  | parameter |\r\n| ---------- | --------- |\r\n| English    | en        |\r\n| Deutsch    | de        |\r\n| Français   | fr        |\r\n| Español    | es        |\r\n| Português  | pt        |\r\n| Nederlands | nl        |\r\n| Dansk      | da        |\r\n| Русский    | ru        |\r\n| 日本語     | ja        |\r\n| Italiano   | it        |\r\n| 简体中文   | zh        |\r\n| 한국어     | ko        |\r\n| Other      | other     |`,\r\n};\r\n\r\nasync function handler(ctx) {\r\n    const { category = 'mind-map-examples', language = 'en' } = ctx.req.param();\r\n    const link = `${baseUrl}${language === 'en' || language === 'other' ? '' : `/${language}`}/${category === 'mind-map-examples' ? category : `mind-maps/${category}?language=${language}`}`;\r\n    const respsonse = await got(link);\r\n\r\n    const $ = load(respsonse.data);\r\n\r\n    const items = $('#public-listing .map-tile-wrapper')\r\n        .toArray()\r\n        .map((item) => {\r\n            item = $(item);\r\n            const imageUrl = new URL(\r\n                item\r\n                    .find('.map-wrapper')\r\n                    .attr('style')\r\n                    .match(/url\\('(.*)'\\);/)[1]\r\n            ).href;\r\n\r\n            return {\r\n                title: item.find('.title').text(),\r\n                description: art(path.join(__dirname, 'templates/image.art'), {\r\n                    src: imageUrl.split('?')[0],\r\n                    alt: item.find('.title').text().trim(),\r\n                }),\r\n                link: item.find('.title').attr('href'),\r\n                author: item.find('.author').text().trim().replace(/^by/, ''),\r\n                category: item.find('.fw-bold').text(),\r\n            };\r\n        });\r\n\r\n    return {\r\n        title: $('head title').text(),\r\n        description: $('head meta[name=description]').text(),\r\n        link,\r\n        item: items,\r\n        language,\r\n    };\r\n}\r\n"],"mappings":"+WAMA,MAEa,EAAe,CACxB,KAAM,yBACN,WAAY,CAAC,SACb,QAAS,iCACT,WAAY,CAAE,SAAU,kEAAmE,SAAU,mDACrG,SAAU,CACN,cAAe,GACf,iBAAkB,GAClB,YAAa,GACb,UAAW,GACX,eAAgB,GAChB,cAAe,IAEnB,KAAM,cACN,YAAa,CAAC,UACd,UACA,YAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA+BjB,eAAe,EAAQ,EAAK,CACxB,GAAM,CAAE,WAAW,oBAAqB,WAAW,MAAS,EAAI,IAAI,QAC9D,EAAO,8BAAa,IAAa,MAAQ,IAAa,QAAU,GAAK,IAAI,IAAW,GAAG,IAAa,oBAAsB,EAAW,aAAa,EAAS,YAAY,MACvK,EAAY,MAAM,EAAI,GAEtB,EAAI,EAAK,EAAU,MAEnB,EAAQ,EAAE,qCACX,UACA,IAAK,GAAS,CACX,EAAO,EAAE,GACT,IAAM,EAAW,IAAI,IACjB,EACK,KAAK,gBACL,KAAK,SACL,MAAM,kBAAkB,IAC/B,KAEF,MAAO,CACH,MAAO,EAAK,KAAK,UAAU,OAC3B,YAAa,EAAI,EAAA,KAAA,EAAA,gCAA6C,CAC1D,IAAK,EAAS,MAAM,KAAK,GACzB,IAAK,EAAK,KAAK,UAAU,OAAO,SAEpC,KAAM,EAAK,KAAK,UAAU,KAAK,QAC/B,OAAQ,EAAK,KAAK,WAAW,OAAO,OAAO,QAAQ,MAAO,IAC1D,SAAU,EAAK,KAAK,YAAY,UAI5C,MAAO,CACH,MAAO,EAAE,cAAc,OACvB,YAAa,EAAE,+BAA+B,OAC9C,OACA,KAAM,EACN"}