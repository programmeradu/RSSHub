import"./esm-shims-Dqvxr0BZ.js";import"./config-Dl8a1sIg.js";import"./logger-CWOoofbD.js";import"./dist-IvUHtNe1.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-Bzt0BXUH.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=async n=>{let i=Number.parseInt(n.req.query(`limit`)??`30`,10),a=`https://download.lineageos.org`,o=new URL(`changes`,a).href,s=new URL(`api/v2/changes`,a).href,c=await t(o),l=r(c),u=l(`html`).attr(`lang`)??`en`,d=await t(s),f=d.slice(0,i).map(t=>{let n=t.subject,r=t.submitted,i=t.url,a=[t.type,t.branch,t.repository],o=t.updated,s={title:n,pubDate:r?e(r,`X`):void 0,link:i,category:a,updated:o?e(o,`X`):void 0,language:u};return s});return{title:`${l(`title`).text()} - Downloads`,description:void 0,link:o,item:f,allowEmpty:!0,author:l(`title`).text(),language:u,id:o}},a={path:`/changes`,name:`Changes`,url:`download.lineageos.org`,maintainers:[`nczitzk`],handler:i,example:`/lineageos/changes`,parameters:void 0,description:void 0,categories:[`program-update`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`download.lineageos.org/changes`],target:`/changes`}],view:n.Notifications};export{i as handler,a as route};
//# sourceMappingURL=changes-DylGDdkP.js.map